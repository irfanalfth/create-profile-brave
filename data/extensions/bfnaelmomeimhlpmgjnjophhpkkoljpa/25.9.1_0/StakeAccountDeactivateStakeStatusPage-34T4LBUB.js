import{a as B}from"./chunk-RLS5DN7P.js";import{a as g}from"./chunk-NIC7HW4H.js";import{a as U,b as K,c as F}from"./chunk-RE5M6MUQ.js";import"./chunk-TJVVH2WB.js";import"./chunk-6ZOJTCTS.js";import"./chunk-SHAEZV7V.js";import{a as H,e as _}from"./chunk-TH54P6T4.js";import"./chunk-6WTXMLHF.js";import"./chunk-DZ2NE3XW.js";import"./chunk-NGO5FOJW.js";import"./chunk-2LU4YM7A.js";import"./chunk-E6VR42GU.js";import"./chunk-W27Z2YZM.js";import{a as z}from"./chunk-IVAERDLS.js";import"./chunk-DSKUEGWR.js";import{b as f}from"./chunk-2XU6ODO7.js";import"./chunk-7ZVEM3WY.js";import"./chunk-5LRZ7IFN.js";import{db as A}from"./chunk-ATEHMOFB.js";import"./chunk-2P7VAWV5.js";import{t as O}from"./chunk-BBWCN5OU.js";import"./chunk-T2ZXNVG7.js";import"./chunk-QYQ24YHA.js";import"./chunk-B73KBMEE.js";import"./chunk-BB4NLGB2.js";import"./chunk-SWF27PRY.js";import"./chunk-BTKBODVJ.js";import{Da as x,Ea as N,g as L,h as I}from"./chunk-PQZYPWXP.js";import"./chunk-WFPABEAU.js";import"./chunk-FIZDH5HD.js";import"./chunk-QDZH7H34.js";import"./chunk-LWOUUIX7.js";import"./chunk-ETHULGZP.js";import{L as u,fe as E,gb as p}from"./chunk-ERHX3GUR.js";import"./chunk-WY7QFQOG.js";import"./chunk-24ISZ5TA.js";import"./chunk-2J2WSGCG.js";import"./chunk-DHK5JDA3.js";import{m as P}from"./chunk-FI5JCZQR.js";import"./chunk-7XYHSLSH.js";import"./chunk-W476YZUB.js";import"./chunk-ZIPBM4OE.js";import"./chunk-HTY4DAML.js";import{a as W}from"./chunk-6MAAUKN7.js";import"./chunk-UNDMYLJW.js";import{f as J,h as C,n as T}from"./chunk-3KENBVE7.js";C();T();var e=J(W());var X=n=>{let r={stakePubkey:n.stakeAccountPubkey,stakeAuthorityPubkey:n.stakeAuthorityPubkey,onClose:n.onClose},{t}=P(),{deactivateStake:c,needsLedgerApproval:k,txHash:i,confirmationStatus:s,isError:l,error:d,onDeny:a}=Z(r);if(k)return e.default.createElement(K,{ledgerAction:c,cancel:a});if(l){let o=d,S=o?.message,m=U(o),y=o?.message.includes(I),w=o?.message.includes(L);return m?e.default.createElement(F,{ledgerActionError:o,onRetryClick:c,onCancelClick:a}):y||w?e.default.createElement(B,{onCancelClick:a}):e.default.createElement(f,{icon:"error",title:t("stakeAccountDeactivateStakeUnstakingFailed"),onClose:a,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:"#777777",size:16,lineHeight:20.8},S??t("stakeAccountDeactivateStakeUnstakingFailedDescription")),e.default.createElement(g,{txHash:i},t("stakeAccountDeactivateStakeViewTransaction")))}return s==="confirmed"||s==="finalized"?e.default.createElement(f,{icon:"success",title:t("stakeAccountDeactivateStakeSolUnstaked"),onClose:n.onClose,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:"#777777",size:16,lineHeight:20.8},e.default.createElement(z,{i18nKey:"stakeAccountDeactivateStakeSolUnstakedDescriptionInterpolated"},"You will be able to withdraw your stake",e.default.createElement("br",null)," in the next couple days once the stake account becomes inactive.")),e.default.createElement(g,{txHash:i},t("stakeAccountDeactivateStakeViewTransaction"))):e.default.createElement(f,{icon:"loading",title:t("stakeAccountDeactivateStakeUnstakingSol"),onClose:n.onClose,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:"#777777",size:16,lineHeight:20.8},t("stakeAccountDeactivateStakeUnstakingSolDescription")),e.default.createElement(g,{txHash:i},t("stakeAccountDeactivateStakeViewTransaction")))},ge=X,Z=({onClose:n,...r})=>{let{data:t,isSuccess:c}=E(),{accountIdentifier:k,isLedgerAccount:i,solanaChainAddress:s,solanaPublicKey:l,connection:d,networkID:a}=(0,e.useMemo)(()=>{let Q=t?.identifier??"",h=(t?.addresses??[]).find(G=>p.isSolanaNetworkID(G.networkID)),Y=new u.PublicKey(h?.address??""),j=t?.type==="ledger",v=h?.networkID,q=x(N(v));return{accountIdentifier:Q,isLedgerAccount:j,solanaChainAddress:h,solanaPublicKey:Y,connection:q,networkID:v}},[t]),o=H(d),S=(0,e.useCallback)(()=>{o.mutate({...r,accountIdentifier:k,senderAddress:s,stakePubkey:new u.PublicKey(r.stakePubkey),stakeAuthorityPubkey:new u.PublicKey(r.stakeAuthorityPubkey),authorizedPubkey:l})},[k,r,o,s,l]),m=O(),y=(0,e.useCallback)(()=>{m.denied({chainType:"solana",chainName:"solana",networkId:p.getSolanaNetworkIDValue(a),type:"undelegate"}),n()},[a,n,m]);(0,e.useEffect)(()=>{if(c){if(!t||!s)throw new Error("Selected account undefined when trying to perform stake transaction.");i||S()}},[c]);let b=o.data?.id,D=_(d,2e3,b),M=i&&(o.isIdle||o.isPending),V=D.data?.value?.confirmationStatus;return{deactivateStake:S,onDeny:y,needsLedgerApproval:M,txHash:b,confirmationStatus:V,isError:o.isError??D.isError,error:o.error??D.error}};export{X as StakeAccountDeactivateStakeStatusPage,ge as default};
//# sourceMappingURL=StakeAccountDeactivateStakeStatusPage-34T4LBUB.js.map
