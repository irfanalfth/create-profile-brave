import{a as $n}from"./chunk-JGJ43QST.js";import{a as zn,b as jn,d as Zn,e as Xn,f as Yn}from"./chunk-SQ2J5G23.js";import{a as xt}from"./chunk-PAXKK56F.js";import{a as ko}from"./chunk-BZEXQKR7.js";import{a as kt}from"./chunk-NJHVGQ3T.js";import{d as _n}from"./chunk-FMDLOOK7.js";import{f as Wn}from"./chunk-2WTSXO3L.js";import{a as ut}from"./chunk-DSKUEGWR.js";import{h as Gn,j as Kn}from"./chunk-5LRZ7IFN.js";import{O as Hn,db as Ye,v as On}from"./chunk-ATEHMOFB.js";import{e as Y}from"./chunk-2P7VAWV5.js";import{K as Dn,ra as Vn}from"./chunk-RFHVH32K.js";import{o as tn}from"./chunk-T2ZXNVG7.js";import{f as dt,g as f,i as An,j as wn,k as Cn,n as vn,o as In,q as En,r as Rn,w as Ln}from"./chunk-QYQ24YHA.js";import{Aa as De,Ca as sn,Cd as Bn,Dd as Pn,E as rn,Fc as fn,Jc as gn,Mc as Sn,Qc as bn,Sb as Xe,Sc as yn,Tb as cn,Vc as ct,Xc as hn,cd as Tn,hd as Fn,jd as kn,kd as xn,lb as an,ld as Ge,mb as dn,mc as it,nd as Ke,oc as mn,pc as He,rc as ln,sd as We,vc as un,wd as Nn,xc as pn,yc as Ft}from"./chunk-PQZYPWXP.js";import{h as Tt}from"./chunk-FIZDH5HD.js";import{b as at}from"./chunk-QDZH7H34.js";import{R as nn,Z as ke}from"./chunk-LWOUUIX7.js";import{h as Te}from"./chunk-ETHULGZP.js";import{Cb as qt,Ce as st,L as ot,Lb as Qt,Qd as Fe,Yb as Jt,fe as on,gb as E,gd as Oe,ib as Ze,nd as en,x as Ot}from"./chunk-ERHX3GUR.js";import{S as Mn,b as mt,l as j,m as U,r as Un,v as lt}from"./chunk-X6EPTHBD.js";import{a as d,l as Yt,m as ae}from"./chunk-FI5JCZQR.js";import{$ as Pe,Q as Xt,ta as rt}from"./chunk-W476YZUB.js";import{c as Ht}from"./chunk-ZIPBM4OE.js";import{$ as Zt,S as Wt,U as _t,V as $t,X as zt,_ as jt,b as pe,ca as ht,da as Be,f as Gt,x as Kt}from"./chunk-HTY4DAML.js";import{a as I}from"./chunk-6MAAUKN7.js";import{f as v,h as i,m as Buffer,n as a}from"./chunk-3KENBVE7.js";i();a();var _e=v(I());i();a();var we=v(I());i();a();var xe=v(I()),qn=({goHome:e})=>xe.default.createElement(j,{height:"100%",paddingY:36,paddingX:"screen",justifyContent:"center",alignItems:"center"},xe.default.createElement(j,{flex:1,justifyContent:"center",alignItems:"center"},xe.default.createElement(j,{marginBottom:24},xe.default.createElement(lt,{icon:"X",size:64,shape:"circle",backgroundColor:"accentAlert"})),xe.default.createElement(U,{color:"textPrimary",align:"center",font:"title1Semibold",marginBottom:8},d.t("sendErrorTitle")),xe.default.createElement(U,{color:"textSecondary",align:"center",font:"body"},d.t("sendErrorFallback"))),xe.default.createElement(Un,{theme:"secondary",onPress:e},d.t("homeTab")));var wt=(0,we.createContext)(!1),kr=({goHome:e,children:t})=>{let n=(0,we.useCallback)(()=>{f.getState().resetSendSlice(),e()},[e]);return we.default.createElement(ut,{fallback:o=>{if(o instanceof dt)return we.default.createElement(qn,{goHome:n});throw o}},we.default.createElement(wt.Provider,{value:!0},t))};i();a();var Jn=v(I());i();a();var Ct=(e,t)=>{let n=Te(e,4);return t?`${t} (${n})`:n};i();a();i();a();var Qn=(e,t)=>{let{getExistingAccount:n,getKnownAddressLabel:o}=ke();if(!e)return null;let r=n(e),s=o(e,t),m=r?r.name:s;return m||null};var vt=({recipient:e,recipientHandle:t,networkID:n})=>{let o=Qn(e,n),{data:r}=gn(e,n),s=r?.address&&e;return{recipient:r?.address?r.address:e,recipientHandle:t||o||s||""}};var pt=()=>{let e=f(s=>s.sendFormValues.recipient),t=f(s=>s.sendFormValues.recipientHandle),n=f(s=>s.fungibleKey),o=f(s=>s.splTokenAccount),{fungible:r}=Ge({key:n,splTokenAccount:o});return vt({recipient:e,recipientHandle:t,networkID:r?.data.chain.id??Ze.Solana.Mainnet})},It=()=>{let{recipient:e,recipientHandle:t}=pt();return(0,Jn.useMemo)(()=>Ct(e,t),[e,t])};var se=()=>{if(!(0,_e.useContext)(wt))throw new Error("useSendFungibleFlow must be used within a SendFungibleFlowErrorBoundary");let t=f(N=>N.fungibleKey),n=f(N=>N.splTokenAccount),{fungible:o}=Ge({key:t,splTokenAccount:n}),[r]=(0,_e.useState)(o),{data:s}=st({address:r?.data.walletAddress,networkID:r?.data.chain.id});if(!s||!r)throw new dt("senderAddress or fungible is undefined, send flow is broken");let{data:m,type:p}=r,{chain:l,decimals:c,logoUri:u,symbol:C,tokenAddress:T,balance:D,key:H}=m,M=l.id,V=C??(T?Te(T,4):d.t("tokenRowUnknownToken")),S=T??"",x=p==="SPL"?r.data.programId:null,F=It(),G=f(N=>N.sendFormValues),{amountAsset:W}=G,y=Be(W,c),B=`${We(y,c)} ${V}`,P=(0,_e.useMemo)(()=>kn(r),[r]),{data:k}=ln({query:P?{data:P}:void 0}),{fromUsd:R,formatLocalizedPrice:w}=at(),_=k?.usd??0,$=Xe(y.toNumber(),_),J=R($),fe=w(J),ge=_?`~${fe}`:"-",Ce=Tn(r);return{senderAddress:s,networkID:M,tokenAddress:S,symbol:V,balance:D,decimals:c,programId:x,formattedRecipient:F,uiAmount:y,usdPriceOfToken:_,formattedUiAmount:B,formattedCurrencyAmount:ge,tokenPrice:fe,logoUri:u,type:p,key:H,transferFeePercent:Ce}};i();a();var ft=v(I());i();a();i();a();var xo=[an.toString(),dn.toString()],to=async(e,t)=>{let n=sn(t);try{let o=await n.getParsedAccountInfo(new ot.PublicKey(e));if(o&&xo.includes(o.value?.owner.toString()??"")&&"mintAuthority"in(o.value?.data).parsed.info)return!0}catch{}return!1};var wo=1*24*60*1e3,Co=1*60*1e3,no=({address:e,networkID:t})=>Xt({queryKey:["is-mint-account",e],queryFn:async()=>{if(!E.isSolanaNetworkID(t))throw new Error("Attempting to get mint account for non-Solana network");return to(e,t)},enabled:!!e&&E.isSolanaNetworkID(t),gcTime:wo,staleTime:Co});i();a();var ro=v(I());i();a();var oo=890880,qe=()=>{let{senderAddress:e,type:t}=se(),n=f(m=>m.sendFormValues),o=t==="SolanaNative",{data:r}=vn({...e,address:n.recipient},o);return o&&typeof r<"u"&&r<oo?oo:0};var so=(e,t,n)=>{let{fungibleKey:o,splTokenAccount:r}=f(D=>({fungibleKey:D.fungibleKey,splTokenAccount:D.splTokenAccount})),{data:[s]}=rt(["kill-send-simulation"]),m=qe(),p=(0,ro.useMemo)(()=>{if(!(!e||s))return{sendSessionId:"simulate-send",shouldShowFiatValues:!1,fungibleKey:o,splTokenAccount:r,confirmedFungibleAndSender:null,sendFormValues:{recipient:t,recipientHandle:"",amountAsset:new pe(m===0?1:m),solana:{references:[]}}}},[s,m,e,o,t,r]),{data:l,isLoading:c}=Ke(p),u={type:"transaction",userAccount:e,params:void 0,url:"https://phantom.com",networkID:n};l&&(E.isEVMNetworkID(l.networkID)&&(u.params={transactions:[l.unsignedTransaction]}),E.isSolanaNetworkID(l.networkID)&&(u.params={transactions:l.transaction.map(D=>Ot(D)),method:"signAndSendTransaction"}));let{data:C,isLoading:T}=Vn(u,{disabled:!l||s,disableRefetch:!0});return{data:C,isLoading:!s&&(c||T)}};var vo=(e,t)=>({address:e,addressType:qt(t,e),networkID:t}),Io=({senderAddress:e,senderAccounts:t,networkID:n})=>(0,ft.useMemo)(()=>e?t.reduce((o,r)=>{let s=r.addresses.filter(m=>m.networkID===n&&m.address!==e);if(n)for(let m of s)o.push({label:r.name,address:m.address,chainID:n});return o},[]):[],[e,t,n]);function Eo(e){if(!e)return"";let{warnings:t=[],error:n=""}=e;return n==="UNKNOWN_ERROR"?t[0]?.message:n==="INSUFFICIENT_FUNDS"?d.t(`sendWarning_${n}`):""}var Ro=({senderAddress:e,recipient:t,networkID:n})=>{let{data:o,isLoading:r}=so(e??"",t,n);return{simulationWarning:Eo(o),isSimulationLoading:r}},No=({recipient:e,networkID:t})=>{let{currentRecipient:n,isStaleRecipient:o,recipientError:r}=bn(e,t);return!o&&!r&&n.length>0?n:""},Bo=({recipient:e,networkID:t})=>{let{data:n=[],isLoading:o}=Fn({chainAddresses:e?[vo(e,t)]:[]});return{recipientHasZeroBalance:(0,ft.useMemo)(()=>n.length===1&&n[0].data.amount==="0",[n]),recipientTokensIsLoading:o}},Qe=({senderAddress:e,senderAccounts:t,networkID:n,recipient:o})=>{let{recentAddresses:r,savedAddresses:s}=ke(),m=Io({senderAddress:e,senderAccounts:t,networkID:n}),p=No({recipient:o,networkID:n}),{recipientHasZeroBalance:l,recipientTokensIsLoading:c}=Bo({recipient:p,networkID:n}),{data:u,isLoading:C}=no({address:p,networkID:n}),{simulationWarning:T,isSimulationLoading:D}=Ro({senderAddress:e??"",recipient:p,networkID:n}),H=!p||c||C&&E.isSolanaNetworkID(n)||D;return{sendAddressWarning:(0,ft.useMemo)(()=>H||!e?null:u?d.t("sendMintAccountWarning"):m.find(S=>S.address===p)?null:T||(r.addresses.find(S=>S.address===o)||s.addresses.find(S=>S.address===o)?null:e===p?d.t("sendSameAddressWarning"):l?d.t("sendRecipientZeroBalanceWarning"):d.t("sendUnknownAddressWarning")),[r,s,o,p,m,e,l,u,T,H]),sendAddressVariant:u?"danger":"warning"}};i();a();var O=v(I());i();a();function io(e,t){return e.isZero()?new pe(De.get(t).amountForGasEstimation??0):e}var Po=Kt({seconds:10}),Do=({onClose:e,onNext:t})=>{let{senderAddress:n,networkID:o,decimals:r,programId:s,type:m,balance:p,usdPriceOfToken:l,symbol:c,logoUri:u,formattedUiAmount:C,formattedCurrencyAmount:T}=se(),D=qe(),H=Be(D,r).toNumber(),[M,V]=(0,O.useState)(""),S=(0,O.useMemo)(()=>{try{let h=new pe(M);if(!h.isNaN())return h}catch{}return new pe(0)},[M]),x=f(h=>h),F=f(h=>h.sendFormValues),G=f(h=>h.resetSendSlice),{amountAsset:W,amountUsd:y,recipient:B}=F,P=f(h=>h.setSendFormValues),k=f(h=>h.shouldShowFiatValues),R=f(h=>h.setShouldShowFiatValues),w=s===Qt,_=F.solana.memo,$=(0,O.useMemo)(()=>{let h=x.sendFormValues.recipient;return{...x,sendFormValues:{...F,recipient:h||n.address,amountAsset:io(F.amountAsset,o)}}},[F,x,n,o]),{data:J}=Ke($),{data:fe}=He({networkID:o,multichainTransaction:J,transactionSpeed:"fastest",queryOptions:{refetchInterval:Po}}),{currencySymbol:ge,currencyCode:Ce,toUsd:N,fromUsd:Se,formatLocalizedPrice:ee}=at(),Me=Cn({chainAddress:n,type:m,balance:p,decimals:r,recipient:B,gasEstimation:fe,clampToZero:!1}),te=Be(Me??0,r),me=Xe(te.toNumber(),l),ne=Se(me,2),X=k?ge:void 0,be=k?void 0:` ${c}`,oe=k?Ce:c,re=(0,O.useMemo)(()=>{if(S.isZero())return;let h=ct.get(o),L=k?h.minimumSendableCurrencyAmount:H,he=k?ne:te,yt=S.lt(L),At=S.gt(he);return yt?d.t("sendFormErrorMinRequiredInterpolated",{minAmount:L,tokenName:oe}):At?d.t("sendFormErrorInsufficientBalance"):void 0},[S,k,o,ne,te,H,oe]),Z=(0,O.useCallback)(h=>{let L=jt(h),he=Zt(L,r);V(he)},[r]),le=(0,O.useCallback)(()=>{let h=Be(W,r).toString(10),L=Se(y??0).toString(10);Z(k?h:L),R(!k)},[k,R,W,y,r,Z,Se]),ze=(0,O.useCallback)(()=>{Z(k?ne.toString(10):te.toString(10))},[Z,k,te,ne]);(0,O.useEffect)(()=>{let h,L,he;k?(he=S.toNumber(),L=N(he),h=ht(cn(L,l,r),r)):(h=ht(S,r),L=Xe(S.toNumber(),l)),P({...f.getState().sendFormValues,amountAsset:h,amountUsd:L})},[P,S,k,l,r,N]),(0,O.useEffect)(()=>{if(M)return;let h=k?y:Be(W,r).toNumber();h&&V(h.toString())},[]);let ve=(0,O.useMemo)(()=>k?l?`${C}`:`??? ${c}`:`${T}`,[k,l,c,C,T]),Ie=(0,O.useMemo)(()=>{let h=X??"",L=be??"";return k?`${ee(ne)}`:`${h}${We(te)}${L}`},[k,ne,te,X,be,ee]),Ee=(0,O.useCallback)(h=>{let L=F.solana;L.memo=h,P({...F,solana:L})},[F,P]),ye=(0,O.useMemo)(()=>!re&&W.gt(0),[re,W]),nt=(0,O.useCallback)(()=>{ye&&t()},[ye,t]),je=(0,O.useCallback)(()=>{e(),G()},[e,G]),Ae=(0,O.useMemo)(()=>({next:d.t("commandNext"),send:d.t("commandSend"),cancel:d.t("commandCancel"),maxInput:d.t("maxInputMax"),inputAmountPlaceholder:d.t("maxInputAmount"),recipientAddress:d.t("sendRecipientAddress"),memoPlaceholder:d.t("sendMemoOptional"),availableToSend:d.t("availableToSend"),available:d.t("available"),pageTitle:`${d.t("commandSend")} ${c}`}),[c]),z=E.isMainnetNetworkID(o);return{networkID:o,handleClose:je,handleInputChange:Z,handleMemoChange:Ee,handleNext:nt,primaryTextPrefix:X,primaryText:M,primaryTextSuffix:be,toggleDenomination:le,errorText:re,secondaryText:ve,formattedMaxAmount:Ie,primarySymbol:oe,symbol:c,decimals:r,logoUri:u,canGoNext:ye,i18nStrings:Ae,handleSetMax:ze,showSecondaryText:z,canSendCurrencyAmount:z&&!!l,isMemoEnabled:w,memo:_}};i();a();var de=v(I());var Uo=({onClose:e,onRecipientNavigation:t,onAmountNavigation:n,networkID:o})=>{let{recipientHandle:r}=f(y=>y.sendFormValues),{data:s,isLoading:m}=Dn({usernameOrUserProfileId:r}),p=(0,de.useMemo)(()=>{if(s?.addresses)return Object.keys(s.addresses)},[s]),{fungibles:l,isLoadingTokens:c,visibilityOverrides:u}=xn(),C=(0,de.useMemo)(()=>{let y=o?l.filter(P=>P.data.chain.id===o):l;return(p?y.filter(P=>p.includes(P.data.chain.id)):y).filter(P=>P.type!=="CompressedSPL")},[o,l,p]),[T,D]=(0,de.useState)(""),H=_t(T)??"",M=$t(C,H,Nn),V=f(y=>y.resetSendSlice),S=(0,de.useMemo)(()=>({close:d.t("commandClose"),search:d.t("assetListSearch"),unknownToken:d.t("assetDetailUnknownToken"),noTokens:d.t("sendNoTokens")}),[]),x=(0,de.useCallback)(y=>D(y),[D]),F=(0,de.useCallback)(()=>{e(),V()},[e,V]),G=(0,de.useCallback)(y=>{let B=f.getState().fungibleKey;B&&B!==y.data.key&&f.getState().resetSendSlice(),f.setState({fungibleKey:y.data.key,splTokenAccount:y.type==="SPL"?y.data.splTokenAccountPubkey:void 0});let P=f.getState().sendFormValues;if(P.recipientHandle&&!P.recipient){let k=s?.addresses[y.data.chain.id];if(k){f.setState({sendFormValues:{...P,recipient:k}}),n();return}}t()},[t,n,s?.addresses]);return{fungibles:M,isLoading:c||m,visibilityOverrides:u,searchQuery:T,handleSearch:x,handleClose:F,handleSelect:G,i18nStrings:S}};i();a();i();a();var Et=v(I());var Rt=()=>{let e=f(c=>c.analyticsRecipient),t=f(c=>c.fungibleKey),n=f(c=>c.splTokenAccount),{fungible:o}=Ge({key:t,splTokenAccount:n}),{data:r=[]}=Fe(),{data:s}=en(),m=(0,Et.useMemo)(()=>r.some(c=>c.addresses.some(u=>u.address===e?.address)),[r,e]),p=o?.data.chain.id??Ze.Solana.Mainnet,{data:l}=st({address:o?.data.walletAddress,networkID:p});return(0,Et.useMemo)(()=>({assetType:"token",networkId:p,recipient:e,senderAddress:l?.address??"",senderUsername:s?.username??"",tokenAddress:o?.data.tokenAddress??"",tokenSymbol:o?.data.symbol??"",tokenType:o?.type,selfSend:m}),[p,e,l?.address,s?.username,o,m])};i();a();var Mo=v(I());i();a();var Vo=v(I());i();a();var Q=v(I());i();a();var mo=v(I(),1),lo=v(I(),1),Lo=e=>typeof e=="function",ao=(e,t)=>Lo(e)?e(t):e,Oo=(()=>{let e=0;return()=>(++e).toString()})();var Ho=20,gt=new Map,Go=1e3,co=e=>{if(gt.has(e))return;let t=setTimeout(()=>{gt.delete(e),St({type:4,toastId:e})},Go);gt.set(e,t)},Ko=e=>{let t=gt.get(e);t&&clearTimeout(t)},Bt=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,Ho)};case 1:return t.toast.id&&Ko(t.toast.id),{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return e.toasts.find(s=>s.id===n.id)?Bt(e,{type:1,toast:n}):Bt(e,{type:0,toast:n});case 3:let{toastId:o}=t;return o?co(o):e.toasts.forEach(s=>{co(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===o||o===void 0?{...s,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+r}))}}},Wo=[],Nt={toasts:[],pausedAt:void 0},St=e=>{Nt=Bt(Nt,e),Wo.forEach(t=>{t(Nt)})};var _o=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||Oo()}),Je=e=>(t,n)=>{let o=_o(t,e,n);return St({type:2,toast:o}),o.id},q=(e,t)=>Je("blank")(e,t);q.error=Je("error");q.success=Je("success");q.loading=Je("loading");q.custom=Je("custom");q.dismiss=e=>{St({type:3,toastId:e})};q.remove=e=>St({type:4,toastId:e});q.promise=(e,t,n)=>{let o=q.loading(t.loading,{...n,...n?.loading});return e.then(r=>(q.success(ao(t.success,r),{id:o,...n,...n?.success}),r)).catch(r=>{q.error(ao(t.error,r),{id:o,...n,...n?.error})}),e};i();a();var uo=v(I()),po=({networkID:e,transactionUnitAmount:t,onTransactionSpeedChange:n})=>{let{status:o,data:r}=it({networkID:e}),{transactionSpeed:s}=f(p=>p.sendFormValues),m=(0,uo.useMemo)(()=>{if(o!=="error"&&r&&s)return()=>n({transactionSpeed:s,transactionUnitAmount:t})},[n,s,t,r,o]);return{transactionSpeed:s,openTransactionSettings:m}};var jo=({networkID:e,formattedRecipient:t,networkName:n,networkFee:o,networkFeeErrorMsg:r,networkFeeRow:s,displayFeeTooltip:m,transferFeePercent:p,solanaMetadata:l,ValueLoader:c,openTransactionSettings:u,onNetworkFeeDescriptionPress:C,onTransferFeePress:T})=>(0,Q.useMemo)(()=>[E.isSolanaNetworkID(e)&&l.label?{label:d.t("sendConfirmationLabel"),value:l.label}:void 0,E.isSolanaNetworkID(e)&&l.message?{label:d.t("sendConfirmationMessage"),value:l.message}:void 0,{label:d.t("transactionsTo"),value:t},{label:d.t("sendFungibleSummaryNetwork"),value:n},{label:d.t("sendFungibleSummaryNetworkFee"),value:o.length>0?o:r?null:c,color:r?mt.colors.legacy.accentAlert:mt.colors.legacy.white,leftSubtext:r||void 0,leftSubtextColor:mt.colors.legacy.accentAlert,rightSubtext:s?.rightSubtext,tooltipContent:m?d.t("networkFeesTooltipDescription",{chainName:n})||"":void 0,onClick:m?u:void 0,onPress:m?u:void 0,handleTooltip:m?C:void 0},p?{label:d.t("sendFungibleTransferFee"),value:`${p}%`,tooltipContent:d.t("sendFungibleTransferFeeToolTip")||"",handleTooltip:T}:void 0,l.memo?{label:d.t("sendMemo"),value:l.memo.replace(/(\r\n|\n|\r)/gm," ")}:void 0].filter(Gt),[m,o,r,s?.rightSubtext,e,n,C,T,u,t,l.label,l.memo,l.message,p,c]),Zo=({hasSufficientFunds:e,isTransactionUnitError:t,isTransactionCreationError:n,hasGasEstimationFailed:o,nativeTokenSymbol:r})=>t?d.t("transactionGasLimitError"):o?d.t("transactionGasEstimationError"):e==="insufficient"?d.t("transactionNotEnoughNative",{nativeTokenSymbol:r}):n?d.t("transactionCreationError"):"",Xo=({onNext:e,onClose:t,ValueLoader:n,onTransactionSpeedChange:o,onNetworkFeeDescriptionPress:r,onTransferFeePress:s,onSubmissionCheckFail:m,copyToClipboard:p})=>{let l=Oe(),{senderAddress:c,networkID:u,symbol:C,formattedRecipient:T,uiAmount:D,key:H,type:M,transferFeePercent:V}=se(),S=f(),x=f(z=>z.sendFormValues),F=f(z=>z.setSendFormValues),{amountAsset:G,solana:W}=x,y=E.getNetworkName(u);Ln(c,"SEND_FUNGIBLE");let{data:B,isError:P}=Ke(S),{data:k,isError:R}=mn(B),w=(0,Q.useCallback)(({transactionSpeed:z,transactionUnitAmount:ie})=>{o({transactionSpeed:z,transactionUnitAmount:ie,sendFormValues:x,setSendFormValues:F,networkID:u})},[F,x,u,o]),{transactionSpeed:_,openTransactionSettings:$}=po({networkID:u,transactionUnitAmount:k,onTransactionSpeedChange:w}),{data:J,isFetched:fe,isSuccess:ge}=He({networkID:u,multichainTransaction:B,transactionSpeed:_,queryOptions:{refetchInterval:!1}}),{data:Ce}=un(u,J),N=fn(c),Se=hn(M)?G:new pe(0),{hasSufficientFunds:ee,isLoading:Me,nativeTokenSymbol:te}=In(u,c?.addressType,J,Se,x.recipient),me=Sn({networkID:u,gasEstimation:J,gasEstimationPrice:Ce}),ne=Rn(J,d.t),{data:X}=it({networkID:u}),be=(0,Q.useMemo)(()=>De.get(u).supportsNetworkSettings&&Object.keys(X??{}).length>1,[X,u]);(0,Q.useEffect)(()=>{l.capture("sendAssetSummary",{data:{type:"fungible",symbol:C,networkId:u,chainId:E.getChainID(u)}})},[u,C,l]);let{data:oe=[]}=Fe(),{sendAddressVariant:re}=Qe({senderAddress:c?.address,senderAccounts:oe,networkID:u,recipient:x.recipient}),Z=fe&&!ge,le=!!J&&!Me&&ee!=="insufficient"&&!!me&&re!=="danger",ze=Zo({hasSufficientFunds:ee,isTransactionUnitError:R,isTransactionCreationError:P,hasGasEstimationFailed:Z,nativeTokenSymbol:te}),ve=(0,Q.useCallback)(()=>B?N?(l.capture("showFungibleTxSubmissionFailureModal"),m(N),!1):(F({...x,multichainTransaction:B}),!0):!1,[B,N,F,x,l,m]),Ie=Wt((0,Q.useCallback)(()=>{if(!ve())return;let ie={chainID:u,amount:D.toString(),symbol:C,address:H};Pe.addBreadcrumb("fungibles","approved","info",ie),e()},[ve,C,D,u,e,H]),1e3),Ee=jo({networkID:u,formattedRecipient:T,networkName:y,networkFee:me,networkFeeErrorMsg:ze,networkFeeRow:ne,transferFeePercent:V,solanaMetadata:W,displayFeeTooltip:be,ValueLoader:n,openTransactionSettings:$,onNetworkFeeDescriptionPress:r,onTransferFeePress:s}),ye=(0,Q.useMemo)(()=>{let z=B&&rn(B)?B.transaction.map(ie=>{let Ve=Buffer.from(ie.serialize({verifySignatures:!1,requireAllSignatures:!1})).toString("base64");return{label:d.t("notificationCopyTransactionText"),value:Ve.slice(0,8),onClick:()=>{p(Ve),q.success(d.t("notificationTransactionCopied"))}}}):[];return[...Ee,...z]},[Ee,B,p]),nt=(0,Q.useCallback)(()=>{t(),S.resetSendSlice()},[t,S]),je=$n(d.language,E.isSolanaNetworkID(u)),Ae=(0,Q.useMemo)(()=>({title:d.t("sendConfirmationPrimaryText"),send:d.t("commandSend"),cancel:d.t("commandCancel")}),[]);return{senderAddress:c?.address,networkID:u,handleNext:Ie,handleClose:nt,canSend:le,txSubmissionCheckFailureModal:N,summaryRows:Ht()?ye:Ee,i18nStrings:Ae,networkHealth:je}};i();a();i();a();i();a();i();a();var Ue=v(I());var et=Ue.default.memo(e=>{let{children:t,i18nKey:n,...o}=e,{t:r}=ae(),s=(0,Ue.useMemo)(()=>{let p=(n?`${r(n,{...o,...o.values})}`:"").replace(/<\/?[^>]+(>|$)/g,"");return Ue.default.createElement(U,null,p)},[n,o,r]);return Ue.default.createElement(ut,{fallback:s},Ue.default.createElement(Yt,{i18nKey:n,...o},t))});var g=v(I()),go=v(ko());i();a();var fo=zt(Oe,e=>new Pt(e)),Pt=class{#e;constructor(t){this.#e=t}onSendFlowStart({assetType:t,context:n}){this.#e.capture("sendFlowStart",{data:{assetType:t,context:n}})}onSendAssetAttempt(t){this.#e.capture("sendAssetAttempt",{data:{chainId:E.getChainID(t.networkId),...t}})}onSendAssetSuccess(t){this.#e.capture("sendAssetSuccess",{data:{chainId:E.getChainID(t.networkId),...t}})}onSendAssetFailure(t){this.#e.capture("sendAssetFailure",{data:{chainId:E.getChainID(t.networkId),...t}})}};i();a();i();a();var tt=v(I()),Yo=[/Unknown instruction error/i,/Unknown error/i];function Dt({programId:e,customErrorCode:t,customErrorReason:n,errorReason:o}){let{t:r}=ae(),s=Oe(),m=n||o,p=r(m);return(0,tt.useEffect)(()=>{s.capture("transactionErrorDetails",{data:{programId:e,customErrorCode:t,customErrorReason:n,errorReason:o,hasTranslatedErrorMessage:m!==p}})},[]),tt.default.createElement(j,null,tt.default.createElement(U,{align:"center",color:"textSecondary"},p,t&&Yo.some(l=>l.test(m))?` (${r("transactionsError")}: ${t})`:""))}var qo=({sendSequenceAnalytics:e,onTransactionLinkPress:t,onClose:n,onCancel:o,onBack:r,mobileSignWithLedger:s,ledgerSupported:m})=>{let{data:[p]}=rt(["kill-base-history"]),{senderAddress:l,networkID:c,symbol:u,formattedRecipient:C,uiAmount:T,logoUri:D,tokenPrice:H,key:M}=se(),{data:V,status:S}=on(),x=(0,g.useMemo)(()=>V?.addresses??[],[V]),F=fo(),G=Rt(),W=f(),y=(0,g.useMemo)(()=>Tt(c),[c]),{transactionSpeed:B,recipient:P}=W.sendFormValues,k=Bn(c,B,l,u,D??"",C,T.toNumber(),H,d.t),[R,w]=(0,g.useState)(!1),[_,$]=(0,g.useState)(null),[J,fe]=(0,g.useState)(null),{addRecentAddress:ge}=ke(),Ce=V?.type==="ledger",[N,Se]=(0,g.useState)(void 0),ee=pn("send:fungible",c,!!s);wn(M,T,N?N.id:"");let Me=En(x),te=(0,g.useCallback)(K=>{ee(K.id,"confirmed"),F.onSendAssetSuccess({...G,txId:K.id}),Me()},[F,ee,Me,G]),{isSuccess:me,isError:ne,error:X}=yn(te,N??void 0),be=!!N,oe=ct.get(c).sendSuccessCondition,re=(0,g.useMemo)(()=>{switch(oe){case"SUBMISSION":return R?"ERROR":be?"SUCCESS":"LOADING";case"CONFIRMATION":return R||ne?"ERROR":me?"SUCCESS":"LOADING"}},[ne,me,R,be,oe]),{isError:Z,isSuccess:le}=(0,g.useMemo)(()=>({isError:re==="ERROR",isSuccess:re==="SUCCESS"}),[re]),ze=(0,g.useMemo)(()=>{let K=De.get(c).transactionSpeedDescription(B??"standard");return K?d.t(K):""},[c,B]),ve=oe==="CONFIRMATION"?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",Ie=(0,g.useMemo)(()=>{switch(re){case"LOADING":return d.t("sendStatusLoadingTitle");case"ERROR":return d.t("sendStatusErrorTitle");case"SUCCESS":return d.t(ve)}},[re,ve]),Ee=(0,g.useMemo)(()=>({titleText:Ie,retryText:d.t("commandRetry"),cancelText:d.t("commandCancel"),closeText:d.t("commandClose"),viewTransactionText:d.t("sendStatusViewTransaction")}),[Ie]);(0,g.useEffect)(()=>{y.chainName!=="bitcoin"&&(me?(Pe.addBreadcrumb("fungibles","transactionStatus","info",{...y,status:"confirmed"}),N?.id&&e&&e.transactionStatus(N.id,{...y,status:{type:"confirmed"}})):Z&&(Pe.addBreadcrumb("fungibles","transactionStatus","error",{...y,status:"error"}),N?.id&&e&&e.transactionStatus(N.id,{...y,status:{type:"error"}})))},[me,Z,N,y,e]);let{mutateAsync:ye}=An(),je=Z?g.default.createElement(g.default.Fragment,null,(K=>{switch(K){case"InsufficientFunds":return g.default.createElement(U,{color:"textSecondary",align:"center"},d.t("sendStatusErrorMessageInsufficientBalance"));case"UnknownError":default:return g.default.createElement(g.default.Fragment,null,g.default.createElement(U,{font:"bodySemibold",color:"textSecondary",align:"center"},g.default.createElement(et,{i18nKey:"sendFungibleErrorMessageInterpolated",values:{uiAmount:T.toString(),assetSymbol:u,uiRecipient:C},components:{2:g.default.createElement(U,{font:"bodySemibold",color:"textPrimary"})}})),_?g.default.createElement(j,{marginTop:16,justifyContent:"center"},g.default.createElement(U,{font:"body",color:"textSecondary"},d.t("sendFungibleSolanaErrorCode",{code:_}))):null)}})(J??"InsufficientFunds"),X&&"data"in X?g.default.createElement(j,{marginY:16,justifyContent:"center",color:"textSecondary"},g.default.createElement(Dt,{errorReason:X.data.errorReason,programId:X.data.programId,customErrorReason:X.data.customErrorReason,customErrorCode:X.data.customErrorCode})):null):le&&oe==="CONFIRMATION"?g.default.createElement(U,{font:"bodySemibold",color:"textSecondary",align:"center"},g.default.createElement(et,{i18nKey:"sendFungibleConfirmedSuccessMessageInterpolated",values:{uiAmount:T.toString(),assetSymbol:u,uiRecipient:C},components:{2:g.default.createElement(U,{font:"bodySemibold",color:"textPrimary"})}})):le&&oe==="SUBMISSION"?g.default.createElement(U,{font:"bodySemibold",align:"center"},d.t("sendStatusEstimatedTransactionTime",{time:ze})):g.default.createElement(U,{font:"bodySemibold",color:"textSecondary",align:"center"},g.default.createElement(et,{i18nKey:"sendFungibleLoadingMessageInterpolated",values:{uiAmount:T.toString(),assetSymbol:u,uiRecipient:C},components:{2:g.default.createElement(U,{font:"bodySemibold",color:"textPrimary"})}})),Ae=W.sendFormValues.multichainTransaction,{data:z}=He({networkID:c,multichainTransaction:Ae,transactionSpeed:B,queryOptions:{refetchInterval:!1}}),ie=(0,g.useCallback)(async()=>{try{if(!Ae)throw new Error("multichainTransaction is undefined on send status");if(!z)throw new Error("gasEstimation is undefined on send status");ge({address:P,chainID:c,timestamp:Date.now()});let K=Date.now();F.onSendAssetAttempt(G);let ue=await ye({multichainTransaction:Ae,pendingTransactionInput:k,senderAddress:l,gasEstimation:z}),Le=ue.id;ee(Le,"initiated",K),ee(Le,"received");let Re=Tt(c),Ne;Re.chainType==="solana"&&e?(Ne="signAndSendTransaction",e.submittedTransaction(ue.id,{...Re,method:Ne})):Re.chainType==="eip155"&&e?(Ne="eth_sendRawTransaction",e.submittedTransaction(ue.id,{...Re,method:Ne})):Re.chainType==="sui"&&e&&(Ne="signAndExecuteTransaction",e.submittedTransaction(ue.id,{...Re,method:Ne})),Pe.addBreadcrumb("fungibles","submittedTransaction","info",{...Re,txReceipt:ue.id,method:Ne??"UNKNOWN"}),Se(ue)}catch(K){let ue=Pn(K,y.chainType==="solana"?"solana":void 0);if(fe(ue),ue==="UnknownError"&&K instanceof Error&&y.chainType==="solana"){let[Le]=K.message.match(/0x\d+/)||[];typeof Le=="string"&&Le&&$(Le)}w(!0),F.onSendAssetFailure(G),Pe.captureError(K,"fungibles")}},[Ae,P,z,ge,y,ye,k,ee,c,F,e,l,G,w]),Ve=f(K=>K.retryArgs),h=(0,g.useCallback)(()=>{Ve?(Se(void 0),w(!1),ie()):r()},[ie,r,Ve]),{data:L}=nn(N),he=(0,g.useCallback)(()=>{L&&t(L)},[t,L]),yt=(0,g.useCallback)(()=>{o()},[o]),At=(0,g.useCallback)(()=>{let{sendSuccessRedirect:K}=De.get(c);n(K(p))},[n,p,c]),Lt=tn(c),To=S==="pending",Fo=(0,g.useCallback)(()=>{m&&!le&&!Z&&W.resetSendSlice()},[le,Z,W,m]);return(0,go.default)(Fo),{handleClose:At,handleCancel:yt,handleRetry:h,handleTransactionLinkPress:he,isSuccess:le,isError:Z,MessageElement:je,title:Ie,txReceipt:N,handleTokenTransfer:ie,i18nStrings:Ee,isLoadingSelectedAccountStatus:To,isLedger:Ce,ledgerApp:Lt}};i();a();var A=v(I());i();a();var ce=v(I());var Qo=Y(jn)`
  width: 100%;
  border-style: none;
  padding: 0;
`,So=Y(Kn).attrs({width:"28px",borderRadius:"50px",theme:"primary"})`
  height: 28px;
`,bo=ce.default.memo(({isExpanded:e,addressBookRecipient:t,clearRecipient:n})=>{let{t:o}=ae(),[r,s]=(0,ce.useState)(!1),m={onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},p=r&&!t&&!e;return ce.default.createElement(_n,{color:"#000000",label:o("sendAddressBookButtonLabel"),ariaLabel:o("sendAddressBookButtonLabel"),alignment:"bottomRight",isVisible:p,triggerParams:m},t?ce.default.createElement(So,{paddingY:9,onClick:n},ce.default.createElement(On,{fill:"#222",width:10})):ce.default.createElement(Qo,null,ce.default.createElement(So,{paddingY:6},ce.default.createElement(Hn,{fill:"#222"}))))});i();a();var Ut=v(I());var yo=Ut.default.memo(({symbol:e,chainName:t,recipient:n,recipientError:o,handleRecipientChange:r,onBlur:s})=>{let{t:m}=ae();return Ut.default.createElement(Wn,{type:"text",name:"recipient",value:n,autoComplete:"off",spellCheck:"false",placeholder:m("sendRecipientTextAreaPlaceholder2",{symbol:t||e}),warning:!!o,onChange:r,onBlur:s,paddingRight:"80px"})});var Ao=Y(Ye).attrs({size:16,weight:500,color:"#666666"})`
  font-style: italic;
`,Jo=Y(zn)`
  width: 100%;
  position: relative;
`,er=Y(kt).attrs({align:"center"})`
  position: relative;
  border-radius: 6px;
  border: 1px solid #2f2f2f;
  padding: 14px;
  background: #181818;
  height: 50px;
  margin-bottom: 2px;
`,tr=Y(Zn)`
  z-index: 2;
  width: 100%;
`,Mt=Y(Yn)`
  padding: 8px 12px;
  min-height: 41px;
`,nr=Y(kt).attrs({justify:"center"})`
  height: 85px;
`,ho=Y(Ye).attrs({size:16,color:"#666666"})``,or=Y.div`
  position: absolute;
  right: 12px;
  top: calc(50% - 28px / 2);
  width: auto;
  display: flex;
  gap: 12px;
  align-items: center;
`,rr="__none",sr=50,bt=10,ir=e=>{let{addressBookRecipient:t,networkID:n,senderAddress:o,symbol:r,sendFormValues:s,sendFormErrors:m,recipientError:p,handleAddressSelection:l,setSendFormValues:c,setSendFormErrors:u,isLoading:C}=e,{t:T}=ae(),D=(0,A.useMemo)(()=>({sendAddressBookRecentlyUsed:T("sendAddressBookRecentlyUsed"),sendAddressBookNoAddressesSaved:T("sendAddressBookNoAddressesSaved")}),[T]),{data:H=[]}=Fe(),M=(0,A.useMemo)(()=>o?H.reduce((R,w)=>{let _=w.addresses.filter($=>$.networkID===n&&$.address!==o);if(n)for(let $ of _)R.push({label:w.name,address:$.address,chainID:n});return R},[]):[],[o,H,n]),{recentAddresses:V,savedAddresses:S}=ke(),x=(0,A.useMemo)(()=>S.addresses.reduce((R,w)=>(n&&Ft(E.getAddressTypes(w.chainID),E.getAddressTypes(n))&&R.push({...w}),R),[]),[S,n]),F=(0,A.useMemo)(()=>V.addresses.reduce((R,w)=>(n&&Ft(E.getAddressTypes(w.chainID),E.getAddressTypes(n))&&R.push(w.address),R),[]),[V,n]),G=M.length===0&&x.length===0&&F.length===0,W=(0,A.useMemo)(()=>{for(let{address:R,label:w}of M)if(R===t)return w;for(let{address:R,label:w}of x)if(R===t)return w},[t,M,x]),{recipient:y}=s,B=(0,A.useCallback)(R=>{let w=R.currentTarget,_=self.getComputedStyle(w),$=parseInt(_.getPropertyValue("border-top-width"),bt)+parseInt(_.getPropertyValue("padding-top"),bt)+w.scrollHeight+parseInt(_.getPropertyValue("padding-bottom"),bt)+parseInt(_.getPropertyValue("border-bottom-width"),bt);$=w.value?Math.min(68,$-28):sr,w.style.height=`${$}px`,c({...s,recipient:w.value}),u({...m,recipientError:void 0})},[s,m,u,c]),P=(0,A.useCallback)(()=>{c({...s,recipient:"",addressBookRecipient:void 0})},[s,c]),k=(0,A.useMemo)(()=>{if(n)return E.getNetworkName(n)},[n]);return{i18nStrings:D,recipient:y,addressBookRecipient:t,addresses:M,savedAddresses:x,recentAddresses:F,isEmpty:G,selectedName:W,recipientError:p,symbol:r,chainName:k,handleAddressSelection:l,handleRecipientChange:B,clearRecipient:P,isLoading:C}},Tc=A.default.memo(e=>{let t=ir(e);return A.default.createElement(ar,{...t})}),ar=A.default.memo(e=>{let{i18nStrings:t,recipient:n,addressBookRecipient:o,addresses:r,savedAddresses:s,recentAddresses:m,isEmpty:p,selectedName:l,recipientError:c,symbol:u,chainName:C,handleAddressSelection:T,handleRecipientChange:D,clearRecipient:H,isLoading:M=!1}=e;return A.default.createElement(Jo,{onChange:T,value:o??rr},({isExpanded:V})=>A.default.createElement(A.default.Fragment,null,o?A.default.createElement(er,null,l?A.default.createElement(Ye,{size:16,weight:500},l):A.default.createElement(Ao,null,t.sendAddressBookRecentlyUsed),A.default.createElement(Ye,{opacity:.5,size:16,weight:400,margin:"0 0 0 6px"},"(",o.includes(".")?o:Te(o,4),")")):A.default.createElement(yo,{symbol:u??"",chainName:C,recipient:n,recipientError:c,handleRecipientChange:D}),A.default.createElement(or,null,M?A.default.createElement(Gn,{diameter:20}):null,A.default.createElement(bo,{isExpanded:V,addressBookRecipient:o,clearRecipient:H})),A.default.createElement(tr,{portal:!1},A.default.createElement(Xn,{maxHeight:"150px"},r.map(({address:S,label:x,chainID:F},G)=>A.default.createElement(Mt,{key:`${S}-${G}`,value:S},A.default.createElement(xt,{name:x,publicKey:S,publicKeyLabel:Jt(F,S)}))),s.map(({address:S,label:x},F)=>A.default.createElement(Mt,{key:`${S}-${F}`,value:S},A.default.createElement(xt,{name:x,publicKey:S}))),m.map((S,x)=>A.default.createElement(Mt,{key:`${S}-${x}`,value:S},A.default.createElement(Ao,null,t.sendAddressBookRecentlyUsed),A.default.createElement(ho,{opacity:.5},Te(S,4)))),p&&A.default.createElement(nr,null,A.default.createElement(ho,null,t.sendAddressBookNoAddressesSaved))))))});i();a();var $e=v(I());var dr=()=>{let{uiAmount:e,symbol:t,formattedCurrencyAmount:n}=se(),o=We(e);return $e.default.createElement(j,{direction:"column",alignItems:"center",marginTop:8,marginBottom:32},$e.default.createElement(j,{marginBottom:16},$e.default.createElement(lt,{icon:"Send2",size:64,color:"accentPrimary",backgroundColor:"bgTabBar",shape:"circle"})),$e.default.createElement(U,{font:"heading1Semibold",align:"center"},o," ",t),n?$e.default.createElement(U,{color:"textSecondary",font:"title2",align:"center"},n):null)};i();a();var Vt=v(I());var cr=({networkId:e,senderAddress:t})=>{let{data:n=[]}=Fe(),{recipient:o}=pt(),{sendAddressWarning:r,sendAddressVariant:s}=Qe({senderAddress:t,senderAccounts:n,networkID:e,recipient:o});return r?Vt.default.createElement(j,{marginBottom:12},Vt.default.createElement(Mn,{level:s==="danger"?"1-critical-alert":"2-alert"},r)):null};i();a();i();a();var ur=v(I());i();a();var mr=v(I());i();a();var pr=v(I());i();a();export{kr as a,se as b,Qe as c,Xo as d,Do as e,Uo as f,Dt as g,qo as h,Tc as i,dr as j,cr as k};
//# sourceMappingURL=chunk-YLKUI52K.js.map
