import{Ba as Ky,Ca as Tl,Cb as sa,Cc as Yy,Da as Xt,Dc as Jy,Ea as _t,Ec as Cl,Fa as Ac,Fc as fa,Ga as Zi,Ha as qy,Ia as M,Ic as Xy,Ja as Hy,Jc as Qy,Ka as jy,La as sA,Lc as Zr,M as Ey,Mc as eg,N as Ty,Nb as Ec,Nc as tg,O as vc,Oa as aA,P as Iy,Q as Py,R as Ht,Ra as cA,Sa as uA,Ta as fA,Ub as Gr,Vb as qn,Wa as Fy,X as Al,Xa as wr,Y as Vy,Ya as Il,Z as Ny,Za as Wy,Zb as Ml,_ as Oy,_a as Pl,_b as Xe,aa as Uy,ab as jt,ac as ii,ba as Ly,bc as aa,ca as Ry,cb as zy,cc as Ko,da as Cy,dc as Bl,ea as El,ec as kl,fc as _l,gb as Yi,gc as ca,gd as rg,ha as ia,hc as Ji,ia as oa,ic as Vl,jc as Nl,kc as ua,lc as oi,mc as Gy,oc as Ol,pc as Ul,qc as Ll,rc as Rl,sc as Zy,ua as Dy,vd as Dl,wd as Tc}from"./chunk-ERHX3GUR.js";import{b as rA,d as Do,i as by,k as wy,l as vy,m as xy,p as Sy,q as Ay}from"./chunk-WY7QFQOG.js";import{b as $y}from"./chunk-FI5JCZQR.js";import{$ as vt,A as Sc,b as py,c as X2,d as yy,e as Q2,g as gy,ga as Gi,h as eA,j as my,ja as br,k as tA,ka as Sl,la as _y,m as ml,r as bl,s as wl,t as My,u as By,v as xc,w as vl,x as nA,y as iA,z as oA}from"./chunk-W476YZUB.js";import{X as ky,a as $,l as Ye,n as xl}from"./chunk-HTY4DAML.js";import{c as F,d as hy,f as Ze,h as S,i as k,l as zi,m as Buffer,n as A}from"./chunk-3KENBVE7.js";var Yg=F((da,Ho)=>{S();A();var MA=200,vg="__lodash_hash_undefined__",xg=9007199254740991,Jl="[object Arguments]",BA="[object Array]",Sg="[object Boolean]",Ag="[object Date]",kA="[object Error]",Xl="[object Function]",Eg="[object GeneratorFunction]",Pc="[object Map]",Tg="[object Number]",Ql="[object Object]",ug="[object Promise]",Ig="[object RegExp]",Mc="[object Set]",Pg="[object String]",Mg="[object Symbol]",Wl="[object WeakMap]",Bg="[object ArrayBuffer]",Bc="[object DataView]",kg="[object Float32Array]",_g="[object Float64Array]",Vg="[object Int8Array]",Ng="[object Int16Array]",Og="[object Int32Array]",Ug="[object Uint8Array]",Lg="[object Uint8ClampedArray]",Rg="[object Uint16Array]",Cg="[object Uint32Array]",_A=/[\\^$.*+?()[\]{}|]/g,VA=/\w*$/,NA=/^\[object .+?Constructor\]$/,OA=/^(?:0|[1-9]\d*)$/,rt={};rt[Jl]=rt[BA]=rt[Bg]=rt[Bc]=rt[Sg]=rt[Ag]=rt[kg]=rt[_g]=rt[Vg]=rt[Ng]=rt[Og]=rt[Pc]=rt[Tg]=rt[Ql]=rt[Ig]=rt[Mc]=rt[Pg]=rt[Mg]=rt[Ug]=rt[Lg]=rt[Rg]=rt[Cg]=!0;rt[kA]=rt[Xl]=rt[Wl]=!1;var UA=typeof self=="object"&&self&&self.Object===Object&&self,LA=typeof self=="object"&&self&&self.Object===Object&&self,Hn=UA||LA||Function("return this")(),Dg=typeof da=="object"&&da&&!da.nodeType&&da,fg=Dg&&typeof Ho=="object"&&Ho&&!Ho.nodeType&&Ho,RA=fg&&fg.exports===Dg;function CA(e,t){return e.set(t[0],t[1]),e}function DA(e,t){return e.add(t),e}function KA(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function qA(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Kg(e,t,r,n){var i=-1,o=e?e.length:0;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function HA(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function jA(e,t){return e?.[t]}function qg(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function lg(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function ed(e,t){return function(r){return e(t(r))}}function dg(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var FA=Array.prototype,WA=Function.prototype,kc=Object.prototype,Fl=Hn["__core-js_shared__"],hg=function(){var e=/[^.]+$/.exec(Fl&&Fl.keys&&Fl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Hg=WA.toString,si=kc.hasOwnProperty,_c=kc.toString,$A=RegExp("^"+Hg.call(si).replace(_A,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pg=RA?Hn.Buffer:void 0,yg=Hn.Symbol,gg=Hn.Uint8Array,zA=ed(Object.getPrototypeOf,Object),GA=Object.create,ZA=kc.propertyIsEnumerable,YA=FA.splice,mg=Object.getOwnPropertySymbols,JA=pg?pg.isBuffer:void 0,XA=ed(Object.keys,Object),$l=Wo(Hn,"DataView"),ha=Wo(Hn,"Map"),zl=Wo(Hn,"Promise"),Gl=Wo(Hn,"Set"),Zl=Wo(Hn,"WeakMap"),pa=Wo(Object,"create"),QA=eo($l),eE=eo(ha),tE=eo(zl),rE=eo(Gl),nE=eo(Zl),bg=yg?yg.prototype:void 0,wg=bg?bg.valueOf:void 0;function Qi(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function iE(){this.__data__=pa?pa(null):{}}function oE(e){return this.has(e)&&delete this.__data__[e]}function sE(e){var t=this.__data__;if(pa){var r=t[e];return r===vg?void 0:r}return si.call(t,e)?t[e]:void 0}function aE(e){var t=this.__data__;return pa?t[e]!==void 0:si.call(t,e)}function cE(e,t){var r=this.__data__;return r[e]=pa&&t===void 0?vg:t,this}Qi.prototype.clear=iE;Qi.prototype.delete=oE;Qi.prototype.get=sE;Qi.prototype.has=aE;Qi.prototype.set=cE;function jn(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function uE(){this.__data__=[]}function fE(e){var t=this.__data__,r=Vc(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():YA.call(t,r,1),!0}function lE(e){var t=this.__data__,r=Vc(t,e);return r<0?void 0:t[r][1]}function dE(e){return Vc(this.__data__,e)>-1}function hE(e,t){var r=this.__data__,n=Vc(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}jn.prototype.clear=uE;jn.prototype.delete=fE;jn.prototype.get=lE;jn.prototype.has=dE;jn.prototype.set=hE;function jo(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function pE(){this.__data__={hash:new Qi,map:new(ha||jn),string:new Qi}}function yE(e){return Nc(this,e).delete(e)}function gE(e){return Nc(this,e).get(e)}function mE(e){return Nc(this,e).has(e)}function bE(e,t){return Nc(this,e).set(e,t),this}jo.prototype.clear=pE;jo.prototype.delete=yE;jo.prototype.get=gE;jo.prototype.has=mE;jo.prototype.set=bE;function Fo(e){this.__data__=new jn(e)}function wE(){this.__data__=new jn}function vE(e){return this.__data__.delete(e)}function xE(e){return this.__data__.get(e)}function SE(e){return this.__data__.has(e)}function AE(e,t){var r=this.__data__;if(r instanceof jn){var n=r.__data__;if(!ha||n.length<MA-1)return n.push([e,t]),this;r=this.__data__=new jo(n)}return r.set(e,t),this}Fo.prototype.clear=wE;Fo.prototype.delete=vE;Fo.prototype.get=xE;Fo.prototype.has=SE;Fo.prototype.set=AE;function EE(e,t){var r=rd(e)||GE(e)?HA(e.length,String):[],n=r.length,i=!!n;for(var o in e)(t||si.call(e,o))&&!(i&&(o=="length"||FE(o,n)))&&r.push(o);return r}function jg(e,t,r){var n=e[t];(!(si.call(e,t)&&zg(n,r))||r===void 0&&!(t in e))&&(e[t]=r)}function Vc(e,t){for(var r=e.length;r--;)if(zg(e[r][0],t))return r;return-1}function TE(e,t){return e&&Fg(t,nd(t),e)}function Yl(e,t,r,n,i,o,a){var u;if(n&&(u=o?n(e,i,o,a):n(e)),u!==void 0)return u;if(!Oc(e))return e;var l=rd(e);if(l){if(u=qE(e),!t)return CE(e,u)}else{var h=Xi(e),v=h==Xl||h==Eg;if(YE(e))return _E(e,t);if(h==Ql||h==Jl||v&&!o){if(qg(e))return o?e:{};if(u=HE(v?{}:e),!t)return DE(e,TE(u,e))}else{if(!rt[h])return o?e:{};u=jE(e,h,Yl,t)}}a||(a=new Fo);var b=a.get(e);if(b)return b;if(a.set(e,u),!l)var T=r?KE(e):nd(e);return KA(T||e,function(P,B){T&&(B=P,P=e[B]),jg(u,B,Yl(P,t,r,n,B,e,a))}),u}function IE(e){return Oc(e)?GA(e):{}}function PE(e,t,r){var n=t(e);return rd(e)?n:qA(n,r(e))}function ME(e){return _c.call(e)}function BE(e){if(!Oc(e)||$E(e))return!1;var t=Zg(e)||qg(e)?$A:NA;return t.test(eo(e))}function kE(e){if(!$g(e))return XA(e);var t=[];for(var r in Object(e))si.call(e,r)&&r!="constructor"&&t.push(r);return t}function _E(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function td(e){var t=new e.constructor(e.byteLength);return new gg(t).set(new gg(e)),t}function VE(e,t){var r=t?td(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function NE(e,t,r){var n=t?r(lg(e),!0):lg(e);return Kg(n,CA,new e.constructor)}function OE(e){var t=new e.constructor(e.source,VA.exec(e));return t.lastIndex=e.lastIndex,t}function UE(e,t,r){var n=t?r(dg(e),!0):dg(e);return Kg(n,DA,new e.constructor)}function LE(e){return wg?Object(wg.call(e)):{}}function RE(e,t){var r=t?td(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function CE(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Fg(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],u=n?n(r[a],e[a],a,r,e):void 0;jg(r,a,u===void 0?e[a]:u)}return r}function DE(e,t){return Fg(e,Wg(e),t)}function KE(e){return PE(e,nd,Wg)}function Nc(e,t){var r=e.__data__;return WE(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Wo(e,t){var r=jA(e,t);return BE(r)?r:void 0}var Wg=mg?ed(mg,Object):QE,Xi=ME;($l&&Xi(new $l(new ArrayBuffer(1)))!=Bc||ha&&Xi(new ha)!=Pc||zl&&Xi(zl.resolve())!=ug||Gl&&Xi(new Gl)!=Mc||Zl&&Xi(new Zl)!=Wl)&&(Xi=function(e){var t=_c.call(e),r=t==Ql?e.constructor:void 0,n=r?eo(r):void 0;if(n)switch(n){case QA:return Bc;case eE:return Pc;case tE:return ug;case rE:return Mc;case nE:return Wl}return t});function qE(e){var t=e.length,r=e.constructor(t);return t&&typeof e[0]=="string"&&si.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function HE(e){return typeof e.constructor=="function"&&!$g(e)?IE(zA(e)):{}}function jE(e,t,r,n){var i=e.constructor;switch(t){case Bg:return td(e);case Sg:case Ag:return new i(+e);case Bc:return VE(e,n);case kg:case _g:case Vg:case Ng:case Og:case Ug:case Lg:case Rg:case Cg:return RE(e,n);case Pc:return NE(e,n,r);case Tg:case Pg:return new i(e);case Ig:return OE(e);case Mc:return UE(e,n,r);case Mg:return LE(e)}}function FE(e,t){return t=t??xg,!!t&&(typeof e=="number"||OA.test(e))&&e>-1&&e%1==0&&e<t}function WE(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function $E(e){return!!hg&&hg in e}function $g(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||kc;return e===r}function eo(e){if(e!=null){try{return Hg.call(e)}catch{}try{return e+""}catch{}}return""}function zE(e){return Yl(e,!0,!0)}function zg(e,t){return e===t||e!==e&&t!==t}function GE(e){return ZE(e)&&si.call(e,"callee")&&(!ZA.call(e,"callee")||_c.call(e)==Jl)}var rd=Array.isArray;function Gg(e){return e!=null&&JE(e.length)&&!Zg(e)}function ZE(e){return XE(e)&&Gg(e)}var YE=JA||e3;function Zg(e){var t=Oc(e)?_c.call(e):"";return t==Xl||t==Eg}function JE(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=xg}function Oc(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function XE(e){return!!e&&typeof e=="object"}function nd(e){return Gg(e)?EE(e):kE(e)}function QE(){return[]}function e3(){return!1}Ho.exports=zE});var Ib=F((qO,Tb)=>{S();A();var Ge={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function Sr(e,t){if(!e)throw new Error(t)}function ze(e,t,r){if(Sr(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let n=r.join(", "),i=`Expected ${e} to be an Uint8Array with length [${n}]`;Sr(r.includes(t.length),i)}else{let n=`Expected ${e} to be an Uint8Array with length ${r}`;Sr(t.length===r,n)}}function uo(e){Sr(os(e)==="Boolean","Expected compressed to be a Boolean")}function rn(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),ze("output",e,t),e}function os(e){return Object.prototype.toString.call(e).slice(8,-1)}Tb.exports=e=>({contextRandomize(t){switch(Sr(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&ze("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(Ge.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return ze("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch(ze("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(Ge.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch(ze("private key",t,32),ze("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(Ge.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch(ze("private key",t,32),ze("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(Ge.TWEAK_MUL)}},publicKeyVerify(t){return ze("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,n){switch(ze("private key",t,32),uo(r),n=rn(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(Ge.SECKEY_INVALID);case 2:throw new Error(Ge.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,n){switch(ze("public key",t,[33,65]),uo(r),n=rn(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(Ge.PUBKEY_PARSE);case 2:throw new Error(Ge.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,n){switch(ze("public key",t,[33,65]),uo(r),n=rn(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(Ge.PUBKEY_PARSE);case 2:throw new Error(Ge.IMPOSSIBLE_CASE);case 3:throw new Error(Ge.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,n){Sr(Array.isArray(t),"Expected public keys to be an Array"),Sr(t.length>0,"Expected public keys array will have more than zero items");for(let i of t)ze("public key",i,[33,65]);switch(uo(r),n=rn(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(Ge.PUBKEY_PARSE);case 2:throw new Error(Ge.PUBKEY_COMBINE);case 3:throw new Error(Ge.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,n=!0,i){switch(ze("public key",t,[33,65]),ze("tweak",r,32),uo(n),i=rn(i,n?33:65),e.publicKeyTweakAdd(i,t,r)){case 0:return i;case 1:throw new Error(Ge.PUBKEY_PARSE);case 2:throw new Error(Ge.TWEAK_ADD)}},publicKeyTweakMul(t,r,n=!0,i){switch(ze("public key",t,[33,65]),ze("tweak",r,32),uo(n),i=rn(i,n?33:65),e.publicKeyTweakMul(i,t,r)){case 0:return i;case 1:throw new Error(Ge.PUBKEY_PARSE);case 2:throw new Error(Ge.TWEAK_MUL)}},signatureNormalize(t){switch(ze("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(Ge.SIG_PARSE)}},signatureExport(t,r){ze("signature",t,64),r=rn(r,72);let n={output:r,outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(Ge.SIG_PARSE);case 2:throw new Error(Ge.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch(ze("signature",t),r=rn(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(Ge.SIG_PARSE);case 2:throw new Error(Ge.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,n={},i){ze("message",t,32),ze("private key",r,32),Sr(os(n)==="Object","Expected options to be an Object"),n.data!==void 0&&ze("options.data",n.data),n.noncefn!==void 0&&Sr(os(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=rn(i,64);let o={signature:i,recid:null};switch(e.ecdsaSign(o,t,r,n.data,n.noncefn)){case 0:return o;case 1:throw new Error(Ge.SIGN);case 2:throw new Error(Ge.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,n){switch(ze("signature",t,64),ze("message",r,32),ze("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(Ge.SIG_PARSE);case 2:throw new Error(Ge.PUBKEY_PARSE)}},ecdsaRecover(t,r,n,i=!0,o){switch(ze("signature",t,64),Sr(os(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),ze("message",n,32),uo(i),o=rn(o,i?33:65),e.ecdsaRecover(o,t,r,n)){case 0:return o;case 1:throw new Error(Ge.SIG_PARSE);case 2:throw new Error(Ge.RECOVER);case 3:throw new Error(Ge.IMPOSSIBLE_CASE)}},ecdh(t,r,n={},i){switch(ze("public key",t,[33,65]),ze("private key",r,32),Sr(os(n)==="Object","Expected options to be an Object"),n.data!==void 0&&ze("options.data",n.data),n.hashfn!==void 0?(Sr(os(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&ze("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&ze("options.ybuf",n.ybuf,32),ze("output",i)):i=rn(i,32),e.ecdh(i,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(Ge.PUBKEY_PARSE);case 2:throw new Error(Ge.ECDH)}}})});var Mb=F((FO,Pb)=>{S();A();var w8=my().ec,vn=new w8("secp256k1"),$e=vn.curve,et=$e.n.constructor;function v8(e,t){let r=new et(t);if(r.cmp($e.p)>=0)return null;r=r.toRed($e.red);let n=r.redSqr().redIMul(r).redIAdd($e.b).redSqrt();return e===3!==n.isOdd()&&(n=n.redNeg()),vn.keyPair({pub:{x:r,y:n}})}function x8(e,t,r){let n=new et(t),i=new et(r);if(n.cmp($e.p)>=0||i.cmp($e.p)>=0||(n=n.toRed($e.red),i=i.toRed($e.red),(e===6||e===7)&&i.isOdd()!==(e===7)))return null;let o=n.redSqr().redIMul(n);return i.redSqr().redISub(o.redIAdd($e.b)).isZero()?vn.keyPair({pub:{x:n,y:i}}):null}function hi(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:v8(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:x8(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function fo(e,t){let r=t.encode(null,e.length===33);for(let n=0;n<e.length;++n)e[n]=r[n]}Pb.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new et(e);return t.cmp($e.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new et(e),r=$e.n.sub(t).umod($e.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new et(t);if(r.cmp($e.n)>=0||(r.iadd(new et(e)),r.cmp($e.n)>=0&&r.isub($e.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new et(t);if(r.cmp($e.n)>=0||r.isZero())return 1;r.imul(new et(e)),r.cmp($e.n)>=0&&(r=r.umod($e.n));let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify(e){return hi(e)===null?1:0},publicKeyCreate(e,t){let r=new et(t);if(r.cmp($e.n)>=0||r.isZero())return 1;let n=vn.keyFromPrivate(t).getPublic();return fo(e,n),0},publicKeyConvert(e,t){let r=hi(t);if(r===null)return 1;let n=r.getPublic();return fo(e,n),0},publicKeyNegate(e,t){let r=hi(t);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),fo(e,n),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let i=0;i<t.length;++i)if(r[i]=hi(t[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(fo(e,n),0)},publicKeyTweakAdd(e,t,r){let n=hi(t);if(n===null)return 1;if(r=new et(r),r.cmp($e.n)>=0)return 2;let i=n.getPublic().add($e.g.mul(r));return i.isInfinity()?2:(fo(e,i),0)},publicKeyTweakMul(e,t,r){let n=hi(t);if(n===null)return 1;if(r=new et(r),r.cmp($e.n)>=0||r.isZero())return 2;let i=n.getPublic().mul(r);return fo(e,i),0},signatureNormalize(e){let t=new et(e.subarray(0,32)),r=new et(e.subarray(32,64));return t.cmp($e.n)>=0||r.cmp($e.n)>=0?1:(r.cmp(vn.nh)===1&&e.set($e.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),n=t.subarray(32,64);if(new et(r).cmp($e.n)>=0||new et(n).cmp($e.n)>=0)return 1;let{output:i}=e,o=i.subarray(4,37);o[0]=0,o.set(r,1);let a=33,u=0;for(;a>1&&o[u]===0&&!(o[u+1]&128);--a,++u);if(o=o.subarray(u),o[0]&128||a>1&&o[0]===0&&!(o[1]&128))return 1;let l=i.subarray(39,72);l[0]=0,l.set(n,1);let h=33,v=0;for(;h>1&&l[v]===0&&!(l[v+1]&128);--h,++v);return l=l.subarray(v),l[0]&128||h>1&&l[0]===0&&!(l[1]&128)?1:(e.outputlen=6+a+h,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=o.length,i.set(o,4),i[4+a]=2,i[5+a]=l.length,i.set(l,6+a),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let n=t[5+r];if(n===0||6+r+n!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||n>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let i=t.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let o=t.subarray(6+r);if(o.length===33&&o[0]===0&&(o=o.slice(1)),o.length>32)throw new Error("S length is too long");let a=new et(i);a.cmp($e.n)>=0&&(a=new et(0));let u=new et(t.subarray(6+r));return u.cmp($e.n)>=0&&(u=new et(0)),e.set(a.toArrayLike(Uint8Array,"be",32),0),e.set(u.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,n,i){if(i){let u=i;i=l=>{let h=u(t,r,null,n,l);if(!(h instanceof Uint8Array&&h.length===32))throw new Error("This is the way");return new et(h)}}let o=new et(r);if(o.cmp($e.n)>=0||o.isZero())return 1;let a;try{a=vn.sign(t,r,{canonical:!0,k:i,pers:n})}catch{return 1}return e.signature.set(a.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(a.s.toArrayLike(Uint8Array,"be",32),32),e.recid=a.recoveryParam,0},ecdsaVerify(e,t,r){let n={r:e.subarray(0,32),s:e.subarray(32,64)},i=new et(n.r),o=new et(n.s);if(i.cmp($e.n)>=0||o.cmp($e.n)>=0)return 1;if(o.cmp(vn.nh)===1||i.isZero()||o.isZero())return 3;let a=hi(r);if(a===null)return 2;let u=a.getPublic();return vn.verify(t,n,u)?0:3},ecdsaRecover(e,t,r,n){let i={r:t.slice(0,32),s:t.slice(32,64)},o=new et(i.r),a=new et(i.s);if(o.cmp($e.n)>=0||a.cmp($e.n)>=0)return 1;if(o.isZero()||a.isZero())return 2;let u;try{u=vn.recoverPubKey(n,i,r)}catch{return 2}return fo(e,u),0},ecdh(e,t,r,n,i,o,a){let u=hi(t);if(u===null)return 1;let l=new et(r);if(l.cmp($e.n)>=0||l.isZero())return 2;let h=u.getPublic().mul(l);if(i===void 0){let v=h.encode(null,!0),b=vn.hash().update(v).digest();for(let T=0;T<32;++T)e[T]=b[T]}else{o||(o=new Uint8Array(32));let v=h.getX().toArray("be",32);for(let B=0;B<32;++B)o[B]=v[B];a||(a=new Uint8Array(32));let b=h.getY().toArray("be",32);for(let B=0;B<32;++B)a[B]=b[B];let T=i(o,a,n);if(!(T instanceof Uint8Array&&T.length===e.length))return 2;e.set(T)}return 0}}});var rh=F((zO,Bb)=>{S();A();Bb.exports=Ib()(Mb())});var _b=F(xu=>{"use strict";S();A();Object.defineProperty(xu,"__esModule",{value:!0});var kb=py();function S8(e){return new Promise(function(t,r){kb(e,function(n,i){if(n){r(n);return}t(i)})})}xu.getRandomBytes=S8;function A8(e){return kb(e)}xu.getRandomBytesSync=A8});var Ub=F(xn=>{"use strict";S();A();var E8=xn&&xn.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function u(v){try{h(n.next(v))}catch(b){a(b)}}function l(v){try{h(n.throw(v))}catch(b){a(b)}}function h(v){v.done?o(v.value):i(v.value).then(u,l)}h((n=n.apply(e,t||[])).next())})},T8=xn&&xn.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(v){return l([h,v])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(v){h=[6,v],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}};function I8(e){for(var t in e)xn.hasOwnProperty(t)||(xn[t]=e[t])}Object.defineProperty(xn,"__esModule",{value:!0});var Vb=rh(),Nb=_b(),Ob=32;function P8(){return E8(this,void 0,void 0,function(){var e;return T8(this,function(t){switch(t.label){case 0:return[4,Nb.getRandomBytes(Ob)];case 1:return e=t.sent(),Vb.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}xn.createPrivateKey=P8;function M8(){for(;;){var e=Nb.getRandomBytesSync(Ob);if(Vb.privateKeyVerify(e))return e}}xn.createPrivateKeySync=M8;I8(rh())});var lo=F((Lb,nh)=>{S();A();(function(e,t){"use strict";function r(x,s){if(!x)throw new Error(s||"Assertion failed")}function n(x,s){x.super_=s;var f=function(){};f.prototype=s.prototype,x.prototype=new f,x.prototype.constructor=x}function i(x,s,f){if(i.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((s==="le"||s==="be")&&(f=s,s=10),this._init(x||0,s||10,f||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=gy().Buffer}catch{}i.isBN=function(s){return s instanceof i?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===i.wordSize&&Array.isArray(s.words)},i.max=function(s,f){return s.cmp(f)>0?s:f},i.min=function(s,f){return s.cmp(f)<0?s:f},i.prototype._init=function(s,f,d){if(typeof s=="number")return this._initNumber(s,f,d);if(typeof s=="object")return this._initArray(s,f,d);f==="hex"&&(f=16),r(f===(f|0)&&f>=2&&f<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(f===16?this._parseHex(s,y,d):(this._parseBase(s,f,y),d==="le"&&this._initArray(this.toArray(),f,d)))},i.prototype._initNumber=function(s,f,d){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),f,d)},i.prototype._initArray=function(s,f,d){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var p,w,E=0;if(d==="be")for(y=s.length-1,p=0;y>=0;y-=3)w=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[p]|=w<<E&67108863,this.words[p+1]=w>>>26-E&67108863,E+=24,E>=26&&(E-=26,p++);else if(d==="le")for(y=0,p=0;y<s.length;y+=3)w=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[p]|=w<<E&67108863,this.words[p+1]=w>>>26-E&67108863,E+=24,E>=26&&(E-=26,p++);return this.strip()};function a(x,s){var f=x.charCodeAt(s);return f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:f-48&15}function u(x,s,f){var d=a(x,f);return f-1>=s&&(d|=a(x,f-1)<<4),d}i.prototype._parseHex=function(s,f,d){this.length=Math.ceil((s.length-f)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var p=0,w=0,E;if(d==="be")for(y=s.length-1;y>=f;y-=2)E=u(s,f,y)<<p,this.words[w]|=E&67108863,p>=18?(p-=18,w+=1,this.words[w]|=E>>>26):p+=8;else{var g=s.length-f;for(y=g%2===0?f+1:f;y<s.length;y+=2)E=u(s,f,y)<<p,this.words[w]|=E&67108863,p>=18?(p-=18,w+=1,this.words[w]|=E>>>26):p+=8}this.strip()};function l(x,s,f,d){for(var y=0,p=Math.min(x.length,f),w=s;w<p;w++){var E=x.charCodeAt(w)-48;y*=d,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}i.prototype._parseBase=function(s,f,d){this.words=[0],this.length=1;for(var y=0,p=1;p<=67108863;p*=f)y++;y--,p=p/f|0;for(var w=s.length-d,E=w%y,g=Math.min(w,w-E)+d,c=0,m=d;m<g;m+=y)c=l(s,m,m+y,f),this.imuln(p),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var O=1;for(c=l(s,m,s.length,f),m=0;m<E;m++)O*=f;this.imuln(O),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(s){s.words=new Array(this.length);for(var f=0;f<this.length;f++)s.words[f]=this.words[f];s.length=this.length,s.negative=this.negative,s.red=this.red},i.prototype.clone=function(){var s=new i(null);return this.copy(s),s},i.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(s,f){s=s||10,f=f|0||1;var d;if(s===16||s==="hex"){d="";for(var y=0,p=0,w=0;w<this.length;w++){var E=this.words[w],g=((E<<y|p)&16777215).toString(16);p=E>>>24-y&16777215,p!==0||w!==this.length-1?d=h[6-g.length]+g+d:d=g+d,y+=2,y>=26&&(y-=26,w--)}for(p!==0&&(d=p.toString(16)+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(s===(s|0)&&s>=2&&s<=36){var c=v[s],m=b[s];d="";var O=this.clone();for(O.negative=0;!O.isZero();){var L=O.modn(m).toString(s);O=O.idivn(m),O.isZero()?d=L+d:d=h[c-L.length]+L+d}for(this.isZero()&&(d="0"+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(s,f){return r(typeof o<"u"),this.toArrayLike(o,s,f)},i.prototype.toArray=function(s,f){return this.toArrayLike(Array,s,f)},i.prototype.toArrayLike=function(s,f,d){var y=this.byteLength(),p=d||Math.max(1,y);r(y<=p,"byte array longer than desired length"),r(p>0,"Requested array length <= 0"),this.strip();var w=f==="le",E=new s(p),g,c,m=this.clone();if(w){for(c=0;!m.isZero();c++)g=m.andln(255),m.iushrn(8),E[c]=g;for(;c<p;c++)E[c]=0}else{for(c=0;c<p-y;c++)E[c]=0;for(c=0;!m.isZero();c++)g=m.andln(255),m.iushrn(8),E[p-c-1]=g}return E},Math.clz32?i.prototype._countBits=function(s){return 32-Math.clz32(s)}:i.prototype._countBits=function(s){var f=s,d=0;return f>=4096&&(d+=13,f>>>=13),f>=64&&(d+=7,f>>>=7),f>=8&&(d+=4,f>>>=4),f>=2&&(d+=2,f>>>=2),d+f},i.prototype._zeroBits=function(s){if(s===0)return 26;var f=s,d=0;return f&8191||(d+=13,f>>>=13),f&127||(d+=7,f>>>=7),f&15||(d+=4,f>>>=4),f&3||(d+=2,f>>>=2),f&1||d++,d},i.prototype.bitLength=function(){var s=this.words[this.length-1],f=this._countBits(s);return(this.length-1)*26+f};function T(x){for(var s=new Array(x.bitLength()),f=0;f<s.length;f++){var d=f/26|0,y=f%26;s[f]=(x.words[d]&1<<y)>>>y}return s}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,f=0;f<this.length;f++){var d=this._zeroBits(this.words[f]);if(s+=d,d!==26)break}return s},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},i.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var f=0;f<s.length;f++)this.words[f]=this.words[f]|s.words[f];return this.strip()},i.prototype.ior=function(s){return r((this.negative|s.negative)===0),this.iuor(s)},i.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},i.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},i.prototype.iuand=function(s){var f;this.length>s.length?f=s:f=this;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]&s.words[d];return this.length=f.length,this.strip()},i.prototype.iand=function(s){return r((this.negative|s.negative)===0),this.iuand(s)},i.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},i.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},i.prototype.iuxor=function(s){var f,d;this.length>s.length?(f=this,d=s):(f=s,d=this);for(var y=0;y<d.length;y++)this.words[y]=f.words[y]^d.words[y];if(this!==f)for(;y<f.length;y++)this.words[y]=f.words[y];return this.length=f.length,this.strip()},i.prototype.ixor=function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},i.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},i.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},i.prototype.inotn=function(s){r(typeof s=="number"&&s>=0);var f=Math.ceil(s/26)|0,d=s%26;this._expand(f),d>0&&f--;for(var y=0;y<f;y++)this.words[y]=~this.words[y]&67108863;return d>0&&(this.words[y]=~this.words[y]&67108863>>26-d),this.strip()},i.prototype.notn=function(s){return this.clone().inotn(s)},i.prototype.setn=function(s,f){r(typeof s=="number"&&s>=0);var d=s/26|0,y=s%26;return this._expand(d+1),f?this.words[d]=this.words[d]|1<<y:this.words[d]=this.words[d]&~(1<<y),this.strip()},i.prototype.iadd=function(s){var f;if(this.negative!==0&&s.negative===0)return this.negative=0,f=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,f=this.isub(s),s.negative=1,f._normSign();var d,y;this.length>s.length?(d=this,y=s):(d=s,y=this);for(var p=0,w=0;w<y.length;w++)f=(d.words[w]|0)+(y.words[w]|0)+p,this.words[w]=f&67108863,p=f>>>26;for(;p!==0&&w<d.length;w++)f=(d.words[w]|0)+p,this.words[w]=f&67108863,p=f>>>26;if(this.length=d.length,p!==0)this.words[this.length]=p,this.length++;else if(d!==this)for(;w<d.length;w++)this.words[w]=d.words[w];return this},i.prototype.add=function(s){var f;return s.negative!==0&&this.negative===0?(s.negative=0,f=this.sub(s),s.negative^=1,f):s.negative===0&&this.negative!==0?(this.negative=0,f=s.sub(this),this.negative=1,f):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},i.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var f=this.iadd(s);return s.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var d=this.cmp(s);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,p;d>0?(y=this,p=s):(y=s,p=this);for(var w=0,E=0;E<p.length;E++)f=(y.words[E]|0)-(p.words[E]|0)+w,w=f>>26,this.words[E]=f&67108863;for(;w!==0&&E<y.length;E++)f=(y.words[E]|0)+w,w=f>>26,this.words[E]=f&67108863;if(w===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(s){return this.clone().isub(s)};function P(x,s,f){f.negative=s.negative^x.negative;var d=x.length+s.length|0;f.length=d,d=d-1|0;var y=x.words[0]|0,p=s.words[0]|0,w=y*p,E=w&67108863,g=w/67108864|0;f.words[0]=E;for(var c=1;c<d;c++){for(var m=g>>>26,O=g&67108863,L=Math.min(c,s.length-1),D=Math.max(0,c-x.length+1);D<=L;D++){var j=c-D|0;y=x.words[j]|0,p=s.words[D]|0,w=y*p+O,m+=w/67108864|0,O=w&67108863}f.words[c]=O|0,g=m|0}return g!==0?f.words[c]=g|0:f.length--,f.strip()}var B=function(s,f,d){var y=s.words,p=f.words,w=d.words,E=0,g,c,m,O=y[0]|0,L=O&8191,D=O>>>13,j=y[1]|0,W=j&8191,Z=j>>>13,Re=y[2]|0,X=Re&8191,Y=Re>>>13,yt=y[3]|0,ne=yt&8191,J=yt>>>13,gt=y[4]|0,te=gt&8191,ie=gt>>>13,Jt=y[5]|0,Me=Jt&8191,Be=Jt>>>13,ti=y[6]|0,ke=ti&8191,_e=ti>>>13,ri=y[7]|0,Ve=ri&8191,Ne=ri>>>13,ni=y[8]|0,Oe=ni&8191,Ue=ni>>>13,kn=y[9]|0,se=kn&8191,ae=kn>>>13,_n=p[0]|0,ce=_n&8191,ue=_n>>>13,Vn=p[1]|0,fe=Vn&8191,le=Vn>>>13,Nn=p[2]|0,de=Nn&8191,he=Nn>>>13,On=p[3]|0,pe=On&8191,ye=On>>>13,Un=p[4]|0,ge=Un&8191,me=Un>>>13,Ln=p[5]|0,be=Ln&8191,we=Ln>>>13,Rn=p[6]|0,ve=Rn&8191,xe=Rn>>>13,Cn=p[7]|0,Se=Cn&8191,Ae=Cn>>>13,Dn=p[8]|0,Ee=Dn&8191,Te=Dn>>>13,Kn=p[9]|0,Ie=Kn&8191,Pe=Kn>>>13;d.negative=s.negative^f.negative,d.length=19,g=Math.imul(L,ce),c=Math.imul(L,ue),c=c+Math.imul(D,ce)|0,m=Math.imul(D,ue);var _r=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(_r>>>26)|0,_r&=67108863,g=Math.imul(W,ce),c=Math.imul(W,ue),c=c+Math.imul(Z,ce)|0,m=Math.imul(Z,ue),g=g+Math.imul(L,fe)|0,c=c+Math.imul(L,le)|0,c=c+Math.imul(D,fe)|0,m=m+Math.imul(D,le)|0;var Vr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,g=Math.imul(X,ce),c=Math.imul(X,ue),c=c+Math.imul(Y,ce)|0,m=Math.imul(Y,ue),g=g+Math.imul(W,fe)|0,c=c+Math.imul(W,le)|0,c=c+Math.imul(Z,fe)|0,m=m+Math.imul(Z,le)|0,g=g+Math.imul(L,de)|0,c=c+Math.imul(L,he)|0,c=c+Math.imul(D,de)|0,m=m+Math.imul(D,he)|0;var Nr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,g=Math.imul(ne,ce),c=Math.imul(ne,ue),c=c+Math.imul(J,ce)|0,m=Math.imul(J,ue),g=g+Math.imul(X,fe)|0,c=c+Math.imul(X,le)|0,c=c+Math.imul(Y,fe)|0,m=m+Math.imul(Y,le)|0,g=g+Math.imul(W,de)|0,c=c+Math.imul(W,he)|0,c=c+Math.imul(Z,de)|0,m=m+Math.imul(Z,he)|0,g=g+Math.imul(L,pe)|0,c=c+Math.imul(L,ye)|0,c=c+Math.imul(D,pe)|0,m=m+Math.imul(D,ye)|0;var Or=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Or>>>26)|0,Or&=67108863,g=Math.imul(te,ce),c=Math.imul(te,ue),c=c+Math.imul(ie,ce)|0,m=Math.imul(ie,ue),g=g+Math.imul(ne,fe)|0,c=c+Math.imul(ne,le)|0,c=c+Math.imul(J,fe)|0,m=m+Math.imul(J,le)|0,g=g+Math.imul(X,de)|0,c=c+Math.imul(X,he)|0,c=c+Math.imul(Y,de)|0,m=m+Math.imul(Y,he)|0,g=g+Math.imul(W,pe)|0,c=c+Math.imul(W,ye)|0,c=c+Math.imul(Z,pe)|0,m=m+Math.imul(Z,ye)|0,g=g+Math.imul(L,ge)|0,c=c+Math.imul(L,me)|0,c=c+Math.imul(D,ge)|0,m=m+Math.imul(D,me)|0;var Ur=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,g=Math.imul(Me,ce),c=Math.imul(Me,ue),c=c+Math.imul(Be,ce)|0,m=Math.imul(Be,ue),g=g+Math.imul(te,fe)|0,c=c+Math.imul(te,le)|0,c=c+Math.imul(ie,fe)|0,m=m+Math.imul(ie,le)|0,g=g+Math.imul(ne,de)|0,c=c+Math.imul(ne,he)|0,c=c+Math.imul(J,de)|0,m=m+Math.imul(J,he)|0,g=g+Math.imul(X,pe)|0,c=c+Math.imul(X,ye)|0,c=c+Math.imul(Y,pe)|0,m=m+Math.imul(Y,ye)|0,g=g+Math.imul(W,ge)|0,c=c+Math.imul(W,me)|0,c=c+Math.imul(Z,ge)|0,m=m+Math.imul(Z,me)|0,g=g+Math.imul(L,be)|0,c=c+Math.imul(L,we)|0,c=c+Math.imul(D,be)|0,m=m+Math.imul(D,we)|0;var Lr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,g=Math.imul(ke,ce),c=Math.imul(ke,ue),c=c+Math.imul(_e,ce)|0,m=Math.imul(_e,ue),g=g+Math.imul(Me,fe)|0,c=c+Math.imul(Me,le)|0,c=c+Math.imul(Be,fe)|0,m=m+Math.imul(Be,le)|0,g=g+Math.imul(te,de)|0,c=c+Math.imul(te,he)|0,c=c+Math.imul(ie,de)|0,m=m+Math.imul(ie,he)|0,g=g+Math.imul(ne,pe)|0,c=c+Math.imul(ne,ye)|0,c=c+Math.imul(J,pe)|0,m=m+Math.imul(J,ye)|0,g=g+Math.imul(X,ge)|0,c=c+Math.imul(X,me)|0,c=c+Math.imul(Y,ge)|0,m=m+Math.imul(Y,me)|0,g=g+Math.imul(W,be)|0,c=c+Math.imul(W,we)|0,c=c+Math.imul(Z,be)|0,m=m+Math.imul(Z,we)|0,g=g+Math.imul(L,ve)|0,c=c+Math.imul(L,xe)|0,c=c+Math.imul(D,ve)|0,m=m+Math.imul(D,xe)|0;var Rr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,g=Math.imul(Ve,ce),c=Math.imul(Ve,ue),c=c+Math.imul(Ne,ce)|0,m=Math.imul(Ne,ue),g=g+Math.imul(ke,fe)|0,c=c+Math.imul(ke,le)|0,c=c+Math.imul(_e,fe)|0,m=m+Math.imul(_e,le)|0,g=g+Math.imul(Me,de)|0,c=c+Math.imul(Me,he)|0,c=c+Math.imul(Be,de)|0,m=m+Math.imul(Be,he)|0,g=g+Math.imul(te,pe)|0,c=c+Math.imul(te,ye)|0,c=c+Math.imul(ie,pe)|0,m=m+Math.imul(ie,ye)|0,g=g+Math.imul(ne,ge)|0,c=c+Math.imul(ne,me)|0,c=c+Math.imul(J,ge)|0,m=m+Math.imul(J,me)|0,g=g+Math.imul(X,be)|0,c=c+Math.imul(X,we)|0,c=c+Math.imul(Y,be)|0,m=m+Math.imul(Y,we)|0,g=g+Math.imul(W,ve)|0,c=c+Math.imul(W,xe)|0,c=c+Math.imul(Z,ve)|0,m=m+Math.imul(Z,xe)|0,g=g+Math.imul(L,Se)|0,c=c+Math.imul(L,Ae)|0,c=c+Math.imul(D,Se)|0,m=m+Math.imul(D,Ae)|0;var Cr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,g=Math.imul(Oe,ce),c=Math.imul(Oe,ue),c=c+Math.imul(Ue,ce)|0,m=Math.imul(Ue,ue),g=g+Math.imul(Ve,fe)|0,c=c+Math.imul(Ve,le)|0,c=c+Math.imul(Ne,fe)|0,m=m+Math.imul(Ne,le)|0,g=g+Math.imul(ke,de)|0,c=c+Math.imul(ke,he)|0,c=c+Math.imul(_e,de)|0,m=m+Math.imul(_e,he)|0,g=g+Math.imul(Me,pe)|0,c=c+Math.imul(Me,ye)|0,c=c+Math.imul(Be,pe)|0,m=m+Math.imul(Be,ye)|0,g=g+Math.imul(te,ge)|0,c=c+Math.imul(te,me)|0,c=c+Math.imul(ie,ge)|0,m=m+Math.imul(ie,me)|0,g=g+Math.imul(ne,be)|0,c=c+Math.imul(ne,we)|0,c=c+Math.imul(J,be)|0,m=m+Math.imul(J,we)|0,g=g+Math.imul(X,ve)|0,c=c+Math.imul(X,xe)|0,c=c+Math.imul(Y,ve)|0,m=m+Math.imul(Y,xe)|0,g=g+Math.imul(W,Se)|0,c=c+Math.imul(W,Ae)|0,c=c+Math.imul(Z,Se)|0,m=m+Math.imul(Z,Ae)|0,g=g+Math.imul(L,Ee)|0,c=c+Math.imul(L,Te)|0,c=c+Math.imul(D,Ee)|0,m=m+Math.imul(D,Te)|0;var Dr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,g=Math.imul(se,ce),c=Math.imul(se,ue),c=c+Math.imul(ae,ce)|0,m=Math.imul(ae,ue),g=g+Math.imul(Oe,fe)|0,c=c+Math.imul(Oe,le)|0,c=c+Math.imul(Ue,fe)|0,m=m+Math.imul(Ue,le)|0,g=g+Math.imul(Ve,de)|0,c=c+Math.imul(Ve,he)|0,c=c+Math.imul(Ne,de)|0,m=m+Math.imul(Ne,he)|0,g=g+Math.imul(ke,pe)|0,c=c+Math.imul(ke,ye)|0,c=c+Math.imul(_e,pe)|0,m=m+Math.imul(_e,ye)|0,g=g+Math.imul(Me,ge)|0,c=c+Math.imul(Me,me)|0,c=c+Math.imul(Be,ge)|0,m=m+Math.imul(Be,me)|0,g=g+Math.imul(te,be)|0,c=c+Math.imul(te,we)|0,c=c+Math.imul(ie,be)|0,m=m+Math.imul(ie,we)|0,g=g+Math.imul(ne,ve)|0,c=c+Math.imul(ne,xe)|0,c=c+Math.imul(J,ve)|0,m=m+Math.imul(J,xe)|0,g=g+Math.imul(X,Se)|0,c=c+Math.imul(X,Ae)|0,c=c+Math.imul(Y,Se)|0,m=m+Math.imul(Y,Ae)|0,g=g+Math.imul(W,Ee)|0,c=c+Math.imul(W,Te)|0,c=c+Math.imul(Z,Ee)|0,m=m+Math.imul(Z,Te)|0,g=g+Math.imul(L,Ie)|0,c=c+Math.imul(L,Pe)|0,c=c+Math.imul(D,Ie)|0,m=m+Math.imul(D,Pe)|0;var Kr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(se,fe),c=Math.imul(se,le),c=c+Math.imul(ae,fe)|0,m=Math.imul(ae,le),g=g+Math.imul(Oe,de)|0,c=c+Math.imul(Oe,he)|0,c=c+Math.imul(Ue,de)|0,m=m+Math.imul(Ue,he)|0,g=g+Math.imul(Ve,pe)|0,c=c+Math.imul(Ve,ye)|0,c=c+Math.imul(Ne,pe)|0,m=m+Math.imul(Ne,ye)|0,g=g+Math.imul(ke,ge)|0,c=c+Math.imul(ke,me)|0,c=c+Math.imul(_e,ge)|0,m=m+Math.imul(_e,me)|0,g=g+Math.imul(Me,be)|0,c=c+Math.imul(Me,we)|0,c=c+Math.imul(Be,be)|0,m=m+Math.imul(Be,we)|0,g=g+Math.imul(te,ve)|0,c=c+Math.imul(te,xe)|0,c=c+Math.imul(ie,ve)|0,m=m+Math.imul(ie,xe)|0,g=g+Math.imul(ne,Se)|0,c=c+Math.imul(ne,Ae)|0,c=c+Math.imul(J,Se)|0,m=m+Math.imul(J,Ae)|0,g=g+Math.imul(X,Ee)|0,c=c+Math.imul(X,Te)|0,c=c+Math.imul(Y,Ee)|0,m=m+Math.imul(Y,Te)|0,g=g+Math.imul(W,Ie)|0,c=c+Math.imul(W,Pe)|0,c=c+Math.imul(Z,Ie)|0,m=m+Math.imul(Z,Pe)|0;var qr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,g=Math.imul(se,de),c=Math.imul(se,he),c=c+Math.imul(ae,de)|0,m=Math.imul(ae,he),g=g+Math.imul(Oe,pe)|0,c=c+Math.imul(Oe,ye)|0,c=c+Math.imul(Ue,pe)|0,m=m+Math.imul(Ue,ye)|0,g=g+Math.imul(Ve,ge)|0,c=c+Math.imul(Ve,me)|0,c=c+Math.imul(Ne,ge)|0,m=m+Math.imul(Ne,me)|0,g=g+Math.imul(ke,be)|0,c=c+Math.imul(ke,we)|0,c=c+Math.imul(_e,be)|0,m=m+Math.imul(_e,we)|0,g=g+Math.imul(Me,ve)|0,c=c+Math.imul(Me,xe)|0,c=c+Math.imul(Be,ve)|0,m=m+Math.imul(Be,xe)|0,g=g+Math.imul(te,Se)|0,c=c+Math.imul(te,Ae)|0,c=c+Math.imul(ie,Se)|0,m=m+Math.imul(ie,Ae)|0,g=g+Math.imul(ne,Ee)|0,c=c+Math.imul(ne,Te)|0,c=c+Math.imul(J,Ee)|0,m=m+Math.imul(J,Te)|0,g=g+Math.imul(X,Ie)|0,c=c+Math.imul(X,Pe)|0,c=c+Math.imul(Y,Ie)|0,m=m+Math.imul(Y,Pe)|0;var Hr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,g=Math.imul(se,pe),c=Math.imul(se,ye),c=c+Math.imul(ae,pe)|0,m=Math.imul(ae,ye),g=g+Math.imul(Oe,ge)|0,c=c+Math.imul(Oe,me)|0,c=c+Math.imul(Ue,ge)|0,m=m+Math.imul(Ue,me)|0,g=g+Math.imul(Ve,be)|0,c=c+Math.imul(Ve,we)|0,c=c+Math.imul(Ne,be)|0,m=m+Math.imul(Ne,we)|0,g=g+Math.imul(ke,ve)|0,c=c+Math.imul(ke,xe)|0,c=c+Math.imul(_e,ve)|0,m=m+Math.imul(_e,xe)|0,g=g+Math.imul(Me,Se)|0,c=c+Math.imul(Me,Ae)|0,c=c+Math.imul(Be,Se)|0,m=m+Math.imul(Be,Ae)|0,g=g+Math.imul(te,Ee)|0,c=c+Math.imul(te,Te)|0,c=c+Math.imul(ie,Ee)|0,m=m+Math.imul(ie,Te)|0,g=g+Math.imul(ne,Ie)|0,c=c+Math.imul(ne,Pe)|0,c=c+Math.imul(J,Ie)|0,m=m+Math.imul(J,Pe)|0;var jr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,g=Math.imul(se,ge),c=Math.imul(se,me),c=c+Math.imul(ae,ge)|0,m=Math.imul(ae,me),g=g+Math.imul(Oe,be)|0,c=c+Math.imul(Oe,we)|0,c=c+Math.imul(Ue,be)|0,m=m+Math.imul(Ue,we)|0,g=g+Math.imul(Ve,ve)|0,c=c+Math.imul(Ve,xe)|0,c=c+Math.imul(Ne,ve)|0,m=m+Math.imul(Ne,xe)|0,g=g+Math.imul(ke,Se)|0,c=c+Math.imul(ke,Ae)|0,c=c+Math.imul(_e,Se)|0,m=m+Math.imul(_e,Ae)|0,g=g+Math.imul(Me,Ee)|0,c=c+Math.imul(Me,Te)|0,c=c+Math.imul(Be,Ee)|0,m=m+Math.imul(Be,Te)|0,g=g+Math.imul(te,Ie)|0,c=c+Math.imul(te,Pe)|0,c=c+Math.imul(ie,Ie)|0,m=m+Math.imul(ie,Pe)|0;var Fr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,g=Math.imul(se,be),c=Math.imul(se,we),c=c+Math.imul(ae,be)|0,m=Math.imul(ae,we),g=g+Math.imul(Oe,ve)|0,c=c+Math.imul(Oe,xe)|0,c=c+Math.imul(Ue,ve)|0,m=m+Math.imul(Ue,xe)|0,g=g+Math.imul(Ve,Se)|0,c=c+Math.imul(Ve,Ae)|0,c=c+Math.imul(Ne,Se)|0,m=m+Math.imul(Ne,Ae)|0,g=g+Math.imul(ke,Ee)|0,c=c+Math.imul(ke,Te)|0,c=c+Math.imul(_e,Ee)|0,m=m+Math.imul(_e,Te)|0,g=g+Math.imul(Me,Ie)|0,c=c+Math.imul(Me,Pe)|0,c=c+Math.imul(Be,Ie)|0,m=m+Math.imul(Be,Pe)|0;var Wr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,g=Math.imul(se,ve),c=Math.imul(se,xe),c=c+Math.imul(ae,ve)|0,m=Math.imul(ae,xe),g=g+Math.imul(Oe,Se)|0,c=c+Math.imul(Oe,Ae)|0,c=c+Math.imul(Ue,Se)|0,m=m+Math.imul(Ue,Ae)|0,g=g+Math.imul(Ve,Ee)|0,c=c+Math.imul(Ve,Te)|0,c=c+Math.imul(Ne,Ee)|0,m=m+Math.imul(Ne,Te)|0,g=g+Math.imul(ke,Ie)|0,c=c+Math.imul(ke,Pe)|0,c=c+Math.imul(_e,Ie)|0,m=m+Math.imul(_e,Pe)|0;var $r=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,g=Math.imul(se,Se),c=Math.imul(se,Ae),c=c+Math.imul(ae,Se)|0,m=Math.imul(ae,Ae),g=g+Math.imul(Oe,Ee)|0,c=c+Math.imul(Oe,Te)|0,c=c+Math.imul(Ue,Ee)|0,m=m+Math.imul(Ue,Te)|0,g=g+Math.imul(Ve,Ie)|0,c=c+Math.imul(Ve,Pe)|0,c=c+Math.imul(Ne,Ie)|0,m=m+Math.imul(Ne,Pe)|0;var zr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(se,Ee),c=Math.imul(se,Te),c=c+Math.imul(ae,Ee)|0,m=Math.imul(ae,Te),g=g+Math.imul(Oe,Ie)|0,c=c+Math.imul(Oe,Pe)|0,c=c+Math.imul(Ue,Ie)|0,m=m+Math.imul(Ue,Pe)|0;var Wi=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,g=Math.imul(se,Ie),c=Math.imul(se,Pe),c=c+Math.imul(ae,Ie)|0,m=Math.imul(ae,Pe);var $i=(E+g|0)+((c&8191)<<13)|0;return E=(m+(c>>>13)|0)+($i>>>26)|0,$i&=67108863,w[0]=_r,w[1]=Vr,w[2]=Nr,w[3]=Or,w[4]=Ur,w[5]=Lr,w[6]=Rr,w[7]=Cr,w[8]=Dr,w[9]=Kr,w[10]=qr,w[11]=Hr,w[12]=jr,w[13]=Fr,w[14]=Wr,w[15]=$r,w[16]=zr,w[17]=Wi,w[18]=$i,E!==0&&(w[19]=E,d.length++),d};Math.imul||(B=P);function I(x,s,f){f.negative=s.negative^x.negative,f.length=x.length+s.length;for(var d=0,y=0,p=0;p<f.length-1;p++){var w=y;y=0;for(var E=d&67108863,g=Math.min(p,s.length-1),c=Math.max(0,p-x.length+1);c<=g;c++){var m=p-c,O=x.words[m]|0,L=s.words[c]|0,D=O*L,j=D&67108863;w=w+(D/67108864|0)|0,j=j+E|0,E=j&67108863,w=w+(j>>>26)|0,y+=w>>>26,w&=67108863}f.words[p]=E,d=w,w=y}return d!==0?f.words[p]=d:f.length--,f.strip()}function _(x,s,f){var d=new V;return d.mulp(x,s,f)}i.prototype.mulTo=function(s,f){var d,y=this.length+s.length;return this.length===10&&s.length===10?d=B(this,s,f):y<63?d=P(this,s,f):y<1024?d=I(this,s,f):d=_(this,s,f),d};function V(x,s){this.x=x,this.y=s}V.prototype.makeRBT=function(s){for(var f=new Array(s),d=i.prototype._countBits(s)-1,y=0;y<s;y++)f[y]=this.revBin(y,d,s);return f},V.prototype.revBin=function(s,f,d){if(s===0||s===d-1)return s;for(var y=0,p=0;p<f;p++)y|=(s&1)<<f-p-1,s>>=1;return y},V.prototype.permute=function(s,f,d,y,p,w){for(var E=0;E<w;E++)y[E]=f[s[E]],p[E]=d[s[E]]},V.prototype.transform=function(s,f,d,y,p,w){this.permute(w,s,f,d,y,p);for(var E=1;E<p;E<<=1)for(var g=E<<1,c=Math.cos(2*Math.PI/g),m=Math.sin(2*Math.PI/g),O=0;O<p;O+=g)for(var L=c,D=m,j=0;j<E;j++){var W=d[O+j],Z=y[O+j],Re=d[O+j+E],X=y[O+j+E],Y=L*Re-D*X;X=L*X+D*Re,Re=Y,d[O+j]=W+Re,y[O+j]=Z+X,d[O+j+E]=W-Re,y[O+j+E]=Z-X,j!==g&&(Y=c*L-m*D,D=c*D+m*L,L=Y)}},V.prototype.guessLen13b=function(s,f){var d=Math.max(f,s)|1,y=d&1,p=0;for(d=d/2|0;d;d=d>>>1)p++;return 1<<p+1+y},V.prototype.conjugate=function(s,f,d){if(!(d<=1))for(var y=0;y<d/2;y++){var p=s[y];s[y]=s[d-y-1],s[d-y-1]=p,p=f[y],f[y]=-f[d-y-1],f[d-y-1]=-p}},V.prototype.normalize13b=function(s,f){for(var d=0,y=0;y<f/2;y++){var p=Math.round(s[2*y+1]/f)*8192+Math.round(s[2*y]/f)+d;s[y]=p&67108863,p<67108864?d=0:d=p/67108864|0}return s},V.prototype.convert13b=function(s,f,d,y){for(var p=0,w=0;w<f;w++)p=p+(s[w]|0),d[2*w]=p&8191,p=p>>>13,d[2*w+1]=p&8191,p=p>>>13;for(w=2*f;w<y;++w)d[w]=0;r(p===0),r((p&-8192)===0)},V.prototype.stub=function(s){for(var f=new Array(s),d=0;d<s;d++)f[d]=0;return f},V.prototype.mulp=function(s,f,d){var y=2*this.guessLen13b(s.length,f.length),p=this.makeRBT(y),w=this.stub(y),E=new Array(y),g=new Array(y),c=new Array(y),m=new Array(y),O=new Array(y),L=new Array(y),D=d.words;D.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(f.words,f.length,m,y),this.transform(E,w,g,c,y,p),this.transform(m,w,O,L,y,p);for(var j=0;j<y;j++){var W=g[j]*O[j]-c[j]*L[j];c[j]=g[j]*L[j]+c[j]*O[j],g[j]=W}return this.conjugate(g,c,y),this.transform(g,c,D,w,y,p),this.conjugate(D,w,y),this.normalize13b(D,y),d.negative=s.negative^f.negative,d.length=s.length+f.length,d.strip()},i.prototype.mul=function(s){var f=new i(null);return f.words=new Array(this.length+s.length),this.mulTo(s,f)},i.prototype.mulf=function(s){var f=new i(null);return f.words=new Array(this.length+s.length),_(this,s,f)},i.prototype.imul=function(s){return this.clone().mulTo(s,this)},i.prototype.imuln=function(s){r(typeof s=="number"),r(s<67108864);for(var f=0,d=0;d<this.length;d++){var y=(this.words[d]|0)*s,p=(y&67108863)+(f&67108863);f>>=26,f+=y/67108864|0,f+=p>>>26,this.words[d]=p&67108863}return f!==0&&(this.words[d]=f,this.length++),this},i.prototype.muln=function(s){return this.clone().imuln(s)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(s){var f=T(s);if(f.length===0)return new i(1);for(var d=this,y=0;y<f.length&&f[y]===0;y++,d=d.sqr());if(++y<f.length)for(var p=d.sqr();y<f.length;y++,p=p.sqr())f[y]!==0&&(d=d.mul(p));return d},i.prototype.iushln=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26,y=67108863>>>26-f<<26-f,p;if(f!==0){var w=0;for(p=0;p<this.length;p++){var E=this.words[p]&y,g=(this.words[p]|0)-E<<f;this.words[p]=g|w,w=E>>>26-f}w&&(this.words[p]=w,this.length++)}if(d!==0){for(p=this.length-1;p>=0;p--)this.words[p+d]=this.words[p];for(p=0;p<d;p++)this.words[p]=0;this.length+=d}return this.strip()},i.prototype.ishln=function(s){return r(this.negative===0),this.iushln(s)},i.prototype.iushrn=function(s,f,d){r(typeof s=="number"&&s>=0);var y;f?y=(f-f%26)/26:y=0;var p=s%26,w=Math.min((s-p)/26,this.length),E=67108863^67108863>>>p<<p,g=d;if(y-=w,y=Math.max(0,y),g){for(var c=0;c<w;c++)g.words[c]=this.words[c];g.length=w}if(w!==0)if(this.length>w)for(this.length-=w,c=0;c<this.length;c++)this.words[c]=this.words[c+w];else this.words[0]=0,this.length=1;var m=0;for(c=this.length-1;c>=0&&(m!==0||c>=y);c--){var O=this.words[c]|0;this.words[c]=m<<26-p|O>>>p,m=O&E}return g&&m!==0&&(g.words[g.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(s,f,d){return r(this.negative===0),this.iushrn(s,f,d)},i.prototype.shln=function(s){return this.clone().ishln(s)},i.prototype.ushln=function(s){return this.clone().iushln(s)},i.prototype.shrn=function(s){return this.clone().ishrn(s)},i.prototype.ushrn=function(s){return this.clone().iushrn(s)},i.prototype.testn=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26,y=1<<f;if(this.length<=d)return!1;var p=this.words[d];return!!(p&y)},i.prototype.imaskn=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(f!==0&&d++,this.length=Math.min(d,this.length),f!==0){var y=67108863^67108863>>>f<<f;this.words[this.length-1]&=y}return this.strip()},i.prototype.maskn=function(s){return this.clone().imaskn(s)},i.prototype.iaddn=function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},i.prototype._iaddn=function(s){this.words[0]+=s;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},i.prototype.addn=function(s){return this.clone().iaddn(s)},i.prototype.subn=function(s){return this.clone().isubn(s)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(s,f,d){var y=s.length+d,p;this._expand(y);var w,E=0;for(p=0;p<s.length;p++){w=(this.words[p+d]|0)+E;var g=(s.words[p]|0)*f;w-=g&67108863,E=(w>>26)-(g/67108864|0),this.words[p+d]=w&67108863}for(;p<this.length-d;p++)w=(this.words[p+d]|0)+E,E=w>>26,this.words[p+d]=w&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,p=0;p<this.length;p++)w=-(this.words[p]|0)+E,E=w>>26,this.words[p]=w&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(s,f){var d=this.length-s.length,y=this.clone(),p=s,w=p.words[p.length-1]|0,E=this._countBits(w);d=26-E,d!==0&&(p=p.ushln(d),y.iushln(d),w=p.words[p.length-1]|0);var g=y.length-p.length,c;if(f!=="mod"){c=new i(null),c.length=g+1,c.words=new Array(c.length);for(var m=0;m<c.length;m++)c.words[m]=0}var O=y.clone()._ishlnsubmul(p,1,g);O.negative===0&&(y=O,c&&(c.words[g]=1));for(var L=g-1;L>=0;L--){var D=(y.words[p.length+L]|0)*67108864+(y.words[p.length+L-1]|0);for(D=Math.min(D/w|0,67108863),y._ishlnsubmul(p,D,L);y.negative!==0;)D--,y.negative=0,y._ishlnsubmul(p,1,L),y.isZero()||(y.negative^=1);c&&(c.words[L]=D)}return c&&c.strip(),y.strip(),f!=="div"&&d!==0&&y.iushrn(d),{div:c||null,mod:y}},i.prototype.divmod=function(s,f,d){if(r(!s.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var y,p,w;return this.negative!==0&&s.negative===0?(w=this.neg().divmod(s,f),f!=="mod"&&(y=w.div.neg()),f!=="div"&&(p=w.mod.neg(),d&&p.negative!==0&&p.iadd(s)),{div:y,mod:p}):this.negative===0&&s.negative!==0?(w=this.divmod(s.neg(),f),f!=="mod"&&(y=w.div.neg()),{div:y,mod:w.mod}):this.negative&s.negative?(w=this.neg().divmod(s.neg(),f),f!=="div"&&(p=w.mod.neg(),d&&p.negative!==0&&p.isub(s)),{div:w.div,mod:p}):s.length>this.length||this.cmp(s)<0?{div:new i(0),mod:this}:s.length===1?f==="div"?{div:this.divn(s.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new i(this.modn(s.words[0]))}:this._wordDiv(s,f)},i.prototype.div=function(s){return this.divmod(s,"div",!1).div},i.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},i.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},i.prototype.divRound=function(s){var f=this.divmod(s);if(f.mod.isZero())return f.div;var d=f.div.negative!==0?f.mod.isub(s):f.mod,y=s.ushrn(1),p=s.andln(1),w=d.cmp(y);return w<0||p===1&&w===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modn=function(s){r(s<=67108863);for(var f=(1<<26)%s,d=0,y=this.length-1;y>=0;y--)d=(f*d+(this.words[y]|0))%s;return d},i.prototype.idivn=function(s){r(s<=67108863);for(var f=0,d=this.length-1;d>=0;d--){var y=(this.words[d]|0)+f*67108864;this.words[d]=y/s|0,f=y%s}return this.strip()},i.prototype.divn=function(s){return this.clone().idivn(s)},i.prototype.egcd=function(s){r(s.negative===0),r(!s.isZero());var f=this,d=s.clone();f.negative!==0?f=f.umod(s):f=f.clone();for(var y=new i(1),p=new i(0),w=new i(0),E=new i(1),g=0;f.isEven()&&d.isEven();)f.iushrn(1),d.iushrn(1),++g;for(var c=d.clone(),m=f.clone();!f.isZero();){for(var O=0,L=1;!(f.words[0]&L)&&O<26;++O,L<<=1);if(O>0)for(f.iushrn(O);O-- >0;)(y.isOdd()||p.isOdd())&&(y.iadd(c),p.isub(m)),y.iushrn(1),p.iushrn(1);for(var D=0,j=1;!(d.words[0]&j)&&D<26;++D,j<<=1);if(D>0)for(d.iushrn(D);D-- >0;)(w.isOdd()||E.isOdd())&&(w.iadd(c),E.isub(m)),w.iushrn(1),E.iushrn(1);f.cmp(d)>=0?(f.isub(d),y.isub(w),p.isub(E)):(d.isub(f),w.isub(y),E.isub(p))}return{a:w,b:E,gcd:d.iushln(g)}},i.prototype._invmp=function(s){r(s.negative===0),r(!s.isZero());var f=this,d=s.clone();f.negative!==0?f=f.umod(s):f=f.clone();for(var y=new i(1),p=new i(0),w=d.clone();f.cmpn(1)>0&&d.cmpn(1)>0;){for(var E=0,g=1;!(f.words[0]&g)&&E<26;++E,g<<=1);if(E>0)for(f.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(w),y.iushrn(1);for(var c=0,m=1;!(d.words[0]&m)&&c<26;++c,m<<=1);if(c>0)for(d.iushrn(c);c-- >0;)p.isOdd()&&p.iadd(w),p.iushrn(1);f.cmp(d)>=0?(f.isub(d),y.isub(p)):(d.isub(f),p.isub(y))}var O;return f.cmpn(1)===0?O=y:O=p,O.cmpn(0)<0&&O.iadd(s),O},i.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var f=this.clone(),d=s.clone();f.negative=0,d.negative=0;for(var y=0;f.isEven()&&d.isEven();y++)f.iushrn(1),d.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;d.isEven();)d.iushrn(1);var p=f.cmp(d);if(p<0){var w=f;f=d,d=w}else if(p===0||d.cmpn(1)===0)break;f.isub(d)}while(!0);return d.iushln(y)},i.prototype.invm=function(s){return this.egcd(s).a.umod(s)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(s){return this.words[0]&s},i.prototype.bincn=function(s){r(typeof s=="number");var f=s%26,d=(s-f)/26,y=1<<f;if(this.length<=d)return this._expand(d+1),this.words[d]|=y,this;for(var p=y,w=d;p!==0&&w<this.length;w++){var E=this.words[w]|0;E+=p,p=E>>>26,E&=67108863,this.words[w]=E}return p!==0&&(this.words[w]=p,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(s){var f=s<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this.strip();var d;if(this.length>1)d=1;else{f&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;d=y===s?0:y<s?-1:1}return this.negative!==0?-d|0:d},i.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var f=this.ucmp(s);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var f=0,d=this.length-1;d>=0;d--){var y=this.words[d]|0,p=s.words[d]|0;if(y!==p){y<p?f=-1:y>p&&(f=1);break}}return f},i.prototype.gtn=function(s){return this.cmpn(s)===1},i.prototype.gt=function(s){return this.cmp(s)===1},i.prototype.gten=function(s){return this.cmpn(s)>=0},i.prototype.gte=function(s){return this.cmp(s)>=0},i.prototype.ltn=function(s){return this.cmpn(s)===-1},i.prototype.lt=function(s){return this.cmp(s)===-1},i.prototype.lten=function(s){return this.cmpn(s)<=0},i.prototype.lte=function(s){return this.cmp(s)<=0},i.prototype.eqn=function(s){return this.cmpn(s)===0},i.prototype.eq=function(s){return this.cmp(s)===0},i.red=function(s){return new U(s)},i.prototype.toRed=function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(s){return this.red=s,this},i.prototype.forceRed=function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},i.prototype.redAdd=function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},i.prototype.redIAdd=function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},i.prototype.redSub=function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},i.prototype.redISub=function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},i.prototype.redShl=function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},i.prototype.redMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},i.prototype.redIMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var R={k256:null,p224:null,p192:null,p25519:null};function N(x,s){this.name=x,this.p=new i(s,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}N.prototype._tmp=function(){var s=new i(null);return s.words=new Array(Math.ceil(this.n/13)),s},N.prototype.ireduce=function(s){var f=s,d;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),d=f.bitLength();while(d>this.n);var y=d<this.n?-1:f.ucmp(this.p);return y===0?(f.words[0]=0,f.length=1):y>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},N.prototype.split=function(s,f){s.iushrn(this.n,0,f)},N.prototype.imulK=function(s){return s.imul(this.k)};function H(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(H,N),H.prototype.split=function(s,f){for(var d=4194303,y=Math.min(s.length,9),p=0;p<y;p++)f.words[p]=s.words[p];if(f.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var w=s.words[9];for(f.words[f.length++]=w&d,p=10;p<s.length;p++){var E=s.words[p]|0;s.words[p-10]=(E&d)<<4|w>>>22,w=E}w>>>=22,s.words[p-10]=w,w===0&&s.length>10?s.length-=10:s.length-=9},H.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var f=0,d=0;d<s.length;d++){var y=s.words[d]|0;f+=y*977,s.words[d]=f&67108863,f=y*64+(f/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function K(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(K,N);function C(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(C,N);function q(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(q,N),q.prototype.imulK=function(s){for(var f=0,d=0;d<s.length;d++){var y=(s.words[d]|0)*19+f,p=y&67108863;y>>>=26,s.words[d]=p,f=y}return f!==0&&(s.words[s.length++]=f),s},i._prime=function(s){if(R[s])return R[s];var f;if(s==="k256")f=new H;else if(s==="p224")f=new K;else if(s==="p192")f=new C;else if(s==="p25519")f=new q;else throw new Error("Unknown prime "+s);return R[s]=f,f};function U(x){if(typeof x=="string"){var s=i._prime(x);this.m=s.p,this.prime=s}else r(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}U.prototype._verify1=function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},U.prototype._verify2=function(s,f){r((s.negative|f.negative)===0,"red works only with positives"),r(s.red&&s.red===f.red,"red works only with red numbers")},U.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},U.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},U.prototype.add=function(s,f){this._verify2(s,f);var d=s.add(f);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},U.prototype.iadd=function(s,f){this._verify2(s,f);var d=s.iadd(f);return d.cmp(this.m)>=0&&d.isub(this.m),d},U.prototype.sub=function(s,f){this._verify2(s,f);var d=s.sub(f);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},U.prototype.isub=function(s,f){this._verify2(s,f);var d=s.isub(f);return d.cmpn(0)<0&&d.iadd(this.m),d},U.prototype.shl=function(s,f){return this._verify1(s),this.imod(s.ushln(f))},U.prototype.imul=function(s,f){return this._verify2(s,f),this.imod(s.imul(f))},U.prototype.mul=function(s,f){return this._verify2(s,f),this.imod(s.mul(f))},U.prototype.isqr=function(s){return this.imul(s,s.clone())},U.prototype.sqr=function(s){return this.mul(s,s)},U.prototype.sqrt=function(s){if(s.isZero())return s.clone();var f=this.m.andln(3);if(r(f%2===1),f===3){var d=this.m.add(new i(1)).iushrn(2);return this.pow(s,d)}for(var y=this.m.subn(1),p=0;!y.isZero()&&y.andln(1)===0;)p++,y.iushrn(1);r(!y.isZero());var w=new i(1).toRed(this),E=w.redNeg(),g=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,g).cmp(E)!==0;)c.redIAdd(E);for(var m=this.pow(c,y),O=this.pow(s,y.addn(1).iushrn(1)),L=this.pow(s,y),D=p;L.cmp(w)!==0;){for(var j=L,W=0;j.cmp(w)!==0;W++)j=j.redSqr();r(W<D);var Z=this.pow(m,new i(1).iushln(D-W-1));O=O.redMul(Z),m=Z.redSqr(),L=L.redMul(m),D=W}return O},U.prototype.invm=function(s){var f=s._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},U.prototype.pow=function(s,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return s.clone();var d=4,y=new Array(1<<d);y[0]=new i(1).toRed(this),y[1]=s;for(var p=2;p<y.length;p++)y[p]=this.mul(y[p-1],s);var w=y[0],E=0,g=0,c=f.bitLength()%26;for(c===0&&(c=26),p=f.length-1;p>=0;p--){for(var m=f.words[p],O=c-1;O>=0;O--){var L=m>>O&1;if(w!==y[0]&&(w=this.sqr(w)),L===0&&E===0){g=0;continue}E<<=1,E|=L,g++,!(g!==d&&(p!==0||O!==0))&&(w=this.mul(w,y[E]),g=0,E=0)}c=26}return w},U.prototype.convertTo=function(s){var f=s.umod(this.m);return f===s?f.clone():f},U.prototype.convertFrom=function(s){var f=s.clone();return f.red=null,f},i.mont=function(s){return new G(s)};function G(x){U.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(G,U),G.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},G.prototype.convertFrom=function(s){var f=this.imod(s.mul(this.rinv));return f.red=null,f},G.prototype.imul=function(s,f){if(s.isZero()||f.isZero())return s.words[0]=0,s.length=1,s;var d=s.imul(f),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=d.isub(y).iushrn(this.shift),w=p;return p.cmp(this.m)>=0?w=p.isub(this.m):p.cmpn(0)<0&&(w=p.iadd(this.m)),w._forceRed(this)},G.prototype.mul=function(s,f){if(s.isZero()||f.isZero())return new i(0)._forceRed(this);var d=s.mul(f),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=d.isub(y).iushrn(this.shift),w=p;return p.cmp(this.m)>=0?w=p.isub(this.m):p.cmpn(0)<0&&(w=p.iadd(this.m)),w._forceRed(this)},G.prototype.invm=function(s){var f=this.imod(s._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(typeof nh>"u"||nh,Lb)});var Cb=F(as=>{"use strict";S();A();Object.defineProperty(as,"__esModule",{value:!0});var ho=lo(),B8=my().ec,ih=new B8("secp256k1"),ss=ih.curve;as.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new ho(e);if(r.ucmp(ss.n)>=0)throw new Error("couldn't export to DER format");var n=ih.g.mul(r);return Rb(n.getX(),n.getY(),t)};as.privateKeyModInverse=function(e){var t=new ho(e);if(t.ucmp(ss.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(ss.n).toArrayLike(Buffer,"be",32)};as.signatureImport=function(e){var t=new ho(e.r);t.ucmp(ss.n)>=0&&(t=new ho(0));var r=new ho(e.s);return r.ucmp(ss.n)>=0&&(r=new ho(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};as.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var n=ih.keyFromPublic(e),i=new ho(t);if(i.ucmp(ss.n)>=0||i.isZero())throw new Error("scalar was invalid (zero or overflow)");var o=n.pub.mul(i);return Rb(o.getX(),o.getY(),r)};var Rb=function(e,t,r){var n;return r?(n=Buffer.alloc(33),n[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(n,1)):(n=Buffer.alloc(65),n[0]=4,e.toArrayLike(Buffer,"be",32).copy(n,1),t.toArrayLike(Buffer,"be",32).copy(n,33)),n}});var Db=F(Ma=>{"use strict";S();A();Object.defineProperty(Ma,"__esModule",{value:!0});var{Buffer:Pa}=zi(),k8=Pa.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),_8=Pa.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);Ma.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var n=Pa.from(r?k8:_8);return e.copy(n,r?8:9),t.copy(n,r?181:214),n};Ma.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var n=e[r]&127;if(r+=1,n<1||n>2||t<r+n)return null;var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return r+=n,t<r+i||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};Ma.signatureImportLax=function(e){var t=Pa.alloc(32,0),r=Pa.alloc(32,0),n=e.length,i=0;if(e[i++]!==48)return null;var o=e[i++];if(o&128&&(i+=o-128,i>n)||e[i++]!==2)return null;var a=e[i++];if(a&128){if(o=a-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(a=0;o>0;i+=1,o-=1)a=(a<<8)+e[i]}if(a>n-i)return null;var u=i;if(i+=a,e[i++]!==2)return null;var l=e[i++];if(l&128){if(o=l-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(l=0;o>0;i+=1,o-=1)l=(l<<8)+e[i]}if(l>n-i)return null;var h=i;for(i+=l;a>0&&e[u]===0;a-=1,u+=1);if(a>32)return null;var v=e.slice(u,u+a);for(v.copy(t,32-v.length);l>0&&e[h]===0;l-=1,h+=1);if(l>32)return null;var b=e.slice(h,h+l);return b.copy(r,32-b.length),{r:t,s:r}}});var Au=F(oe=>{"use strict";S();A();Object.defineProperty(oe,"__esModule",{value:!0});oe.ecdhUnsafe=oe.ecdh=oe.recover=oe.verify=oe.sign=oe.signatureImportLax=oe.signatureImport=oe.signatureExport=oe.signatureNormalize=oe.publicKeyCombine=oe.publicKeyTweakMul=oe.publicKeyTweakAdd=oe.publicKeyVerify=oe.publicKeyConvert=oe.publicKeyCreate=oe.privateKeyTweakMul=oe.privateKeyTweakAdd=oe.privateKeyModInverse=oe.privateKeyNegate=oe.privateKeyImport=oe.privateKeyExport=oe.privateKeyVerify=void 0;var Kt=Ub(),Su=Cb(),oh=Db();oe.privateKeyVerify=function(e){return e.length!==32?!1:Kt.privateKeyVerify(Uint8Array.from(e))};oe.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=Su.privateKeyExport(e,t);return oh.privateKeyExport(e,r,t)};oe.privateKeyImport=function(e){if(e=oh.privateKeyImport(e),e!==null&&e.length===32&&oe.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};oe.privateKeyNegate=function(e){return Buffer.from(Kt.privateKeyNegate(Uint8Array.from(e)))};oe.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(Su.privateKeyModInverse(Uint8Array.from(e)))};oe.privateKeyTweakAdd=function(e,t){return Buffer.from(Kt.privateKeyTweakAdd(Uint8Array.from(e),t))};oe.privateKeyTweakMul=function(e,t){return Buffer.from(Kt.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};oe.publicKeyCreate=function(e,t){return Buffer.from(Kt.publicKeyCreate(Uint8Array.from(e),t))};oe.publicKeyConvert=function(e,t){return Buffer.from(Kt.publicKeyConvert(Uint8Array.from(e),t))};oe.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:Kt.publicKeyVerify(Uint8Array.from(e))};oe.publicKeyTweakAdd=function(e,t,r){return Buffer.from(Kt.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};oe.publicKeyTweakMul=function(e,t,r){return Buffer.from(Kt.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};oe.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(n){r.push(Uint8Array.from(n))}),Buffer.from(Kt.publicKeyCombine(r,t))};oe.signatureNormalize=function(e){return Buffer.from(Kt.signatureNormalize(Uint8Array.from(e)))};oe.signatureExport=function(e){return Buffer.from(Kt.signatureExport(Uint8Array.from(e)))};oe.signatureImport=function(e){return Buffer.from(Kt.signatureImport(Uint8Array.from(e)))};oe.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=oh.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return Su.signatureImport(t)};oe.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var n=void 0;if(r){if(n={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");n.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(n.noncefn=function(o,a,u,l,h){var v=u!=null?Buffer.from(u):null,b=l!=null?Buffer.from(l):null,T=Buffer.from("");return r.noncefn&&(T=r.noncefn(Buffer.from(o),Buffer.from(a),v,b,h)),new Uint8Array(T)})}var i=Kt.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),n);return{signature:Buffer.from(i.signature),recovery:i.recid}};oe.verify=function(e,t,r){return Kt.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};oe.recover=function(e,t,r,n){return Buffer.from(Kt.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),n))};oe.ecdh=function(e,t){return Buffer.from(Kt.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};oe.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(Su.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var sh=F((hU,Kb)=>{S();A();Kb.exports=function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}});var Hb=F((gU,qb)=>{S();A();var V8=sh();qb.exports=function(t){return typeof t!="string"?t:V8(t)?t.slice(2):t}});var po=F((wU,Wb)=>{"use strict";S();A();var N8=sh(),jb=Hb();function Eu(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function Fb(e){var t=e.toString(16);return"0x"+t}function O8(e){var t=Fb(e);return new Buffer(Eu(t.slice(2)),"hex")}function U8(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}function L8(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(n){return e.indexOf(n)>=0})}function R8(e){var t=new Buffer(Eu(jb(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}function C8(e){var t="",r=0,n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}function D8(e){var t=new Buffer(e,"utf8");return"0x"+Eu(t.toString("hex")).replace(/^0+|0+$/g,"")}function K8(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r),i=n.toString(16);t+=i.length<2?"0"+i:i}return"0x"+t}function q8(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var o=e[i][t];if(r&&!o)o="";else if(typeof o!="string")throw new Error("invalid abi");n.push(o)}return n}function H8(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}Wb.exports={arrayContainsArray:L8,intToBuffer:O8,getBinarySize:U8,isHexPrefixed:N8,stripHexPrefix:jb,padToEven:Eu,intToHex:Fb,fromAscii:K8,fromUtf8:D8,toAscii:C8,toUtf8:R8,getKeys:q8,isHexString:H8}});var Tu=F(Sn=>{"use strict";S();A();var j8=Sn&&Sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.getLength=Sn.decode=Sn.encode=void 0;var F8=j8(eA());function zb(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(zb(e[r]));var n=Buffer.concat(t);return Buffer.concat([$b(n.length,192),n])}else{var i=fh(e);return i.length===1&&i[0]<128?i:Buffer.concat([$b(i.length,128),i])}}Sn.encode=zb;function ah(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function $b(e,t){if(e<56)return Buffer.from([e+t]);var r=uh(e),n=r.length/2,i=uh(t+55+n);return Buffer.from(i+r,"hex")}function W8(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=fh(e),n=ch(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid remainder");return n.data}Sn.decode=W8;function $8(e){if(!e||e.length===0)return Buffer.from([]);var t=fh(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var n=r-246,i=ah(t.slice(1,n).toString("hex"),16);return n+i}Sn.getLength=$8;function ch(e){var t,r,n,i,o,a=[],u=e[0];if(u<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(u<=183){if(t=u-127,u===128?n=Buffer.from([]):n=e.slice(1,t),t===2&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}else if(u<=191){if(r=u-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=ah(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(n=e.slice(r,t+r),n.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}else if(u<=247){for(t=u-191,i=e.slice(1,t);i.length;)o=ch(i),a.push(o.data),i=o.remainder;return{data:a,remainder:e.slice(t)}}else{r=u-246,t=ah(e.slice(1,r).toString("hex"),16);var l=r+t;if(l>e.length)throw new Error("invalid rlp: total length is larger than the data");if(i=e.slice(r,l),i.length===0)throw new Error("invalid rlp, List has a invalid length");for(;i.length;)o=ch(i),a.push(o.data),i=o.remainder;return{data:a,remainder:e.slice(l)}}}function Gb(e){return e.slice(0,2)==="0x"}function z8(e){return typeof e!="string"?e:Gb(e)?e.slice(2):e}function uh(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function G8(e){return e.length%2?"0"+e:e}function Z8(e){var t=uh(e);return Buffer.from(t,"hex")}function fh(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return Gb(e)?Buffer.from(G8(z8(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?Z8(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(F8.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}});var Yb=F(wt=>{"use strict";S();A();Object.defineProperty(wt,"__esModule",{value:!0});wt.KECCAK256_RLP=wt.KECCAK256_RLP_S=wt.KECCAK256_RLP_ARRAY=wt.KECCAK256_RLP_ARRAY_S=wt.KECCAK256_NULL=wt.KECCAK256_NULL_S=wt.TWO_POW256=wt.MAX_INTEGER=void 0;var Zb=lo(),{Buffer:lh}=zi();wt.MAX_INTEGER=new Zb("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);wt.TWO_POW256=new Zb("10000000000000000000000000000000000000000000000000000000000000000",16);wt.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";wt.KECCAK256_NULL=lh.from(wt.KECCAK256_NULL_S,"hex");wt.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";wt.KECCAK256_RLP_ARRAY=lh.from(wt.KECCAK256_RLP_ARRAY_S,"hex");wt.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";wt.KECCAK256_RLP=lh.from(wt.KECCAK256_RLP_S,"hex")});var Qb=F((MU,Xb)=>{"use strict";S();A();var Y8=Object.prototype.toString,J8=Function.prototype.toString,X8=/^\s*(?:function)?\*/,Jb=vl()(),dh=Object.getPrototypeOf,Q8=function(){if(!Jb)return!1;try{return Function("return function*() {}")()}catch{}},hh;Xb.exports=function(t){if(typeof t!="function")return!1;if(X8.test(J8.call(t)))return!0;if(!Jb){var r=Y8.call(t);return r==="[object GeneratorFunction]"}if(!dh)return!1;if(typeof hh>"u"){var n=Q8();hh=n?dh(n):!1}return dh(t)===hh}});var rw=F((_U,tw)=>{"use strict";S();A();var eI=oA(),tI=Object.prototype.toString,ew=Object.prototype.hasOwnProperty,rI=function(t,r,n){for(var i=0,o=t.length;i<o;i++)ew.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},nI=function(t,r,n){for(var i=0,o=t.length;i<o;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t)},iI=function(t,r,n){for(var i in t)ew.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},oI=function(t,r,n){if(!eI(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),tI.call(t)==="[object Array]"?rI(t,r,i):typeof t=="string"?nI(t,r,i):iI(t,r,i)};tw.exports=oI});var yh=F((OU,nw)=>{"use strict";S();A();var ph=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],sI=typeof globalThis>"u"?self:globalThis;nw.exports=function(){for(var t=[],r=0;r<ph.length;r++)typeof sI[ph[r]]=="function"&&(t[t.length]=ph[r]);return t}});var sw=F((RU,ow)=>{"use strict";S();A();var aI="Function.prototype.bind called on incompatible ",cI=Object.prototype.toString,uI=Math.max,fI="[object Function]",iw=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var o=0;o<r.length;o+=1)n[o+t.length]=r[o];return n},lI=function(t,r){for(var n=[],i=r||0,o=0;i<t.length;i+=1,o+=1)n[o]=t[i];return n},dI=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};ow.exports=function(t){var r=this;if(typeof r!="function"||cI.apply(r)!==fI)throw new TypeError(aI+r);for(var n=lI(arguments,1),i,o=function(){if(this instanceof i){var v=r.apply(this,iw(n,arguments));return Object(v)===v?v:this}return r.apply(t,iw(n,arguments))},a=uI(0,r.length-n.length),u=[],l=0;l<a;l++)u[l]="$"+l;if(i=Function("binder","return function ("+dI(u,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var h=function(){};h.prototype=r.prototype,i.prototype=new h,h.prototype=null}return i}});var cw=F((KU,aw)=>{"use strict";S();A();var hI=sw();aw.exports=Function.prototype.bind||hI});var Iu=F((jU,fw)=>{"use strict";S();A();var uw={foo:{}},pI=Object;fw.exports=function(){return{__proto__:uw}.foo===uw.foo&&!({__proto__:null}instanceof pI)}});var dw=F(($U,lw)=>{"use strict";S();A();var yI="Function.prototype.bind called on incompatible ",gh=Array.prototype.slice,gI=Object.prototype.toString,mI="[object Function]";lw.exports=function(t){var r=this;if(typeof r!="function"||gI.call(r)!==mI)throw new TypeError(yI+r);for(var n=gh.call(arguments,1),i,o=function(){if(this instanceof i){var v=r.apply(this,n.concat(gh.call(arguments)));return Object(v)===v?v:this}else return r.apply(t,n.concat(gh.call(arguments)))},a=Math.max(0,r.length-n.length),u=[],l=0;l<a;l++)u.push("$"+l);if(i=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var h=function(){};h.prototype=r.prototype,i.prototype=new h,h.prototype=null}return i}});var pw=F((ZU,hw)=>{"use strict";S();A();var bI=dw();hw.exports=Function.prototype.bind||bI});var wh=F((XU,ww)=>{"use strict";S();A();var qe,ls=SyntaxError,bw=Function,fs=TypeError,mh=function(e){try{return bw('"use strict"; return ('+e+").constructor;")()}catch{}},yo=Object.getOwnPropertyDescriptor;if(yo)try{yo({},"")}catch{yo=null}var bh=function(){throw new fs},wI=yo?function(){try{return arguments.callee,bh}catch{try{return yo(arguments,"callee").get}catch{return bh}}}():bh,cs=bl()(),vI=Iu()(),Vt=Object.getPrototypeOf||(vI?function(e){return e.__proto__}:null),us={},xI=typeof Uint8Array>"u"||!Vt?qe:Vt(Uint8Array),go={"%AggregateError%":typeof AggregateError>"u"?qe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?qe:ArrayBuffer,"%ArrayIteratorPrototype%":cs&&Vt?Vt([][Symbol.iterator]()):qe,"%AsyncFromSyncIteratorPrototype%":qe,"%AsyncFunction%":us,"%AsyncGenerator%":us,"%AsyncGeneratorFunction%":us,"%AsyncIteratorPrototype%":us,"%Atomics%":typeof Atomics>"u"?qe:Atomics,"%BigInt%":typeof BigInt>"u"?qe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?qe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?qe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?qe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?qe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?qe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?qe:FinalizationRegistry,"%Function%":bw,"%GeneratorFunction%":us,"%Int8Array%":typeof Int8Array>"u"?qe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?qe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?qe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":cs&&Vt?Vt(Vt([][Symbol.iterator]())):qe,"%JSON%":typeof JSON=="object"?JSON:qe,"%Map%":typeof Map>"u"?qe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!cs||!Vt?qe:Vt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?qe:Promise,"%Proxy%":typeof Proxy>"u"?qe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?qe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?qe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!cs||!Vt?qe:Vt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?qe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":cs&&Vt?Vt(""[Symbol.iterator]()):qe,"%Symbol%":cs?Symbol:qe,"%SyntaxError%":ls,"%ThrowTypeError%":wI,"%TypedArray%":xI,"%TypeError%":fs,"%Uint8Array%":typeof Uint8Array>"u"?qe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?qe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?qe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?qe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?qe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?qe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?qe:WeakSet};if(Vt)try{null.error}catch(e){yw=Vt(Vt(e)),go["%Error.prototype%"]=yw}var yw,SI=function e(t){var r;if(t==="%AsyncFunction%")r=mh("async function () {}");else if(t==="%GeneratorFunction%")r=mh("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=mh("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Vt&&(r=Vt(i.prototype))}return go[t]=r,r},gw={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ba=pw(),Pu=wl(),AI=Ba.call(Function.call,Array.prototype.concat),EI=Ba.call(Function.apply,Array.prototype.splice),mw=Ba.call(Function.call,String.prototype.replace),Mu=Ba.call(Function.call,String.prototype.slice),TI=Ba.call(Function.call,RegExp.prototype.exec),II=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,PI=/\\(\\)?/g,MI=function(t){var r=Mu(t,0,1),n=Mu(t,-1);if(r==="%"&&n!=="%")throw new ls("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ls("invalid intrinsic syntax, expected opening `%`");var i=[];return mw(t,II,function(o,a,u,l){i[i.length]=u?mw(l,PI,"$1"):a||o}),i},BI=function(t,r){var n=t,i;if(Pu(gw,n)&&(i=gw[n],n="%"+i[0]+"%"),Pu(go,n)){var o=go[n];if(o===us&&(o=SI(n)),typeof o>"u"&&!r)throw new fs("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new ls("intrinsic "+t+" does not exist!")};ww.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new fs("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new fs('"allowMissing" argument must be a boolean');if(TI(/^%?[^%]*%?$/,t)===null)throw new ls("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=MI(t),i=n.length>0?n[0]:"",o=BI("%"+i+"%",r),a=o.name,u=o.value,l=!1,h=o.alias;h&&(i=h[0],EI(n,AI([0,1],h)));for(var v=1,b=!0;v<n.length;v+=1){var T=n[v],P=Mu(T,0,1),B=Mu(T,-1);if((P==='"'||P==="'"||P==="`"||B==='"'||B==="'"||B==="`")&&P!==B)throw new ls("property names with quotes must have matching quotes");if((T==="constructor"||!b)&&(l=!0),i+="."+T,a="%"+i+"%",Pu(go,a))u=go[a];else if(u!=null){if(!(T in u)){if(!r)throw new fs("base intrinsic for "+t+" exists, but the property is not available.");return}if(yo&&v+1>=n.length){var I=yo(u,T);b=!!I,b&&"get"in I&&!("originalValue"in I.get)?u=I.get:u=u[T]}else b=Pu(u,T),u=u[T];b&&!l&&(go[a]=u)}}return u}});var xw=F((tL,vw)=>{"use strict";S();A();var kI="Function.prototype.bind called on incompatible ",vh=Array.prototype.slice,_I=Object.prototype.toString,VI="[object Function]";vw.exports=function(t){var r=this;if(typeof r!="function"||_I.call(r)!==VI)throw new TypeError(kI+r);for(var n=vh.call(arguments,1),i,o=function(){if(this instanceof i){var v=r.apply(this,n.concat(vh.call(arguments)));return Object(v)===v?v:this}else return r.apply(t,n.concat(vh.call(arguments)))},a=Math.max(0,r.length-n.length),u=[],l=0;l<a;l++)u.push("$"+l);if(i=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var h=function(){};h.prototype=r.prototype,i.prototype=new h,h.prototype=null}return i}});var Aw=F((iL,Sw)=>{"use strict";S();A();var NI=xw();Sw.exports=Function.prototype.bind||NI});var Bw=F((aL,Mw)=>{"use strict";S();A();var He,ys=SyntaxError,Pw=Function,ps=TypeError,xh=function(e){try{return Pw('"use strict"; return ('+e+").constructor;")()}catch{}},mo=Object.getOwnPropertyDescriptor;if(mo)try{mo({},"")}catch{mo=null}var Sh=function(){throw new ps},OI=mo?function(){try{return arguments.callee,Sh}catch{try{return mo(arguments,"callee").get}catch{return Sh}}}():Sh,ds=bl()(),UI=Iu()(),Nt=Object.getPrototypeOf||(UI?function(e){return e.__proto__}:null),hs={},LI=typeof Uint8Array>"u"||!Nt?He:Nt(Uint8Array),bo={"%AggregateError%":typeof AggregateError>"u"?He:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?He:ArrayBuffer,"%ArrayIteratorPrototype%":ds&&Nt?Nt([][Symbol.iterator]()):He,"%AsyncFromSyncIteratorPrototype%":He,"%AsyncFunction%":hs,"%AsyncGenerator%":hs,"%AsyncGeneratorFunction%":hs,"%AsyncIteratorPrototype%":hs,"%Atomics%":typeof Atomics>"u"?He:Atomics,"%BigInt%":typeof BigInt>"u"?He:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?He:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?He:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?He:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?He:Float32Array,"%Float64Array%":typeof Float64Array>"u"?He:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?He:FinalizationRegistry,"%Function%":Pw,"%GeneratorFunction%":hs,"%Int8Array%":typeof Int8Array>"u"?He:Int8Array,"%Int16Array%":typeof Int16Array>"u"?He:Int16Array,"%Int32Array%":typeof Int32Array>"u"?He:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ds&&Nt?Nt(Nt([][Symbol.iterator]())):He,"%JSON%":typeof JSON=="object"?JSON:He,"%Map%":typeof Map>"u"?He:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ds||!Nt?He:Nt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?He:Promise,"%Proxy%":typeof Proxy>"u"?He:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?He:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?He:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ds||!Nt?He:Nt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?He:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ds&&Nt?Nt(""[Symbol.iterator]()):He,"%Symbol%":ds?Symbol:He,"%SyntaxError%":ys,"%ThrowTypeError%":OI,"%TypedArray%":LI,"%TypeError%":ps,"%Uint8Array%":typeof Uint8Array>"u"?He:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?He:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?He:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?He:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?He:WeakMap,"%WeakRef%":typeof WeakRef>"u"?He:WeakRef,"%WeakSet%":typeof WeakSet>"u"?He:WeakSet};if(Nt)try{null.error}catch(e){Ew=Nt(Nt(e)),bo["%Error.prototype%"]=Ew}var Ew,RI=function e(t){var r;if(t==="%AsyncFunction%")r=xh("async function () {}");else if(t==="%GeneratorFunction%")r=xh("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=xh("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Nt&&(r=Nt(i.prototype))}return bo[t]=r,r},Tw={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ka=Aw(),Bu=wl(),CI=ka.call(Function.call,Array.prototype.concat),DI=ka.call(Function.apply,Array.prototype.splice),Iw=ka.call(Function.call,String.prototype.replace),ku=ka.call(Function.call,String.prototype.slice),KI=ka.call(Function.call,RegExp.prototype.exec),qI=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,HI=/\\(\\)?/g,jI=function(t){var r=ku(t,0,1),n=ku(t,-1);if(r==="%"&&n!=="%")throw new ys("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ys("invalid intrinsic syntax, expected opening `%`");var i=[];return Iw(t,qI,function(o,a,u,l){i[i.length]=u?Iw(l,HI,"$1"):a||o}),i},FI=function(t,r){var n=t,i;if(Bu(Tw,n)&&(i=Tw[n],n="%"+i[0]+"%"),Bu(bo,n)){var o=bo[n];if(o===hs&&(o=RI(n)),typeof o>"u"&&!r)throw new ps("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new ys("intrinsic "+t+" does not exist!")};Mw.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new ps("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ps('"allowMissing" argument must be a boolean');if(KI(/^%?[^%]*%?$/,t)===null)throw new ys("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=jI(t),i=n.length>0?n[0]:"",o=FI("%"+i+"%",r),a=o.name,u=o.value,l=!1,h=o.alias;h&&(i=h[0],DI(n,CI([0,1],h)));for(var v=1,b=!0;v<n.length;v+=1){var T=n[v],P=ku(T,0,1),B=ku(T,-1);if((P==='"'||P==="'"||P==="`"||B==='"'||B==="'"||B==="`")&&P!==B)throw new ys("property names with quotes must have matching quotes");if((T==="constructor"||!b)&&(l=!0),i+="."+T,a="%"+i+"%",Bu(bo,a))u=bo[a];else if(u!=null){if(!(T in u)){if(!r)throw new ps("base intrinsic for "+t+" exists, but the property is not available.");return}if(mo&&v+1>=n.length){var I=mo(u,T);b=!!I,b&&"get"in I&&!("originalValue"in I.get)?u=I.get:u=u[T]}else b=Bu(u,T),u=u[T];b&&!l&&(bo[a]=u)}}return u}});var _w=F((fL,kw)=>{"use strict";S();A();var WI="Function.prototype.bind called on incompatible ",Ah=Array.prototype.slice,$I=Object.prototype.toString,zI="[object Function]";kw.exports=function(t){var r=this;if(typeof r!="function"||$I.call(r)!==zI)throw new TypeError(WI+r);for(var n=Ah.call(arguments,1),i,o=function(){if(this instanceof i){var v=r.apply(this,n.concat(Ah.call(arguments)));return Object(v)===v?v:this}else return r.apply(t,n.concat(Ah.call(arguments)))},a=Math.max(0,r.length-n.length),u=[],l=0;l<a;l++)u.push("$"+l);if(i=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var h=function(){};h.prototype=r.prototype,i.prototype=new h,h.prototype=null}return i}});var Nw=F((hL,Vw)=>{"use strict";S();A();var GI=_w();Vw.exports=Function.prototype.bind||GI});var Dw=F((gL,Cw)=>{"use strict";S();A();var je,ws=SyntaxError,Rw=Function,bs=TypeError,Eh=function(e){try{return Rw('"use strict"; return ('+e+").constructor;")()}catch{}},wo=Object.getOwnPropertyDescriptor;if(wo)try{wo({},"")}catch{wo=null}var Th=function(){throw new bs},ZI=wo?function(){try{return arguments.callee,Th}catch{try{return wo(arguments,"callee").get}catch{return Th}}}():Th,gs=bl()(),YI=Iu()(),Ot=Object.getPrototypeOf||(YI?function(e){return e.__proto__}:null),ms={},JI=typeof Uint8Array>"u"||!Ot?je:Ot(Uint8Array),vo={"%AggregateError%":typeof AggregateError>"u"?je:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?je:ArrayBuffer,"%ArrayIteratorPrototype%":gs&&Ot?Ot([][Symbol.iterator]()):je,"%AsyncFromSyncIteratorPrototype%":je,"%AsyncFunction%":ms,"%AsyncGenerator%":ms,"%AsyncGeneratorFunction%":ms,"%AsyncIteratorPrototype%":ms,"%Atomics%":typeof Atomics>"u"?je:Atomics,"%BigInt%":typeof BigInt>"u"?je:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?je:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?je:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?je:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?je:Float32Array,"%Float64Array%":typeof Float64Array>"u"?je:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?je:FinalizationRegistry,"%Function%":Rw,"%GeneratorFunction%":ms,"%Int8Array%":typeof Int8Array>"u"?je:Int8Array,"%Int16Array%":typeof Int16Array>"u"?je:Int16Array,"%Int32Array%":typeof Int32Array>"u"?je:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":gs&&Ot?Ot(Ot([][Symbol.iterator]())):je,"%JSON%":typeof JSON=="object"?JSON:je,"%Map%":typeof Map>"u"?je:Map,"%MapIteratorPrototype%":typeof Map>"u"||!gs||!Ot?je:Ot(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?je:Promise,"%Proxy%":typeof Proxy>"u"?je:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?je:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?je:Set,"%SetIteratorPrototype%":typeof Set>"u"||!gs||!Ot?je:Ot(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?je:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":gs&&Ot?Ot(""[Symbol.iterator]()):je,"%Symbol%":gs?Symbol:je,"%SyntaxError%":ws,"%ThrowTypeError%":ZI,"%TypedArray%":JI,"%TypeError%":bs,"%Uint8Array%":typeof Uint8Array>"u"?je:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?je:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?je:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?je:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?je:WeakMap,"%WeakRef%":typeof WeakRef>"u"?je:WeakRef,"%WeakSet%":typeof WeakSet>"u"?je:WeakSet};if(Ot)try{null.error}catch(e){Ow=Ot(Ot(e)),vo["%Error.prototype%"]=Ow}var Ow,XI=function e(t){var r;if(t==="%AsyncFunction%")r=Eh("async function () {}");else if(t==="%GeneratorFunction%")r=Eh("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Eh("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Ot&&(r=Ot(i.prototype))}return vo[t]=r,r},Uw={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_a=Nw(),_u=wl(),QI=_a.call(Function.call,Array.prototype.concat),e6=_a.call(Function.apply,Array.prototype.splice),Lw=_a.call(Function.call,String.prototype.replace),Vu=_a.call(Function.call,String.prototype.slice),t6=_a.call(Function.call,RegExp.prototype.exec),r6=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,n6=/\\(\\)?/g,i6=function(t){var r=Vu(t,0,1),n=Vu(t,-1);if(r==="%"&&n!=="%")throw new ws("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ws("invalid intrinsic syntax, expected opening `%`");var i=[];return Lw(t,r6,function(o,a,u,l){i[i.length]=u?Lw(l,n6,"$1"):a||o}),i},o6=function(t,r){var n=t,i;if(_u(Uw,n)&&(i=Uw[n],n="%"+i[0]+"%"),_u(vo,n)){var o=vo[n];if(o===ms&&(o=XI(n)),typeof o>"u"&&!r)throw new bs("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new ws("intrinsic "+t+" does not exist!")};Cw.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new bs("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new bs('"allowMissing" argument must be a boolean');if(t6(/^%?[^%]*%?$/,t)===null)throw new ws("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=i6(t),i=n.length>0?n[0]:"",o=o6("%"+i+"%",r),a=o.name,u=o.value,l=!1,h=o.alias;h&&(i=h[0],e6(n,QI([0,1],h)));for(var v=1,b=!0;v<n.length;v+=1){var T=n[v],P=Vu(T,0,1),B=Vu(T,-1);if((P==='"'||P==="'"||P==="`"||B==='"'||B==="'"||B==="`")&&P!==B)throw new ws("property names with quotes must have matching quotes");if((T==="constructor"||!b)&&(l=!0),i+="."+T,a="%"+i+"%",_u(vo,a))u=vo[a];else if(u!=null){if(!(T in u)){if(!r)throw new bs("base intrinsic for "+t+" exists, but the property is not available.");return}if(wo&&v+1>=n.length){var I=wo(u,T);b=!!I,b&&"get"in I&&!("originalValue"in I.get)?u=I.get:u=u[T]}else b=_u(u,T),u=u[T];b&&!l&&(vo[a]=u)}}return u}});var Hw=F((wL,qw)=>{"use strict";S();A();var s6=By()(),Ih=Dw(),Va=s6&&Ih("%Object.defineProperty%",!0);if(Va)try{Va({},"a",{value:1})}catch{Va=!1}var a6=Ih("%SyntaxError%"),vs=Ih("%TypeError%"),Kw=Sc();qw.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new vs("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new vs("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new vs("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new vs("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new vs("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new vs("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,u=arguments.length>6?arguments[6]:!1,l=!!Kw&&Kw(t,r);if(Va)Va(t,r,{configurable:a===null&&l?l.configurable:!a,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:o===null&&l?l.writable:!o});else if(u||!i&&!o&&!a)t[r]=n;else throw new a6("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Gw=F((SL,zw)=>{"use strict";S();A();var $w=Bw(),jw=Hw(),c6=By()(),Fw=Sc(),Ww=$w("%TypeError%"),u6=$w("%Math.floor%");zw.exports=function(t,r){if(typeof t!="function")throw new Ww("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||u6(r)!==r)throw new Ww("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&Fw){var a=Fw(t,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(o=!1)}return(i||o||!n)&&(c6?jw(t,"length",r,!0,!0):jw(t,"length",r)),t}});var Mh=F((TL,Nu)=>{"use strict";S();A();var Ph=cw(),xs=wh(),f6=Gw(),l6=xs("%TypeError%"),Yw=xs("%Function.prototype.apply%"),Jw=xs("%Function.prototype.call%"),Xw=xs("%Reflect.apply%",!0)||Ph.call(Jw,Yw),Na=xs("%Object.defineProperty%",!0),d6=xs("%Math.max%");if(Na)try{Na({},"a",{value:1})}catch{Na=null}Nu.exports=function(t){if(typeof t!="function")throw new l6("a function is required");var r=Xw(Ph,Jw,arguments);return f6(r,1+d6(0,t.length-(arguments.length-1)),!0)};var Zw=function(){return Xw(Ph,Yw,arguments)};Na?Na(Nu.exports,"apply",{value:Zw}):Nu.exports.apply=Zw});var rv=F((ML,tv)=>{"use strict";S();A();var Qw=wh(),ev=Mh(),h6=ev(Qw("String.prototype.indexOf"));tv.exports=function(t,r){var n=Qw(t,!!r);return typeof n=="function"&&h6(t,".prototype.")>-1?ev(n):n}});var av=F((_L,sv)=>{"use strict";S();A();var Uu=rw(),p6=yh(),nv=Mh(),_h=rv(),Ou=Sc(),y6=_h("Object.prototype.toString"),ov=vl()(),iv=typeof globalThis>"u"?self:globalThis,kh=p6(),Vh=_h("String.prototype.slice"),Bh=Object.getPrototypeOf,g6=_h("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},Lu={__proto__:null};ov&&Ou&&Bh?Uu(kh,function(e){var t=new iv[e];if(Symbol.toStringTag in t){var r=Bh(t),n=Ou(r,Symbol.toStringTag);if(!n){var i=Bh(r);n=Ou(i,Symbol.toStringTag)}Lu["$"+e]=nv(n.get)}}):Uu(kh,function(e){var t=new iv[e],r=t.slice||t.set;r&&(Lu["$"+e]=nv(r))});var m6=function(t){var r=!1;return Uu(Lu,function(n,i){if(!r)try{"$"+n(t)===i&&(r=Vh(i,1))}catch{}}),r},b6=function(t){var r=!1;return Uu(Lu,function(n,i){if(!r)try{n(t),r=Vh(i,1)}catch{}}),r};sv.exports=function(t){if(!t||typeof t!="object")return!1;if(!ov){var r=Vh(y6(t),8,-1);return g6(kh,r)>-1?r:r!=="Object"?!1:b6(t)}return Ou?m6(t):null}});var uv=F((OL,cv)=>{S();A();var w6=Object.prototype.hasOwnProperty,v6=Object.prototype.toString;cv.exports=function(t,r,n){if(v6.call(r)!=="[object Function]")throw new TypeError("iterator must be a function");var i=t.length;if(i===+i)for(var o=0;o<i;o++)r.call(n,t[o],o,t);else for(var a in t)w6.call(t,a)&&r.call(n,t[a],a,t)}});var lv=F((RL,fv)=>{"use strict";S();A();fv.exports=Sc()});var mv=F((KL,gv)=>{"use strict";S();A();var dv=uv(),x6=yh(),Oh=nA(),S6=Oh("Object.prototype.toString"),hv=vl()(),A6=typeof globalThis>"u"?self:globalThis,pv=x6(),E6=Oh("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},T6=Oh("String.prototype.slice"),yv={},Ru=lv(),Nh=Object.getPrototypeOf;hv&&Ru&&Nh&&dv(pv,function(e){var t=new A6[e];if(Symbol.toStringTag in t){var r=Nh(t),n=Ru(r,Symbol.toStringTag);if(!n){var i=Nh(r);n=Ru(i,Symbol.toStringTag)}yv[e]=n.get}});var I6=function(t){var r=!1;return dv(yv,function(n,i){if(!r)try{r=n.call(t)===i}catch{}}),r};gv.exports=function(t){if(!t||typeof t!="object")return!1;if(!hv||!(Symbol.toStringTag in t)){var r=T6(S6(t),8,-1);return E6(pv,r)>-1}return Ru?I6(t):!1}});var _v=F(De=>{"use strict";S();A();var P6=iA(),M6=Qb(),nn=av(),bv=mv();function Ss(e){return e.call.bind(e)}var wv=typeof BigInt<"u",vv=typeof Symbol<"u",Ar=Ss(Object.prototype.toString),B6=Ss(Number.prototype.valueOf),k6=Ss(String.prototype.valueOf),_6=Ss(Boolean.prototype.valueOf);wv&&(xv=Ss(BigInt.prototype.valueOf));var xv;vv&&(Sv=Ss(Symbol.prototype.valueOf));var Sv;function Ua(e,t){if(typeof e!="object")return!1;try{return t(e),!0}catch{return!1}}De.isArgumentsObject=P6;De.isGeneratorFunction=M6;De.isTypedArray=bv;function V6(e){return typeof Promise<"u"&&e instanceof Promise||e!==null&&typeof e=="object"&&typeof e.then=="function"&&typeof e.catch=="function"}De.isPromise=V6;function N6(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):bv(e)||Ev(e)}De.isArrayBufferView=N6;function O6(e){return nn(e)==="Uint8Array"}De.isUint8Array=O6;function U6(e){return nn(e)==="Uint8ClampedArray"}De.isUint8ClampedArray=U6;function L6(e){return nn(e)==="Uint16Array"}De.isUint16Array=L6;function R6(e){return nn(e)==="Uint32Array"}De.isUint32Array=R6;function C6(e){return nn(e)==="Int8Array"}De.isInt8Array=C6;function D6(e){return nn(e)==="Int16Array"}De.isInt16Array=D6;function K6(e){return nn(e)==="Int32Array"}De.isInt32Array=K6;function q6(e){return nn(e)==="Float32Array"}De.isFloat32Array=q6;function H6(e){return nn(e)==="Float64Array"}De.isFloat64Array=H6;function j6(e){return nn(e)==="BigInt64Array"}De.isBigInt64Array=j6;function F6(e){return nn(e)==="BigUint64Array"}De.isBigUint64Array=F6;function Cu(e){return Ar(e)==="[object Map]"}Cu.working=typeof Map<"u"&&Cu(new Map);function W6(e){return typeof Map>"u"?!1:Cu.working?Cu(e):e instanceof Map}De.isMap=W6;function Du(e){return Ar(e)==="[object Set]"}Du.working=typeof Set<"u"&&Du(new Set);function $6(e){return typeof Set>"u"?!1:Du.working?Du(e):e instanceof Set}De.isSet=$6;function Ku(e){return Ar(e)==="[object WeakMap]"}Ku.working=typeof WeakMap<"u"&&Ku(new WeakMap);function z6(e){return typeof WeakMap>"u"?!1:Ku.working?Ku(e):e instanceof WeakMap}De.isWeakMap=z6;function Lh(e){return Ar(e)==="[object WeakSet]"}Lh.working=typeof WeakSet<"u"&&Lh(new WeakSet);function G6(e){return Lh(e)}De.isWeakSet=G6;function qu(e){return Ar(e)==="[object ArrayBuffer]"}qu.working=typeof ArrayBuffer<"u"&&qu(new ArrayBuffer);function Av(e){return typeof ArrayBuffer>"u"?!1:qu.working?qu(e):e instanceof ArrayBuffer}De.isArrayBuffer=Av;function Hu(e){return Ar(e)==="[object DataView]"}Hu.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Hu(new DataView(new ArrayBuffer(1),0,1));function Ev(e){return typeof DataView>"u"?!1:Hu.working?Hu(e):e instanceof DataView}De.isDataView=Ev;var Uh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Oa(e){return Ar(e)==="[object SharedArrayBuffer]"}function Tv(e){return typeof Uh>"u"?!1:(typeof Oa.working>"u"&&(Oa.working=Oa(new Uh)),Oa.working?Oa(e):e instanceof Uh)}De.isSharedArrayBuffer=Tv;function Z6(e){return Ar(e)==="[object AsyncFunction]"}De.isAsyncFunction=Z6;function Y6(e){return Ar(e)==="[object Map Iterator]"}De.isMapIterator=Y6;function J6(e){return Ar(e)==="[object Set Iterator]"}De.isSetIterator=J6;function X6(e){return Ar(e)==="[object Generator]"}De.isGeneratorObject=X6;function Q6(e){return Ar(e)==="[object WebAssembly.Module]"}De.isWebAssemblyCompiledModule=Q6;function Iv(e){return Ua(e,B6)}De.isNumberObject=Iv;function Pv(e){return Ua(e,k6)}De.isStringObject=Pv;function Mv(e){return Ua(e,_6)}De.isBooleanObject=Mv;function Bv(e){return wv&&Ua(e,xv)}De.isBigIntObject=Bv;function kv(e){return vv&&Ua(e,Sv)}De.isSymbolObject=kv;function eP(e){return Iv(e)||Pv(e)||Mv(e)||Bv(e)||kv(e)}De.isBoxedPrimitive=eP;function tP(e){return typeof Uint8Array<"u"&&(Av(e)||Tv(e))}De.isAnyArrayBuffer=tP;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(De,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})});var Nv=F(($L,Vv)=>{S();A();Vv.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}});var Es=F(Ke=>{S();A();var Ov=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),n={},i=0;i<r.length;i++)n[r[i]]=Object.getOwnPropertyDescriptor(t,r[i]);return n},rP=/%[sdj%]/g;Ke.format=function(e){if(!Zu(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(pi(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,o=String(e).replace(rP,function(u){if(u==="%%")return"%";if(r>=i)return u;switch(u){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return u}}),a=n[r];r<i;a=n[++r])Gu(a)||!As(a)?o+=" "+a:o+=" "+pi(a);return o};Ke.deprecate=function(e,t){if(typeof process<"u"&&process.noDeprecation===!0)return e;if(typeof process>"u")return function(){return Ke.deprecate(e,t).apply(this,arguments)};var r=!1;function n(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return n};var ju={},Uv=/^$/;k.NODE_DEBUG&&(Fu=k.NODE_DEBUG,Fu=Fu.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),Uv=new RegExp("^"+Fu+"$","i"));var Fu;Ke.debuglog=function(e){if(e=e.toUpperCase(),!ju[e])if(Uv.test(e)){var t=process.pid;ju[e]=function(){var r=Ke.format.apply(Ke,arguments);console.error("%s %d: %s",e,t,r)}}else ju[e]=function(){};return ju[e]};function pi(e,t){var r={seen:[],stylize:iP};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Kh(t)?r.showHidden=t:t&&Ke._extend(r,t),So(r.showHidden)&&(r.showHidden=!1),So(r.depth)&&(r.depth=2),So(r.colors)&&(r.colors=!1),So(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=nP),$u(r,e,r.depth)}Ke.inspect=pi;pi.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};pi.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function nP(e,t){var r=pi.styles[t];return r?"\x1B["+pi.colors[r][0]+"m"+e+"\x1B["+pi.colors[r][1]+"m":e}function iP(e,t){return e}function oP(e){var t={};return e.forEach(function(r,n){t[r]=!0}),t}function $u(e,t,r){if(e.customInspect&&t&&Wu(t.inspect)&&t.inspect!==Ke.inspect&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(r,e);return Zu(n)||(n=$u(e,n,r)),n}var i=sP(e,t);if(i)return i;var o=Object.keys(t),a=oP(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Ra(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Rh(t);if(o.length===0){if(Wu(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(La(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(zu(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Ra(t))return Rh(t)}var l="",h=!1,v=["{","}"];if(Lv(t)&&(h=!0,v=["[","]"]),Wu(t)){var b=t.name?": "+t.name:"";l=" [Function"+b+"]"}if(La(t)&&(l=" "+RegExp.prototype.toString.call(t)),zu(t)&&(l=" "+Date.prototype.toUTCString.call(t)),Ra(t)&&(l=" "+Rh(t)),o.length===0&&(!h||t.length==0))return v[0]+l+v[1];if(r<0)return La(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var T;return h?T=aP(e,t,r,a,o):T=o.map(function(P){return Dh(e,t,r,a,P,h)}),e.seen.pop(),cP(T,l,v)}function sP(e,t){if(So(t))return e.stylize("undefined","undefined");if(Zu(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Rv(t))return e.stylize(""+t,"number");if(Kh(t))return e.stylize(""+t,"boolean");if(Gu(t))return e.stylize("null","null")}function Rh(e){return"["+Error.prototype.toString.call(e)+"]"}function aP(e,t,r,n,i){for(var o=[],a=0,u=t.length;a<u;++a)Cv(t,String(a))?o.push(Dh(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(l){l.match(/^\d+$/)||o.push(Dh(e,t,r,n,l,!0))}),o}function Dh(e,t,r,n,i,o){var a,u,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?l.set?u=e.stylize("[Getter/Setter]","special"):u=e.stylize("[Getter]","special"):l.set&&(u=e.stylize("[Setter]","special")),Cv(n,i)||(a="["+i+"]"),u||(e.seen.indexOf(l.value)<0?(Gu(r)?u=$u(e,l.value,null):u=$u(e,l.value,r-1),u.indexOf(`
`)>-1&&(o?u=u.split(`
`).map(function(h){return"  "+h}).join(`
`).slice(2):u=`
`+u.split(`
`).map(function(h){return"   "+h}).join(`
`))):u=e.stylize("[Circular]","special")),So(a)){if(o&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function cP(e,t,r){var n=0,i=e.reduce(function(o,a){return n++,a.indexOf(`
`)>=0&&n++,o+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}Ke.types=_v();function Lv(e){return Array.isArray(e)}Ke.isArray=Lv;function Kh(e){return typeof e=="boolean"}Ke.isBoolean=Kh;function Gu(e){return e===null}Ke.isNull=Gu;function uP(e){return e==null}Ke.isNullOrUndefined=uP;function Rv(e){return typeof e=="number"}Ke.isNumber=Rv;function Zu(e){return typeof e=="string"}Ke.isString=Zu;function fP(e){return typeof e=="symbol"}Ke.isSymbol=fP;function So(e){return e===void 0}Ke.isUndefined=So;function La(e){return As(e)&&qh(e)==="[object RegExp]"}Ke.isRegExp=La;Ke.types.isRegExp=La;function As(e){return typeof e=="object"&&e!==null}Ke.isObject=As;function zu(e){return As(e)&&qh(e)==="[object Date]"}Ke.isDate=zu;Ke.types.isDate=zu;function Ra(e){return As(e)&&(qh(e)==="[object Error]"||e instanceof Error)}Ke.isError=Ra;Ke.types.isNativeError=Ra;function Wu(e){return typeof e=="function"}Ke.isFunction=Wu;function lP(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}Ke.isPrimitive=lP;Ke.isBuffer=Nv();function qh(e){return Object.prototype.toString.call(e)}function Ch(e){return e<10?"0"+e.toString(10):e.toString(10)}var dP=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hP(){var e=new Date,t=[Ch(e.getHours()),Ch(e.getMinutes()),Ch(e.getSeconds())].join(":");return[e.getDate(),dP[e.getMonth()],t].join(" ")}Ke.log=function(){console.log("%s - %s",hP(),Ke.format.apply(Ke,arguments))};Ke.inherits=X2();Ke._extend=function(e,t){if(!t||!As(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};function Cv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var xo=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;Ke.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(xo&&t[xo]){var r=t[xo];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,xo,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var n,i,o=new Promise(function(l,h){n=l,i=h}),a=[],u=0;u<arguments.length;u++)a.push(arguments[u]);a.push(function(l,h){l?i(l):n(h)});try{t.apply(this,a)}catch(l){i(l)}return o}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),xo&&Object.defineProperty(r,xo,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,Ov(t))};Ke.promisify.custom=xo;function pP(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function yP(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,r).then(function(u){process.nextTick(a.bind(null,null,u))},function(u){process.nextTick(pP.bind(null,u,a))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,Ov(e)),t}Ke.callbackify=yP});var Wh=F((XL,qv)=>{"use strict";S();A();function Ts(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ts=function(r){return typeof r}:Ts=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ts(e)}function gP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mP(e,t){return t&&(Ts(t)==="object"||typeof t=="function")?t:bP(e)}function bP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jh(e){return jh=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},jh(e)}function wP(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fh(e,t)}function Fh(e,t){return Fh=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Fh(e,t)}var Kv={},Is,Hh;function Ca(e,t,r){r||(r=Error);function n(o,a,u){return typeof t=="string"?t:t(o,a,u)}var i=function(o){wP(a,o);function a(u,l,h){var v;return gP(this,a),v=mP(this,jh(a).call(this,n(u,l,h))),v.code=e,v}return a}(r);Kv[e]=i}function Dv(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function vP(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function xP(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function SP(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Ca("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);Ca("ERR_INVALID_ARG_TYPE",function(e,t,r){Is===void 0&&(Is=Da()),Is(typeof e=="string","'name' must be a string");var n;typeof t=="string"&&vP(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if(xP(e," argument"))i="The ".concat(e," ").concat(n," ").concat(Dv(t,"type"));else{var o=SP(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(o," ").concat(n," ").concat(Dv(t,"type"))}return i+=". Received type ".concat(Ts(r)),i},TypeError);Ca("ERR_INVALID_ARG_VALUE",function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";Hh===void 0&&(Hh=Es());var n=Hh.inspect(t);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(n)},TypeError,RangeError);Ca("ERR_INVALID_RETURN_VALUE",function(e,t,r){var n;return r&&r.constructor&&r.constructor.name?n="instance of ".concat(r.constructor.name):n="type ".concat(Ts(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(n,".")},TypeError);Ca("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Is===void 0&&(Is=Da()),Is(t.length>0,"At least one arg needs to be specified");var n="The ",i=t.length;switch(t=t.map(function(o){return'"'.concat(o,'"')}),i){case 1:n+="".concat(t[0]," argument");break;case 2:n+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:n+=t.slice(0,i-1).join(", "),n+=", and ".concat(t[i-1]," arguments");break}return"".concat(n," must be specified")},TypeError);qv.exports.codes=Kv});var $v=F((tR,Wv)=>{"use strict";S();A();function AP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){EP(e,i,r[i])})}return e}function EP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function IP(e,t,r){return t&&Hv(e.prototype,t),r&&Hv(e,r),e}function Ps(e,t){return t&&(Er(t)==="object"||typeof t=="function")?t:$h(e)}function $h(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PP(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ja(e,t)}function zh(e){var t=typeof Map=="function"?new Map:void 0;return zh=function(n){if(n===null||!BP(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return Yu(n,arguments,yi(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ja(i,n)},zh(e)}function MP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Yu(e,t,r){return MP()?Yu=Reflect.construct:Yu=function(i,o,a){var u=[null];u.push.apply(u,o);var l=Function.bind.apply(i,u),h=new l;return a&&ja(h,a.prototype),h},Yu.apply(null,arguments)}function BP(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function ja(e,t){return ja=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ja(e,t)}function yi(e){return yi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},yi(e)}function Er(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Er=function(r){return typeof r}:Er=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Er(e)}var kP=Es(),Gh=kP.inspect,_P=Wh(),VP=_P.codes.ERR_INVALID_ARG_TYPE;function jv(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function NP(e,t){if(t=Math.floor(t),e.length==0||t==0)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+=e.substring(0,r-e.length),e}var on="",Ka="",qa="",qt="",Ao={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},OP=10;function Fv(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach(function(n){r[n]=e[n]}),Object.defineProperty(r,"message",{value:e.message}),r}function Ha(e){return Gh(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function UP(e,t,r){var n="",i="",o=0,a="",u=!1,l=Ha(e),h=l.split(`
`),v=Ha(t).split(`
`),b=0,T="";if(r==="strictEqual"&&Er(e)==="object"&&Er(t)==="object"&&e!==null&&t!==null&&(r="strictEqualObject"),h.length===1&&v.length===1&&h[0]!==v[0]){var P=h[0].length+v[0].length;if(P<=OP){if((Er(e)!=="object"||e===null)&&(Er(t)!=="object"||t===null)&&(e!==0||t!==0))return"".concat(Ao[r],`

`)+"".concat(h[0]," !== ").concat(v[0],`
`)}else if(r!=="strictEqualObject"){var B=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(P<B){for(;h[0][b]===v[0][b];)b++;b>2&&(T=`
  `.concat(NP(" ",b),"^"),b=0)}}}for(var I=h[h.length-1],_=v[v.length-1];I===_&&(b++<2?a=`
  `.concat(I).concat(a):n=I,h.pop(),v.pop(),!(h.length===0||v.length===0));)I=h[h.length-1],_=v[v.length-1];var V=Math.max(h.length,v.length);if(V===0){var R=l.split(`
`);if(R.length>30)for(R[26]="".concat(on,"...").concat(qt);R.length>27;)R.pop();return"".concat(Ao.notIdentical,`

`).concat(R.join(`
`),`
`)}b>3&&(a=`
`.concat(on,"...").concat(qt).concat(a),u=!0),n!==""&&(a=`
  `.concat(n).concat(a),n="");var N=0,H=Ao[r]+`
`.concat(Ka,"+ actual").concat(qt," ").concat(qa,"- expected").concat(qt),K=" ".concat(on,"...").concat(qt," Lines skipped");for(b=0;b<V;b++){var C=b-o;if(h.length<b+1)C>1&&b>2&&(C>4?(i+=`
`.concat(on,"...").concat(qt),u=!0):C>3&&(i+=`
  `.concat(v[b-2]),N++),i+=`
  `.concat(v[b-1]),N++),o=b,n+=`
`.concat(qa,"-").concat(qt," ").concat(v[b]),N++;else if(v.length<b+1)C>1&&b>2&&(C>4?(i+=`
`.concat(on,"...").concat(qt),u=!0):C>3&&(i+=`
  `.concat(h[b-2]),N++),i+=`
  `.concat(h[b-1]),N++),o=b,i+=`
`.concat(Ka,"+").concat(qt," ").concat(h[b]),N++;else{var q=v[b],U=h[b],G=U!==q&&(!jv(U,",")||U.slice(0,-1)!==q);G&&jv(q,",")&&q.slice(0,-1)===U&&(G=!1,U+=","),G?(C>1&&b>2&&(C>4?(i+=`
`.concat(on,"...").concat(qt),u=!0):C>3&&(i+=`
  `.concat(h[b-2]),N++),i+=`
  `.concat(h[b-1]),N++),o=b,i+=`
`.concat(Ka,"+").concat(qt," ").concat(U),n+=`
`.concat(qa,"-").concat(qt," ").concat(q),N+=2):(i+=n,n="",(C===1||b===0)&&(i+=`
  `.concat(U),N++))}if(N>20&&b<V-2)return"".concat(H).concat(K,`
`).concat(i,`
`).concat(on,"...").concat(qt).concat(n,`
`)+"".concat(on,"...").concat(qt)}return"".concat(H).concat(u?K:"",`
`).concat(i).concat(n).concat(a).concat(T)}var LP=function(e){PP(t,e);function t(r){var n;if(TP(this,t),Er(r)!=="object"||r===null)throw new VP("options","Object",r);var i=r.message,o=r.operator,a=r.stackStartFn,u=r.actual,l=r.expected,h=Error.stackTraceLimit;if(Error.stackTraceLimit=0,i!=null)n=Ps(this,yi(t).call(this,String(i)));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(on="\x1B[34m",Ka="\x1B[32m",qt="\x1B[39m",qa="\x1B[31m"):(on="",Ka="",qt="",qa="")),Er(u)==="object"&&u!==null&&Er(l)==="object"&&l!==null&&"stack"in u&&u instanceof Error&&"stack"in l&&l instanceof Error&&(u=Fv(u),l=Fv(l)),o==="deepStrictEqual"||o==="strictEqual")n=Ps(this,yi(t).call(this,UP(u,l,o)));else if(o==="notDeepStrictEqual"||o==="notStrictEqual"){var v=Ao[o],b=Ha(u).split(`
`);if(o==="notStrictEqual"&&Er(u)==="object"&&u!==null&&(v=Ao.notStrictEqualObject),b.length>30)for(b[26]="".concat(on,"...").concat(qt);b.length>27;)b.pop();b.length===1?n=Ps(this,yi(t).call(this,"".concat(v," ").concat(b[0]))):n=Ps(this,yi(t).call(this,"".concat(v,`

`).concat(b.join(`
`),`
`)))}else{var T=Ha(u),P="",B=Ao[o];o==="notDeepEqual"||o==="notEqual"?(T="".concat(Ao[o],`

`).concat(T),T.length>1024&&(T="".concat(T.slice(0,1021),"..."))):(P="".concat(Ha(l)),T.length>512&&(T="".concat(T.slice(0,509),"...")),P.length>512&&(P="".concat(P.slice(0,509),"...")),o==="deepEqual"||o==="equal"?T="".concat(B,`

`).concat(T,`

should equal

`):P=" ".concat(o," ").concat(P)),n=Ps(this,yi(t).call(this,"".concat(T).concat(P)))}return Error.stackTraceLimit=h,n.generatedMessage=!i,Object.defineProperty($h(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=u,n.expected=l,n.operator=o,Error.captureStackTrace&&Error.captureStackTrace($h(n),a),n.stack,n.name="AssertionError",Ps(n)}return IP(t,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:Gh.custom,value:function(n,i){return Gh(this,AP({},i,{customInspect:!1,depth:0}))}}]),t}(zh(Error));Wv.exports=LP});var Zv=F((iR,Gv)=>{"use strict";S();A();function zv(e,t){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var o=Object.keys(Object(i)),a=0,u=o.length;a<u;a++){var l=o[a],h=Object.getOwnPropertyDescriptor(i,l);h!==void 0&&h.enumerable&&(r[l]=i[l])}}return r}function RP(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:zv})}Gv.exports={assign:zv,polyfill:RP}});var Zh=F((aR,Jv)=>{"use strict";S();A();var Yv=function(e){return e!==e};Jv.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||Yv(t)&&Yv(r))}});var Yh=F((fR,Xv)=>{"use strict";S();A();var CP=Zh();Xv.exports=function(){return typeof Object.is=="function"?Object.is:CP}});var ex=F((hR,Qv)=>{"use strict";S();A();var DP=Yh(),KP=xc();Qv.exports=function(){var t=DP();return KP(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var Jh=F((gR,nx)=>{"use strict";S();A();var qP=xc(),HP=My(),jP=Zh(),tx=Yh(),FP=ex(),rx=HP(tx(),Object);qP(rx,{getPolyfill:tx,implementation:jP,shim:FP});nx.exports=rx});var Xh=F((wR,ix)=>{"use strict";S();A();ix.exports=function(t){return t!==t}});var Qh=F((SR,ox)=>{"use strict";S();A();var WP=Xh();ox.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:WP}});var ax=F((TR,sx)=>{"use strict";S();A();var $P=xc(),zP=Qh();sx.exports=function(){var t=zP();return $P(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}});var lx=F((MR,fx)=>{"use strict";S();A();var GP=My(),ZP=xc(),YP=Xh(),cx=Qh(),JP=ax(),ux=GP(cx(),Number);ZP(ux,{getPolyfill:cx,implementation:YP,shim:JP});fx.exports=ux});var kx=F((_R,Bx)=>{"use strict";S();A();function dx(e,t){return eM(e)||QP(e,t)||XP()}function XP(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function QP(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a=e[Symbol.iterator](),u;!(n=(u=a.next()).done)&&(r.push(u.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&a.return!=null&&a.return()}finally{if(i)throw o}}return r}function eM(e){if(Array.isArray(e))return e}function hr(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hr=function(r){return typeof r}:hr=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hr(e)}var tM=/a/g.flags!==void 0,nf=function(t){var r=[];return t.forEach(function(n){return r.push(n)}),r},hx=function(t){var r=[];return t.forEach(function(n,i){return r.push([i,n])}),r},Ex=Object.is?Object.is:Jh(),tf=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},ep=Number.isNaN?Number.isNaN:lx();function rp(e){return e.call.bind(e)}var Wa=rp(Object.prototype.hasOwnProperty),rf=rp(Object.prototype.propertyIsEnumerable),px=rp(Object.prototype.toString),Gt=Es().types,rM=Gt.isAnyArrayBuffer,nM=Gt.isArrayBufferView,yx=Gt.isDate,Ju=Gt.isMap,gx=Gt.isRegExp,Xu=Gt.isSet,iM=Gt.isNativeError,oM=Gt.isBoxedPrimitive,mx=Gt.isNumberObject,bx=Gt.isStringObject,wx=Gt.isBooleanObject,vx=Gt.isBigIntObject,sM=Gt.isSymbolObject,aM=Gt.isFloat32Array,cM=Gt.isFloat64Array;function uM(e){if(e.length===0||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return e.length===10&&e>=Math.pow(2,32)}function Qu(e){return Object.keys(e).filter(uM).concat(tf(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function Tx(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}var ef=void 0,fM=!0,lM=!1,tp=0,np=1,Ix=2,Px=3;function dM(e,t){return tM?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)}function hM(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function pM(e,t){return e.byteLength!==t.byteLength?!1:Tx(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))===0}function yM(e,t){return e.byteLength===t.byteLength&&Tx(new Uint8Array(e),new Uint8Array(t))===0}function gM(e,t){return mx(e)?mx(t)&&Ex(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):bx(e)?bx(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):wx(e)?wx(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):vx(e)?vx(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):sM(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}function Tr(e,t,r,n){if(e===t)return e!==0?!0:r?Ex(e,t):!0;if(r){if(hr(e)!=="object")return typeof e=="number"&&ep(e)&&ep(t);if(hr(t)!=="object"||e===null||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(e===null||hr(e)!=="object")return t===null||hr(t)!=="object"?e==t:!1;if(t===null||hr(t)!=="object")return!1}var i=px(e),o=px(t);if(i!==o)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var a=Qu(e,ef),u=Qu(t,ef);return a.length!==u.length?!1:Fa(e,t,r,n,np,a)}if(i==="[object Object]"&&(!Ju(e)&&Ju(t)||!Xu(e)&&Xu(t)))return!1;if(yx(e)){if(!yx(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(gx(e)){if(!gx(t)||!dM(e,t))return!1}else if(iM(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else if(nM(e)){if(!r&&(aM(e)||cM(e))){if(!hM(e,t))return!1}else if(!pM(e,t))return!1;var l=Qu(e,ef),h=Qu(t,ef);return l.length!==h.length?!1:Fa(e,t,r,n,tp,l)}else{if(Xu(e))return!Xu(t)||e.size!==t.size?!1:Fa(e,t,r,n,Ix);if(Ju(e))return!Ju(t)||e.size!==t.size?!1:Fa(e,t,r,n,Px);if(rM(e)){if(!yM(e,t))return!1}else if(oM(e)&&!gM(e,t))return!1}return Fa(e,t,r,n,tp)}function xx(e,t){return t.filter(function(r){return rf(e,r)})}function Fa(e,t,r,n,i,o){if(arguments.length===5){o=Object.keys(e);var a=Object.keys(t);if(o.length!==a.length)return!1}for(var u=0;u<o.length;u++)if(!Wa(t,o[u]))return!1;if(r&&arguments.length===5){var l=tf(e);if(l.length!==0){var h=0;for(u=0;u<l.length;u++){var v=l[u];if(rf(e,v)){if(!rf(t,v))return!1;o.push(v),h++}else if(rf(t,v))return!1}var b=tf(t);if(l.length!==b.length&&xx(t,b).length!==h)return!1}else{var T=tf(t);if(T.length!==0&&xx(t,T).length!==0)return!1}}if(o.length===0&&(i===tp||i===np&&e.length===0||e.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var P=n.val1.get(e);if(P!==void 0){var B=n.val2.get(t);if(B!==void 0)return P===B}n.position++}n.val1.set(e,n.position),n.val2.set(t,n.position);var I=xM(e,t,r,o,n,i);return n.val1.delete(e),n.val2.delete(t),I}function Sx(e,t,r,n){for(var i=nf(e),o=0;o<i.length;o++){var a=i[o];if(Tr(t,a,r,n))return e.delete(a),!0}return!1}function Mx(e){switch(hr(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(ep(e))return!1}return!0}function mM(e,t,r){var n=Mx(r);return n??(t.has(n)&&!e.has(n))}function bM(e,t,r,n,i){var o=Mx(r);if(o!=null)return o;var a=t.get(o);return a===void 0&&!t.has(o)||!Tr(n,a,!1,i)?!1:!e.has(o)&&Tr(n,a,!1,i)}function wM(e,t,r,n){for(var i=null,o=nf(e),a=0;a<o.length;a++){var u=o[a];if(hr(u)==="object"&&u!==null)i===null&&(i=new Set),i.add(u);else if(!t.has(u)){if(r||!mM(e,t,u))return!1;i===null&&(i=new Set),i.add(u)}}if(i!==null){for(var l=nf(t),h=0;h<l.length;h++){var v=l[h];if(hr(v)==="object"&&v!==null){if(!Sx(i,v,r,n))return!1}else if(!r&&!e.has(v)&&!Sx(i,v,r,n))return!1}return i.size===0}return!0}function Ax(e,t,r,n,i,o){for(var a=nf(e),u=0;u<a.length;u++){var l=a[u];if(Tr(r,l,i,o)&&Tr(n,t.get(l),i,o))return e.delete(l),!0}return!1}function vM(e,t,r,n){for(var i=null,o=hx(e),a=0;a<o.length;a++){var u=dx(o[a],2),l=u[0],h=u[1];if(hr(l)==="object"&&l!==null)i===null&&(i=new Set),i.add(l);else{var v=t.get(l);if(v===void 0&&!t.has(l)||!Tr(h,v,r,n)){if(r||!bM(e,t,l,h,n))return!1;i===null&&(i=new Set),i.add(l)}}}if(i!==null){for(var b=hx(t),T=0;T<b.length;T++){var P=dx(b[T],2),l=P[0],B=P[1];if(hr(l)==="object"&&l!==null){if(!Ax(i,e,l,B,r,n))return!1}else if(!r&&(!e.has(l)||!Tr(e.get(l),B,!1,n))&&!Ax(i,e,l,B,!1,n))return!1}return i.size===0}return!0}function xM(e,t,r,n,i,o){var a=0;if(o===Ix){if(!wM(e,t,r,i))return!1}else if(o===Px){if(!vM(e,t,r,i))return!1}else if(o===np)for(;a<e.length;a++)if(Wa(e,a)){if(!Wa(t,a)||!Tr(e[a],t[a],r,i))return!1}else{if(Wa(t,a))return!1;for(var u=Object.keys(e);a<u.length;a++){var l=u[a];if(!Wa(t,l)||!Tr(e[l],t[l],r,i))return!1}return u.length===Object.keys(t).length}for(a=0;a<n.length;a++){var h=n[a];if(!Tr(e[h],t[h],r,i))return!1}return!0}function SM(e,t){return Tr(e,t,lM)}function AM(e,t){return Tr(e,t,fM)}Bx.exports={isDeepEqual:SM,isDeepStrictEqual:AM}});var Da=F((OR,$x)=>{"use strict";S();A();function gi(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gi=function(r){return typeof r}:gi=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},gi(e)}function EM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var TM=Wh(),za=TM.codes,_x=za.ERR_AMBIGUOUS_ARGUMENT,$a=za.ERR_INVALID_ARG_TYPE,IM=za.ERR_INVALID_ARG_VALUE,PM=za.ERR_INVALID_RETURN_VALUE,bi=za.ERR_MISSING_ARGS,Eo=$v(),MM=Es(),BM=MM.inspect,Ux=Es().types,kM=Ux.isPromise,ip=Ux.isRegExp,_M=Object.assign?Object.assign:Zv().assign,Lx=Object.is?Object.is:Jh(),mi,of;function Ga(){var e=kx();mi=e.isDeepEqual,of=e.isDeepStrictEqual}var Vx=!1,lt=$x.exports=op,sf={};function sn(e){throw e.message instanceof Error?e.message:new Eo(e)}function Rx(e,t,r,n,i){var o=arguments.length,a;if(o===0)a="Failed";else if(o===1)r=e,e=void 0;else{if(Vx===!1){Vx=!0;var u=process.emitWarning?process.emitWarning:console.warn.bind(console);u("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(n="!=")}if(r instanceof Error)throw r;var l={actual:e,expected:t,operator:n===void 0?"fail":n,stackStartFn:i||Rx};r!==void 0&&(l.message=r);var h=new Eo(l);throw a&&(h.message=a,h.generatedMessage=!0),h}lt.fail=Rx;lt.AssertionError=Eo;function Cx(e,t,r,n){if(!r){var i=!1;if(t===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new Eo({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function op(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Cx.apply(void 0,[op,t.length].concat(t))}lt.ok=op;lt.equal=function e(t,r,n){if(arguments.length<2)throw new bi("actual","expected");t!=r&&sn({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})};lt.notEqual=function e(t,r,n){if(arguments.length<2)throw new bi("actual","expected");t==r&&sn({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})};lt.deepEqual=function e(t,r,n){if(arguments.length<2)throw new bi("actual","expected");mi===void 0&&Ga(),mi(t,r)||sn({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})};lt.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new bi("actual","expected");mi===void 0&&Ga(),mi(t,r)&&sn({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})};lt.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new bi("actual","expected");mi===void 0&&Ga(),of(t,r)||sn({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})};lt.notDeepStrictEqual=Dx;function Dx(e,t,r){if(arguments.length<2)throw new bi("actual","expected");mi===void 0&&Ga(),of(e,t)&&sn({actual:e,expected:t,message:r,operator:"notDeepStrictEqual",stackStartFn:Dx})}lt.strictEqual=function e(t,r,n){if(arguments.length<2)throw new bi("actual","expected");Lx(t,r)||sn({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})};lt.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new bi("actual","expected");Lx(t,r)&&sn({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var Nx=function e(t,r,n){var i=this;EM(this,e),r.forEach(function(o){o in t&&(n!==void 0&&typeof n[o]=="string"&&ip(t[o])&&t[o].test(n[o])?i[o]=n[o]:i[o]=t[o])})};function VM(e,t,r,n,i,o){if(!(r in e)||!of(e[r],t[r])){if(!n){var a=new Nx(e,i),u=new Nx(t,i,e),l=new Eo({actual:a,expected:u,operator:"deepStrictEqual",stackStartFn:o});throw l.actual=e,l.expected=t,l.operator=o.name,l}sn({actual:e,expected:t,message:n,operator:o.name,stackStartFn:o})}}function Kx(e,t,r,n){if(typeof t!="function"){if(ip(t))return t.test(e);if(arguments.length===2)throw new $a("expected",["Function","RegExp"],t);if(gi(e)!=="object"||e===null){var i=new Eo({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(t);if(t instanceof Error)o.push("name","message");else if(o.length===0)throw new IM("error",t,"may not be an empty object");return mi===void 0&&Ga(),o.forEach(function(a){typeof e[a]=="string"&&ip(t[a])&&t[a].test(e[a])||VM(e,t,a,r,o,n)}),!0}return t.prototype!==void 0&&e instanceof t?!0:Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function qx(e){if(typeof e!="function")throw new $a("fn","Function",e);try{e()}catch(t){return t}return sf}function Ox(e){return kM(e)||e!==null&&gi(e)==="object"&&typeof e.then=="function"&&typeof e.catch=="function"}function Hx(e){return Promise.resolve().then(function(){var t;if(typeof e=="function"){if(t=e(),!Ox(t))throw new PM("instance of Promise","promiseFn",t)}else if(Ox(e))t=e;else throw new $a("promiseFn",["Function","Promise"],e);return Promise.resolve().then(function(){return t}).then(function(){return sf}).catch(function(r){return r})})}function jx(e,t,r,n){if(typeof r=="string"){if(arguments.length===4)throw new $a("error",["Object","Error","Function","RegExp"],r);if(gi(t)==="object"&&t!==null){if(t.message===r)throw new _x("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new _x("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&gi(r)!=="object"&&typeof r!="function")throw new $a("error",["Object","Error","Function","RegExp"],r);if(t===sf){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o=e.name==="rejects"?"rejection":"exception";sn({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(r&&!Kx(t,r,n,e))throw t}function Fx(e,t,r,n){if(t!==sf){if(typeof r=="string"&&(n=r,r=void 0),!r||Kx(t,r)){var i=n?": ".concat(n):".",o=e.name==="doesNotReject"?"rejection":"exception";sn({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}lt.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];jx.apply(void 0,[e,qx(t)].concat(n))};lt.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Hx(t).then(function(o){return jx.apply(void 0,[e,o].concat(n))})};lt.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Fx.apply(void 0,[e,qx(t)].concat(n))};lt.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Hx(t).then(function(o){return Fx.apply(void 0,[e,o].concat(n))})};lt.ifError=function e(t){if(t!=null){var r="ifError got unwanted exception: ";gi(t)==="object"&&typeof t.message=="string"?t.message.length===0&&t.constructor?r+=t.constructor.name:r+=t.message:r+=BM(t);var n=new Eo({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),i=t.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var a=n.stack.split(`
`),u=0;u<o.length;u++){var l=a.indexOf(o[u]);if(l!==-1){a=a.slice(0,l);break}}n.stack="".concat(a.join(`
`),`
`).concat(o.join(`
`))}throw n}};function Wx(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Cx.apply(void 0,[Wx,t.length].concat(t))}lt.strict=_M(Wx,lt,{equal:lt.strictEqual,deepEqual:lt.deepStrictEqual,notEqual:lt.notStrictEqual,notDeepEqual:lt.notDeepStrictEqual});lt.strict.strict=lt.strict});var Bs=F(Fe=>{"use strict";S();A();Object.defineProperty(Fe,"__esModule",{value:!0});Fe.baToJSON=Fe.addHexPrefix=Fe.toUnsigned=Fe.fromSigned=Fe.bufferToHex=Fe.bufferToInt=Fe.toBuffer=Fe.stripZeros=Fe.unpad=Fe.setLengthRight=Fe.setLength=Fe.setLengthLeft=Fe.zeros=void 0;var Ms=po(),sp=lo();Fe.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};Fe.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var n=Fe.zeros(t);return e=Fe.toBuffer(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};Fe.setLength=Fe.setLengthLeft;Fe.setLengthRight=function(e,t){return Fe.setLength(e,t,!0)};Fe.unpad=function(e){e=Ms.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};Fe.stripZeros=Fe.unpad;Fe.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if(Ms.isHexString(e))e=Buffer.from(Ms.padToEven(Ms.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=Ms.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(sp.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};Fe.bufferToInt=function(e){return new sp(Fe.toBuffer(e)).toNumber()};Fe.bufferToHex=function(e){return e=Fe.toBuffer(e),"0x"+e.toString("hex")};Fe.fromSigned=function(e){return new sp(e).fromTwos(256)};Fe.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};Fe.addHexPrefix=function(e){return typeof e!="string"||Ms.isHexPrefixed(e)?e:"0x"+e};Fe.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(Fe.baToJSON(e[r]));return t}}});var zx=F(ap=>{"use strict";S();A();Object.defineProperty(ap,"__esModule",{value:!0});function NM(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}ap.createHashFunction=NM});var Yx=F((jR,Zx)=>{S();A();var{Transform:OM}=yy();Zx.exports=e=>class Gx extends OM{constructor(r,n,i,o,a){super(a),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=o,this._options=a,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(a){o=a}i(o)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new Gx(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var Qx=F(($R,Xx)=>{S();A();var{Transform:UM}=yy();Xx.exports=e=>class Jx extends UM{constructor(r,n,i,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=o,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(a){o=a}i(o)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new Jx(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var t1=F((ZR,e1)=>{S();A();var LM=Yx(),RM=Qx();e1.exports=function(e){let t=LM(e),r=RM(e);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}}});var i1=F(n1=>{S();A();var r1=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];n1.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],v=e[8]^e[18]^e[28]^e[38]^e[48],b=e[9]^e[19]^e[29]^e[39]^e[49],T=v^(i<<1|o>>>31),P=b^(o<<1|i>>>31),B=e[0]^T,I=e[1]^P,_=e[10]^T,V=e[11]^P,R=e[20]^T,N=e[21]^P,H=e[30]^T,K=e[31]^P,C=e[40]^T,q=e[41]^P;T=r^(a<<1|u>>>31),P=n^(u<<1|a>>>31);let U=e[2]^T,G=e[3]^P,x=e[12]^T,s=e[13]^P,f=e[22]^T,d=e[23]^P,y=e[32]^T,p=e[33]^P,w=e[42]^T,E=e[43]^P;T=i^(l<<1|h>>>31),P=o^(h<<1|l>>>31);let g=e[4]^T,c=e[5]^P,m=e[14]^T,O=e[15]^P,L=e[24]^T,D=e[25]^P,j=e[34]^T,W=e[35]^P,Z=e[44]^T,Re=e[45]^P;T=a^(v<<1|b>>>31),P=u^(b<<1|v>>>31);let X=e[6]^T,Y=e[7]^P,yt=e[16]^T,ne=e[17]^P,J=e[26]^T,gt=e[27]^P,te=e[36]^T,ie=e[37]^P,Jt=e[46]^T,Me=e[47]^P;T=l^(r<<1|n>>>31),P=h^(n<<1|r>>>31);let Be=e[8]^T,ti=e[9]^P,ke=e[18]^T,_e=e[19]^P,ri=e[28]^T,Ve=e[29]^P,Ne=e[38]^T,ni=e[39]^P,Oe=e[48]^T,Ue=e[49]^P,kn=B,se=I,ae=V<<4|_>>>28,_n=_<<4|V>>>28,ce=R<<3|N>>>29,ue=N<<3|R>>>29,Vn=K<<9|H>>>23,fe=H<<9|K>>>23,le=C<<18|q>>>14,Nn=q<<18|C>>>14,de=U<<1|G>>>31,he=G<<1|U>>>31,On=s<<12|x>>>20,pe=x<<12|s>>>20,ye=f<<10|d>>>22,Un=d<<10|f>>>22,ge=p<<13|y>>>19,me=y<<13|p>>>19,Ln=w<<2|E>>>30,be=E<<2|w>>>30,we=c<<30|g>>>2,Rn=g<<30|c>>>2,ve=m<<6|O>>>26,xe=O<<6|m>>>26,Cn=D<<11|L>>>21,Se=L<<11|D>>>21,Ae=j<<15|W>>>17,Dn=W<<15|j>>>17,Ee=Re<<29|Z>>>3,Te=Z<<29|Re>>>3,Kn=X<<28|Y>>>4,Ie=Y<<28|X>>>4,Pe=ne<<23|yt>>>9,_r=yt<<23|ne>>>9,Vr=J<<25|gt>>>7,Nr=gt<<25|J>>>7,Or=te<<21|ie>>>11,Ur=ie<<21|te>>>11,Lr=Me<<24|Jt>>>8,Rr=Jt<<24|Me>>>8,Cr=Be<<27|ti>>>5,Dr=ti<<27|Be>>>5,Kr=ke<<20|_e>>>12,qr=_e<<20|ke>>>12,Hr=Ve<<7|ri>>>25,jr=ri<<7|Ve>>>25,Fr=Ne<<8|ni>>>24,Wr=ni<<8|Ne>>>24,$r=Oe<<14|Ue>>>18,zr=Ue<<14|Oe>>>18;e[0]=kn^~On&Cn,e[1]=se^~pe&Se,e[10]=Kn^~Kr&ce,e[11]=Ie^~qr&ue,e[20]=de^~ve&Vr,e[21]=he^~xe&Nr,e[30]=Cr^~ae&ye,e[31]=Dr^~_n&Un,e[40]=we^~Pe&Hr,e[41]=Rn^~_r&jr,e[2]=On^~Cn&Or,e[3]=pe^~Se&Ur,e[12]=Kr^~ce&ge,e[13]=qr^~ue&me,e[22]=ve^~Vr&Fr,e[23]=xe^~Nr&Wr,e[32]=ae^~ye&Ae,e[33]=_n^~Un&Dn,e[42]=Pe^~Hr&Vn,e[43]=_r^~jr&fe,e[4]=Cn^~Or&$r,e[5]=Se^~Ur&zr,e[14]=ce^~ge&Ee,e[15]=ue^~me&Te,e[24]=Vr^~Fr&le,e[25]=Nr^~Wr&Nn,e[34]=ye^~Ae&Lr,e[35]=Un^~Dn&Rr,e[44]=Hr^~Vn&Ln,e[45]=jr^~fe&be,e[6]=Or^~$r&kn,e[7]=Ur^~zr&se,e[16]=ge^~Ee&Kn,e[17]=me^~Te&Ie,e[26]=Fr^~le&de,e[27]=Wr^~Nn&he,e[36]=Ae^~Lr&Cr,e[37]=Dn^~Rr&Dr,e[46]=Vn^~Ln&we,e[47]=fe^~be&Rn,e[8]=$r^~kn&On,e[9]=zr^~se&pe,e[18]=Ee^~Kn&Kr,e[19]=Te^~Ie&qr,e[28]=le^~de&ve,e[29]=Nn^~he&xe,e[38]=Lr^~Cr&ae,e[39]=Rr^~Dr&_n,e[48]=Ln^~we&Pe,e[49]=be^~Rn&_r,e[0]^=r1[t*2],e[1]^=r1[t*2+1]}}});var s1=F((tC,o1)=>{S();A();var af=i1();function ks(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}ks.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};ks.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(af.p1600(this.state),this.count=0)};ks.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&af.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),af.p1600(this.state),this.count=0,this.squeezing=!0};ks.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(af.p1600(this.state),this.count=0);return t};ks.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};o1.exports=ks});var c1=F((iC,a1)=>{S();A();a1.exports=t1()(s1())});var u1=F(_s=>{"use strict";S();A();Object.defineProperty(_s,"__esModule",{value:!0});var cf=zx(),uf=c1();_s.keccak224=cf.createHashFunction(function(){return uf("keccak224")});_s.keccak256=cf.createHashFunction(function(){return uf("keccak256")});_s.keccak384=cf.createHashFunction(function(){return uf("keccak384")});_s.keccak512=cf.createHashFunction(function(){return uf("keccak512")})});var df=F(er=>{"use strict";S();A();Object.defineProperty(er,"__esModule",{value:!0});er.rlphash=er.ripemd160=er.sha256=er.keccak256=er.keccak=void 0;var lf=u1(),CM=lf.keccak224,DM=lf.keccak384,KM=lf.keccak256,qM=lf.keccak512,f1=Q2(),HM=po(),jM=Tu(),ff=Bs();er.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!HM.isHexString(e)?e=Buffer.from(e,"utf8"):e=ff.toBuffer(e),t||(t=256),t){case 224:return CM(e);case 256:return KM(e);case 384:return DM(e);case 512:return qM(e);default:throw new Error("Invald algorithm: keccak"+t)}};er.keccak256=function(e){return er.keccak(e)};er.sha256=function(e){return e=ff.toBuffer(e),f1("sha256").update(e).digest()};er.ripemd160=function(e,t){e=ff.toBuffer(e);var r=f1("rmd160").update(e).digest();return t===!0?ff.setLength(r,32):r};er.rlphash=function(e){return er.keccak(jM.encode(e))}});var l1=F(Ce=>{"use strict";S();A();Object.defineProperty(Ce,"__esModule",{value:!0});Ce.importPublic=Ce.privateToPublic=Ce.privateToAddress=Ce.publicToAddress=Ce.pubToAddress=Ce.isValidPublic=Ce.isValidPrivate=Ce.isPrecompiled=Ce.generateAddress2=Ce.generateAddress=Ce.isValidChecksumAddress=Ce.toChecksumAddress=Ce.isZeroAddress=Ce.isValidAddress=Ce.zeroAddress=void 0;var cp=Da(),FM=po(),Vs=Au(),WM=lo(),an=Bs(),Ns=df();Ce.zeroAddress=function(){var e=20,t=an.zeros(e);return an.bufferToHex(t)};Ce.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};Ce.isZeroAddress=function(e){var t=Ce.zeroAddress();return t===an.addHexPrefix(e)};Ce.toChecksumAddress=function(e,t){e=FM.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",n=Ns.keccak(r+e).toString("hex"),i="0x",o=0;o<e.length;o++)parseInt(n[o],16)>=8?i+=e[o].toUpperCase():i+=e[o];return i};Ce.isValidChecksumAddress=function(e,t){return Ce.isValidAddress(e)&&Ce.toChecksumAddress(e,t)===e};Ce.generateAddress=function(e,t){e=an.toBuffer(e);var r=new WM(t);return r.isZero()?Ns.rlphash([e,null]).slice(-20):Ns.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};Ce.generateAddress2=function(e,t,r){var n=an.toBuffer(e),i=an.toBuffer(t),o=an.toBuffer(r);cp(n.length===20),cp(i.length===32);var a=Ns.keccak256(Buffer.concat([Buffer.from("ff","hex"),n,i,Ns.keccak256(o)]));return a.slice(-20)};Ce.isPrecompiled=function(e){var t=an.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};Ce.isValidPrivate=function(e){return Vs.privateKeyVerify(e)};Ce.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?Vs.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?Vs.publicKeyVerify(e):!1};Ce.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=an.toBuffer(e),t&&e.length!==64&&(e=Vs.publicKeyConvert(e,!1).slice(1)),cp(e.length===64),Ns.keccak(e).slice(-20)};Ce.publicToAddress=Ce.pubToAddress;Ce.privateToAddress=function(e){return Ce.publicToAddress(Ce.privateToPublic(e))};Ce.privateToPublic=function(e){return e=an.toBuffer(e),Vs.publicKeyCreate(e,!1).slice(1)};Ce.importPublic=function(e){return e=an.toBuffer(e),e.length!==64&&(e=Vs.publicKeyConvert(e,!1).slice(1)),e}});var d1=F(tr=>{"use strict";S();A();Object.defineProperty(tr,"__esModule",{value:!0});tr.hashPersonalMessage=tr.isValidSignature=tr.fromRpcSig=tr.toRpcSig=tr.ecrecover=tr.ecsign=void 0;var up=Au(),hf=lo(),To=Bs(),$M=df();tr.ecsign=function(e,t,r){var n=up.sign(e,t),i=n.recovery,o={r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?i+(r*2+35):i+27};return o};tr.ecrecover=function(e,t,r,n,i){var o=Buffer.concat([To.setLength(r,32),To.setLength(n,32)],64),a=fp(t,i);if(!lp(a))throw new Error("Invalid signature v value");var u=up.recover(e,o,a);return up.publicKeyConvert(u,!1).slice(1)};tr.toRpcSig=function(e,t,r,n){var i=fp(e,n);if(!lp(i))throw new Error("Invalid signature v value");return To.bufferToHex(Buffer.concat([To.setLengthLeft(t,32),To.setLengthLeft(r,32),To.toBuffer(e)]))};tr.fromRpcSig=function(e){var t=To.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};tr.isValidSignature=function(e,t,r,n,i){n===void 0&&(n=!0);var o=new hf("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),a=new hf("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!lp(fp(e,i)))return!1;var u=new hf(t),l=new hf(r);return!(u.isZero()||u.gt(a)||l.isZero()||l.gt(a)||n&&l.cmp(o)===1)};tr.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return $M.keccak(Buffer.concat([t,e]))};function fp(e,t){return t?e-(2*t+35):e-27}function lp(e){return e===0||e===1}});var y1=F(yf=>{"use strict";S();A();Object.defineProperty(yf,"__esModule",{value:!0});yf.defineProperties=void 0;var h1=Da(),zM=po(),p1=Tu(),pf=Bs();yf.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(i){if(i===void 0&&(i=!1),i){var o={};return e._fields.forEach(function(a){o[a]="0x"+e[a].toString("hex")}),o}return pf.baToJSON(e.raw)},e.serialize=function(){return p1.encode(e.raw)},t.forEach(function(i,o){e._fields.push(i.name);function a(){return e.raw[o]}function u(l){l=pf.toBuffer(l),l.toString("hex")==="00"&&!i.allowZero&&(l=Buffer.allocUnsafe(0)),i.allowLess&&i.length?(l=pf.stripZeros(l),h1(i.length>=l.length,"The field "+i.name+" must not have more "+i.length+" bytes")):!(i.allowZero&&l.length===0)&&i.length&&h1(i.length===l.length,"The field "+i.name+" must have byte length of "+i.length),e.raw[o]=l}Object.defineProperty(e,i.name,{enumerable:!0,configurable:!0,get:a,set:u}),i.default&&(e[i.name]=i.default),i.alias&&Object.defineProperty(e,i.alias,{enumerable:!1,configurable:!0,set:u,get:a})}),r)if(typeof r=="string"&&(r=Buffer.from(zM.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=p1.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(i,o){e[e._fields[o]]=pf.toBuffer(i)})}else if(typeof r=="object"){var n=Object.keys(r);t.forEach(function(i){n.indexOf(i.name)!==-1&&(e[i.name]=r[i.name]),n.indexOf(i.alias)!==-1&&(e[i.alias]=r[i.alias])})}else throw new Error("invalid data")}});var Za=F(Bt=>{"use strict";S();A();var GM=Bt&&Bt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Os=Bt&&Bt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&GM(t,e,r)};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.secp256k1=Bt.rlp=Bt.BN=void 0;var ZM=Au();Bt.secp256k1=ZM;var YM=po(),JM=lo();Bt.BN=JM;var XM=Tu();Bt.rlp=XM;Object.assign(Bt,YM);Os(Yb(),Bt);Os(l1(),Bt);Os(df(),Bt);Os(d1(),Bt);Os(Bs(),Bt);Os(y1(),Bt)});var Ya=F(rr=>{"use strict";S();A();Object.defineProperty(rr,"__esModule",{value:!0});rr.normalize=rr.recoverPublicKey=rr.concatSig=rr.legacyToBuffer=rr.isNullish=rr.padWithZeroes=void 0;var Ir=Za(),dp=po();function hp(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}rr.padWithZeroes=hp;function QM(e){return e==null}rr.isNullish=QM;function e4(e){return typeof e=="string"&&!dp.isHexString(e)?Buffer.from(e):Ir.toBuffer(e)}rr.legacyToBuffer=e4;function t4(e,t,r){let n=Ir.fromSigned(t),i=Ir.fromSigned(r),o=Ir.bufferToInt(e),a=hp(Ir.toUnsigned(n).toString("hex"),64),u=hp(Ir.toUnsigned(i).toString("hex"),64),l=dp.stripHexPrefix(dp.intToHex(o));return Ir.addHexPrefix(a.concat(u,l))}rr.concatSig=t4;function r4(e,t){let r=Ir.fromRpcSig(t);return Ir.ecrecover(e,r.v,r.r,r.s)}rr.recoverPublicKey=r4;function n4(e){if(e){if(typeof e=="number"){let t=Ir.toBuffer(e);e=Ir.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return Ir.addHexPrefix(e.toLowerCase())}}rr.normalize=n4});var m1=F(wi=>{"use strict";S();A();Object.defineProperty(wi,"__esModule",{value:!0});wi.extractPublicKey=wi.recoverPersonalSignature=wi.personalSign=void 0;var Us=Za(),An=Ya();function i4({privateKey:e,data:t}){if(An.isNullish(t))throw new Error("Missing data parameter");if(An.isNullish(e))throw new Error("Missing privateKey parameter");let r=An.legacyToBuffer(t),n=Us.hashPersonalMessage(r),i=Us.ecsign(n,e);return An.concatSig(Us.toBuffer(i.v),i.r,i.s)}wi.personalSign=i4;function o4({data:e,signature:t}){if(An.isNullish(e))throw new Error("Missing data parameter");if(An.isNullish(t))throw new Error("Missing signature parameter");let r=g1(e,t),n=Us.publicToAddress(r);return Us.bufferToHex(n)}wi.recoverPersonalSignature=o4;function s4({data:e,signature:t}){if(An.isNullish(e))throw new Error("Missing data parameter");if(An.isNullish(t))throw new Error("Missing signature parameter");return`0x${g1(e,t).toString("hex")}`}wi.extractPublicKey=s4;function g1(e,t){let r=Us.hashPersonalMessage(An.legacyToBuffer(e));return An.recoverPublicKey(r,t)}});var w1=F((b1,pp)=>{S();A();(function(e,t){"use strict";function r(x,s){if(!x)throw new Error(s||"Assertion failed")}function n(x,s){x.super_=s;var f=function(){};f.prototype=s.prototype,x.prototype=new f,x.prototype.constructor=x}function i(x,s,f){if(i.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((s==="le"||s==="be")&&(f=s,s=10),this._init(x||0,s||10,f||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=gy().Buffer}catch{}i.isBN=function(s){return s instanceof i?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===i.wordSize&&Array.isArray(s.words)},i.max=function(s,f){return s.cmp(f)>0?s:f},i.min=function(s,f){return s.cmp(f)<0?s:f},i.prototype._init=function(s,f,d){if(typeof s=="number")return this._initNumber(s,f,d);if(typeof s=="object")return this._initArray(s,f,d);f==="hex"&&(f=16),r(f===(f|0)&&f>=2&&f<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(f===16?this._parseHex(s,y,d):(this._parseBase(s,f,y),d==="le"&&this._initArray(this.toArray(),f,d)))},i.prototype._initNumber=function(s,f,d){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),f,d)},i.prototype._initArray=function(s,f,d){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var p,w,E=0;if(d==="be")for(y=s.length-1,p=0;y>=0;y-=3)w=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[p]|=w<<E&67108863,this.words[p+1]=w>>>26-E&67108863,E+=24,E>=26&&(E-=26,p++);else if(d==="le")for(y=0,p=0;y<s.length;y+=3)w=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[p]|=w<<E&67108863,this.words[p+1]=w>>>26-E&67108863,E+=24,E>=26&&(E-=26,p++);return this.strip()};function a(x,s){var f=x.charCodeAt(s);return f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:f-48&15}function u(x,s,f){var d=a(x,f);return f-1>=s&&(d|=a(x,f-1)<<4),d}i.prototype._parseHex=function(s,f,d){this.length=Math.ceil((s.length-f)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var p=0,w=0,E;if(d==="be")for(y=s.length-1;y>=f;y-=2)E=u(s,f,y)<<p,this.words[w]|=E&67108863,p>=18?(p-=18,w+=1,this.words[w]|=E>>>26):p+=8;else{var g=s.length-f;for(y=g%2===0?f+1:f;y<s.length;y+=2)E=u(s,f,y)<<p,this.words[w]|=E&67108863,p>=18?(p-=18,w+=1,this.words[w]|=E>>>26):p+=8}this.strip()};function l(x,s,f,d){for(var y=0,p=Math.min(x.length,f),w=s;w<p;w++){var E=x.charCodeAt(w)-48;y*=d,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}i.prototype._parseBase=function(s,f,d){this.words=[0],this.length=1;for(var y=0,p=1;p<=67108863;p*=f)y++;y--,p=p/f|0;for(var w=s.length-d,E=w%y,g=Math.min(w,w-E)+d,c=0,m=d;m<g;m+=y)c=l(s,m,m+y,f),this.imuln(p),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var O=1;for(c=l(s,m,s.length,f),m=0;m<E;m++)O*=f;this.imuln(O),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(s){s.words=new Array(this.length);for(var f=0;f<this.length;f++)s.words[f]=this.words[f];s.length=this.length,s.negative=this.negative,s.red=this.red},i.prototype.clone=function(){var s=new i(null);return this.copy(s),s},i.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(s,f){s=s||10,f=f|0||1;var d;if(s===16||s==="hex"){d="";for(var y=0,p=0,w=0;w<this.length;w++){var E=this.words[w],g=((E<<y|p)&16777215).toString(16);p=E>>>24-y&16777215,p!==0||w!==this.length-1?d=h[6-g.length]+g+d:d=g+d,y+=2,y>=26&&(y-=26,w--)}for(p!==0&&(d=p.toString(16)+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(s===(s|0)&&s>=2&&s<=36){var c=v[s],m=b[s];d="";var O=this.clone();for(O.negative=0;!O.isZero();){var L=O.modn(m).toString(s);O=O.idivn(m),O.isZero()?d=L+d:d=h[c-L.length]+L+d}for(this.isZero()&&(d="0"+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(s,f){return r(typeof o<"u"),this.toArrayLike(o,s,f)},i.prototype.toArray=function(s,f){return this.toArrayLike(Array,s,f)},i.prototype.toArrayLike=function(s,f,d){var y=this.byteLength(),p=d||Math.max(1,y);r(y<=p,"byte array longer than desired length"),r(p>0,"Requested array length <= 0"),this.strip();var w=f==="le",E=new s(p),g,c,m=this.clone();if(w){for(c=0;!m.isZero();c++)g=m.andln(255),m.iushrn(8),E[c]=g;for(;c<p;c++)E[c]=0}else{for(c=0;c<p-y;c++)E[c]=0;for(c=0;!m.isZero();c++)g=m.andln(255),m.iushrn(8),E[p-c-1]=g}return E},Math.clz32?i.prototype._countBits=function(s){return 32-Math.clz32(s)}:i.prototype._countBits=function(s){var f=s,d=0;return f>=4096&&(d+=13,f>>>=13),f>=64&&(d+=7,f>>>=7),f>=8&&(d+=4,f>>>=4),f>=2&&(d+=2,f>>>=2),d+f},i.prototype._zeroBits=function(s){if(s===0)return 26;var f=s,d=0;return f&8191||(d+=13,f>>>=13),f&127||(d+=7,f>>>=7),f&15||(d+=4,f>>>=4),f&3||(d+=2,f>>>=2),f&1||d++,d},i.prototype.bitLength=function(){var s=this.words[this.length-1],f=this._countBits(s);return(this.length-1)*26+f};function T(x){for(var s=new Array(x.bitLength()),f=0;f<s.length;f++){var d=f/26|0,y=f%26;s[f]=(x.words[d]&1<<y)>>>y}return s}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,f=0;f<this.length;f++){var d=this._zeroBits(this.words[f]);if(s+=d,d!==26)break}return s},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},i.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var f=0;f<s.length;f++)this.words[f]=this.words[f]|s.words[f];return this.strip()},i.prototype.ior=function(s){return r((this.negative|s.negative)===0),this.iuor(s)},i.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},i.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},i.prototype.iuand=function(s){var f;this.length>s.length?f=s:f=this;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]&s.words[d];return this.length=f.length,this.strip()},i.prototype.iand=function(s){return r((this.negative|s.negative)===0),this.iuand(s)},i.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},i.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},i.prototype.iuxor=function(s){var f,d;this.length>s.length?(f=this,d=s):(f=s,d=this);for(var y=0;y<d.length;y++)this.words[y]=f.words[y]^d.words[y];if(this!==f)for(;y<f.length;y++)this.words[y]=f.words[y];return this.length=f.length,this.strip()},i.prototype.ixor=function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},i.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},i.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},i.prototype.inotn=function(s){r(typeof s=="number"&&s>=0);var f=Math.ceil(s/26)|0,d=s%26;this._expand(f),d>0&&f--;for(var y=0;y<f;y++)this.words[y]=~this.words[y]&67108863;return d>0&&(this.words[y]=~this.words[y]&67108863>>26-d),this.strip()},i.prototype.notn=function(s){return this.clone().inotn(s)},i.prototype.setn=function(s,f){r(typeof s=="number"&&s>=0);var d=s/26|0,y=s%26;return this._expand(d+1),f?this.words[d]=this.words[d]|1<<y:this.words[d]=this.words[d]&~(1<<y),this.strip()},i.prototype.iadd=function(s){var f;if(this.negative!==0&&s.negative===0)return this.negative=0,f=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,f=this.isub(s),s.negative=1,f._normSign();var d,y;this.length>s.length?(d=this,y=s):(d=s,y=this);for(var p=0,w=0;w<y.length;w++)f=(d.words[w]|0)+(y.words[w]|0)+p,this.words[w]=f&67108863,p=f>>>26;for(;p!==0&&w<d.length;w++)f=(d.words[w]|0)+p,this.words[w]=f&67108863,p=f>>>26;if(this.length=d.length,p!==0)this.words[this.length]=p,this.length++;else if(d!==this)for(;w<d.length;w++)this.words[w]=d.words[w];return this},i.prototype.add=function(s){var f;return s.negative!==0&&this.negative===0?(s.negative=0,f=this.sub(s),s.negative^=1,f):s.negative===0&&this.negative!==0?(this.negative=0,f=s.sub(this),this.negative=1,f):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},i.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var f=this.iadd(s);return s.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var d=this.cmp(s);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,p;d>0?(y=this,p=s):(y=s,p=this);for(var w=0,E=0;E<p.length;E++)f=(y.words[E]|0)-(p.words[E]|0)+w,w=f>>26,this.words[E]=f&67108863;for(;w!==0&&E<y.length;E++)f=(y.words[E]|0)+w,w=f>>26,this.words[E]=f&67108863;if(w===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(s){return this.clone().isub(s)};function P(x,s,f){f.negative=s.negative^x.negative;var d=x.length+s.length|0;f.length=d,d=d-1|0;var y=x.words[0]|0,p=s.words[0]|0,w=y*p,E=w&67108863,g=w/67108864|0;f.words[0]=E;for(var c=1;c<d;c++){for(var m=g>>>26,O=g&67108863,L=Math.min(c,s.length-1),D=Math.max(0,c-x.length+1);D<=L;D++){var j=c-D|0;y=x.words[j]|0,p=s.words[D]|0,w=y*p+O,m+=w/67108864|0,O=w&67108863}f.words[c]=O|0,g=m|0}return g!==0?f.words[c]=g|0:f.length--,f.strip()}var B=function(s,f,d){var y=s.words,p=f.words,w=d.words,E=0,g,c,m,O=y[0]|0,L=O&8191,D=O>>>13,j=y[1]|0,W=j&8191,Z=j>>>13,Re=y[2]|0,X=Re&8191,Y=Re>>>13,yt=y[3]|0,ne=yt&8191,J=yt>>>13,gt=y[4]|0,te=gt&8191,ie=gt>>>13,Jt=y[5]|0,Me=Jt&8191,Be=Jt>>>13,ti=y[6]|0,ke=ti&8191,_e=ti>>>13,ri=y[7]|0,Ve=ri&8191,Ne=ri>>>13,ni=y[8]|0,Oe=ni&8191,Ue=ni>>>13,kn=y[9]|0,se=kn&8191,ae=kn>>>13,_n=p[0]|0,ce=_n&8191,ue=_n>>>13,Vn=p[1]|0,fe=Vn&8191,le=Vn>>>13,Nn=p[2]|0,de=Nn&8191,he=Nn>>>13,On=p[3]|0,pe=On&8191,ye=On>>>13,Un=p[4]|0,ge=Un&8191,me=Un>>>13,Ln=p[5]|0,be=Ln&8191,we=Ln>>>13,Rn=p[6]|0,ve=Rn&8191,xe=Rn>>>13,Cn=p[7]|0,Se=Cn&8191,Ae=Cn>>>13,Dn=p[8]|0,Ee=Dn&8191,Te=Dn>>>13,Kn=p[9]|0,Ie=Kn&8191,Pe=Kn>>>13;d.negative=s.negative^f.negative,d.length=19,g=Math.imul(L,ce),c=Math.imul(L,ue),c=c+Math.imul(D,ce)|0,m=Math.imul(D,ue);var _r=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(_r>>>26)|0,_r&=67108863,g=Math.imul(W,ce),c=Math.imul(W,ue),c=c+Math.imul(Z,ce)|0,m=Math.imul(Z,ue),g=g+Math.imul(L,fe)|0,c=c+Math.imul(L,le)|0,c=c+Math.imul(D,fe)|0,m=m+Math.imul(D,le)|0;var Vr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,g=Math.imul(X,ce),c=Math.imul(X,ue),c=c+Math.imul(Y,ce)|0,m=Math.imul(Y,ue),g=g+Math.imul(W,fe)|0,c=c+Math.imul(W,le)|0,c=c+Math.imul(Z,fe)|0,m=m+Math.imul(Z,le)|0,g=g+Math.imul(L,de)|0,c=c+Math.imul(L,he)|0,c=c+Math.imul(D,de)|0,m=m+Math.imul(D,he)|0;var Nr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,g=Math.imul(ne,ce),c=Math.imul(ne,ue),c=c+Math.imul(J,ce)|0,m=Math.imul(J,ue),g=g+Math.imul(X,fe)|0,c=c+Math.imul(X,le)|0,c=c+Math.imul(Y,fe)|0,m=m+Math.imul(Y,le)|0,g=g+Math.imul(W,de)|0,c=c+Math.imul(W,he)|0,c=c+Math.imul(Z,de)|0,m=m+Math.imul(Z,he)|0,g=g+Math.imul(L,pe)|0,c=c+Math.imul(L,ye)|0,c=c+Math.imul(D,pe)|0,m=m+Math.imul(D,ye)|0;var Or=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Or>>>26)|0,Or&=67108863,g=Math.imul(te,ce),c=Math.imul(te,ue),c=c+Math.imul(ie,ce)|0,m=Math.imul(ie,ue),g=g+Math.imul(ne,fe)|0,c=c+Math.imul(ne,le)|0,c=c+Math.imul(J,fe)|0,m=m+Math.imul(J,le)|0,g=g+Math.imul(X,de)|0,c=c+Math.imul(X,he)|0,c=c+Math.imul(Y,de)|0,m=m+Math.imul(Y,he)|0,g=g+Math.imul(W,pe)|0,c=c+Math.imul(W,ye)|0,c=c+Math.imul(Z,pe)|0,m=m+Math.imul(Z,ye)|0,g=g+Math.imul(L,ge)|0,c=c+Math.imul(L,me)|0,c=c+Math.imul(D,ge)|0,m=m+Math.imul(D,me)|0;var Ur=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,g=Math.imul(Me,ce),c=Math.imul(Me,ue),c=c+Math.imul(Be,ce)|0,m=Math.imul(Be,ue),g=g+Math.imul(te,fe)|0,c=c+Math.imul(te,le)|0,c=c+Math.imul(ie,fe)|0,m=m+Math.imul(ie,le)|0,g=g+Math.imul(ne,de)|0,c=c+Math.imul(ne,he)|0,c=c+Math.imul(J,de)|0,m=m+Math.imul(J,he)|0,g=g+Math.imul(X,pe)|0,c=c+Math.imul(X,ye)|0,c=c+Math.imul(Y,pe)|0,m=m+Math.imul(Y,ye)|0,g=g+Math.imul(W,ge)|0,c=c+Math.imul(W,me)|0,c=c+Math.imul(Z,ge)|0,m=m+Math.imul(Z,me)|0,g=g+Math.imul(L,be)|0,c=c+Math.imul(L,we)|0,c=c+Math.imul(D,be)|0,m=m+Math.imul(D,we)|0;var Lr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,g=Math.imul(ke,ce),c=Math.imul(ke,ue),c=c+Math.imul(_e,ce)|0,m=Math.imul(_e,ue),g=g+Math.imul(Me,fe)|0,c=c+Math.imul(Me,le)|0,c=c+Math.imul(Be,fe)|0,m=m+Math.imul(Be,le)|0,g=g+Math.imul(te,de)|0,c=c+Math.imul(te,he)|0,c=c+Math.imul(ie,de)|0,m=m+Math.imul(ie,he)|0,g=g+Math.imul(ne,pe)|0,c=c+Math.imul(ne,ye)|0,c=c+Math.imul(J,pe)|0,m=m+Math.imul(J,ye)|0,g=g+Math.imul(X,ge)|0,c=c+Math.imul(X,me)|0,c=c+Math.imul(Y,ge)|0,m=m+Math.imul(Y,me)|0,g=g+Math.imul(W,be)|0,c=c+Math.imul(W,we)|0,c=c+Math.imul(Z,be)|0,m=m+Math.imul(Z,we)|0,g=g+Math.imul(L,ve)|0,c=c+Math.imul(L,xe)|0,c=c+Math.imul(D,ve)|0,m=m+Math.imul(D,xe)|0;var Rr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,g=Math.imul(Ve,ce),c=Math.imul(Ve,ue),c=c+Math.imul(Ne,ce)|0,m=Math.imul(Ne,ue),g=g+Math.imul(ke,fe)|0,c=c+Math.imul(ke,le)|0,c=c+Math.imul(_e,fe)|0,m=m+Math.imul(_e,le)|0,g=g+Math.imul(Me,de)|0,c=c+Math.imul(Me,he)|0,c=c+Math.imul(Be,de)|0,m=m+Math.imul(Be,he)|0,g=g+Math.imul(te,pe)|0,c=c+Math.imul(te,ye)|0,c=c+Math.imul(ie,pe)|0,m=m+Math.imul(ie,ye)|0,g=g+Math.imul(ne,ge)|0,c=c+Math.imul(ne,me)|0,c=c+Math.imul(J,ge)|0,m=m+Math.imul(J,me)|0,g=g+Math.imul(X,be)|0,c=c+Math.imul(X,we)|0,c=c+Math.imul(Y,be)|0,m=m+Math.imul(Y,we)|0,g=g+Math.imul(W,ve)|0,c=c+Math.imul(W,xe)|0,c=c+Math.imul(Z,ve)|0,m=m+Math.imul(Z,xe)|0,g=g+Math.imul(L,Se)|0,c=c+Math.imul(L,Ae)|0,c=c+Math.imul(D,Se)|0,m=m+Math.imul(D,Ae)|0;var Cr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,g=Math.imul(Oe,ce),c=Math.imul(Oe,ue),c=c+Math.imul(Ue,ce)|0,m=Math.imul(Ue,ue),g=g+Math.imul(Ve,fe)|0,c=c+Math.imul(Ve,le)|0,c=c+Math.imul(Ne,fe)|0,m=m+Math.imul(Ne,le)|0,g=g+Math.imul(ke,de)|0,c=c+Math.imul(ke,he)|0,c=c+Math.imul(_e,de)|0,m=m+Math.imul(_e,he)|0,g=g+Math.imul(Me,pe)|0,c=c+Math.imul(Me,ye)|0,c=c+Math.imul(Be,pe)|0,m=m+Math.imul(Be,ye)|0,g=g+Math.imul(te,ge)|0,c=c+Math.imul(te,me)|0,c=c+Math.imul(ie,ge)|0,m=m+Math.imul(ie,me)|0,g=g+Math.imul(ne,be)|0,c=c+Math.imul(ne,we)|0,c=c+Math.imul(J,be)|0,m=m+Math.imul(J,we)|0,g=g+Math.imul(X,ve)|0,c=c+Math.imul(X,xe)|0,c=c+Math.imul(Y,ve)|0,m=m+Math.imul(Y,xe)|0,g=g+Math.imul(W,Se)|0,c=c+Math.imul(W,Ae)|0,c=c+Math.imul(Z,Se)|0,m=m+Math.imul(Z,Ae)|0,g=g+Math.imul(L,Ee)|0,c=c+Math.imul(L,Te)|0,c=c+Math.imul(D,Ee)|0,m=m+Math.imul(D,Te)|0;var Dr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,g=Math.imul(se,ce),c=Math.imul(se,ue),c=c+Math.imul(ae,ce)|0,m=Math.imul(ae,ue),g=g+Math.imul(Oe,fe)|0,c=c+Math.imul(Oe,le)|0,c=c+Math.imul(Ue,fe)|0,m=m+Math.imul(Ue,le)|0,g=g+Math.imul(Ve,de)|0,c=c+Math.imul(Ve,he)|0,c=c+Math.imul(Ne,de)|0,m=m+Math.imul(Ne,he)|0,g=g+Math.imul(ke,pe)|0,c=c+Math.imul(ke,ye)|0,c=c+Math.imul(_e,pe)|0,m=m+Math.imul(_e,ye)|0,g=g+Math.imul(Me,ge)|0,c=c+Math.imul(Me,me)|0,c=c+Math.imul(Be,ge)|0,m=m+Math.imul(Be,me)|0,g=g+Math.imul(te,be)|0,c=c+Math.imul(te,we)|0,c=c+Math.imul(ie,be)|0,m=m+Math.imul(ie,we)|0,g=g+Math.imul(ne,ve)|0,c=c+Math.imul(ne,xe)|0,c=c+Math.imul(J,ve)|0,m=m+Math.imul(J,xe)|0,g=g+Math.imul(X,Se)|0,c=c+Math.imul(X,Ae)|0,c=c+Math.imul(Y,Se)|0,m=m+Math.imul(Y,Ae)|0,g=g+Math.imul(W,Ee)|0,c=c+Math.imul(W,Te)|0,c=c+Math.imul(Z,Ee)|0,m=m+Math.imul(Z,Te)|0,g=g+Math.imul(L,Ie)|0,c=c+Math.imul(L,Pe)|0,c=c+Math.imul(D,Ie)|0,m=m+Math.imul(D,Pe)|0;var Kr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(se,fe),c=Math.imul(se,le),c=c+Math.imul(ae,fe)|0,m=Math.imul(ae,le),g=g+Math.imul(Oe,de)|0,c=c+Math.imul(Oe,he)|0,c=c+Math.imul(Ue,de)|0,m=m+Math.imul(Ue,he)|0,g=g+Math.imul(Ve,pe)|0,c=c+Math.imul(Ve,ye)|0,c=c+Math.imul(Ne,pe)|0,m=m+Math.imul(Ne,ye)|0,g=g+Math.imul(ke,ge)|0,c=c+Math.imul(ke,me)|0,c=c+Math.imul(_e,ge)|0,m=m+Math.imul(_e,me)|0,g=g+Math.imul(Me,be)|0,c=c+Math.imul(Me,we)|0,c=c+Math.imul(Be,be)|0,m=m+Math.imul(Be,we)|0,g=g+Math.imul(te,ve)|0,c=c+Math.imul(te,xe)|0,c=c+Math.imul(ie,ve)|0,m=m+Math.imul(ie,xe)|0,g=g+Math.imul(ne,Se)|0,c=c+Math.imul(ne,Ae)|0,c=c+Math.imul(J,Se)|0,m=m+Math.imul(J,Ae)|0,g=g+Math.imul(X,Ee)|0,c=c+Math.imul(X,Te)|0,c=c+Math.imul(Y,Ee)|0,m=m+Math.imul(Y,Te)|0,g=g+Math.imul(W,Ie)|0,c=c+Math.imul(W,Pe)|0,c=c+Math.imul(Z,Ie)|0,m=m+Math.imul(Z,Pe)|0;var qr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,g=Math.imul(se,de),c=Math.imul(se,he),c=c+Math.imul(ae,de)|0,m=Math.imul(ae,he),g=g+Math.imul(Oe,pe)|0,c=c+Math.imul(Oe,ye)|0,c=c+Math.imul(Ue,pe)|0,m=m+Math.imul(Ue,ye)|0,g=g+Math.imul(Ve,ge)|0,c=c+Math.imul(Ve,me)|0,c=c+Math.imul(Ne,ge)|0,m=m+Math.imul(Ne,me)|0,g=g+Math.imul(ke,be)|0,c=c+Math.imul(ke,we)|0,c=c+Math.imul(_e,be)|0,m=m+Math.imul(_e,we)|0,g=g+Math.imul(Me,ve)|0,c=c+Math.imul(Me,xe)|0,c=c+Math.imul(Be,ve)|0,m=m+Math.imul(Be,xe)|0,g=g+Math.imul(te,Se)|0,c=c+Math.imul(te,Ae)|0,c=c+Math.imul(ie,Se)|0,m=m+Math.imul(ie,Ae)|0,g=g+Math.imul(ne,Ee)|0,c=c+Math.imul(ne,Te)|0,c=c+Math.imul(J,Ee)|0,m=m+Math.imul(J,Te)|0,g=g+Math.imul(X,Ie)|0,c=c+Math.imul(X,Pe)|0,c=c+Math.imul(Y,Ie)|0,m=m+Math.imul(Y,Pe)|0;var Hr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,g=Math.imul(se,pe),c=Math.imul(se,ye),c=c+Math.imul(ae,pe)|0,m=Math.imul(ae,ye),g=g+Math.imul(Oe,ge)|0,c=c+Math.imul(Oe,me)|0,c=c+Math.imul(Ue,ge)|0,m=m+Math.imul(Ue,me)|0,g=g+Math.imul(Ve,be)|0,c=c+Math.imul(Ve,we)|0,c=c+Math.imul(Ne,be)|0,m=m+Math.imul(Ne,we)|0,g=g+Math.imul(ke,ve)|0,c=c+Math.imul(ke,xe)|0,c=c+Math.imul(_e,ve)|0,m=m+Math.imul(_e,xe)|0,g=g+Math.imul(Me,Se)|0,c=c+Math.imul(Me,Ae)|0,c=c+Math.imul(Be,Se)|0,m=m+Math.imul(Be,Ae)|0,g=g+Math.imul(te,Ee)|0,c=c+Math.imul(te,Te)|0,c=c+Math.imul(ie,Ee)|0,m=m+Math.imul(ie,Te)|0,g=g+Math.imul(ne,Ie)|0,c=c+Math.imul(ne,Pe)|0,c=c+Math.imul(J,Ie)|0,m=m+Math.imul(J,Pe)|0;var jr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,g=Math.imul(se,ge),c=Math.imul(se,me),c=c+Math.imul(ae,ge)|0,m=Math.imul(ae,me),g=g+Math.imul(Oe,be)|0,c=c+Math.imul(Oe,we)|0,c=c+Math.imul(Ue,be)|0,m=m+Math.imul(Ue,we)|0,g=g+Math.imul(Ve,ve)|0,c=c+Math.imul(Ve,xe)|0,c=c+Math.imul(Ne,ve)|0,m=m+Math.imul(Ne,xe)|0,g=g+Math.imul(ke,Se)|0,c=c+Math.imul(ke,Ae)|0,c=c+Math.imul(_e,Se)|0,m=m+Math.imul(_e,Ae)|0,g=g+Math.imul(Me,Ee)|0,c=c+Math.imul(Me,Te)|0,c=c+Math.imul(Be,Ee)|0,m=m+Math.imul(Be,Te)|0,g=g+Math.imul(te,Ie)|0,c=c+Math.imul(te,Pe)|0,c=c+Math.imul(ie,Ie)|0,m=m+Math.imul(ie,Pe)|0;var Fr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,g=Math.imul(se,be),c=Math.imul(se,we),c=c+Math.imul(ae,be)|0,m=Math.imul(ae,we),g=g+Math.imul(Oe,ve)|0,c=c+Math.imul(Oe,xe)|0,c=c+Math.imul(Ue,ve)|0,m=m+Math.imul(Ue,xe)|0,g=g+Math.imul(Ve,Se)|0,c=c+Math.imul(Ve,Ae)|0,c=c+Math.imul(Ne,Se)|0,m=m+Math.imul(Ne,Ae)|0,g=g+Math.imul(ke,Ee)|0,c=c+Math.imul(ke,Te)|0,c=c+Math.imul(_e,Ee)|0,m=m+Math.imul(_e,Te)|0,g=g+Math.imul(Me,Ie)|0,c=c+Math.imul(Me,Pe)|0,c=c+Math.imul(Be,Ie)|0,m=m+Math.imul(Be,Pe)|0;var Wr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,g=Math.imul(se,ve),c=Math.imul(se,xe),c=c+Math.imul(ae,ve)|0,m=Math.imul(ae,xe),g=g+Math.imul(Oe,Se)|0,c=c+Math.imul(Oe,Ae)|0,c=c+Math.imul(Ue,Se)|0,m=m+Math.imul(Ue,Ae)|0,g=g+Math.imul(Ve,Ee)|0,c=c+Math.imul(Ve,Te)|0,c=c+Math.imul(Ne,Ee)|0,m=m+Math.imul(Ne,Te)|0,g=g+Math.imul(ke,Ie)|0,c=c+Math.imul(ke,Pe)|0,c=c+Math.imul(_e,Ie)|0,m=m+Math.imul(_e,Pe)|0;var $r=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,g=Math.imul(se,Se),c=Math.imul(se,Ae),c=c+Math.imul(ae,Se)|0,m=Math.imul(ae,Ae),g=g+Math.imul(Oe,Ee)|0,c=c+Math.imul(Oe,Te)|0,c=c+Math.imul(Ue,Ee)|0,m=m+Math.imul(Ue,Te)|0,g=g+Math.imul(Ve,Ie)|0,c=c+Math.imul(Ve,Pe)|0,c=c+Math.imul(Ne,Ie)|0,m=m+Math.imul(Ne,Pe)|0;var zr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(se,Ee),c=Math.imul(se,Te),c=c+Math.imul(ae,Ee)|0,m=Math.imul(ae,Te),g=g+Math.imul(Oe,Ie)|0,c=c+Math.imul(Oe,Pe)|0,c=c+Math.imul(Ue,Ie)|0,m=m+Math.imul(Ue,Pe)|0;var Wi=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,g=Math.imul(se,Ie),c=Math.imul(se,Pe),c=c+Math.imul(ae,Ie)|0,m=Math.imul(ae,Pe);var $i=(E+g|0)+((c&8191)<<13)|0;return E=(m+(c>>>13)|0)+($i>>>26)|0,$i&=67108863,w[0]=_r,w[1]=Vr,w[2]=Nr,w[3]=Or,w[4]=Ur,w[5]=Lr,w[6]=Rr,w[7]=Cr,w[8]=Dr,w[9]=Kr,w[10]=qr,w[11]=Hr,w[12]=jr,w[13]=Fr,w[14]=Wr,w[15]=$r,w[16]=zr,w[17]=Wi,w[18]=$i,E!==0&&(w[19]=E,d.length++),d};Math.imul||(B=P);function I(x,s,f){f.negative=s.negative^x.negative,f.length=x.length+s.length;for(var d=0,y=0,p=0;p<f.length-1;p++){var w=y;y=0;for(var E=d&67108863,g=Math.min(p,s.length-1),c=Math.max(0,p-x.length+1);c<=g;c++){var m=p-c,O=x.words[m]|0,L=s.words[c]|0,D=O*L,j=D&67108863;w=w+(D/67108864|0)|0,j=j+E|0,E=j&67108863,w=w+(j>>>26)|0,y+=w>>>26,w&=67108863}f.words[p]=E,d=w,w=y}return d!==0?f.words[p]=d:f.length--,f.strip()}function _(x,s,f){var d=new V;return d.mulp(x,s,f)}i.prototype.mulTo=function(s,f){var d,y=this.length+s.length;return this.length===10&&s.length===10?d=B(this,s,f):y<63?d=P(this,s,f):y<1024?d=I(this,s,f):d=_(this,s,f),d};function V(x,s){this.x=x,this.y=s}V.prototype.makeRBT=function(s){for(var f=new Array(s),d=i.prototype._countBits(s)-1,y=0;y<s;y++)f[y]=this.revBin(y,d,s);return f},V.prototype.revBin=function(s,f,d){if(s===0||s===d-1)return s;for(var y=0,p=0;p<f;p++)y|=(s&1)<<f-p-1,s>>=1;return y},V.prototype.permute=function(s,f,d,y,p,w){for(var E=0;E<w;E++)y[E]=f[s[E]],p[E]=d[s[E]]},V.prototype.transform=function(s,f,d,y,p,w){this.permute(w,s,f,d,y,p);for(var E=1;E<p;E<<=1)for(var g=E<<1,c=Math.cos(2*Math.PI/g),m=Math.sin(2*Math.PI/g),O=0;O<p;O+=g)for(var L=c,D=m,j=0;j<E;j++){var W=d[O+j],Z=y[O+j],Re=d[O+j+E],X=y[O+j+E],Y=L*Re-D*X;X=L*X+D*Re,Re=Y,d[O+j]=W+Re,y[O+j]=Z+X,d[O+j+E]=W-Re,y[O+j+E]=Z-X,j!==g&&(Y=c*L-m*D,D=c*D+m*L,L=Y)}},V.prototype.guessLen13b=function(s,f){var d=Math.max(f,s)|1,y=d&1,p=0;for(d=d/2|0;d;d=d>>>1)p++;return 1<<p+1+y},V.prototype.conjugate=function(s,f,d){if(!(d<=1))for(var y=0;y<d/2;y++){var p=s[y];s[y]=s[d-y-1],s[d-y-1]=p,p=f[y],f[y]=-f[d-y-1],f[d-y-1]=-p}},V.prototype.normalize13b=function(s,f){for(var d=0,y=0;y<f/2;y++){var p=Math.round(s[2*y+1]/f)*8192+Math.round(s[2*y]/f)+d;s[y]=p&67108863,p<67108864?d=0:d=p/67108864|0}return s},V.prototype.convert13b=function(s,f,d,y){for(var p=0,w=0;w<f;w++)p=p+(s[w]|0),d[2*w]=p&8191,p=p>>>13,d[2*w+1]=p&8191,p=p>>>13;for(w=2*f;w<y;++w)d[w]=0;r(p===0),r((p&-8192)===0)},V.prototype.stub=function(s){for(var f=new Array(s),d=0;d<s;d++)f[d]=0;return f},V.prototype.mulp=function(s,f,d){var y=2*this.guessLen13b(s.length,f.length),p=this.makeRBT(y),w=this.stub(y),E=new Array(y),g=new Array(y),c=new Array(y),m=new Array(y),O=new Array(y),L=new Array(y),D=d.words;D.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(f.words,f.length,m,y),this.transform(E,w,g,c,y,p),this.transform(m,w,O,L,y,p);for(var j=0;j<y;j++){var W=g[j]*O[j]-c[j]*L[j];c[j]=g[j]*L[j]+c[j]*O[j],g[j]=W}return this.conjugate(g,c,y),this.transform(g,c,D,w,y,p),this.conjugate(D,w,y),this.normalize13b(D,y),d.negative=s.negative^f.negative,d.length=s.length+f.length,d.strip()},i.prototype.mul=function(s){var f=new i(null);return f.words=new Array(this.length+s.length),this.mulTo(s,f)},i.prototype.mulf=function(s){var f=new i(null);return f.words=new Array(this.length+s.length),_(this,s,f)},i.prototype.imul=function(s){return this.clone().mulTo(s,this)},i.prototype.imuln=function(s){r(typeof s=="number"),r(s<67108864);for(var f=0,d=0;d<this.length;d++){var y=(this.words[d]|0)*s,p=(y&67108863)+(f&67108863);f>>=26,f+=y/67108864|0,f+=p>>>26,this.words[d]=p&67108863}return f!==0&&(this.words[d]=f,this.length++),this},i.prototype.muln=function(s){return this.clone().imuln(s)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(s){var f=T(s);if(f.length===0)return new i(1);for(var d=this,y=0;y<f.length&&f[y]===0;y++,d=d.sqr());if(++y<f.length)for(var p=d.sqr();y<f.length;y++,p=p.sqr())f[y]!==0&&(d=d.mul(p));return d},i.prototype.iushln=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26,y=67108863>>>26-f<<26-f,p;if(f!==0){var w=0;for(p=0;p<this.length;p++){var E=this.words[p]&y,g=(this.words[p]|0)-E<<f;this.words[p]=g|w,w=E>>>26-f}w&&(this.words[p]=w,this.length++)}if(d!==0){for(p=this.length-1;p>=0;p--)this.words[p+d]=this.words[p];for(p=0;p<d;p++)this.words[p]=0;this.length+=d}return this.strip()},i.prototype.ishln=function(s){return r(this.negative===0),this.iushln(s)},i.prototype.iushrn=function(s,f,d){r(typeof s=="number"&&s>=0);var y;f?y=(f-f%26)/26:y=0;var p=s%26,w=Math.min((s-p)/26,this.length),E=67108863^67108863>>>p<<p,g=d;if(y-=w,y=Math.max(0,y),g){for(var c=0;c<w;c++)g.words[c]=this.words[c];g.length=w}if(w!==0)if(this.length>w)for(this.length-=w,c=0;c<this.length;c++)this.words[c]=this.words[c+w];else this.words[0]=0,this.length=1;var m=0;for(c=this.length-1;c>=0&&(m!==0||c>=y);c--){var O=this.words[c]|0;this.words[c]=m<<26-p|O>>>p,m=O&E}return g&&m!==0&&(g.words[g.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(s,f,d){return r(this.negative===0),this.iushrn(s,f,d)},i.prototype.shln=function(s){return this.clone().ishln(s)},i.prototype.ushln=function(s){return this.clone().iushln(s)},i.prototype.shrn=function(s){return this.clone().ishrn(s)},i.prototype.ushrn=function(s){return this.clone().iushrn(s)},i.prototype.testn=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26,y=1<<f;if(this.length<=d)return!1;var p=this.words[d];return!!(p&y)},i.prototype.imaskn=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(f!==0&&d++,this.length=Math.min(d,this.length),f!==0){var y=67108863^67108863>>>f<<f;this.words[this.length-1]&=y}return this.strip()},i.prototype.maskn=function(s){return this.clone().imaskn(s)},i.prototype.iaddn=function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},i.prototype._iaddn=function(s){this.words[0]+=s;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},i.prototype.addn=function(s){return this.clone().iaddn(s)},i.prototype.subn=function(s){return this.clone().isubn(s)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(s,f,d){var y=s.length+d,p;this._expand(y);var w,E=0;for(p=0;p<s.length;p++){w=(this.words[p+d]|0)+E;var g=(s.words[p]|0)*f;w-=g&67108863,E=(w>>26)-(g/67108864|0),this.words[p+d]=w&67108863}for(;p<this.length-d;p++)w=(this.words[p+d]|0)+E,E=w>>26,this.words[p+d]=w&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,p=0;p<this.length;p++)w=-(this.words[p]|0)+E,E=w>>26,this.words[p]=w&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(s,f){var d=this.length-s.length,y=this.clone(),p=s,w=p.words[p.length-1]|0,E=this._countBits(w);d=26-E,d!==0&&(p=p.ushln(d),y.iushln(d),w=p.words[p.length-1]|0);var g=y.length-p.length,c;if(f!=="mod"){c=new i(null),c.length=g+1,c.words=new Array(c.length);for(var m=0;m<c.length;m++)c.words[m]=0}var O=y.clone()._ishlnsubmul(p,1,g);O.negative===0&&(y=O,c&&(c.words[g]=1));for(var L=g-1;L>=0;L--){var D=(y.words[p.length+L]|0)*67108864+(y.words[p.length+L-1]|0);for(D=Math.min(D/w|0,67108863),y._ishlnsubmul(p,D,L);y.negative!==0;)D--,y.negative=0,y._ishlnsubmul(p,1,L),y.isZero()||(y.negative^=1);c&&(c.words[L]=D)}return c&&c.strip(),y.strip(),f!=="div"&&d!==0&&y.iushrn(d),{div:c||null,mod:y}},i.prototype.divmod=function(s,f,d){if(r(!s.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var y,p,w;return this.negative!==0&&s.negative===0?(w=this.neg().divmod(s,f),f!=="mod"&&(y=w.div.neg()),f!=="div"&&(p=w.mod.neg(),d&&p.negative!==0&&p.iadd(s)),{div:y,mod:p}):this.negative===0&&s.negative!==0?(w=this.divmod(s.neg(),f),f!=="mod"&&(y=w.div.neg()),{div:y,mod:w.mod}):this.negative&s.negative?(w=this.neg().divmod(s.neg(),f),f!=="div"&&(p=w.mod.neg(),d&&p.negative!==0&&p.isub(s)),{div:w.div,mod:p}):s.length>this.length||this.cmp(s)<0?{div:new i(0),mod:this}:s.length===1?f==="div"?{div:this.divn(s.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new i(this.modn(s.words[0]))}:this._wordDiv(s,f)},i.prototype.div=function(s){return this.divmod(s,"div",!1).div},i.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},i.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},i.prototype.divRound=function(s){var f=this.divmod(s);if(f.mod.isZero())return f.div;var d=f.div.negative!==0?f.mod.isub(s):f.mod,y=s.ushrn(1),p=s.andln(1),w=d.cmp(y);return w<0||p===1&&w===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modn=function(s){r(s<=67108863);for(var f=(1<<26)%s,d=0,y=this.length-1;y>=0;y--)d=(f*d+(this.words[y]|0))%s;return d},i.prototype.idivn=function(s){r(s<=67108863);for(var f=0,d=this.length-1;d>=0;d--){var y=(this.words[d]|0)+f*67108864;this.words[d]=y/s|0,f=y%s}return this.strip()},i.prototype.divn=function(s){return this.clone().idivn(s)},i.prototype.egcd=function(s){r(s.negative===0),r(!s.isZero());var f=this,d=s.clone();f.negative!==0?f=f.umod(s):f=f.clone();for(var y=new i(1),p=new i(0),w=new i(0),E=new i(1),g=0;f.isEven()&&d.isEven();)f.iushrn(1),d.iushrn(1),++g;for(var c=d.clone(),m=f.clone();!f.isZero();){for(var O=0,L=1;!(f.words[0]&L)&&O<26;++O,L<<=1);if(O>0)for(f.iushrn(O);O-- >0;)(y.isOdd()||p.isOdd())&&(y.iadd(c),p.isub(m)),y.iushrn(1),p.iushrn(1);for(var D=0,j=1;!(d.words[0]&j)&&D<26;++D,j<<=1);if(D>0)for(d.iushrn(D);D-- >0;)(w.isOdd()||E.isOdd())&&(w.iadd(c),E.isub(m)),w.iushrn(1),E.iushrn(1);f.cmp(d)>=0?(f.isub(d),y.isub(w),p.isub(E)):(d.isub(f),w.isub(y),E.isub(p))}return{a:w,b:E,gcd:d.iushln(g)}},i.prototype._invmp=function(s){r(s.negative===0),r(!s.isZero());var f=this,d=s.clone();f.negative!==0?f=f.umod(s):f=f.clone();for(var y=new i(1),p=new i(0),w=d.clone();f.cmpn(1)>0&&d.cmpn(1)>0;){for(var E=0,g=1;!(f.words[0]&g)&&E<26;++E,g<<=1);if(E>0)for(f.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(w),y.iushrn(1);for(var c=0,m=1;!(d.words[0]&m)&&c<26;++c,m<<=1);if(c>0)for(d.iushrn(c);c-- >0;)p.isOdd()&&p.iadd(w),p.iushrn(1);f.cmp(d)>=0?(f.isub(d),y.isub(p)):(d.isub(f),p.isub(y))}var O;return f.cmpn(1)===0?O=y:O=p,O.cmpn(0)<0&&O.iadd(s),O},i.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var f=this.clone(),d=s.clone();f.negative=0,d.negative=0;for(var y=0;f.isEven()&&d.isEven();y++)f.iushrn(1),d.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;d.isEven();)d.iushrn(1);var p=f.cmp(d);if(p<0){var w=f;f=d,d=w}else if(p===0||d.cmpn(1)===0)break;f.isub(d)}while(!0);return d.iushln(y)},i.prototype.invm=function(s){return this.egcd(s).a.umod(s)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(s){return this.words[0]&s},i.prototype.bincn=function(s){r(typeof s=="number");var f=s%26,d=(s-f)/26,y=1<<f;if(this.length<=d)return this._expand(d+1),this.words[d]|=y,this;for(var p=y,w=d;p!==0&&w<this.length;w++){var E=this.words[w]|0;E+=p,p=E>>>26,E&=67108863,this.words[w]=E}return p!==0&&(this.words[w]=p,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(s){var f=s<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this.strip();var d;if(this.length>1)d=1;else{f&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;d=y===s?0:y<s?-1:1}return this.negative!==0?-d|0:d},i.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var f=this.ucmp(s);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var f=0,d=this.length-1;d>=0;d--){var y=this.words[d]|0,p=s.words[d]|0;if(y!==p){y<p?f=-1:y>p&&(f=1);break}}return f},i.prototype.gtn=function(s){return this.cmpn(s)===1},i.prototype.gt=function(s){return this.cmp(s)===1},i.prototype.gten=function(s){return this.cmpn(s)>=0},i.prototype.gte=function(s){return this.cmp(s)>=0},i.prototype.ltn=function(s){return this.cmpn(s)===-1},i.prototype.lt=function(s){return this.cmp(s)===-1},i.prototype.lten=function(s){return this.cmpn(s)<=0},i.prototype.lte=function(s){return this.cmp(s)<=0},i.prototype.eqn=function(s){return this.cmpn(s)===0},i.prototype.eq=function(s){return this.cmp(s)===0},i.red=function(s){return new U(s)},i.prototype.toRed=function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(s){return this.red=s,this},i.prototype.forceRed=function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},i.prototype.redAdd=function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},i.prototype.redIAdd=function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},i.prototype.redSub=function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},i.prototype.redISub=function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},i.prototype.redShl=function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},i.prototype.redMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},i.prototype.redIMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var R={k256:null,p224:null,p192:null,p25519:null};function N(x,s){this.name=x,this.p=new i(s,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}N.prototype._tmp=function(){var s=new i(null);return s.words=new Array(Math.ceil(this.n/13)),s},N.prototype.ireduce=function(s){var f=s,d;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),d=f.bitLength();while(d>this.n);var y=d<this.n?-1:f.ucmp(this.p);return y===0?(f.words[0]=0,f.length=1):y>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},N.prototype.split=function(s,f){s.iushrn(this.n,0,f)},N.prototype.imulK=function(s){return s.imul(this.k)};function H(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(H,N),H.prototype.split=function(s,f){for(var d=4194303,y=Math.min(s.length,9),p=0;p<y;p++)f.words[p]=s.words[p];if(f.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var w=s.words[9];for(f.words[f.length++]=w&d,p=10;p<s.length;p++){var E=s.words[p]|0;s.words[p-10]=(E&d)<<4|w>>>22,w=E}w>>>=22,s.words[p-10]=w,w===0&&s.length>10?s.length-=10:s.length-=9},H.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var f=0,d=0;d<s.length;d++){var y=s.words[d]|0;f+=y*977,s.words[d]=f&67108863,f=y*64+(f/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function K(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(K,N);function C(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(C,N);function q(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(q,N),q.prototype.imulK=function(s){for(var f=0,d=0;d<s.length;d++){var y=(s.words[d]|0)*19+f,p=y&67108863;y>>>=26,s.words[d]=p,f=y}return f!==0&&(s.words[s.length++]=f),s},i._prime=function(s){if(R[s])return R[s];var f;if(s==="k256")f=new H;else if(s==="p224")f=new K;else if(s==="p192")f=new C;else if(s==="p25519")f=new q;else throw new Error("Unknown prime "+s);return R[s]=f,f};function U(x){if(typeof x=="string"){var s=i._prime(x);this.m=s.p,this.prime=s}else r(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}U.prototype._verify1=function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},U.prototype._verify2=function(s,f){r((s.negative|f.negative)===0,"red works only with positives"),r(s.red&&s.red===f.red,"red works only with red numbers")},U.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},U.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},U.prototype.add=function(s,f){this._verify2(s,f);var d=s.add(f);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},U.prototype.iadd=function(s,f){this._verify2(s,f);var d=s.iadd(f);return d.cmp(this.m)>=0&&d.isub(this.m),d},U.prototype.sub=function(s,f){this._verify2(s,f);var d=s.sub(f);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},U.prototype.isub=function(s,f){this._verify2(s,f);var d=s.isub(f);return d.cmpn(0)<0&&d.iadd(this.m),d},U.prototype.shl=function(s,f){return this._verify1(s),this.imod(s.ushln(f))},U.prototype.imul=function(s,f){return this._verify2(s,f),this.imod(s.imul(f))},U.prototype.mul=function(s,f){return this._verify2(s,f),this.imod(s.mul(f))},U.prototype.isqr=function(s){return this.imul(s,s.clone())},U.prototype.sqr=function(s){return this.mul(s,s)},U.prototype.sqrt=function(s){if(s.isZero())return s.clone();var f=this.m.andln(3);if(r(f%2===1),f===3){var d=this.m.add(new i(1)).iushrn(2);return this.pow(s,d)}for(var y=this.m.subn(1),p=0;!y.isZero()&&y.andln(1)===0;)p++,y.iushrn(1);r(!y.isZero());var w=new i(1).toRed(this),E=w.redNeg(),g=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,g).cmp(E)!==0;)c.redIAdd(E);for(var m=this.pow(c,y),O=this.pow(s,y.addn(1).iushrn(1)),L=this.pow(s,y),D=p;L.cmp(w)!==0;){for(var j=L,W=0;j.cmp(w)!==0;W++)j=j.redSqr();r(W<D);var Z=this.pow(m,new i(1).iushln(D-W-1));O=O.redMul(Z),m=Z.redSqr(),L=L.redMul(m),D=W}return O},U.prototype.invm=function(s){var f=s._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},U.prototype.pow=function(s,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return s.clone();var d=4,y=new Array(1<<d);y[0]=new i(1).toRed(this),y[1]=s;for(var p=2;p<y.length;p++)y[p]=this.mul(y[p-1],s);var w=y[0],E=0,g=0,c=f.bitLength()%26;for(c===0&&(c=26),p=f.length-1;p>=0;p--){for(var m=f.words[p],O=c-1;O>=0;O--){var L=m>>O&1;if(w!==y[0]&&(w=this.sqr(w)),L===0&&E===0){g=0;continue}E<<=1,E|=L,g++,!(g!==d&&(p!==0||O!==0))&&(w=this.mul(w,y[E]),g=0,E=0)}c=26}return w},U.prototype.convertTo=function(s){var f=s.umod(this.m);return f===s?f.clone():f},U.prototype.convertFrom=function(s){var f=s.clone();return f.red=null,f},i.mont=function(s){return new G(s)};function G(x){U.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(G,U),G.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},G.prototype.convertFrom=function(s){var f=this.imod(s.mul(this.rinv));return f.red=null,f},G.prototype.imul=function(s,f){if(s.isZero()||f.isZero())return s.words[0]=0,s.length=1,s;var d=s.imul(f),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=d.isub(y).iushrn(this.shift),w=p;return p.cmp(this.m)>=0?w=p.isub(this.m):p.cmpn(0)<0&&(w=p.iadd(this.m)),w._forceRed(this)},G.prototype.mul=function(s,f){if(s.isZero()||f.isZero())return new i(0)._forceRed(this);var d=s.mul(f),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=d.isub(y).iushrn(this.shift),w=p;return p.cmp(this.m)>=0?w=p.isub(this.m):p.cmpn(0)<0&&(w=p.iadd(this.m)),w._forceRed(this)},G.prototype.invm=function(s){var f=this.imod(s._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(typeof pp>"u"||pp,b1)});var A1=F((NC,S1)=>{S();A();var Tn=Za(),nr=w1(),dt=function(){};function gf(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}dt.eventID=function(e,t){var r=e+"("+t.map(gf).join(",")+")";return Tn.keccak256(Buffer.from(r))};dt.methodID=function(e,t){return dt.eventID(e,t).slice(0,4)};function vi(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function yp(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function Xa(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function Io(e){var t=typeof e;if(t==="string")return Tn.isHexPrefixed(e)?new nr(Tn.stripHexPrefix(e),16):new nr(e,10);if(t==="number")return new nr(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function x1(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}function En(e,t){var r,n,i,o;if(e==="address")return En("uint160",Io(t));if(e==="bool")return En("uint8",t?1:0);if(e==="string")return En("bytes",Buffer.from(t,"utf8"));if(Ja(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=Xa(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(o in t)i.push(En(e,t[o]));if(r==="dynamic"){var a=En("uint256",t.length);i.unshift(a)}return Buffer.concat(i)}else{if(e==="bytes")return t=Buffer.from(t),i=Buffer.concat([En("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,Tn.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=vi(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return Tn.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=vi(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=Io(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=vi(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=Io(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=yp(e),n=Io(t),n<0)throw new Error("Supplied ufixed is negative");return En("uint256",n.mul(new nr(2).pow(new nr(r[1]))))}else if(e.startsWith("fixed"))return r=yp(e),En("int256",Io(t).mul(new nr(2).pow(new nr(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}function cn(e,t,r){typeof e=="string"&&(e=gp(e));var n,i,o,a;if(e.name==="address")return cn(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return cn(e.rawType,t,r).toString()===new nr(1).toString();if(e.name==="string"){var u=cn(e.rawType,t,r);return Buffer.from(u,"utf8").toString()}else if(e.isArray){for(o=[],n=e.size,e.size==="dynamic"&&(r=cn("uint256",t,r).toNumber(),n=cn("uint256",t,r).toNumber(),r=r+32),a=0;a<n;a++){var l=cn(e.subArray,t,r);o.push(l),r+=e.subArray.memoryUsage}return o}else{if(e.name==="bytes")return r=cn("uint256",t,r).toNumber(),n=cn("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(i=new nr(t.slice(r,r+32),16,"be"),i.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("int")){if(i=new nr(t.slice(r,r+32),16,"be").fromTwos(256),i.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("ufixed")){if(n=new nr(2).pow(new nr(e.size[1])),i=cn("uint256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}else if(e.name.startsWith("fixed")){if(n=new nr(2).pow(new nr(e.size[1])),i=cn("int256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}function gp(e){var t,r;if(Ja(e)){t=Xa(e);var n=e.slice(0,e.lastIndexOf("["));return n=gp(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var i;switch(e){case"address":i="uint160";break;case"bool":i="uint8";break;case"string":i="bytes";break}if(r={rawType:i,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=vi(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=yp(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}function a4(e){return e==="string"||e==="bytes"||Xa(e)==="dynamic"}function Ja(e){return e.lastIndexOf("]")===e.length-1}dt.rawEncode=function(e,t){var r=[],n=[],i=0;e.forEach(function(h){if(Ja(h)){var v=Xa(h);v!=="dynamic"?i+=32*v:i+=32}else i+=32});for(var o=0;o<e.length;o++){var a=gf(e[o]),u=t[o],l=En(a,u);a4(a)?(r.push(En("uint256",i)),n.push(l),i+=l.length):r.push(l)}return Buffer.concat(r.concat(n))};dt.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var n=0,i=0;i<e.length;i++){var o=gf(e[i]),a=gp(o,t,n),u=cn(a,t,n);n+=a.memoryUsage,r.push(u)}return r};dt.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=x1(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([dt.methodID(r.method,r.args),dt.rawEncode(r.args,t)])};dt.simpleDecode=function(e,t){var r=x1(e);if(!r.retargs)throw new Error("No return values in method");return dt.rawDecode(r.retargs,t)};function v1(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}dt.stringify=function(e,t){var r=[];for(var n in e){var i=e[n],o=t[n];/^[^\[]+\[.*\]$/.test(i)?o=o.map(function(a){return v1(i,a)}).join(", "):o=v1(i,o),r.push(o)}return r};dt.solidityHexValue=function(e,t,r){var n,i;if(Ja(e)){var o=e.replace(/\[.*?\]/,"");if(!Ja(o)){var a=Xa(e);if(a!=="dynamic"&&a!==0&&t.length>a)throw new Error("Elements exceed array size: "+a)}var u=t.map(function(v){return dt.solidityHexValue(o,v,256)});return Buffer.concat(u)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var l=Array(r/4).join("0");return Buffer.from(t?l+"1":l+"0","hex")}else if(e==="address"){var h=20;return r&&(h=r/8),Tn.setLengthLeft(t,h)}else if(e.startsWith("bytes")){if(n=vi(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return Tn.setLengthRight(t,n)}else if(e.startsWith("uint")){if(n=vi(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(i=Io(t),i.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=vi(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(i=Io(t),i.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toTwos(n).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};dt.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var i=gf(e[n]),o=t[n];r.push(dt.solidityHexValue(i,o,null))}return Buffer.concat(r)};dt.soliditySHA3=function(e,t){return Tn.keccak256(dt.solidityPack(e,t))};dt.soliditySHA256=function(e,t){return Tn.sha256(dt.solidityPack(e,t))};dt.solidityRIPEMD160=function(e,t){return Tn.ripemd160(dt.solidityPack(e,t),!0)};function c4(e){return e>="0"&&e<="9"}dt.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var i="bytes",o=r+1;o<e.length&&c4(e[o]);)i+=e[o]-"0",o++;r=o-1,t.push(i)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};dt.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+vi(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};S1.exports=dt});var T1=F((LC,E1)=>{S();A();E1.exports=A1()});var k1=F(Ut=>{"use strict";S();A();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.recoverTypedSignature=Ut.signTypedData=Ut.typedSignatureHash=Ut.TypedDataUtils=Ut.TYPED_MESSAGE_SCHEMA=Ut.SignTypedDataVersion=void 0;var Pr=Za(),Qa=T1(),Po=Ya(),Zt;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(Zt=Ut.SignTypedDataVersion||(Ut.SignTypedDataVersion={}));Ut.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function Ls(e,t){if(Object.keys(Zt).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}function I1(e,t,r,n,i){if(Ls(i,[Zt.V3,Zt.V4]),e[r]!==void 0)return["bytes32",i===Zt.V4&&n==null?"0x0000000000000000000000000000000000000000000000000000000000000000":Pr.keccak(bp(r,n,e,i))];if(n===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",Pr.keccak(n)];if(r==="string")return typeof n=="string"&&(n=Buffer.from(n,"utf8")),["bytes32",Pr.keccak(n)];if(r.lastIndexOf("]")===r.length-1){if(i===Zt.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let o=r.slice(0,r.lastIndexOf("[")),a=n.map(u=>I1(e,t,o,u,i));return["bytes32",Pr.keccak(Qa.rawEncode(a.map(([u])=>u),a.map(([,u])=>u)))]}return[r,n]}function bp(e,t,r,n){Ls(n,[Zt.V3,Zt.V4]);let i=["bytes32"],o=[M1(e,r)];for(let a of r[e]){if(n===Zt.V3&&t[a.name]===void 0)continue;let[u,l]=I1(r,a.name,a.type,t[a.name],n);i.push(u),o.push(l)}return Qa.rawEncode(i,o)}function P1(e,t){let r="",n=wp(e,t);n.delete(e);let i=[e,...Array.from(n).sort()];for(let o of i){if(!t[o])throw new Error(`No type definition specified: ${o}`);r+=`${o}(${t[o].map(({name:u,type:l})=>`${l} ${u}`).join(",")})`}return r}function wp(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let n of t[e])wp(n.type,t,r);return r}function mp(e,t,r,n){return Ls(n,[Zt.V3,Zt.V4]),Pr.keccak(bp(e,t,r,n))}function M1(e,t){return Pr.keccak(P1(e,t))}function B1(e){let t={};for(let r in Ut.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function u4(e,t){Ls(t,[Zt.V3,Zt.V4]);let r=B1(e),n=[Buffer.from("1901","hex")];return n.push(mp("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(mp(r.primaryType,r.message,r.types,t)),Pr.keccak(Buffer.concat(n))}Ut.TypedDataUtils={encodeData:bp,encodeType:P1,findTypeDependencies:wp,hashStruct:mp,hashType:M1,sanitizeData:B1,eip712Hash:u4};function f4(e){let t=vp(e);return Pr.bufferToHex(t)}Ut.typedSignatureHash=f4;function vp(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(o){return o.type!=="bytes"?o.value:Po.legacyToBuffer(o.value)}),n=e.map(function(o){return o.type}),i=e.map(function(o){if(!o.name)throw t;return`${o.type} ${o.name}`});return Qa.soliditySHA3(["bytes32","bytes32"],[Qa.soliditySHA3(new Array(e.length).fill("string"),i),Qa.soliditySHA3(n,r)])}function l4({privateKey:e,data:t,version:r}){if(Ls(r),Po.isNullish(t))throw new Error("Missing data parameter");if(Po.isNullish(e))throw new Error("Missing private key parameter");let n=r===Zt.V1?vp(t):Ut.TypedDataUtils.eip712Hash(t,r),i=Pr.ecsign(n,e);return Po.concatSig(Pr.toBuffer(i.v),i.r,i.s)}Ut.signTypedData=l4;function d4({data:e,signature:t,version:r}){if(Ls(r),Po.isNullish(e))throw new Error("Missing data parameter");if(Po.isNullish(t))throw new Error("Missing signature parameter");let n=r===Zt.V1?vp(e):Ut.TypedDataUtils.eip712Hash(e,r),i=Po.recoverPublicKey(n,t),o=Pr.publicToAddress(i);return Pr.bufferToHex(o)}Ut.recoverTypedSignature=d4});var V1=F((_1,mf)=>{S();A();(function(e,t){"use strict";typeof mf<"u"&&mf.exports?mf.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(_1,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var n,i=unescape(encodeURIComponent(r)),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o},e.encodeUTF8=function(r){var n,i=[];for(n=0;n<r.length;n++)i.push(String.fromCharCode(r[n]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var n,i=[],o=r.length;for(n=0;n<o;n++)i.push(String.fromCharCode(r[n]));return btoa(i.join(""))},e.decodeBase64=function(r){t(r);var n,i=atob(r),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o}),e})});var R1=F(Lt=>{"use strict";S();A();var h4=Lt&&Lt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),p4=Lt&&Lt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),N1=Lt&&Lt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&h4(t,e,r);return p4(t,e),t};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.getEncryptionPublicKey=Lt.decryptSafely=Lt.decrypt=Lt.encryptSafely=Lt.encrypt=void 0;var Mo=N1(Gi()),un=N1(V1()),In=Ya();function O1({publicKey:e,data:t,version:r}){if(In.isNullish(e))throw new Error("Missing publicKey parameter");if(In.isNullish(t))throw new Error("Missing data parameter");if(In.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let n=Mo.box.keyPair(),i;try{i=un.decodeBase64(e)}catch{throw new Error("Bad public key")}let o=un.decodeUTF8(t),a=Mo.randomBytes(Mo.box.nonceLength),u=Mo.box(o,a,i,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:un.encodeBase64(a),ephemPublicKey:un.encodeBase64(n.publicKey),ciphertext:un.encodeBase64(u)}}default:throw new Error("Encryption type/version not supported")}}Lt.encrypt=O1;function y4({publicKey:e,data:t,version:r}){if(In.isNullish(e))throw new Error("Missing publicKey parameter");if(In.isNullish(t))throw new Error("Missing data parameter");if(In.isNullish(r))throw new Error("Missing version parameter");let n=2**11,i=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let o={data:t,padding:""},u=Buffer.byteLength(JSON.stringify(o),"utf-8")%n,l=0;u>0&&(l=n-u-i),o.padding="0".repeat(l);let h=JSON.stringify(o);return O1({publicKey:e,data:h,version:r})}Lt.encryptSafely=y4;function U1({encryptedData:e,privateKey:t}){if(In.isNullish(e))throw new Error("Missing encryptedData parameter");if(In.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=L1(t),n=Mo.box.keyPair.fromSecretKey(r).secretKey,i=un.decodeBase64(e.nonce),o=un.decodeBase64(e.ciphertext),a=un.decodeBase64(e.ephemPublicKey),u=Mo.box.open(o,i,a,n),l;try{l=un.encodeUTF8(u)}catch{throw new Error("Decryption failed.")}if(l)return l;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}Lt.decrypt=U1;function g4({encryptedData:e,privateKey:t}){if(In.isNullish(e))throw new Error("Missing encryptedData parameter");if(In.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(U1({encryptedData:e,privateKey:t})).data}Lt.decryptSafely=g4;function m4(e){let t=L1(e),r=Mo.box.keyPair.fromSecretKey(t).publicKey;return un.encodeBase64(r)}Lt.getEncryptionPublicKey=m4;function L1(e){let t=Buffer.from(e,"hex").toString("base64");return un.decodeBase64(t)}});var D1=F(pr=>{"use strict";S();A();var b4=pr&&pr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),xp=pr&&pr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&b4(t,e,r)};Object.defineProperty(pr,"__esModule",{value:!0});pr.normalize=pr.concatSig=void 0;xp(m1(),pr);xp(k1(),pr);xp(R1(),pr);var C1=Ya();Object.defineProperty(pr,"concatSig",{enumerable:!0,get:function(){return C1.concatSig}});Object.defineProperty(pr,"normalize",{enumerable:!0,get:function(){return C1.normalize}})});var p2=F(Js=>{"use strict";S();A();Object.defineProperty(Js,"__esModule",{value:!0});Js.testnet=Js.bitcoin=void 0;Js.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};Js.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var y2=F(tt=>{"use strict";S();A();Object.defineProperty(tt,"__esModule",{value:!0});tt.maybe=tt.Boolean=tt.Array=tt.Buffer256bit=tt.Network=tt.typeforce=void 0;tt.typeforce=uA();tt.Network=tt.typeforce.compile({messagePrefix:tt.typeforce.oneOf(tt.typeforce.Buffer,tt.typeforce.String),bip32:{public:tt.typeforce.UInt32,private:tt.typeforce.UInt32},pubKeyHash:tt.typeforce.UInt8,scriptHash:tt.typeforce.UInt8,wif:tt.typeforce.UInt8});tt.Buffer256bit=tt.typeforce.BufferN(32);tt.Array=tt.typeforce.Array;tt.Boolean=tt.typeforce.Boolean;tt.maybe=tt.typeforce.maybe});var g2=F(nl=>{"use strict";S();A();Object.defineProperty(nl,"__esModule",{value:!0});nl.testEcc=void 0;var re=e=>Buffer.from(e,"hex");function b5(e){at(e.isPoint(re("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),at(!e.isPoint(re("030000000000000000000000000000000000000000000000000000000000000005"))),at(e.isPrivate(re("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),at(e.isPrivate(re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),at(!e.isPrivate(re("0000000000000000000000000000000000000000000000000000000000000000"))),at(!e.isPrivate(re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),at(!e.isPrivate(re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),at(Buffer.from(e.privateAdd(re("0000000000000000000000000000000000000000000000000000000000000001"),re("0000000000000000000000000000000000000000000000000000000000000000"))).equals(re("0000000000000000000000000000000000000000000000000000000000000001"))),at(e.privateAdd(re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),re("0000000000000000000000000000000000000000000000000000000000000003"))===null),at(Buffer.from(e.privateAdd(re("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),re("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(re("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),at(Buffer.from(e.privateNegate(re("0000000000000000000000000000000000000000000000000000000000000001"))).equals(re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),at(Buffer.from(e.privateNegate(re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(re("0000000000000000000000000000000000000000000000000000000000000003"))),at(Buffer.from(e.privateNegate(re("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(re("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),at(Buffer.from(e.pointCompress(re("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(re("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),at(Buffer.from(e.pointCompress(re("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(re("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),at(Buffer.from(e.pointCompress(re("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(re("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),at(Buffer.from(e.pointCompress(re("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(re("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),at(Buffer.from(e.pointFromScalar(re("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(re("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),at(e.xOnlyPointAddTweak(re("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(re("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),re("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));at(Buffer.from(t.xOnlyPubkey).equals(re("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(re("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),re("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),at(Buffer.from(t.xOnlyPubkey).equals(re("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),at(Buffer.from(e.sign(re("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(re("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),at(e.verify(re("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),re("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),re("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&at(Buffer.from(e.signSchnorr(re("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),re("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),re("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(re("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&at(e.verifySchnorr(re("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),re("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),re("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}nl.testEcc=b5;function at(e){if(!e)throw new Error("ecc library invalid")}});var b2=F(Xs=>{"use strict";S();A();Object.defineProperty(Xs,"__esModule",{value:!0});Xs.ECPairFactory=Xs.networks=void 0;var K0=p2();Xs.networks=K0;var Yt=y2(),w5=py(),m2=aA(),v5=g2(),D0=Yt.typeforce.maybe(Yt.typeforce.compile({compressed:Yt.maybe(Yt.Boolean),network:Yt.maybe(Yt.Network)})),x5=e=>e.length===32?e:e.slice(1,33);function S5(e){(0,v5.testEcc)(e);function t(u){return e.isPoint(u)}function r(u,l){if(Yt.typeforce(Yt.Buffer256bit,u),!e.isPrivate(u))throw new TypeError("Private key not in range [1, n)");return Yt.typeforce(D0,l),new a(u,void 0,l)}function n(u,l){return Yt.typeforce(e.isPoint,u),Yt.typeforce(D0,l),new a(void 0,u,l)}function i(u,l){let h=m2.decode(u),v=h.version;if(Yt.Array(l)){if(l=l.filter(b=>v===b.wif).pop(),!l)throw new Error("Unknown network version")}else if(l=l||K0.bitcoin,v!==l.wif)throw new Error("Invalid network version");return r(h.privateKey,{compressed:h.compressed,network:l})}function o(u){Yt.typeforce(D0,u),u===void 0&&(u={});let l=u.rng||w5,h;do h=l(32),Yt.typeforce(Yt.Buffer256bit,h);while(!e.isPrivate(h));return r(h,u)}class a{__D;__Q;compressed;network;lowR;constructor(l,h,v){this.__D=l,this.__Q=h,this.lowR=!1,v===void 0&&(v={}),this.compressed=v.compressed===void 0?!0:v.compressed,this.network=v.network||K0.bitcoin,h!==void 0&&(this.__Q=Buffer.from(e.pointCompress(h,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let l=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(l)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return m2.encode(this.network.wif,this.__D,this.compressed)}tweak(l){return this.privateKey?this.tweakFromPrivateKey(l):this.tweakFromPublicKey(l)}sign(l,h){if(!this.__D)throw new Error("Missing private key");if(h===void 0&&(h=this.lowR),h===!1)return Buffer.from(e.sign(l,this.__D));{let v=e.sign(l,this.__D),b=Buffer.alloc(32,0),T=0;for(;v[0]>127;)T++,b.writeUIntLE(T,0,6),v=e.sign(l,this.__D,b);return Buffer.from(v)}}signSchnorr(l){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(l,this.privateKey))}verify(l,h){return e.verify(l,this.publicKey,h)}verifySchnorr(l,h){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(l,this.publicKey.subarray(1,33),h)}tweakFromPublicKey(l){let h=x5(this.publicKey),v=e.xOnlyPointAddTweak(h,l);if(!v||v.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let b=Buffer.from([v.parity===0?2:3]);return n(Buffer.concat([b,v.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(l){let v=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,b=e.privateAdd(v,l);if(!b)throw new Error("Invalid tweaked private key!");return r(Buffer.from(b),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:n,fromWIF:i,makeRandom:o}}Xs.ECPairFactory=S5});var w2=F(qi=>{"use strict";S();A();Object.defineProperty(qi,"__esModule",{value:!0});qi.networks=qi.ECPairFactory=qi.default=void 0;var q0=b2();Object.defineProperty(qi,"default",{enumerable:!0,get:function(){return q0.ECPairFactory}});Object.defineProperty(qi,"ECPairFactory",{enumerable:!0,get:function(){return q0.ECPairFactory}});Object.defineProperty(qi,"networks",{enumerable:!0,get:function(){return q0.networks}})});S();A();var la=(e,t=5)=>{let r=e.length,n=e.startsWith("0x")?t+2:t;return`${e.substring(0,n)}...${e.substring(r-t,r)}`};S();A();var lA=e=>{let t=e.toString();return la(t)};S();A();S();A();var dA=e=>e.includes(".")||e.includes("@")?!1:Sy.safeParse(e).success||by.safeParse(e).success||zy.safeParse(e).success||Ay.safeParse(e).success,Kl=(e,t=5)=>dA(e)?la(e,t):e;var hA=(e,t,r,n=4)=>{let i=t?t.name:r,o=Kl(e,n);return i?`${i} (${o})`:o};S();A();var pA=e=>`${e.substring(0,5)}...`;S();A();S();A();var y_=$.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."});S();A();var yA=({account:e,syncedAccounts:t,index:r,offsetIndex:n})=>{let i=t.find(a=>a.accountHash===e.identifier),o={name:i?.name??$y("onboardingImportAccountsAccountName",{walletIndex:n+r+1})};return i?.icon&&(o.icon=i.icon.startsWith("https://")?{type:"image",imageUrl:i.icon}:{type:"emoji",unicode:i.icon}),o};S();A();var Hl=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Change":case"bip44Ethereum":return!0;case"bip44":case"deprecated":case"bip44Root":case"bip44RootEthereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Sui":return!1}};S();A();var gA=({pathType:e,index:t})=>{switch(e){case"bip44RootEthereum":case"bip44Root":return"root-derivation-path-group";case"bip44Change":case"bip44Ethereum":case"bip44Sui":case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return`recommended-group:index-${t}`;case"bip44EthereumSecondary":case"bip44":return`secondary-group:index-${t}`;case"bip44EthereumTertiary":case"deprecated":return`tertiary-group:index-${t}`}};S();A();S();A();var mA=e=>e==null?!1:["ledger","seedVault"].includes(e);S();A();function ig(e,t){let n=(e?.addresses??[]).find(({addressType:i})=>i===t);if(!e?.addresses||!n)switch(t){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw Ol;case"eip155":throw Ul;case"solana":throw Ll;case"sui":throw Rl;default:throw Zy}return n}function bA(e,t){return ig(e,t)?.address}var Ic=e=>{switch(e.type){case"seedless":case"seed":case"privateKey":return!0;case"ledger":case"seedVault":case"readOnly":return!1;default:Ye(e)}};S();A();function wA(e){let t=e.endsWith(".sol"),r=e==="@",n=e.startsWith("@")&&e.length>1;return[t,r,n]}S();A();function vA(e){return[e.endsWith(".eth")]}S();A();var xA=async(e,t,r)=>{let i=(await e.fetchAllAccounts()).find(a=>{switch(a.type){case"seed":case"seedless":return a.seedIdentifier===r;case"privateKey":return a.privateKeyIdentifier===r;case"ledger":case"seedVault":case"readOnly":return!1;default:Ye(a)}});if(!i)throw new Error("Unable to find account to sign client JWT with.");let o=await e.sign(i.identifier,{isJWT:!0,data:t});if(o.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in o)||!o.signedJWT)throw new Error("No JWT from vault signing.");return o.signedJWT};S();A();var jl=Ze(ml());var og=(e,t)=>{let r=Math.floor(Date.now()/1e3);return`Signing this message to claim username ${e} | Public Key: ${t} | Time: ${r}`},sg=(e,t)=>{let r=e.addresses.map(n=>{let i;switch(t.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":i=`0x${Buffer.from(t.publicKey).toString("hex")}`;break;case"solana":i=`0x${Buffer.from(jl.default.decode(t.address)).toString("hex")}`;break;case"eip155":i=t.address;break;case"sui":i=_y(t.publicKey);break}return{networkId:n.networkID,pathType:"privateKey",publicKey:i,address:n.address}});return r.length===0?null:{accountHash:e.identifier,accountOrigin:`privateKey:${e.privateKeyIdentifier}`,derivationIndex:-1,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,addresses:r}},ag=(e,t)=>{let r=[];for(let n of e.addresses){let i=t.chains[n.addressType];if(!i)continue;let o,a;switch(i.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{o=`0x${Buffer.from(i.publicKey).toString("hex")}`,a=i.addresses["bip122:000000000019d6689c085ae165831e93"];break}case"solana":o=`0x${Buffer.from(jl.default.decode(i.address)).toString("hex")}`,a=i.address;break;case"eip155":o=i.address,a=i.address;break;case"sui":o=`0x${Buffer.from(i.publicKey).toString("hex")}`,a=i.address;break}let u=null;switch(!0){case(Ry(i.pathType)&&Yi.isSolanaNetworkID(n.networkID)):u={publicKey:o,address:a,pathType:i.pathType,networkId:n.networkID};break;case(Ly(i.pathType)&&Yi.isEVMNetworkID(n.networkID)):u={publicKey:o,address:a,pathType:i.pathType,networkId:n.networkID};break;case(Uy(i.pathType)&&Yi.isBitcoinNetworkID(n.networkID)):u={publicKey:o,address:a,pathType:i.pathType,networkId:n.networkID};break;case(Cy(i.pathType)&&Yi.isSuiNetworkID(n.networkID)):u={publicKey:o,address:a,pathType:i.pathType,networkId:n.networkID};break}u&&r.push(u)}return{accountHash:e.identifier,accountOrigin:e.type==="seed"?`seed:${e.seedIdentifier}`:`seedless:${e.seedIdentifier}`,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,derivationIndex:t.derivationIndex,addresses:r}},AA=e=>{let t=Yy.safeParse(e);if(t.success)return{type:"image",imageUrl:t.data};let r=Jy.safeParse(e);return r.success?{type:"emoji",unicode:r.data}:{type:"default"}},EA=async(e,t)=>{let r=Object.entries(t).reduce((n,[i,o])=>(n[i]={name:o.name??"",icon:AA(o.icon)},n),{});await Dl(e,r)},TA=(e,t)=>({signMessages:async r=>{let n=[],i=await Ec(t),o=await Tc(e,t,i);for(let a of o){if(!(a.type==="seed"||a.type==="privateKey"||a.type==="seedless"))continue;let u=a.identifier,l=a.addresses.find(b=>b.addressType==="solana");if(!l||l.addressType!=="solana")continue;let h=og(r,l.address),v=await e.sign(u,{signingType:"message",chainType:l.addressType,message:og(r,l.address)});v.status!=="error"&&n.push({networkID:l.networkID,address:l.address,message:h,signature:v.signature})}return n},getBatchAccountMetadata:async r=>{let n=new Set(r),i=await Ec(t),o=await Tc(e,t,i),a=(await e.fetchAllAccounts()).reduce((l,h)=>(l[h.identifier]=h,l),{}),u={};for(let l of o){if(!Ic(l))continue;let h=a?.[l.identifier]??null,v=null;switch(l.type){case"seedless":case"seed":n.has(l.identifier)&&h.type===l.type&&(v=ag(l,h));break;case"privateKey":n.has(l.identifier)&&h.type===l.type&&(v=sg(l,h));break}v&&(u[l.identifier]=v)}return u},getAccountMetadata:async r=>{let n=await Ec(t),i=await Tc(e,t,n),o=(await e.fetchAllAccounts()).reduce((h,v)=>(h[v.identifier]=v,h),{}),a=i.find(h=>h.identifier===r)??null;if(!a)throw new Error(`Unable to get account metadata for account: ${r}`);if(!Ic(a))throw new Error(`Syncing is not supported for account type: ${a.type}`);let u=o?.[a.identifier]??null,l=null;switch(a.type){case"seedless":case"seed":u.type===a.type&&(l=ag(a,u));break;case"privateKey":u.type===a.type&&(l=sg(a,u));break}if(!l)throw new Error(`Unable to construct metadata to sync for account: ${a.identifier}`);return l},storeSyncedAccounts:async r=>(vt.addBreadcrumb("Auth",`Storing ${Object.entries(r).length} synced accounts`,"info"),await EA(t,r),vt.addBreadcrumb("Auth","\u2705 Stored Synced Account metadata","info"),await e.syncAccounts(r),vt.addBreadcrumb("Auth","\u2705 Stored Sync Accounts in Vault","info"),!0)});S();A();var IA=(e,t)=>e.filter(r=>{switch(r.type){case"seed":case"seedless":return r.seedIdentifier===t;case"privateKey":return r.privateKeyIdentifier===t;case"ledger":case"seedVault":case"readOnly":return!1;default:Ye(r);return}});S();A();function PA(e){return Ml.get(e).networkNameOverride?.(e)??Yi.getNetworkName(e,!0)}S();A();S();A();function qo(e,t){return typeof e=="string"?e===t:e.length===t.length&&e.every((r,n)=>r===t[n])}S();A();var ya=Ze(Yg());function t3(e){return e=(0,ya.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{to(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}default:Ye(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{to(n.publicKey)&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)));break}default:Ye(n)}}break;case"seedVault":break;default:Ye(t)}}),e}function r3(e){return e=(0,ya.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}default:Ye(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{n.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(n.publicKey).toJSON());break}default:Ye(n)}}break;case"seedVault":break;default:Ye(t)}}),e}function Jg(e){return e=(0,ya.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&to(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))if(t.version===1&&to(t.chains[r]?.publicKey)){let n=t.chains[r];n&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)))}break;case"seedVault":break;default:Ye(t)}}),e}function Xg(e){return e=(0,ya.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case"seedVault":break;default:Ye(t)}}),e}function to(e){return!!e&&typeof e=="object"&&xl("type",e)&&typeof e.type=="string"&&xl("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}S();A();var Yr=".phantom-labs.vault";var Lc=`${Yr}.accounts`,$o=`${Yr}.secrets`,Rc=e=>`${Yr}.privateKey.${e}`,Cc=e=>`${Yr}.seed.${e}`,Dc=e=>`${Yr}.seedless.${e}`,Uc=`${Yr}.integrityCheck`;async function it(e){return(await am(e))?.accounts??[]}async function tm(e){let t=await cr(e),r=new Set(t.seedIdentifiers),n=await it(e);for(let o of n)o.type==="seed"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function Kc(e){let t=await cr(e),r=new Set(t.seedlessIdentifiers),n=await it(e);for(let o of n)o.type==="seedless"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function cr(e){let t=await e.generalStorage.get($o);return{privateKeyIdentifiers:t?.privateKeyIdentifiers??[],seedIdentifiers:t?.seedIdentifiers??[],seedlessIdentifiers:t?.seedlessIdentifiers??[]}}async function rm(e,t){let r=Cc(t),n=await e.secretsStorage.getSecureValue(r);if(n===null){let i=Dc(t);n=await e.secretsStorage.getSecureValue(i)}if(n==null)throw new Ji;return to(n.entropy)?n.entropy=new Uint8Array(Buffer.from(n.entropy)):n.entropy=new Uint8Array(Object.values(n.entropy)),n}async function zo(e,t){let r=Rc(t),n=await e.secretsStorage.getSecureValue(r);if(n==null)throw new ua;return to(n.privateKey)?n.privateKey=new Uint8Array(Buffer.from(n.privateKey)):n.privateKey=new Uint8Array(Object.values(n.privateKey)),n}async function Ft(e,t,r=!0){let n=await am(e);if(!n)n={version:1,accounts:[t]};else{let i=n.accounts,o=i3(i,t);if(o.length>0){if(!r)throw new oi(o[0].type,t.type);let a=em(t.type);for(let l of o)if(em(l.type)>=a)throw new oi(l.type,t.type);let u=o.map(l=>l.identifier);return i=i.filter(l=>!u.includes(l.identifier)),i.push(t),await Jr(e,i),await id(e)}else i.push(t);n.accounts=i}return Jr(e,n.accounts)}async function Jr(e,t){let r={version:1,accounts:t};return e.generalStorage.set(Lc,Xg(r))}async function nm(e,t){let r=Rc(t.identifier);await e.secretsStorage.setSecureValue(r,t),await a3(e,t.identifier)}async function im(e,t){let r=Cc(t.identifier);await e.secretsStorage.setSecureValue(r,t),await o3(e,t.identifier)}async function om(e,t){let r=Dc(t.identifier);await e.secretsStorage.setSecureValue(r,t),await s3(e,t.identifier)}async function id(e){let t=await it(e),r=new Set,n=new Set;for(let u of t)switch(u.type){case"seed":case"seedless":r.add(u.seedIdentifier);break;case"privateKey":n.add(u.privateKeyIdentifier);break;case"ledger":case"readOnly":case"seedVault":break;default:Ye(u)}let i=await cr(e),o={seedIdentifiers:i.seedIdentifiers.filter(u=>r.has(u)),seedlessIdentifiers:i.seedlessIdentifiers.filter(u=>r.has(u)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(u=>n.has(u))},a={seedIdentifiers:i.seedIdentifiers.filter(u=>!r.has(u)),seedlessIdentifiers:i.seedlessIdentifiers.filter(u=>!r.has(u)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(u=>!n.has(u))};await e.generalStorage.set($o,{version:1,...o}),await e.secretsStorage.removeSecureValue([...a.seedIdentifiers.map(u=>Cc(u)),...a.seedlessIdentifiers.map(u=>Dc(u)),...a.privateKeyIdentifiers.map(u=>Rc(u))])}async function od(e,t){t?await e.secretsStorage.setSecureValue(Uc,t):await e.secretsStorage.removeSecureValue(Uc)}async function sd(e){return e.secretsStorage.getSecureValue(Uc)}async function sm(e){await e.generalStorage.remove(Lc);let t=await cr(e),r=t.privateKeyIdentifiers.map(o=>Rc(o)),n=t.seedIdentifiers.map(o=>Cc(o)),i=t.seedlessIdentifiers.map(o=>Dc(o));await e.secretsStorage.removeSecureValue([...r,...i,...n]),await e.generalStorage.remove($o),await e.secretsStorage.removeSecureValue(Uc),await e.secureCache.clear()}async function am(e){let t=await e.generalStorage.get(Lc);return t?(t=Jg(t),t=await n3(e,t),t):null}async function n3(e,t){let r=!1;return t.accounts.forEach(n=>{switch(n.type){case"privateKey":{r=Qg(n)||r;break}case"readOnly":break;case"ledger":case"seed":case"seedless":Object.values(n.chains).forEach(i=>{r=Qg(i)||r});break;case"seedVault":break;default:Ye(n)}}),r&&await Jr(e,t.accounts),t}function Qg(e){let t=!1;switch(e.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{Object.values(jt).forEach(r=>{if(e.addresses&&e.addresses[r])return;let n=wr({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:n},t=!0});break}default:}return t}function i3(e,t){let r=[],n=[];switch(t.type){case"seed":case"seedless":case"ledger":{Object.values(t.chains).forEach(o=>{switch(o.chainType){case"eip155":case"solana":{n.push(o.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(o.publicKey);break}case"sui":{n.push(o.address);break}default:Ye(o)}});break}case"readOnly":{Object.values(t.addresses).forEach(o=>{n.push(o)});break}case"privateKey":{switch(t.chainType){case"eip155":case"solana":{n.push(t.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(t.publicKey);break}case"sui":{n.push(t.address);break}default:Ye(t)}break}case"seedVault":{n.push(t.publicKey);break}default:(o=>{throw new Error("unknown account type")})(t)}let i=[];for(let o of e){let a;switch(o.type){case"seed":case"seedless":case"ledger":{a=Object.values(o.chains).some(u=>{switch(u.chainType){case"eip155":case"solana":return!!n.find(l=>qo(l,u.publicKey));case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":return!!r.find(l=>qo(l,u.publicKey));default:Ye(u)}});break}case"readOnly":{a=Object.values(o.addresses).some(u=>!!n.find(l=>qo(l,u)));break}case"privateKey":{a=!!n.find(u=>qo(u,o.publicKey));break}case"seedVault":{a=!!n.find(u=>qo(u,o.publicKey));break}default:(u=>{throw new Error("unknown account type")})(o)}a&&i.push(o)}return i}async function o3(e,t){let r=await cr(e);return r.seedIdentifiers=[...new Set([...r.seedIdentifiers,t])],e.generalStorage.set($o,{version:1,...r})}async function s3(e,t){let r=await cr(e);return r.seedlessIdentifiers=[...new Set([...r.seedlessIdentifiers,t])],e.generalStorage.set($o,{version:1,...r})}async function a3(e,t){let r=await cr(e);return r.privateKeyIdentifiers=[...new Set([...r.privateKeyIdentifiers,t])],e.generalStorage.set($o,{version:1,...r})}function em(e){switch(e){case"readOnly":return 1;case"privateKey":return 2;case"seedless":case"seed":return 3;case"ledger":return 4;case"seedVault":return 5;default:return 0}}S();A();S();A();var Qt=Ze(zi());S();A();S();A();var ga={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Zo=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Xr=(e,t)=>e<<32-t|e>>>t,c3=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!c3)throw new Error("Non little-endian hardware is not supported");var tN=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function u3(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function ai(e){if(typeof e=="string"&&(e=u3(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}var Go=class{clone(){return this._cloneInto()}},f3=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function cm(e,t){if(t!==void 0&&(typeof t!="object"||!f3(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function ad(e){let t=n=>e().update(ai(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ma(e=32){if(ga.web)return ga.web.getRandomValues(new Uint8Array(e));if(ga.node)return new Uint8Array(ga.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}S();A();S();A();S();A();var ld={};hy(ld,{bitGet:()=>m3,bitLen:()=>g3,bitMask:()=>ba,bitSet:()=>b3,bytesToHex:()=>ro,bytesToNumberBE:()=>Dt,bytesToNumberLE:()=>jc,concatBytes:()=>Fn,createHmacDrbg:()=>fd,ensureBytes:()=>xt,equalBytes:()=>p3,hexToBytes:()=>no,hexToNumber:()=>ud,numberToBytesBE:()=>Qr,numberToBytesLE:()=>Fc,numberToHexUnpadded:()=>lm,numberToVarBytesBE:()=>h3,utf8ToBytes:()=>y3,validateObject:()=>ci});S();A();var fm=BigInt(0),qc=BigInt(1),l3=BigInt(2),Hc=e=>e instanceof Uint8Array,d3=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ro(e){if(!Hc(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=d3[e[r]];return t}function lm(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function ud(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function no(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let i=n*2,o=e.slice(i,i+2),a=Number.parseInt(o,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");r[n]=a}return r}function Dt(e){return ud(ro(e))}function jc(e){if(!Hc(e))throw new Error("Uint8Array expected");return ud(ro(Uint8Array.from(e).reverse()))}function Qr(e,t){return no(e.toString(16).padStart(t*2,"0"))}function Fc(e,t){return Qr(e,t).reverse()}function h3(e){return no(lm(e))}function xt(e,t,r){let n;if(typeof t=="string")try{n=no(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(Hc(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Fn(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!Hc(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}function p3(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function y3(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function g3(e){let t;for(t=0;e>fm;e>>=qc,t+=1);return t}function m3(e,t){return e>>BigInt(t)&qc}var b3=(e,t,r)=>e|(r?qc:fm)<<BigInt(t),ba=e=>(l3<<BigInt(e-1))-qc,cd=e=>new Uint8Array(e),um=e=>Uint8Array.from(e);function fd(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=cd(e),i=cd(e),o=0,a=()=>{n.fill(1),i.fill(0),o=0},u=(...b)=>r(i,n,...b),l=(b=cd())=>{i=u(um([0]),b),n=u(),b.length!==0&&(i=u(um([1]),b),n=u())},h=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let b=0,T=[];for(;b<t;){n=u();let P=n.slice();T.push(P),b+=n.length}return Fn(...T)};return(b,T)=>{a(),l(b);let P;for(;!(P=T(h()));)l();return a(),P}}var w3={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ci(e,t,r={}){let n=(i,o,a)=>{let u=w3[o];if(typeof u!="function")throw new Error(`Invalid validator "${o}", expected function`);let l=e[i];if(!(a&&l===void 0)&&!u(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var At=BigInt(0),mt=BigInt(1),io=BigInt(2),v3=BigInt(3),dd=BigInt(4),dm=BigInt(5),hm=BigInt(8),x3=BigInt(9),S3=BigInt(16);function St(e,t){let r=e%t;return r>=At?r:t+r}function A3(e,t,r){if(r<=At||t<At)throw new Error("Expected power/modulo > 0");if(r===mt)return At;let n=mt;for(;t>At;)t&mt&&(n=n*e%r),e=e*e%r,t>>=mt;return n}function ur(e,t,r){let n=e;for(;t-- >At;)n*=n,n%=r;return n}function Wc(e,t){if(e===At||t<=At)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=St(e,t),n=t,i=At,o=mt,a=mt,u=At;for(;r!==At;){let h=n/r,v=n%r,b=i-a*h,T=o-u*h;n=r,r=v,i=a,o=u,a=b,u=T}if(n!==mt)throw new Error("invert: does not exist");return St(i,t)}function E3(e){let t=(e-mt)/io,r,n,i;for(r=e-mt,n=0;r%io===At;r/=io,n++);for(i=io;i<e&&A3(i,t,e)!==e-mt;i++);if(n===1){let a=(e+mt)/dd;return function(l,h){let v=l.pow(h,a);if(!l.eql(l.sqr(v),h))throw new Error("Cannot find square root");return v}}let o=(r+mt)/io;return function(u,l){if(u.pow(l,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let h=n,v=u.pow(u.mul(u.ONE,i),r),b=u.pow(l,o),T=u.pow(l,r);for(;!u.eql(T,u.ONE);){if(u.eql(T,u.ZERO))return u.ZERO;let P=1;for(let I=u.sqr(T);P<h&&!u.eql(I,u.ONE);P++)I=u.sqr(I);let B=u.pow(v,mt<<BigInt(h-P-1));v=u.sqr(B),b=u.mul(b,B),T=u.mul(T,v),h=P}return b}}function T3(e){if(e%dd===v3){let t=(e+mt)/dd;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%hm===dm){let t=(e-dm)/hm;return function(n,i){let o=n.mul(i,io),a=n.pow(o,t),u=n.mul(i,a),l=n.mul(n.mul(u,io),a),h=n.mul(u,n.sub(l,n.ONE));if(!n.eql(n.sqr(h),i))throw new Error("Cannot find square root");return h}}return e%S3,E3(e)}var I3=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hd(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=I3.reduce((n,i)=>(n[i]="function",n),t);return ci(e,r)}function P3(e,t,r){if(r<At)throw new Error("Expected power > 0");if(r===At)return e.ONE;if(r===mt)return t;let n=e.ONE,i=t;for(;r>At;)r&mt&&(n=e.mul(n,i)),i=e.sqr(i),r>>=mt;return n}function M3(e,t){let r=new Array(t.length),n=t.reduce((o,a,u)=>e.is0(a)?o:(r[u]=o,e.mul(o,a)),e.ONE),i=e.inv(n);return t.reduceRight((o,a,u)=>e.is0(a)?o:(r[u]=e.mul(o,r[u]),e.mul(o,a)),i),r}function pd(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function pm(e,t,r=!1,n={}){if(e<=At)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=pd(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let a=T3(e),u=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:ba(i),ZERO:At,ONE:mt,create:l=>St(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return At<=l&&l<e},is0:l=>l===At,isOdd:l=>(l&mt)===mt,neg:l=>St(-l,e),eql:(l,h)=>l===h,sqr:l=>St(l*l,e),add:(l,h)=>St(l+h,e),sub:(l,h)=>St(l-h,e),mul:(l,h)=>St(l*h,e),pow:(l,h)=>P3(u,l,h),div:(l,h)=>St(l*Wc(h,e),e),sqrN:l=>l*l,addN:(l,h)=>l+h,subN:(l,h)=>l-h,mulN:(l,h)=>l*h,inv:l=>Wc(l,e),sqrt:n.sqrt||(l=>a(u,l)),invertBatch:l=>M3(u,l),cmov:(l,h,v)=>v?h:l,toBytes:l=>r?Fc(l,o):Qr(l,o),fromBytes:l=>{if(l.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${l.length}`);return r?jc(l):Dt(l)}});return Object.freeze(u)}function ym(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function yd(e){let t=ym(e);return t+Math.ceil(t/2)}function gm(e,t,r=!1){let n=e.length,i=ym(t),o=yd(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let a=r?Dt(e):jc(e),u=St(a,t-mt)+mt;return r?Fc(u,i):Qr(u,i)}S();A();S();A();var k3=BigInt(0),gd=BigInt(1);function mm(e,t){let r=(i,o)=>{let a=o.negate();return i?a:o},n=i=>{let o=Math.ceil(t/i)+1,a=2**(i-1);return{windows:o,windowSize:a}};return{constTimeNegate:r,unsafeLadder(i,o){let a=e.ZERO,u=i;for(;o>k3;)o&gd&&(a=a.add(u)),u=u.double(),o>>=gd;return a},precomputeWindow(i,o){let{windows:a,windowSize:u}=n(o),l=[],h=i,v=h;for(let b=0;b<a;b++){v=h,l.push(v);for(let T=1;T<u;T++)v=v.add(h),l.push(v);h=v.double()}return l},wNAF(i,o,a){let{windows:u,windowSize:l}=n(i),h=e.ZERO,v=e.BASE,b=BigInt(2**i-1),T=2**i,P=BigInt(i);for(let B=0;B<u;B++){let I=B*l,_=Number(a&b);a>>=P,_>l&&(_-=T,a+=gd);let V=I,R=I+Math.abs(_)-1,N=B%2!==0,H=_<0;_===0?v=v.add(r(N,o[V])):h=h.add(r(H,o[R]))}return{p:h,f:v}},wNAFCached(i,o,a,u){let l=i._WINDOW_SIZE||1,h=o.get(i);return h||(h=this.precomputeWindow(i,l),l!==1&&o.set(i,u(h))),this.wNAF(l,h,a)}}}function md(e){return hd(e.Fp),ci(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...pd(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function _3(e){let t=md(e);ci(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:V3,hexToBytes:N3}=ld,oo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=oo;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:V3(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=oo,r=typeof e=="string"?N3(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=oo._parseInt(r.subarray(2)),{d:a,l:u}=oo._parseInt(o);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){let t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,r=h=>{let v=h.toString(16);return v.length&1?`0${v}`:v},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,a=i.length/2,u=r(o),l=r(a);return`30${r(a+o+4)}02${l}${i}02${u}${n}`}},Wn=BigInt(0),vr=BigInt(1),bN=BigInt(2),bm=BigInt(3),wN=BigInt(4);function O3(e){let t=_3(e),{Fp:r}=t,n=t.toBytes||((B,I,_)=>{let V=I.toAffine();return Fn(Uint8Array.from([4]),r.toBytes(V.x),r.toBytes(V.y))}),i=t.fromBytes||(B=>{let I=B.subarray(1),_=r.fromBytes(I.subarray(0,r.BYTES)),V=r.fromBytes(I.subarray(r.BYTES,2*r.BYTES));return{x:_,y:V}});function o(B){let{a:I,b:_}=t,V=r.sqr(B),R=r.mul(V,B);return r.add(r.add(R,r.mul(B,I)),_)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(B){return typeof B=="bigint"&&Wn<B&&B<t.n}function u(B){if(!a(B))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(B){let{allowedPrivateKeyLengths:I,nByteLength:_,wrapPrivateKey:V,n:R}=t;if(I&&typeof B!="bigint"){if(B instanceof Uint8Array&&(B=ro(B)),typeof B!="string"||!I.includes(B.length))throw new Error("Invalid key");B=B.padStart(_*2,"0")}let N;try{N=typeof B=="bigint"?B:Dt(xt("private key",B,_))}catch{throw new Error(`private key must be ${_} bytes, hex or bigint, not ${typeof B}`)}return V&&(N=St(N,R)),u(N),N}let h=new Map;function v(B){if(!(B instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(I,_,V){if(this.px=I,this.py=_,this.pz=V,I==null||!r.isValid(I))throw new Error("x required");if(_==null||!r.isValid(_))throw new Error("y required");if(V==null||!r.isValid(V))throw new Error("z required")}static fromAffine(I){let{x:_,y:V}=I||{};if(!I||!r.isValid(_)||!r.isValid(V))throw new Error("invalid affine point");if(I instanceof b)throw new Error("projective point not allowed");let R=N=>r.eql(N,r.ZERO);return R(_)&&R(V)?b.ZERO:new b(_,V,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){let _=r.invertBatch(I.map(V=>V.pz));return I.map((V,R)=>V.toAffine(_[R])).map(b.fromAffine)}static fromHex(I){let _=b.fromAffine(i(xt("pointHex",I)));return _.assertValidity(),_}static fromPrivateKey(I){return b.BASE.multiply(l(I))}_setWindowSize(I){this._WINDOW_SIZE=I,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:I,y:_}=this.toAffine();if(!r.isValid(I)||!r.isValid(_))throw new Error("bad point: x or y not FE");let V=r.sqr(_),R=o(I);if(!r.eql(V,R))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:I}=this.toAffine();if(r.isOdd)return!r.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){v(I);let{px:_,py:V,pz:R}=this,{px:N,py:H,pz:K}=I,C=r.eql(r.mul(_,K),r.mul(N,R)),q=r.eql(r.mul(V,K),r.mul(H,R));return C&&q}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){let{a:I,b:_}=t,V=r.mul(_,bm),{px:R,py:N,pz:H}=this,K=r.ZERO,C=r.ZERO,q=r.ZERO,U=r.mul(R,R),G=r.mul(N,N),x=r.mul(H,H),s=r.mul(R,N);return s=r.add(s,s),q=r.mul(R,H),q=r.add(q,q),K=r.mul(I,q),C=r.mul(V,x),C=r.add(K,C),K=r.sub(G,C),C=r.add(G,C),C=r.mul(K,C),K=r.mul(s,K),q=r.mul(V,q),x=r.mul(I,x),s=r.sub(U,x),s=r.mul(I,s),s=r.add(s,q),q=r.add(U,U),U=r.add(q,U),U=r.add(U,x),U=r.mul(U,s),C=r.add(C,U),x=r.mul(N,H),x=r.add(x,x),U=r.mul(x,s),K=r.sub(K,U),q=r.mul(x,G),q=r.add(q,q),q=r.add(q,q),new b(K,C,q)}add(I){v(I);let{px:_,py:V,pz:R}=this,{px:N,py:H,pz:K}=I,C=r.ZERO,q=r.ZERO,U=r.ZERO,G=t.a,x=r.mul(t.b,bm),s=r.mul(_,N),f=r.mul(V,H),d=r.mul(R,K),y=r.add(_,V),p=r.add(N,H);y=r.mul(y,p),p=r.add(s,f),y=r.sub(y,p),p=r.add(_,R);let w=r.add(N,K);return p=r.mul(p,w),w=r.add(s,d),p=r.sub(p,w),w=r.add(V,R),C=r.add(H,K),w=r.mul(w,C),C=r.add(f,d),w=r.sub(w,C),U=r.mul(G,p),C=r.mul(x,d),U=r.add(C,U),C=r.sub(f,U),U=r.add(f,U),q=r.mul(C,U),f=r.add(s,s),f=r.add(f,s),d=r.mul(G,d),p=r.mul(x,p),f=r.add(f,d),d=r.sub(s,d),d=r.mul(G,d),p=r.add(p,d),s=r.mul(f,p),q=r.add(q,s),s=r.mul(w,p),C=r.mul(y,C),C=r.sub(C,s),s=r.mul(y,f),U=r.mul(w,U),U=r.add(U,s),new b(C,q,U)}subtract(I){return this.add(I.negate())}is0(){return this.equals(b.ZERO)}wNAF(I){return P.wNAFCached(this,h,I,_=>{let V=r.invertBatch(_.map(R=>R.pz));return _.map((R,N)=>R.toAffine(V[N])).map(b.fromAffine)})}multiplyUnsafe(I){let _=b.ZERO;if(I===Wn)return _;if(u(I),I===vr)return this;let{endo:V}=t;if(!V)return P.unsafeLadder(this,I);let{k1neg:R,k1:N,k2neg:H,k2:K}=V.splitScalar(I),C=_,q=_,U=this;for(;N>Wn||K>Wn;)N&vr&&(C=C.add(U)),K&vr&&(q=q.add(U)),U=U.double(),N>>=vr,K>>=vr;return R&&(C=C.negate()),H&&(q=q.negate()),q=new b(r.mul(q.px,V.beta),q.py,q.pz),C.add(q)}multiply(I){u(I);let _=I,V,R,{endo:N}=t;if(N){let{k1neg:H,k1:K,k2neg:C,k2:q}=N.splitScalar(_),{p:U,f:G}=this.wNAF(K),{p:x,f:s}=this.wNAF(q);U=P.constTimeNegate(H,U),x=P.constTimeNegate(C,x),x=new b(r.mul(x.px,N.beta),x.py,x.pz),V=U.add(x),R=G.add(s)}else{let{p:H,f:K}=this.wNAF(_);V=H,R=K}return b.normalizeZ([V,R])[0]}multiplyAndAddUnsafe(I,_,V){let R=b.BASE,N=(K,C)=>C===Wn||C===vr||!K.equals(R)?K.multiplyUnsafe(C):K.multiply(C),H=N(this,_).add(N(I,V));return H.is0()?void 0:H}toAffine(I){let{px:_,py:V,pz:R}=this,N=this.is0();I==null&&(I=N?r.ONE:r.inv(R));let H=r.mul(_,I),K=r.mul(V,I),C=r.mul(R,I);if(N)return{x:r.ZERO,y:r.ZERO};if(!r.eql(C,r.ONE))throw new Error("invZ was invalid");return{x:H,y:K}}isTorsionFree(){let{h:I,isTorsionFree:_}=t;if(I===vr)return!0;if(_)return _(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:I,clearCofactor:_}=t;return I===vr?this:_?_(b,this):this.multiplyUnsafe(t.h)}toRawBytes(I=!0){return this.assertValidity(),n(b,this,I)}toHex(I=!0){return ro(this.toRawBytes(I))}}b.BASE=new b(t.Gx,t.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);let T=t.nBitLength,P=mm(b,t.endo?Math.ceil(T/2):T);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function U3(e){let t=md(e);return ci(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function wm(e){let t=U3(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function a(p){return Wn<p&&p<r.ORDER}function u(p){return St(p,n)}function l(p){return Wc(p,n)}let{ProjectivePoint:h,normPrivateKeyToScalar:v,weierstrassEquation:b,isWithinCurveOrder:T}=O3({...t,toBytes(p,w,E){let g=w.toAffine(),c=r.toBytes(g.x),m=Fn;return E?m(Uint8Array.from([w.hasEvenY()?2:3]),c):m(Uint8Array.from([4]),c,r.toBytes(g.y))},fromBytes(p){let w=p.length,E=p[0],g=p.subarray(1);if(w===i&&(E===2||E===3)){let c=Dt(g);if(!a(c))throw new Error("Point is not on curve");let m=b(c),O=r.sqrt(m),L=(O&vr)===vr;return(E&1)===1!==L&&(O=r.neg(O)),{x:c,y:O}}else if(w===o&&E===4){let c=r.fromBytes(g.subarray(0,r.BYTES)),m=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:c,y:m}}else throw new Error(`Point of length ${w} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),P=p=>ro(Qr(p,t.nByteLength));function B(p){let w=n>>vr;return p>w}function I(p){return B(p)?u(-p):p}let _=(p,w,E)=>Dt(p.slice(w,E));class V{constructor(w,E,g){this.r=w,this.s=E,this.recovery=g,this.assertValidity()}static fromCompact(w){let E=t.nByteLength;return w=xt("compactSignature",w,E*2),new V(_(w,0,E),_(w,E,2*E))}static fromDER(w){let{r:E,s:g}=oo.toSig(xt("DER",w));return new V(E,g)}assertValidity(){if(!T(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!T(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new V(this.r,this.s,w)}recoverPublicKey(w){let{r:E,s:g,recovery:c}=this,m=q(xt("msgHash",w));if(c==null||![0,1,2,3].includes(c))throw new Error("recovery id invalid");let O=c===2||c===3?E+t.n:E;if(O>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let L=c&1?"03":"02",D=h.fromHex(L+P(O)),j=l(O),W=u(-m*j),Z=u(g*j),Re=h.BASE.multiplyAndAddUnsafe(D,W,Z);if(!Re)throw new Error("point at infinify");return Re.assertValidity(),Re}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new V(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return no(this.toDERHex())}toDERHex(){return oo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return no(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}let R={isValidPrivateKey(p){try{return v(p),!0}catch{return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{let p=yd(t.n);return gm(t.randomBytes(p),t.n)},precompute(p=8,w=h.BASE){return w._setWindowSize(p),w.multiply(BigInt(3)),w}};function N(p,w=!0){return h.fromPrivateKey(p).toRawBytes(w)}function H(p){let w=p instanceof Uint8Array,E=typeof p=="string",g=(w||E)&&p.length;return w?g===i||g===o:E?g===2*i||g===2*o:p instanceof h}function K(p,w,E=!0){if(H(p))throw new Error("first arg must be private key");if(!H(w))throw new Error("second arg must be public key");return h.fromHex(w).multiply(v(p)).toRawBytes(E)}let C=t.bits2int||function(p){let w=Dt(p),E=p.length*8-t.nBitLength;return E>0?w>>BigInt(E):w},q=t.bits2int_modN||function(p){return u(C(p))},U=ba(t.nBitLength);function G(p){if(typeof p!="bigint")throw new Error("bigint expected");if(!(Wn<=p&&p<U))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Qr(p,t.nByteLength)}function x(p,w,E=s){if(["recovered","canonical"].some(Y=>Y in E))throw new Error("sign() legacy options not supported");let{hash:g,randomBytes:c}=t,{lowS:m,prehash:O,extraEntropy:L}=E;m==null&&(m=!0),p=xt("msgHash",p),O&&(p=xt("prehashed msgHash",g(p)));let D=q(p),j=v(w),W=[G(j),G(D)];if(L!=null){let Y=L===!0?c(r.BYTES):L;W.push(xt("extraEntropy",Y))}let Z=Fn(...W),Re=D;function X(Y){let yt=C(Y);if(!T(yt))return;let ne=l(yt),J=h.BASE.multiply(yt).toAffine(),gt=u(J.x);if(gt===Wn)return;let te=u(ne*u(Re+gt*j));if(te===Wn)return;let ie=(J.x===gt?0:2)|Number(J.y&vr),Jt=te;return m&&B(te)&&(Jt=I(te),ie^=1),new V(gt,Jt,ie)}return{seed:Z,k2sig:X}}let s={lowS:t.lowS,prehash:!1},f={lowS:t.lowS,prehash:!1};function d(p,w,E=s){let{seed:g,k2sig:c}=x(p,w,E),m=t;return fd(m.hash.outputLen,m.nByteLength,m.hmac)(g,c)}h.BASE._setWindowSize(8);function y(p,w,E,g=f){let c=p;if(w=xt("msgHash",w),E=xt("publicKey",E),"strict"in g)throw new Error("options.strict was renamed to lowS");let{lowS:m,prehash:O}=g,L,D;try{if(typeof c=="string"||c instanceof Uint8Array)try{L=V.fromDER(c)}catch(J){if(!(J instanceof oo.Err))throw J;L=V.fromCompact(c)}else if(typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint"){let{r:J,s:gt}=c;L=new V(J,gt)}else throw new Error("PARSE");D=h.fromHex(E)}catch(J){if(J.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(m&&L.hasHighS())return!1;O&&(w=t.hash(w));let{r:j,s:W}=L,Z=q(w),Re=l(W),X=u(Z*Re),Y=u(j*Re),yt=h.BASE.multiplyAndAddUnsafe(D,X,Y)?.toAffine();return yt?u(yt.x)===j:!1}return{CURVE:t,getPublicKey:N,getSharedSecret:K,sign:d,verify:y,ProjectivePoint:h,Signature:V,utils:R}}S();A();function L3(e){return{hash:e,hmac:(t,...r)=>Iy(e,t,Ey(...r)),randomBytes:vc}}function vm(e,t){let r=n=>wm({...e,...L3(n)});return Object.freeze({...r(t),create:r})}var Zc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),$c=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Am=BigInt(1),zc=BigInt(2),xm=(e,t)=>(e+t/zc)/t;function Em(e){let t=Zc,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),a=BigInt(23),u=BigInt(44),l=BigInt(88),h=e*e*e%t,v=h*h*e%t,b=ur(v,r,t)*v%t,T=ur(b,r,t)*v%t,P=ur(T,zc,t)*h%t,B=ur(P,i,t)*P%t,I=ur(B,o,t)*B%t,_=ur(I,u,t)*I%t,V=ur(_,l,t)*_%t,R=ur(V,u,t)*I%t,N=ur(R,r,t)*v%t,H=ur(N,a,t)*B%t,K=ur(H,n,t)*h%t,C=ur(K,zc,t);if(!wd.eql(wd.sqr(C),e))throw new Error("Cannot find square root");return C}var wd=pm(Zc,void 0,void 0,{sqrt:Em}),Yo=vm({a:BigInt(0),b:BigInt(7),Fp:wd,n:$c,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=$c,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Am*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),u=xm(o*e,t),l=xm(-n*e,t),h=St(e-u*r-l*i,t),v=St(-u*n-l*o,t),b=h>a,T=v>a;if(b&&(h=t-h),T&&(v=t-v),h>a||v>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:b,k1:h,k2neg:T,k2:v}}}},Ht),Yc=BigInt(0),Tm=e=>typeof e=="bigint"&&Yc<e&&e<Zc,R3=e=>typeof e=="bigint"&&Yc<e&&e<$c,Sm={};function Gc(e,...t){let r=Sm[e];if(r===void 0){let n=Ht(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Fn(n,n),Sm[e]=r}return Ht(Fn(r,...t))}var Sd=e=>e.toRawBytes(!0).slice(1),vd=e=>Qr(e,32),bd=e=>St(e,Zc),wa=e=>St(e,$c),Ad=Yo.ProjectivePoint,C3=(e,t,r)=>Ad.BASE.multiplyAndAddUnsafe(e,t,r);function xd(e){let t=Yo.utils.normPrivateKeyToScalar(e),r=Ad.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:wa(-t),bytes:Sd(r)}}function Im(e){if(!Tm(e))throw new Error("bad x: need 0 < x < p");let t=bd(e*e),r=bd(t*e+BigInt(7)),n=Em(r);n%zc!==Yc&&(n=bd(-n));let i=new Ad(e,n,Am);return i.assertValidity(),i}function Pm(...e){return wa(Dt(Gc("BIP0340/challenge",...e)))}function D3(e){return xd(e).bytes}function K3(e,t,r=vc(32)){let n=xt("message",e),{bytes:i,scalar:o}=xd(t),a=xt("auxRand",r,32),u=vd(o^Dt(Gc("BIP0340/aux",a))),l=Gc("BIP0340/nonce",u,i,n),h=wa(Dt(l));if(h===Yc)throw new Error("sign failed: k is zero");let{bytes:v,scalar:b}=xd(h),T=Pm(v,i,n),P=new Uint8Array(64);if(P.set(v,0),P.set(vd(wa(b+T*o)),32),!Mm(P,n,i))throw new Error("sign: Invalid signature produced");return P}function Mm(e,t,r){let n=xt("signature",e,64),i=xt("message",t),o=xt("publicKey",r,32);try{let a=Im(Dt(o)),u=Dt(n.subarray(0,32));if(!Tm(u))return!1;let l=Dt(n.subarray(32,64));if(!R3(l))return!1;let h=Pm(vd(u),Sd(a),i),v=C3(a,l,wa(-h));return!(!v||!v.hasEvenY()||v.toAffine().x!==u)}catch{return!1}}var fr={getPublicKey:D3,sign:K3,verify:Mm,utils:{randomPrivateKey:Yo.utils.randomPrivateKey,lift_x:Im,pointToBytes:Sd,numberToBytesBE:Qr,bytesToNumberBE:Dt,taggedHash:Gc,mod:St}};S();A();var q3=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),km=Uint8Array.from({length:16},(e,t)=>t),H3=km.map(e=>(9*e+5)%16),Td=[km],Id=[H3];for(let e=0;e<4;e++)for(let t of[Td,Id])t.push(t[e].map(r=>q3[r]));var _m=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),j3=Td.map((e,t)=>e.map(r=>_m[t][r])),F3=Id.map((e,t)=>e.map(r=>_m[t][r])),W3=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),$3=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Jc=(e,t)=>e<<t|e>>>32-t;function Bm(e,t,r,n){return e===0?t^r^n:e===1?t&r|~t&n:e===2?(t|~r)^n:e===3?t&n|r&~n:t^(r|~n)}var Xc=new Uint32Array(16),Ed=class extends Py{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:r,h2:n,h3:i,h4:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.h0=t|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(t,r){for(let P=0;P<16;P++,r+=4)Xc[P]=t.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,a=o,u=this.h2|0,l=u,h=this.h3|0,v=h,b=this.h4|0,T=b;for(let P=0;P<5;P++){let B=4-P,I=W3[P],_=$3[P],V=Td[P],R=Id[P],N=j3[P],H=F3[P];for(let K=0;K<16;K++){let C=Jc(n+Bm(P,o,u,h)+Xc[V[K]]+I,N[K])+b|0;n=b,b=h,h=Jc(u,10)|0,u=o,o=C}for(let K=0;K<16;K++){let C=Jc(i+Bm(B,a,l,v)+Xc[R[K]]+_,H[K])+T|0;i=T,T=v,v=Jc(l,10)|0,l=a,a=C}}this.set(this.h1+u+v|0,this.h2+h+T|0,this.h3+b+i|0,this.h4+n+a|0,this.h0+o+l|0)}roundClean(){Xc.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}},Vm=Ty(()=>new Ed);S();A();function Jo(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function eu(...e){let t=(i,o)=>a=>i(o(a)),r=Array.from(e).reverse().reduce((i,o)=>i?t(i,o.encode):o.encode,void 0),n=e.reduce((i,o)=>i?t(i,o.decode):o.decode,void 0);return{encode:r,decode:n}}function Bd(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(r=>{if(r<0||r>=e.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${e.length})`);return e[r]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(r=>{if(typeof r!="string")throw new Error(`alphabet.decode: not string element=${r}`);let n=e.indexOf(r);if(n===-1)throw new Error(`Unknown letter: "${r}". Allowed: ${e}`);return n})}}}function kd(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let r of t)if(typeof r!="string")throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function z3(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function Nm(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0,i=[],o=Array.from(e);for(o.forEach(a=>{if(a<0||a>=t)throw new Error(`Wrong integer: ${a}`)});;){let a=0,u=!0;for(let l=n;l<o.length;l++){let h=o[l],v=t*a+h;if(!Number.isSafeInteger(v)||t*a/t!==a||v-h!==t*a)throw new Error("convertRadix: carry overflow");a=v%r;let b=Math.floor(v/r);if(o[l]=b,!Number.isSafeInteger(b)||b*r+a!==v)throw new Error("convertRadix: carry overflow");if(u)b?u=!1:n=l;else continue}if(i.push(a),u)break}for(let a=0;a<e.length-1&&e[a]===0;a++)i.push(0);return i.reverse()}var Rm=(e,t)=>t?Rm(t,e%t):e,Qc=(e,t)=>e+(t-Rm(e,t));function Pd(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(Qc(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${Qc(t,r)}`);let i=0,o=0,a=2**r-1,u=[];for(let l of e){if(l>=2**t)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(i=i<<t|l,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)u.push((i>>o-r&a)>>>0);i&=2**o-1}if(i=i<<r-o&a,!n&&o>=t)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&o>0&&u.push(i>>>0),u}function G3(e){return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Nm(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Nm(t,e,2**8))}}}function Cm(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Qc(8,e)>32||Qc(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Pd(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Pd(r,e,8,t))}}}function Om(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function Z3(e,t){if(typeof t!="function")throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),i=t(n).slice(0,e),o=r.slice(-e);for(let a=0;a<e;a++)if(i[a]!==o[a])throw new Error("Invalid checksum");return n}}}var Y3=e=>eu(G3(58),Bd(e),kd("")),J3=Y3("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Dm=e=>eu(Z3(4,t=>e(e(t))),J3),Md=eu(Bd("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),kd("")),Um=[996825010,642813549,513874426,1027748829,705979059];function va(e){let t=e>>25,r=(e&33554431)<<5;for(let n=0;n<Um.length;n++)(t>>n&1)===1&&(r^=Um[n]);return r}function Lm(e,t,r=1){let n=e.length,i=1;for(let o=0;o<n;o++){let a=e.charCodeAt(o);if(a<33||a>126)throw new Error(`Invalid prefix (${e})`);i=va(i)^a>>5}i=va(i);for(let o=0;o<n;o++)i=va(i)^e.charCodeAt(o)&31;for(let o of t)i=va(i)^o;for(let o=0;o<6;o++)i=va(i);return i^=r,Md.encode(Pd([i%2**30],30,5,!1))}function Km(e){let t=e==="bech32"?1:734539939,r=Cm(5),n=r.decode,i=r.encode,o=Om(n);function a(v,b,T=90){if(typeof v!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof v}`);if(!Array.isArray(b)||b.length&&typeof b[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof b}`);let P=v.length+7+b.length;if(T!==!1&&P>T)throw new TypeError(`Length ${P} exceeds limit ${T}`);let B=v.toLowerCase(),I=Lm(B,b,t);return`${B}1${Md.encode(b)}${I}`}function u(v,b=90){if(typeof v!="string")throw new Error(`bech32.decode input should be string, not ${typeof v}`);if(v.length<8||b!==!1&&v.length>b)throw new TypeError(`Wrong string length: ${v.length} (${v}). Expected (8..${b})`);let T=v.toLowerCase();if(v!==T&&v!==v.toUpperCase())throw new Error("String must be lowercase or uppercase");v=T;let P=v.lastIndexOf("1");if(P===0||P===-1)throw new Error('Letter "1" must be present between prefix and data only');let B=v.slice(0,P),I=v.slice(P+1);if(I.length<6)throw new Error("Data must be at least 6 characters long");let _=Md.decode(I).slice(0,-6),V=Lm(B,_,t);if(!I.endsWith(V))throw new Error(`Invalid checksum in ${v}: expected "${V}"`);return{prefix:B,words:_}}let l=Om(u);function h(v){let{prefix:b,words:T}=u(v,!1);return{prefix:b,words:T,bytes:n(T)}}return{encode:a,decode:u,decodeToBytes:h,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:o,toWords:i}}var tu=Km("bech32"),_d=Km("bech32m"),Vd={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},ht=eu(Cm(4),Bd("0123456789abcdef"),kd(""),z3(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));S();A();var pt=new Uint8Array,au=new Uint8Array([0]);function ot(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function ru(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var lr=e=>e instanceof Uint8Array,nu=class{constructor(t,r=[],n=[]){this.data=t,this.path=r,this.fieldPath=n,this.pos=0,this.hasPtr=!1,this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Reader(${this.fieldPath.join("/")}): ${t}`)}absBytes(t){if(t>this.data.length)throw new Error("absBytes: Unexpected end of buffer");return this.data.subarray(t)}bytes(t,r=!1){if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(t))throw this.err(`readBytes: wrong length=${t}`);if(this.pos+t>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let n=this.data.subarray(this.pos,this.pos+t);return r||(this.pos+=t),n}byte(t=!1){if(this.bitPos)throw this.err("readByte: bitPos not empty");return this.data[t?this.pos:this.pos++]}get leftBytes(){return this.data.length-this.pos}isEnd(){return this.pos>=this.data.length&&!this.bitPos}length(t){let r;if(ui(t)?r=Number(t.decodeStream(this)):typeof t=="number"?r=t:typeof t=="string"&&(r=su(this.path,t.split("/"))),typeof r=="bigint"&&(r=Number(r)),typeof r!="number")throw this.err(`Wrong length: ${r}`);return r}bits(t){if(t>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let r=0;for(;t;){this.bitPos||(this.bitBuf=this.data[this.pos++],this.bitPos=8);let n=Math.min(t,this.bitPos);this.bitPos-=n,r=r<<n|this.bitBuf>>this.bitPos&2**n-1,this.bitBuf&=2**this.bitPos-1,t-=n}return r>>>0}find(t,r=this.pos){if(!lr(t))throw this.err(`find: needle is not bytes! ${t}`);if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!t.length)throw this.err("find: needle is empty");for(let n=r;(n=this.data.indexOf(t[0],n))!==-1;n++){if(n===-1||this.data.length-n<t.length)return;if(ot(t,this.data.subarray(n,n+t.length)))return n}}finish(){if(!(this.isEnd()||this.hasPtr))throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${ht.encode(this.data.slice(this.pos))}`)}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},iu=class{constructor(t=[],r=[]){this.path=t,this.fieldPath=r,this.buffers=[],this.pos=0,this.ptrs=[],this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Writer(${this.fieldPath.join("/")}): ${t}`)}bytes(t){if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(t),this.pos+=t.length}byte(t){if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([t])),this.pos++}get buffer(){if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let t=ru(...this.buffers);for(let r of this.ptrs){let n=t.length;t=ru(t,r.buffer);let i=r.ptr.encode(n);for(let o=0;o<i.length;o++)t[r.pos+o]=i[o]}return t}length(t,r){if(t===null)return;if(ui(t))return t.encodeStream(this,r);let n;if(typeof t=="number"?n=t:typeof t=="string"&&(n=su(this.path,t.split("/"))),typeof n=="bigint"&&(n=Number(n)),n===void 0||n!==r)throw this.err(`Wrong length: ${n} len=${t} exp=${r}`)}bits(t,r){if(r>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(t>=2**r)throw this.err(`writeBits: value (${t}) >= 2**bits (${r})`);for(;r;){let n=Math.min(r,8-this.bitPos);this.bitBuf=this.bitBuf<<n|t>>r-n,this.bitPos+=n,r-=n,t&=2**r-1,this.bitPos===8&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},ou=e=>Uint8Array.from(e).reverse();function qm(e,t,r,n){if(n){let i=2n**(r-1n);if(t<-i||t>=i)throw e.err("sInt: value out of bounds")}else if(0n>t||t>=2n**r)throw e.err("uInt: value out of bounds")}function Et(e){return{...e,encode:t=>{let r=new iu;return e.encodeStream(r,t),r.buffer},decode:t=>{let r=new nu(t),n=e.decodeStream(r);return r.finish(),n}}}function su(e,t){e=Array.from(e);let r=0;for(;r<t.length&&t[r]==="..";r++)e.pop();let n=e.pop();for(;r<t.length;r++){if(!n||n[t[r]]===void 0)return;n=n[t[r]]}return n}function ui(e){return typeof e.encode=="function"&&typeof e.encodeStream=="function"&&typeof e.decode=="function"&&typeof e.decodeStream=="function"}function Q3(){return{encode:e=>{let t={};for(let[r,n]of e){if(t[r]!==void 0)throw new Error(`coders.dict: same key(${r}) appears twice in struct`);t[r]=n}return t},decode:e=>Object.entries(e)}}var eT={encode:e=>{if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`coders.number: element bigger than MAX_SAFE_INTEGER=${e}`);return Number(e)},decode:e=>BigInt(e)};function tT(e){return{encode:t=>e[t],decode:t=>e[t]}}function rT(e){let t=10n**BigInt(e);return{encode:r=>{let n=(r<0n?-r:r).toString(10),i=n.length-e;i<0&&(n=n.padStart(n.length-i,"0"),i=0);let o=n.length-1;for(;o>=i&&n[o]==="0";o--);let[a,u]=[n.slice(0,i),n.slice(i,o+1)];return a||(a="0"),r<0n&&(a="-"+a),u?`${a}.${u}`:a},decode:r=>{let n=!1;r.startsWith("-")&&(n=!0,r=r.slice(1));let i=r.indexOf(".");i=i===-1?r.length:i;let[o,a]=[r.slice(0,i),r.slice(i+1)],u=BigInt(o)*t,l=Math.min(a.length,e),h=BigInt(a.slice(0,l))*10n**BigInt(e-l),v=u+h;return n?-v:v}}}function nT(e){return{encode:t=>{for(let r of e){let n=r.encode(t);if(n!==void 0)return n}throw new Error(`match/encode: cannot find match in ${t}`)},decode:t=>{for(let r of e){let n=r.decode(t);if(n!==void 0)return n}throw new Error(`match/decode: cannot find match in ${t}`)}}}var Xo={dict:Q3,number:eT,tsEnum:tT,decimal:rT,match:nT};var dr=(e,t=!1,r=!1)=>Et({size:e,encodeStream:(n,i)=>{if(typeof i!="number"&&typeof i!="bigint")throw n.err(`bigint: invalid value: ${i}`);let o=BigInt(i),a=BigInt(e);qm(n,o,8n*a,!!r);let u=2n**(8n*a-1n);r&&o<0&&(o=o|u);let l=[];for(let v=0;v<e;v++)l.push(Number(o&255n)),o>>=8n;let h=new Uint8Array(l).reverse();n.bytes(t?h.reverse():h)},decodeStream:n=>{let i=BigInt(e),o=n.bytes(e);t&&(o=ou(o));let a=ou(o),u=2n**(8n*i-1n),l=0n;for(let h=0;h<a.length;h++)l|=BigInt(a[h])<<8n*BigInt(h);return r&&l&u&&(l=(l^u)-u),qm(n,l,8n*i,!!r),l}}),zN=dr(32,!0),Hm=dr(32,!1),GN=dr(32,!0,!0),ZN=dr(32,!1,!0),YN=dr(16,!0),JN=dr(16,!1),XN=dr(16,!0,!0),QN=dr(16,!1,!0),xa=dr(8,!0),eO=dr(8,!1),jm=dr(8,!0,!0),tO=dr(8,!1,!0),mn=(e,t=!1,r=!1)=>{if(e>6)throw new Error("int supports size up to 6 bytes (48 bits), for other use bigint");return Aa(dr(e,t,r),Xo.number)},Qe=mn(4,!0),Fm=mn(4,!1),Qo=mn(4,!0,!0),rO=mn(4,!1,!0),Nd=mn(2,!0),nO=mn(2,!1),iO=mn(2,!0,!0),oO=mn(2,!1,!0),$n=mn(1,!1),sO=mn(1,!1,!0),aO=Et({size:1,encodeStream:(e,t)=>e.byte(t?1:0),decodeStream:e=>{let t=e.byte();if(t!==0&&t!==1)throw e.err(`bool: invalid value ${t}`);return t===1}}),ct=(e,t=!1)=>Et({size:typeof e=="number"?e:void 0,encodeStream:(r,n)=>{if(!lr(n))throw r.err(`bytes: invalid value ${n}`);lr(e)||r.length(e,n.length),r.bytes(t?ou(n):n),lr(e)&&r.bytes(e)},decodeStream:r=>{let n;if(lr(e)){let i=r.find(e);if(!i)throw r.err("bytes: cannot find terminator");n=r.bytes(i-r.pos),r.bytes(e.length)}else n=r.bytes(e===null?r.leftBytes:r.length(e));return t?ou(n):n}}),Sa=(e,t=!1)=>{let r=ct(e,t);return Et({size:r.size,encodeStream:(n,i)=>r.encodeStream(n,Vd.decode(i)),decodeStream:n=>Vd.encode(r.decodeStream(n))})},cO=Sa(au),Wm=(e,t=!1,r=!1)=>{let n=ct(e,t);return Et({size:n.size,encodeStream:(i,o)=>{if(r&&!o.startsWith("0x"))throw new Error("hex(withZero=true).encode input should start with 0x");let a=ht.decode(r?o.slice(2):o);return n.encodeStream(i,a)},decodeStream:i=>(r?"0x":"")+ht.encode(n.decodeStream(i))})};function Aa(e,t){if(!ui(e))throw new Error(`apply: invalid inner value ${e}`);return Et({size:e.size,encodeStream:(r,n)=>{let i;try{i=t.decode(n)}catch(o){throw r.err(""+o)}return e.encodeStream(r,i)},decodeStream:r=>{let n=e.decodeStream(r);try{return t.encode(n)}catch(i){throw r.err(""+i)}}})}function xr(e,t){if(!ui(e))throw new Error(`validate: invalid inner value ${e}`);return Et({size:e.size,encodeStream:(r,n)=>e.encodeStream(r,t(n)),decodeStream:r=>t(e.decodeStream(r))})}var $m=(e,t=!1)=>Et({size:e.length,encodeStream:(r,n)=>{!!n!==t&&r.bytes(e)},decodeStream:r=>{let n=r.leftBytes>=e.length;return n&&(n=ot(r.bytes(e.length,!0),e),n&&r.bytes(e.length)),n!==t}});function zm(e,t,r){if(!ui(t))throw new Error(`flagged: invalid inner value ${t}`);return Et({encodeStream:(n,i)=>{typeof e=="string"?su(n.path,e.split("/"))?t.encodeStream(n,i):r&&t.encodeStream(n,r):(e.encodeStream(n,!!i),i?t.encodeStream(n,i):r&&t.encodeStream(n,r))},decodeStream:n=>{let i=!1;if(typeof e=="string"?i=su(n.path,e.split("/")):i=e.decodeStream(n),i)return t.decodeStream(n);r&&t.decodeStream(n)}})}function Ea(e,t,r=!0){if(!ui(e))throw new Error(`flagged: invalid inner value ${e}`);return Et({size:e.size,encodeStream:(n,i)=>e.encodeStream(n,t),decodeStream:n=>{let i=e.decodeStream(n);if(r&&typeof i!="object"&&i!==t||lr(t)&&!ot(t,i))throw n.err(`magic: invalid value: ${i} !== ${t}`)}})}function Gm(e){let t=0;for(let r of e){if(!r.size)return;t+=r.size}return t}function Wt(e){if(Array.isArray(e))throw new Error("Packed.Struct: got array instead of object");return Et({size:Gm(Object.values(e)),encodeStream:(t,r)=>{if(typeof r!="object"||r===null)throw t.err(`struct: invalid value ${r}`);t.path.push(r);for(let n in e)t.fieldPathPush(n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r={};t.path.push(r);for(let n in e)t.fieldPathPush(n),r[n]=e[n].decodeStream(t),t.fieldPathPop();return t.path.pop(),r}})}function Zm(e){if(!Array.isArray(e))throw new Error(`Packed.Tuple: got ${typeof e} instead of array`);return Et({size:Gm(e),encodeStream:(t,r)=>{if(!Array.isArray(r))throw t.err(`tuple: invalid value ${r}`);t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r=[];t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),r.push(e[n].decodeStream(t)),t.fieldPathPop();return t.path.pop(),r}})}function Ym(e,t){if(!ui(t))throw new Error(`prefix: invalid inner value ${t}`);if(lr(e))throw new Error("prefix: len cannot be Uint8Array");let r=ct(e);return Et({size:typeof e=="number"?e:void 0,encodeStream:(n,i)=>{let o=new iu(n.path,n.fieldPath);t.encodeStream(o,i),r.encodeStream(n,o.buffer)},decodeStream:n=>{let i=r.decodeStream(n);return t.decodeStream(new nu(i,n.path,n.fieldPath))}})}function zt(e,t){if(!ui(t))throw new Error(`array: invalid inner value ${t}`);return Et({size:typeof e=="number"&&t.size?e*t.size:void 0,encodeStream:(r,n)=>{if(!Array.isArray(n))throw r.err(`array: invalid value ${n}`);lr(e)||r.length(e,n.length),r.path.push(n);for(let i=0;i<n.length;i++){r.fieldPathPush(""+i);let o=n[i],a=r.pos;if(t.encodeStream(r,o),lr(e)){if(e.length>r.pos-a)continue;let u=r.buffer.subarray(a,r.pos);if(ot(u.subarray(0,e.length),e))throw r.err(`array: inner element encoding same as separator. elm=${o} data=${u}`)}r.fieldPathPop()}r.path.pop(),lr(e)&&r.bytes(e)},decodeStream:r=>{let n=[];if(e===null){let i=0;for(r.path.push(n);!r.isEnd()&&(r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop(),!(t.size&&r.leftBytes<t.size)););r.path.pop()}else if(lr(e)){let i=0;for(r.path.push(n);;){if(ot(r.bytes(e.length,!0),e)){r.bytes(e.length);break}r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop()}r.path.pop()}else{r.fieldPathPush("arrayLen");let i=r.length(e);r.fieldPathPop(),r.path.push(n);for(let o=0;o<i;o++)r.fieldPathPush(""+o),n.push(t.decodeStream(r)),r.fieldPathPop();r.path.pop()}return n}})}var uO=Ea(ct(0),pt);var{ProjectivePoint:gu,sign:Jm,getPublicKey:oT}=Yo,lu=Yo.CURVE.n,Ia=(e,t)=>e===void 0?t:e,ft=lr,mu=e=>Vm(Ht(e)),fi=(...e)=>Ht(Ht(li(...e))),li=ru,lb=Dm(Ht);function du(e){if(Array.isArray(e))return e.map(t=>du(t));if(e instanceof Uint8Array)return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(e===null)return e;if(typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,du(r)]));throw new Error(`cloneDeep: unknown type=${e} (${typeof e})`)}var $t;(function(e){e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr"})($t||($t={}));function ns(e,t){let r=e.length;if(t===$t.ecdsa){if(r===32)throw new Error("Expected non-Schnorr key");return gu.fromHex(e),e}else if(t===$t.schnorr){if(r!==32)throw new Error("Expected 32-byte Schnorr key");return fr.utils.lift_x(fr.utils.bytesToNumberBE(e)),e}else throw new Error("Unknown key type")}function ao(e,t){try{return ns(e,t),!0}catch{return!1}}var Xm=e=>e.r<lu/2n;function sT(e,t,r=!1){let n=Jm(e,t);if(r&&!Xm(n)){let i=new Uint8Array(32);for(let o=0;o<Number.MAX_SAFE_INTEGER&&(i.set(Qe.encode(o)),n=Jm(e,t,{extraEntropy:i}),!Xm(n));o++);}return n.toDERRawBytes()}function db(e,t){let r=fr.utils,n=r.taggedHash("TapTweak",e,t),i=r.bytesToNumberBE(n);if(i>=lu)throw new Error("tweak higher than curve order");return i}function aT(e,t=new Uint8Array){let r=fr.utils,n=r.bytesToNumberBE(e),i=gu.fromPrivateKey(n),o=i.hasEvenY()?n:r.mod(-n,lu),a=r.pointToBytes(i),u=db(a,t);return r.numberToBytesBE(r.mod(o+u,lu),32)}function hb(e,t){let r=fr.utils,n=db(e,t),o=r.lift_x(r.bytesToNumberBE(e)).add(gu.fromPrivateKey(n)),a=o.hasEvenY()?0:1;return[r.pointToBytes(o),a]}var Cd=xr(ct(null),e=>ns(e,$t.ecdsa)),hu=xr(ct(32),e=>ns(e,$t.schnorr)),Qm=xr(ct(null),e=>{if(e.length!==64&&e.length!==65)throw new Error("Schnorr signature should be 64 or 65 bytes long");return e});var di={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128};var cT=8,uT=2,so=0,pb=4294967295,cu=new Uint8Array(32),gO=Xo.decimal(cT);function Dd(e,t){if(!ft(e)||!ft(t))throw new Error(`cmp: wrong type a=${typeof e} b=${typeof t}`);let r=Math.min(e.length,t.length);for(let n=0;n<r;n++)if(e[n]!=t[n])return Math.sign(e[n]-t[n]);return Math.sign(e.length-t.length)}var Tt;(function(e){e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID"})(Tt||(Tt={}));var It=Et({encodeStream:(e,t)=>{for(let r of t){if(typeof r=="string"){if(Tt[r]===void 0)throw new Error(`Unknown opcode=${r}`);e.byte(Tt[r]);continue}else if(typeof r=="number"){if(r===0){e.byte(0);continue}else if(1<=r&&r<=16){e.byte(Tt.OP_1-1+r);continue}}if(typeof r=="number"&&(r=yb().encode(BigInt(r))),!ft(r))throw new Error(`Wrong Script OP=${r} (${typeof r})`);let n=r.length;n<Tt.PUSHDATA1?e.byte(n):n<=255?(e.byte(Tt.PUSHDATA1),e.byte(n)):n<=65535?(e.byte(Tt.PUSHDATA2),e.bytes(Nd.encode(n))):(e.byte(Tt.PUSHDATA4),e.bytes(Qe.encode(n))),e.bytes(r)}},decodeStream:e=>{let t=[];for(;!e.isEnd();){let r=e.byte();if(Tt.OP_0<r&&r<=Tt.PUSHDATA4){let n;if(r<Tt.PUSHDATA1)n=r;else if(r===Tt.PUSHDATA1)n=$n.decodeStream(e);else if(r===Tt.PUSHDATA2)n=Nd.decodeStream(e);else if(r===Tt.PUSHDATA4)n=Qe.decodeStream(e);else throw new Error("Should be not possible");t.push(e.bytes(n))}else if(r===0)t.push(0);else if(Tt.OP_1<=r&&r<=Tt.OP_16)t.push(r-(Tt.OP_1-1));else{let n=Tt[r];if(n===void 0)throw new Error(`Unknown opcode=${r.toString(16)}`);t.push(n)}}return t}});function yb(e=6,t=!1){return Et({encodeStream:(r,n)=>{if(n===0n)return;let i=n<0,o=BigInt(n),a=[];for(let u=i?-o:o;u;u>>=8n)a.push(Number(u&0xffn));a[a.length-1]>=128?a.push(i?128:0):i&&(a[a.length-1]|=128),r.bytes(new Uint8Array(a))},decodeStream:r=>{let n=r.leftBytes;if(n>e)throw new Error(`ScriptNum: number (${n}) bigger than limit=${e}`);if(n===0)return 0n;if(t&&!(r.data[n-1]&127)&&(n<=1||!(r.data[n-2]&128)))throw new Error("Non-minimally encoded ScriptNum");let i=0,o=0n;for(let a=0;a<n;++a)i=r.byte(),o|=BigInt(i)<<8n*BigInt(a);return i>=128&&(o&=2n**BigInt(n*8)-1n>>1n,o=-o),o}})}function fT(e,t=4,r=!0){if(typeof e=="number")return e;if(ft(e))try{let n=yb(t,r).decode(e);return n>Number.MAX_SAFE_INTEGER?void 0:Number(n)}catch{return}}var eb={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,18446744073709551615n]},bu=Et({encodeStream:(e,t)=>{if(typeof t=="number"&&(t=BigInt(t)),0n<=t&&t<=252n)return e.byte(Number(t));for(let[r,n,i,o]of Object.values(eb))if(!(i>t||t>o)){e.byte(r);for(let a=0;a<n;a++)e.byte(Number(t>>8n*BigInt(a)&0xffn));return}throw e.err(`VarInt too big: ${t}`)},decodeStream:e=>{let t=e.byte();if(t<=252)return BigInt(t);let[r,n,i]=eb[t],o=0n;for(let a=0;a<n;a++)o|=BigInt(e.byte())<<8n*BigInt(a);if(o<i)throw e.err(`Wrong CompactSize(${8*n})`);return o}}),tn=Aa(bu,Xo.number),tb=e=>zt(bu,e),en=ct(bu),lT=Wt({txid:ct(32,!0),index:Qe,finalScriptSig:en,sequence:Qe}),ts=Wt({amount:xa,script:en}),dT={amount:0xffffffffffffffffn,script:pt},zd=zt(tn,en),hT=Wt({version:Qo,segwitFlag:$m(new Uint8Array([0,1])),inputs:tb(lT),outputs:tb(ts),witnesses:zm("segwitFlag",zt("inputs/length",zd)),lockTime:Qe});function pT(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw new Error("Segwit flag with empty witnesses array");return e}var bn=xr(hT,pT);function Kd(e){let[t,r,n,i,o,a]=e;return{type:t,kc:r,vc:n,reqInc:i,allowInc:o,silentIgnore:a}}var wu=Wt({fingerprint:Fm,path:zt(null,Qe)}),yT=Wt({version:$n,internalKey:ct(32),merklePath:zt(null,ct(32))}),rs=xr(yT,e=>{if(e.merklePath.length>128)throw new Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e}),gb=Wt({hashes:zt(tn,ct(32)),der:wu}),gT=ct(78),mT=Wt({pubKey:hu,leafHash:ct(32)}),bT=zt(null,Wt({depth:$n,version:$n,script:en})),Pt=ct(null),rb=ct(20),Ta=ct(32),Gd={unsignedTx:[0,!1,bn,[0],[0],!1],xpub:[1,gT,wu,[],[0,2],!1],txVersion:[2,!1,Qe,[2],[2],!1],fallbackLocktime:[3,!1,Qe,[],[2],!1],inputCount:[4,!1,tn,[2],[2],!1],outputCount:[5,!1,tn,[2],[2],!1],txModifiable:[6,!1,$n,[],[2],!1],version:[251,!1,Qe,[],[0,2],!1],proprietary:[252,Pt,Pt,[],[0,2],!1]},pu={nonWitnessUtxo:[0,!1,bn,[],[0,2],!1],witnessUtxo:[1,!1,ts,[],[0,2],!1],partialSig:[2,Cd,Pt,[],[0,2],!1],sighashType:[3,!1,Qe,[],[0,2],!1],redeemScript:[4,!1,Pt,[],[0,2],!1],witnessScript:[5,!1,Pt,[],[0,2],!1],bip32Derivation:[6,Cd,wu,[],[0,2],!1],finalScriptSig:[7,!1,Pt,[],[0,2],!1],finalScriptWitness:[8,!1,zd,[],[0,2],!1],porCommitment:[9,!1,Pt,[],[0,2],!1],ripemd160:[10,rb,Pt,[],[0,2],!1],sha256:[11,Ta,Pt,[],[0,2],!1],hash160:[12,rb,Pt,[],[0,2],!1],hash256:[13,Ta,Pt,[],[0,2],!1],txid:[14,!1,Ta,[2],[2],!0],index:[15,!1,Qe,[2],[2],!0],sequence:[16,!1,Qe,[],[2],!0],requiredTimeLocktime:[17,!1,Qe,[],[2],!1],requiredHeightLocktime:[18,!1,Qe,[],[2],!1],tapKeySig:[19,!1,Qm,[],[0,2],!1],tapScriptSig:[20,mT,Qm,[],[0,2],!1],tapLeafScript:[21,rs,Pt,[],[0,2],!1],tapBip32Derivation:[22,Ta,gb,[],[0,2],!1],tapInternalKey:[23,!1,hu,[],[0,2],!1],tapMerkleRoot:[24,!1,Ta,[],[0,2],!1],proprietary:[252,Pt,Pt,[],[0,2],!1]},wT=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],vT=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],yu={redeemScript:[0,!1,Pt,[],[0,2],!1],witnessScript:[1,!1,Pt,[],[0,2],!1],bip32Derivation:[2,Cd,wu,[],[0,2],!1],amount:[3,!1,jm,[2],[2],!0],script:[4,!1,Pt,[2],[2],!0],tapInternalKey:[5,!1,hu,[],[0,2],!1],tapTree:[6,!1,bT,[],[0,2],!1],tapBip32Derivation:[7,hu,gb,[],[0,2],!1],proprietary:[252,Pt,Pt,[],[0,2],!1]},xT=[],nb=zt(au,Wt({key:Ym(tn,Wt({type:tn,key:ct(null)})),value:ct(tn)})),mO=Wt({type:tn,key:ct(null)});function Zd(e){let t={};for(let r in e){let[n,i,o]=e[r];t[n]=[r,i,o]}return Et({encodeStream:(r,n)=>{let i=[];for(let o in e){let a=n[o];if(a===void 0)continue;let[u,l,h]=e[o];if(!l)i.push({key:{type:u,key:pt},value:h.encode(a)});else{let v=a.map(([b,T])=>[l.encode(b),h.encode(T)]);v.sort((b,T)=>Dd(b[0],T[0]));for(let[b,T]of v)i.push({key:{key:b,type:u},value:T})}}if(n.unknown){n.unknown.sort((o,a)=>Dd(o[0].key,a[0].key));for(let[o,a]of n.unknown)i.push({key:o,value:a})}nb.encodeStream(r,i)},decodeStream:r=>{let n=nb.decodeStream(r),i={},o={};for(let a of n){let u="unknown",l=a.key.key,h=a.value;if(t[a.key.type]){let[v,b,T]=t[a.key.type];if(u=v,!b&&l.length)throw new Error(`PSBT: Non-empty key for ${u} (key=${ht.encode(l)} value=${ht.encode(h)}`);if(l=b?b.decode(l):void 0,h=T.decode(h),!b){if(i[u])throw new Error(`PSBT: Same keys: ${u} (key=${l} value=${h})`);i[u]=h,o[u]=!0;continue}}else l={type:a.key.type,key:a.key.key};if(o[u])throw new Error(`PSBT: Key type with empty key and no key=${u} val=${h}`);i[u]||(i[u]=[]),i[u].push([l,h])}return i}})}function ib(e,t){if(!ot(e.hash,Ht(t)))throw new Error("checkScript: wsh wrong witnessScript hash");let r=Mt.decode(t);if(r.type==="tr"||r.type==="tr_ns"||r.type==="tr_ms")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2SH`);if(r.type==="wpkh"||r.type==="sh")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2WSH`)}function qd(e,t,r){if(e){let n=Mt.decode(e);if(n.type==="tr_ns"||n.type==="tr_ms"||n.type==="ms"||n.type=="pk")throw new Error(`checkScript: non-wrapped ${n.type}`);if(n.type==="sh"&&t){if(!ot(n.hash,mu(t)))throw new Error("checkScript: sh wrong redeemScript hash");let i=Mt.decode(t);if(i.type==="tr"||i.type==="tr_ns"||i.type==="tr_ms")throw new Error(`checkScript: P2${i.type} cannot be wrapped in P2SH`);if(i.type==="sh")throw new Error("checkScript: P2SH cannot be wrapped in P2SH")}n.type==="wsh"&&r&&ib(n,r)}if(t){let n=Mt.decode(t);n.type==="wsh"&&r&&ib(n,r)}}var Yd=xr(Zd(pu),e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw new Error("validateInput: wmpty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw new Error("Empty partialSig");if(e.partialSig)for(let[t]of e.partialSig)ns(t,$t.ecdsa);if(e.bip32Derivation)for(let[t]of e.bip32Derivation)ns(t,$t.ecdsa);if(e.requiredTimeLocktime!==void 0&&e.requiredTimeLocktime<5e8)throw new Error(`validateInput: wrong timeLocktime=${e.requiredTimeLocktime}`);if(e.requiredHeightLocktime!==void 0&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw new Error(`validateInput: wrong heighLocktime=${e.requiredHeightLocktime}`);if(e.nonWitnessUtxo&&e.index!==void 0){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw new Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);let r=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!ot(e.witnessUtxo.script,r.script)||e.witnessUtxo.amount!==r.amount))throw new Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(let[t,r]of e.tapLeafScript){if((t.version&254)!==r[r.length-1])throw new Error("validateInput: tapLeafScript version mimatch");if(r[r.length-1]&1)throw new Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&e.index&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw new Error("nonWitnessUtxo: incorect output index");let r=co.fromRaw(bn.encode(e.nonWitnessUtxo)),n=ht.encode(e.txid);if(r.id!==n)throw new Error(`nonWitnessUtxo: wrong txid, exp=${n} got=${r.id}`)}return e}),Jd=xr(Zd(yu),e=>{if(e.bip32Derivation)for(let[t]of e.bip32Derivation)ns(t,$t.ecdsa);return e}),mb=xr(Zd(Gd),e=>{if((e.version||0)===0){if(!e.unsignedTx)throw new Error("PSBTv0: missing unsignedTx");if(e.unsignedTx.segwitFlag||e.unsignedTx.witnesses)throw new Error("PSBTv0: witness in unsingedTx");for(let r of e.unsignedTx.inputs)if(r.finalScriptSig&&r.finalScriptSig.length)throw new Error("PSBTv0: input scriptSig found in unsignedTx")}return e}),ST=Wt({magic:Ea(Sa(new Uint8Array([255])),"psbt"),global:mb,inputs:zt("global/unsignedTx/inputs/length",Yd),outputs:zt(null,Jd)}),AT=Wt({magic:Ea(Sa(new Uint8Array([255])),"psbt"),global:mb,inputs:zt("global/inputCount",Yd),outputs:zt("global/outputCount",Jd)}),bO=Wt({magic:Ea(Sa(new Uint8Array([255])),"psbt"),items:zt(null,Aa(zt(au,Zm([Wm(tn),ct(bu)])),Xo.dict()))});function Od(e,t,r){for(let n in r){if(n==="unknown"||!t[n])continue;let{allowInc:i}=Kd(t[n]);if(!i.includes(e))throw new Error(`PSBTv${e}: field ${n} is not allowed`)}for(let n in t){let{reqInc:i}=Kd(t[n]);if(i.includes(e)&&r[n]===void 0)throw new Error(`PSBTv${e}: missing required field ${n}`)}}function ob(e,t,r){let n={};for(let i in r){let o=i;if(o!=="unknown"){if(!t[o])continue;let{allowInc:a,silentIgnore:u}=Kd(t[o]);if(!a.includes(e)){if(u)continue;throw new Error(`Failed to serialize in PSBTv${e}: ${o} but versions allows inclusion=${a}`)}}n[o]=r[o]}return n}function bb(e){let t=e&&e.global&&e.global.version||0;Od(t,Gd,e.global);for(let a of e.inputs)Od(t,pu,a);for(let a of e.outputs)Od(t,yu,a);let r=t?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<r)throw new Error("Not enough inputs");let n=e.inputs.slice(r);if(n.length>1||n.length&&Object.keys(n[0]).length)throw new Error(`Unexpected inputs left in tx=${n}`);let i=t?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<i)throw new Error("Not outputs inputs");let o=e.outputs.slice(i);if(o.length>1||o.length&&Object.keys(o[0]).length)throw new Error(`Unexpected outputs left in tx=${o}`);return e}function Ud(e,t,r,n){let i={...r,...t};for(let o in e){let a=o,[u,l,h]=e[a],v=n&&!n.includes(o);if(t[o]===void 0&&o in t){if(v)throw new Error(`Cannot remove signed field=${o}`);delete i[o]}else if(l){let b=r&&r[o]?r[o]:[],T=t[a];if(T){if(!Array.isArray(T))throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);T=T.map(I=>{if(I.length!==2)throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);return[typeof I[0]=="string"?l.decode(ht.decode(I[0])):I[0],typeof I[1]=="string"?h.decode(ht.decode(I[1])):I[1]]});let P={},B=(I,_,V)=>{if(P[I]===void 0){P[I]=[_,V];return}let R=ht.encode(h.encode(P[I][1])),N=ht.encode(h.encode(V));if(R!==N)throw new Error(`keyMap(${a}): same key=${I} oldVal=${R} newVal=${N}`)};for(let[I,_]of b){let V=ht.encode(l.encode(I));B(V,I,_)}for(let[I,_]of T){let V=ht.encode(l.encode(I));if(_===void 0){if(v)throw new Error(`Cannot remove signed field=${a}/${I}`);delete P[V]}else B(V,I,_)}i[a]=Object.values(P)}}else if(typeof i[o]=="string")i[o]=h.decode(ht.decode(i[o]));else if(v&&o in t&&r&&r[o]!==void 0&&!ot(h.encode(t[o]),h.encode(r[o])))throw new Error(`Cannot change signed field=${o}`)}for(let o in i)e[o]||delete i[o];return i}var sb=xr(ST,bb),ab=xr(AT,bb),Ld=Wt({txid:ct(32,!0),index:Qe}),ET={encode(e){if(!(e.length!==2||!ft(e[0])||!ao(e[0],$t.ecdsa)||e[1]!=="CHECKSIG"))return{type:"pk",pubkey:e[0]}},decode:e=>e.type==="pk"?[e.pubkey,"CHECKSIG"]:void 0};var TT={encode(e){if(!(e.length!==5||e[0]!=="DUP"||e[1]!=="HASH160"||!ft(e[2]))&&!(e[3]!=="EQUALVERIFY"||e[4]!=="CHECKSIG"))return{type:"pkh",hash:e[2]}},decode:e=>e.type==="pkh"?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0};var IT={encode(e){if(!(e.length!==3||e[0]!=="HASH160"||!ft(e[1])||e[2]!=="EQUAL"))return{type:"sh",hash:e[1]}},decode:e=>e.type==="sh"?["HASH160",e.hash,"EQUAL"]:void 0},wb=(e,t=di)=>{let r=e.script;if(!ft(r))throw new Error(`Wrong script: ${typeof e.script}, expected Uint8Array`);let n=mu(r),i=Mt.encode({type:"sh",hash:n});qd(i,r,e.witnessScript);let o={type:"sh",redeemScript:r,script:Mt.encode({type:"sh",hash:n}),address:vu(t).encode({type:"sh",hash:n})};return e.witnessScript&&(o.witnessScript=e.witnessScript),o},PT={encode(e){if(!(e.length!==2||e[0]!==0||!ft(e[1]))&&e[1].length===32)return{type:"wsh",hash:e[1]}},decode:e=>e.type==="wsh"?[0,e.hash]:void 0};var MT={encode(e){if(!(e.length!==2||e[0]!==0||!ft(e[1]))&&e[1].length===20)return{type:"wpkh",hash:e[1]}},decode:e=>e.type==="wpkh"?[0,e.hash]:void 0},Xd=(e,t=di)=>{if(!ao(e,$t.ecdsa))throw new Error("P2WPKH: invalid publicKey");if(e.length===65)throw new Error("P2WPKH: uncompressed public key");let r=mu(e);return{type:"wpkh",script:Mt.encode({type:"wpkh",hash:r}),address:vu(t).encode({type:"wpkh",hash:r})}},BT={encode(e){let t=e.length-1;if(e[t]!=="CHECKMULTISIG")return;let r=e[0],n=e[t-1];if(typeof r!="number"||typeof n!="number")return;let i=e.slice(1,-2);if(n===i.length){for(let o of i)if(!ft(o))return;return{type:"ms",m:r,pubkeys:i}}},decode:e=>e.type==="ms"?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0};var kT={encode(e){if(!(e.length!==2||e[0]!==1||!ft(e[1])))return{type:"tr",pubkey:e[1]}},decode:e=>e.type==="tr"?[1,e.pubkey]:void 0};function _T(e){let t=Array.from(e);for(;t.length>=2;){t.sort((a,u)=>(u.weight||1)-(a.weight||1));let n=t.pop(),i=t.pop(),o=(i?.weight||1)+(n?.weight||1);t.push({weight:o,childs:[i?.childs||i,n?.childs||n]})}let r=t[0];return r?.childs||r}function VT(e,t,r=!1){let n=Mt.decode(e);if(n.type==="unknown"&&r)return;if(!["tr_ns","tr_ms"].includes(n.type))throw new Error(`P2TR: invalid leaf script=${n.type}`);let i=n;if(!r&&i.pubkeys)for(let o of i.pubkeys){if(ot(o,vb))throw new Error("Unspendable taproot key in leaf script");if(ot(o,t))throw new Error("Using P2TR with leaf script with same key as internal key is not supported")}}function Hd(e,t,r=!1){if(!e)throw new Error("taprootHashTree: empty tree");if(Array.isArray(e)&&e.length===1&&(e=e[0]),!Array.isArray(e)){let{leafVersion:u,script:l}=e;if(e.tapLeafScript||e.tapMerkleRoot&&!ot(e.tapMerkleRoot,pt))throw new Error("P2TR: tapRoot leafScript cannot have tree");let h=typeof l=="string"?ht.decode(l):l;if(!ft(h))throw new Error(`checkScript: wrong script type=${h}`);return VT(h,t,r),{type:"leaf",version:u,script:h,hash:fu(h,u)}}if(e.length!==2&&(e=_T(e)),e.length!==2)throw new Error("hashTree: non binary tree!");let n=Hd(e[0],t,r),i=Hd(e[1],t,r),[o,a]=[n.hash,i.hash];return Dd(a,o)===-1&&([o,a]=[a,o]),{type:"branch",left:n,right:i,hash:fr.utils.taggedHash("TapBranch",o,a)}}function jd(e,t=[]){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return{...e,path:t};if(e.type!=="branch")throw new Error(`taprootAddPath: wrong type=${e}`);return{...e,path:t,left:jd(e.left,[e.right.hash,...t]),right:jd(e.right,[e.left.hash,...t])}}function Fd(e){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return[e];if(e.type!=="branch")throw new Error(`taprootWalkTree: wrong type=${e}`);return[...Fd(e.left),...Fd(e.right)]}var vb=Ht(gu.BASE.toRawBytes(!1));function xb(e,t,r=di,n=!1){if(!e&&!t)throw new Error("p2tr: should have pubKey or scriptTree (or both)");let i=typeof e=="string"?ht.decode(e):e||vb;if(!ao(i,$t.schnorr))throw new Error("p2tr: non-schnorr pubkey");let o=t?jd(Hd(t,i,n)):void 0,a=o?o.hash:void 0,[u,l]=hb(i,a||pt),h;o&&(h=Fd(o).map(T=>({...T,controlBlock:rs.encode({version:(T.version||$d)+l,internalKey:i,merklePath:T.path})})));let v;h&&(v=h.map(T=>[rs.decode(T.controlBlock),li(T.script,new Uint8Array([T.version||$d]))]));let b={type:"tr",script:Mt.encode({type:"tr",pubkey:u}),address:vu(r).encode({type:"tr",pubkey:u}),tweakedPubkey:u,tapInternalKey:i};return h&&(b.leaves=h),v&&(b.tapLeafScript=v),a&&(b.tapMerkleRoot=a),b}var NT={encode(e){let t=e.length-1;if(e[t]!=="CHECKSIG")return;let r=[];for(let n=0;n<t;n++){let i=e[n];if(n&1){if(i!=="CHECKSIGVERIFY"||n===t-1)return;continue}if(!ft(i))return;r.push(i)}return{type:"tr_ns",pubkeys:r}},decode:e=>{if(e.type!=="tr_ns")return;let t=[];for(let r=0;r<e.pubkeys.length-1;r++)t.push(e.pubkeys[r],"CHECKSIGVERIFY");return t.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),t}};var OT={encode(e){let t=e.length-1;if(e[t]!=="NUMEQUAL"||e[1]!=="CHECKSIG")return;let r=[],n=fT(e[t-1]);if(typeof n=="number"){for(let i=0;i<t-1;i++){let o=e[i];if(i&1){if(o!==(i===1?"CHECKSIG":"CHECKSIGADD"))throw new Error("OutScript.encode/tr_ms: wrong element");continue}if(!ft(o))throw new Error("OutScript.encode/tr_ms: wrong key element");r.push(o)}return{type:"tr_ms",pubkeys:r,m:n}}},decode:e=>{if(e.type!=="tr_ms")return;let t=[e.pubkeys[0],"CHECKSIG"];for(let r=1;r<e.pubkeys.length;r++)t.push(e.pubkeys[r],"CHECKSIGADD");return t.push(e.m,"NUMEQUAL"),t}};var UT={encode(e){return{type:"unknown",script:It.encode(e)}},decode:e=>e.type==="unknown"?It.decode(e.script):void 0},LT=[ET,TT,IT,PT,MT,BT,kT,NT,OT,UT],RT=Aa(It,Xo.match(LT)),Mt=xr(RT,e=>{if(e.type==="pk"&&!ao(e.pubkey,$t.ecdsa))throw new Error("OutScript/pk: wrong key");if((e.type==="pkh"||e.type==="sh"||e.type==="wpkh")&&(!ft(e.hash)||e.hash.length!==20))throw new Error(`OutScript/${e.type}: wrong hash`);if(e.type==="wsh"&&(!ft(e.hash)||e.hash.length!==32))throw new Error("OutScript/wsh: wrong hash");if(e.type==="tr"&&(!ft(e.pubkey)||!ao(e.pubkey,$t.schnorr)))throw new Error("OutScript/tr: wrong taproot public key");if((e.type==="ms"||e.type==="tr_ns"||e.type==="tr_ms")&&!Array.isArray(e.pubkeys))throw new Error("OutScript/multisig: wrong pubkeys array");if(e.type==="ms"){let t=e.pubkeys.length;for(let r of e.pubkeys)if(!ao(r,$t.ecdsa))throw new Error("OutScript/multisig: wrong pubkey");if(e.m<=0||t>16||e.m>t)throw new Error("OutScript/multisig: invalid params")}if(e.type==="tr_ns"||e.type==="tr_ms"){for(let t of e.pubkeys)if(!ao(t,$t.schnorr))throw new Error(`OutScript/${e.type}: wrong pubkey`)}if(e.type==="tr_ms"){let t=e.pubkeys.length;if(e.m<=0||t>999||e.m>t)throw new Error("OutScript/tr_ms: invalid params")}return e});function Sb(e,t){if(t.length<2||t.length>40)throw new Error("Witness: invalid length");if(e>16)throw new Error("Witness: invalid version");if(e===0&&!(t.length===20||t.length===32))throw new Error("Witness: invalid length for version")}function Rd(e,t,r=di){Sb(e,t);let n=e===0?tu:_d;return n.encode(r.bech32,[e].concat(n.toWords(t)))}function cb(e,t){return lb.encode(li(Uint8Array.from(t),e))}function vu(e=di){return{encode(t){let{type:r}=t;if(r==="wpkh")return Rd(0,t.hash,e);if(r==="wsh")return Rd(0,t.hash,e);if(r==="tr")return Rd(1,t.pubkey,e);if(r==="pkh")return cb(t.hash,[e.pubKeyHash]);if(r==="sh")return cb(t.hash,[e.scriptHash]);throw new Error(`Unknown address type=${r}`)},decode(t){if(t.length<14||t.length>74)throw new Error("Invalid address length");if(e.bech32&&t.toLowerCase().startsWith(e.bech32)){let n;try{if(n=tu.decode(t),n.words[0]!==0)throw new Error(`bech32: wrong version=${n.words[0]}`)}catch{if(n=_d.decode(t),n.words[0]===0)throw new Error(`bech32m: wrong version=${n.words[0]}`)}if(n.prefix!==e.bech32)throw new Error(`wrong bech32 prefix=${n.prefix}`);let[i,...o]=n.words,a=tu.fromWords(o);if(Sb(i,a),i===0&&a.length===32)return{type:"wsh",hash:a};if(i===0&&a.length===20)return{type:"wpkh",hash:a};if(i===1&&a.length===32)return{type:"tr",pubkey:a};throw new Error("Unknown witness program")}let r=lb.decode(t);if(r.length!==21)throw new Error("Invalid base58 address");if(r[0]===e.pubKeyHash)return{type:"pkh",hash:r.slice(1)};if(r[0]===e.scriptHash)return{type:"sh",hash:r.slice(1)};throw new Error(`Invalid address prefix=${r[0]}`)}}}var ut;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY"})(ut||(ut={}));var Wd;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY"})(Wd||(Wd={}));function CT(e){if(typeof e!="number"||typeof Wd[e]!="string")throw new Error(`Invalid SigHash=${e}`);return e}function ub(e){let t=e&31;return{isAny:!!(e&ut.ANYONECANPAY),isNone:t===ut.NONE,isSingle:t===ut.SINGLE}}function uu(e){if(e.txid===void 0||e.index===void 0)throw new Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:Ia(e.sequence,pb),finalScriptSig:Ia(e.finalScriptSig,pt)}}function fb(e){for(let t in e){let r=t;wT.includes(r)||delete e[r]}}function es(e){if(e.script===void 0||e.amount===void 0)throw new Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}var $d=192,fu=(e,t=$d)=>fr.utils.taggedHash("TapLeaf",new Uint8Array([t]),en.encode(e));function DT(e,t,r,n=pt){return ot(r,t)&&(e=aT(e,n),t=fr.getPublicKey(e)),{privKey:e,pubKey:t}}var KT={}.toString;function qT(e){if(e!==void 0&&KT.call(e)!=="[object Object]")throw new Error(`Wrong object type for transaction options: ${e}`);let t={...e,version:Ia(e.version,uT),lockTime:Ia(e.lockTime,0),PSBTVersion:Ia(e.PSBTVersion,0)};if(typeof t.allowUnknowInput<"u"&&(e.allowUnknownInputs=t.allowUnknowInput),typeof t.allowUnknowOutput<"u"&&(e.allowUnknownOutputs=t.allowUnknowOutput),![-1,0,1,2].includes(t.version))throw new Error(`Unknown version: ${t.version}`);if(typeof t.lockTime!="number")throw new Error("Transaction lock time should be number");if(Qe.encode(t.lockTime),t.PSBTVersion!==0&&t.PSBTVersion!==2)throw new Error(`Unknown PSBT version ${t.PSBTVersion}`);for(let r of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let n=t[r];if(n!==void 0&&typeof n!="boolean")throw new Error(`Transation options wrong type: ${r}=${n} (${typeof n})`)}return Object.freeze(t)}var co=class e{constructor(t={}){this.global={},this.inputs=[],this.outputs=[];let r=this.opts=qT(t);r.lockTime!==so&&(this.global.fallbackLocktime=r.lockTime),this.global.txVersion=r.version}static fromRaw(t,r={}){let n=bn.decode(t),i=new e({...r,version:n.version,lockTime:n.lockTime});for(let o of n.outputs)i.addOutput(o);if(i.outputs=n.outputs,i.inputs=n.inputs,n.witnesses)for(let o=0;o<n.witnesses.length;o++)i.inputs[o].finalScriptWitness=n.witnesses[o];return i}static fromPSBT(t,r={}){let n;try{n=sb.decode(t)}catch(b){try{n=ab.decode(t)}catch{throw b}}let i=n.global.version||0;if(i!==0&&i!==2)throw new Error(`Wrong PSBT version=${i}`);let o=n.global.unsignedTx,a=i===0?o?.version:n.global.txVersion,u=i===0?o?.lockTime:n.global.fallbackLocktime,l=new e({...r,version:a,lockTime:u,PSBTVersion:i}),h=i===0?o?.inputs.length:n.global.inputCount;l.inputs=n.inputs.slice(0,h).map((b,T)=>({finalScriptSig:pt,...n.global.unsignedTx?.inputs[T],...b}));let v=i===0?o?.outputs.length:n.global.outputCount;return l.outputs=n.outputs.slice(0,v).map((b,T)=>({...b,...n.global.unsignedTx?.outputs[T]})),l.global={...n.global,txVersion:a},u!==so&&(l.global.fallbackLocktime=u),l}toPSBT(t=this.opts.PSBTVersion){if(t!==0&&t!==2)throw new Error(`Wrong PSBT version=${t}`);let r=this.inputs.map(o=>ob(t,pu,o));for(let o of r)o.partialSig&&!o.partialSig.length&&delete o.partialSig,o.finalScriptSig&&!o.finalScriptSig.length&&delete o.finalScriptSig,o.finalScriptWitness&&!o.finalScriptWitness.length&&delete o.finalScriptWitness;let n=this.outputs.map(o=>ob(t,yu,o)),i={...this.global};return t===0?(i.unsignedTx=bn.decode(this.unsignedTx),delete i.fallbackLocktime,delete i.txVersion):(i.version=t,i.txVersion=this.version,i.inputCount=this.inputs.length,i.outputCount=this.outputs.length,i.fallbackLocktime&&i.fallbackLocktime===so&&delete i.fallbackLocktime),this.opts.bip174jsCompat&&(r.length||r.push({}),n.length||n.push({})),(t===0?sb:ab).encode({global:i,inputs:r,outputs:n})}get lockTime(){let t=so,r=0,n=so,i=0;for(let o of this.inputs)o.requiredHeightLocktime&&(t=Math.max(t,o.requiredHeightLocktime),r++),o.requiredTimeLocktime&&(n=Math.max(n,o.requiredTimeLocktime),i++);return r&&r>=i?t:n!==so?n:this.global.fallbackLocktime||so}get version(){if(this.global.txVersion===void 0)throw new Error("No global.txVersion");return this.global.txVersion}inputStatus(t){this.checkInputIdx(t);let r=this.inputs[t];return r.finalScriptSig&&r.finalScriptSig.length||r.finalScriptWitness&&r.finalScriptWitness.length?"finalized":r.tapKeySig||r.tapScriptSig&&r.tapScriptSig.length||r.partialSig&&r.partialSig.length?"signed":"unsigned"}inputSighash(t){this.checkInputIdx(t);let r=this.inputType(this.inputs[t]).sighash,n=r===ut.DEFAULT?ut.ALL:r&3;return{sigInputs:r&ut.ANYONECANPAY,sigOutputs:n}}signStatus(){let t=!0,r=!0,n=[],i=[];for(let o=0;o<this.inputs.length;o++){if(this.inputStatus(o)==="unsigned")continue;let{sigInputs:u,sigOutputs:l}=this.inputSighash(o);if(u===ut.ANYONECANPAY?n.push(o):t=!1,l===ut.ALL)r=!1;else if(l===ut.SINGLE)i.push(o);else if(l!==ut.NONE)throw new Error(`Wrong signature hash output type: ${l}`)}return{addInput:t,addOutput:r,inputs:n,outputs:i}}get isFinal(){for(let t=0;t<this.inputs.length;t++)if(this.inputStatus(t)!=="finalized")return!1;return!0}get hasWitnesses(){let t=!1;for(let r of this.inputs)r.finalScriptWitness&&r.finalScriptWitness.length&&(t=!0);return t}get weight(){if(!this.isFinal)throw new Error("Transaction is not finalized");let t=32,r=this.outputs.map(es);this.hasWitnesses&&(t+=2),t+=4*tn.encode(this.inputs.length).length,t+=4*tn.encode(this.outputs.length).length;for(let n of this.inputs)t+=160+4*en.encode(n.finalScriptSig||pt).length;for(let n of r)t+=32+4*en.encode(n.script).length;if(this.hasWitnesses)for(let n of this.inputs)n.finalScriptWitness&&(t+=zd.encode(n.finalScriptWitness).length);return t}get vsize(){return Math.ceil(this.weight/4)}toBytes(t=!1,r=!1){return bn.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(uu).map(n=>({...n,finalScriptSig:t&&n.finalScriptSig||pt})),outputs:this.outputs.map(es),witnesses:this.inputs.map(n=>n.finalScriptWitness||[]),segwitFlag:r&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return ht.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw new Error("Transaction is not finalized");return ht.encode(fi(this.toBytes(!0)))}get id(){if(!this.isFinal)throw new Error("Transaction is not finalized");return ht.encode(fi(this.toBytes(!0)).reverse())}checkInputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.inputs.length)throw new Error(`Wrong input index=${t}`)}getInput(t){return this.checkInputIdx(t),du(this.inputs[t])}get inputsLength(){return this.inputs.length}normalizeInput(t,r,n){let{nonWitnessUtxo:i,txid:o}=t;typeof i=="string"&&(i=ht.decode(i)),ft(i)&&(i=bn.decode(i)),i===void 0&&(i=r?.nonWitnessUtxo),typeof o=="string"&&(o=ht.decode(o)),o===void 0&&(o=r?.txid);let a={...r,...t,nonWitnessUtxo:i,txid:o};a.nonWitnessUtxo===void 0&&delete a.nonWitnessUtxo,a.sequence===void 0&&(a.sequence=pb),a.tapMerkleRoot===null&&delete a.tapMerkleRoot,a=Ud(pu,a,r,n),Yd.encode(a);let u;return a.nonWitnessUtxo&&a.index!==void 0?u=a.nonWitnessUtxo.outputs[a.index]:a.witnessUtxo&&(u=a.witnessUtxo),u&&!this.opts.disableScriptCheck&&qd(u&&u.script,a.redeemScript,a.witnessScript),a}addInput(t,r=!1){if(!r&&!this.signStatus().addInput)throw new Error("Tx has signed inputs, cannot add new one");return this.inputs.push(this.normalizeInput(t)),this.inputs.length-1}updateInput(t,r,n=!1){this.checkInputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addInput||o.inputs.includes(t))&&(i=vT)}this.inputs[t]=this.normalizeInput(r,this.inputs[t],i)}checkOutputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.outputs.length)throw new Error(`Wrong output index=${t}`)}getOutput(t){return this.checkOutputIdx(t),du(this.outputs[t])}get outputsLength(){return this.outputs.length}normalizeOutput(t,r,n){let{amount:i,script:o}=t;if(i===void 0&&(i=r?.amount),typeof i!="bigint")throw new Error("amount must be bigint sats");typeof o=="string"&&(o=ht.decode(o)),o===void 0&&(o=r?.script);let a={...r,...t,amount:i,script:o};if(a.amount===void 0&&delete a.amount,a=Ud(yu,a,r,n),Jd.encode(a),a.script&&!this.opts.allowUnknownOutputs&&Mt.decode(a.script).type==="unknown")throw new Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownScript=true, if you sure");return this.opts.disableScriptCheck||qd(a.script,a.redeemScript,a.witnessScript),a}addOutput(t,r=!1){if(!r&&!this.signStatus().addOutput)throw new Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(t)),this.outputs.length-1}updateOutput(t,r,n=!1){this.checkOutputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addOutput||o.outputs.includes(t))&&(i=xT)}this.outputs[t]=this.normalizeOutput(r,this.outputs[t],i)}addOutputAddress(t,r,n=di){return this.addOutput({script:Mt.encode(vu(n).decode(t)),amount:r})}get fee(){let t=0n;for(let n of this.inputs){let i=this.prevOut(n);if(!i)throw new Error("Empty input amount");t+=i.amount}let r=this.outputs.map(es);for(let n of r)t-=n.amount;return t}preimageLegacy(t,r,n){let{isAny:i,isNone:o,isSingle:a}=ub(n);if(t<0||!Number.isSafeInteger(t))throw new Error(`Invalid input idx=${t}`);if(a&&t>=this.outputs.length||t>=this.inputs.length)return Hm.encode(1n);r=It.encode(It.decode(r).filter(v=>v!=="CODESEPARATOR"));let u=this.inputs.map(uu).map((v,b)=>({...v,finalScriptSig:b===t?r:pt}));i?u=[u[t]]:(o||a)&&(u=u.map((v,b)=>({...v,sequence:b===t?v.sequence:0})));let l=this.outputs.map(es);o?l=[]:a&&(l=l.slice(0,t).fill(dT).concat([l[t]]));let h=bn.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:u,outputs:l});return fi(h,Qo.encode(n))}preimageWitnessV0(t,r,n,i){let{isAny:o,isNone:a,isSingle:u}=ub(n),l=cu,h=cu,v=cu,b=this.inputs.map(uu),T=this.outputs.map(es);o||(l=fi(...b.map(Ld.encode))),!o&&!u&&!a&&(h=fi(...b.map(B=>Qe.encode(B.sequence)))),!u&&!a?v=fi(...T.map(ts.encode)):u&&t<T.length&&(v=fi(ts.encode(T[t])));let P=b[t];return fi(Qo.encode(this.version),l,h,ct(32,!0).encode(P.txid),Qe.encode(P.index),en.encode(r),xa.encode(i),Qe.encode(P.sequence),v,Qe.encode(this.lockTime),Qe.encode(n))}preimageWitnessV1(t,r,n,i,o=-1,a,u=192,l){if(!Array.isArray(i)||this.inputs.length!==i.length)throw new Error(`Invalid amounts array=${i}`);if(!Array.isArray(r)||this.inputs.length!==r.length)throw new Error(`Invalid prevOutScript array=${r}`);let h=[$n.encode(0),$n.encode(n),Qo.encode(this.version),Qe.encode(this.lockTime)],v=n===ut.DEFAULT?ut.ALL:n&3,b=n&ut.ANYONECANPAY,T=this.inputs.map(uu),P=this.outputs.map(es);b!==ut.ANYONECANPAY&&h.push(...[T.map(Ld.encode),i.map(xa.encode),r.map(en.encode),T.map(I=>Qe.encode(I.sequence))].map(I=>Ht(li(...I)))),v===ut.ALL&&h.push(Ht(li(...P.map(ts.encode))));let B=(l?1:0)|(a?2:0);if(h.push(new Uint8Array([B])),b===ut.ANYONECANPAY){let I=T[t];h.push(Ld.encode(I),xa.encode(i[t]),en.encode(r[t]),Qe.encode(I.sequence))}else h.push(Qe.encode(t));return B&1&&h.push(Ht(en.encode(l||pt))),v===ut.SINGLE&&h.push(t<P.length?Ht(ts.encode(P[t])):cu),a&&h.push(fu(a,u),$n.encode(0),Qo.encode(o)),fr.utils.taggedHash("TapSighash",...h)}prevOut(t){if(t.nonWitnessUtxo){if(t.index===void 0)throw new Error("Unknown input index");return t.nonWitnessUtxo.outputs[t.index]}else{if(t.witnessUtxo)return t.witnessUtxo;throw new Error("Cannot find previous output info")}}inputType(t){let r="legacy",n=ut.ALL,i=this.prevOut(t),o=Mt.decode(i.script),a=o.type,u=o,l=[o];if(o.type==="tr")return n=ut.DEFAULT,{txType:"taproot",type:"tr",last:o,lastScript:i.script,defaultSighash:n,sighash:t.sighashType||n};{if((o.type==="wpkh"||o.type==="wsh")&&(r="segwit"),o.type==="sh"){if(!t.redeemScript)throw new Error("inputType: sh without redeemScript");let T=Mt.decode(t.redeemScript);(T.type==="wpkh"||T.type==="wsh")&&(r="segwit"),l.push(T),u=T,a+=`-${T.type}`}if(u.type==="wsh"){if(!t.witnessScript)throw new Error("inputType: wsh without witnessScript");let T=Mt.decode(t.witnessScript);T.type==="wsh"&&(r="segwit"),l.push(T),u=T,a+=`-${T.type}`}let h=l[l.length-1];if(h.type==="sh"||h.type==="wsh")throw new Error("inputType: sh/wsh cannot be terminal type");let v=Mt.encode(h),b={type:a,txType:r,last:h,lastScript:v,defaultSighash:n,sighash:t.sighashType||n};if(r==="legacy"&&!this.opts.allowLegacyWitnessUtxo&&!t.nonWitnessUtxo)throw new Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return b}}signIdx(t,r,n,i){this.checkInputIdx(r);let o=this.inputs[r],a=this.inputType(o);if(!ft(t)){if(!o.bip32Derivation||!o.bip32Derivation.length)throw new Error("bip32Derivation: empty");let v=o.bip32Derivation.filter(T=>T[1].fingerprint==t.fingerprint).map(([T,{path:P}])=>{let B=t;for(let I of P)B=B.deriveChild(I);if(!ot(B.publicKey,T))throw new Error("bip32Derivation: wrong pubKey");if(!B.privateKey)throw new Error("bip32Derivation: no privateKey");return B});if(!v.length)throw new Error(`bip32Derivation: no items with fingerprint=${t.fingerprint}`);let b=!1;for(let T of v)this.signIdx(T.privateKey,r)&&(b=!0);return b}n?n.forEach(CT):n=[a.defaultSighash];let u=a.sighash;if(!n.includes(u))throw new Error(`Input with not allowed sigHash=${u}. Allowed: ${n.join(", ")}`);let{sigOutputs:l}=this.inputSighash(r);if(l===ut.SINGLE&&r>=this.outputs.length)throw new Error(`Input with sighash SINGLE, but there is no output with corresponding index=${r}`);let h=this.prevOut(o);if(a.txType==="taproot"){if(o.tapBip32Derivation)throw new Error("tapBip32Derivation unsupported");let v=this.inputs.map(this.prevOut),b=v.map(_=>_.script),T=v.map(_=>_.amount),P=!1,B=fr.getPublicKey(t),I=o.tapMerkleRoot||pt;if(o.tapInternalKey){let{pubKey:_,privKey:V}=DT(t,B,o.tapInternalKey,I),[R,N]=hb(o.tapInternalKey,I);if(ot(R,_)){let H=this.preimageWitnessV1(r,b,u,T),K=li(fr.sign(H,V,i),u!==ut.DEFAULT?new Uint8Array([u]):pt);this.updateInput(r,{tapKeySig:K},!0),P=!0}}if(o.tapLeafScript){o.tapScriptSig=o.tapScriptSig||[];for(let[_,V]of o.tapLeafScript){let R=V.subarray(0,-1),N=It.decode(R),H=V[V.length-1],K=fu(R,H);if(N.findIndex(G=>ft(G)&&ot(G,B))===-1)continue;let q=this.preimageWitnessV1(r,b,u,T,void 0,R,H),U=li(fr.sign(q,t,i),u!==ut.DEFAULT?new Uint8Array([u]):pt);this.updateInput(r,{tapScriptSig:[[{pubKey:B,leafHash:K},U]]},!0),P=!0}}if(!P)throw new Error("No taproot scripts signed");return!0}else{let v=oT(t),b=!1,T=mu(v);for(let I of It.decode(a.lastScript))ft(I)&&(ot(I,v)||ot(I,T))&&(b=!0);if(!b)throw new Error(`Input script doesn't have pubKey: ${a.lastScript}`);let P;if(a.txType==="legacy")P=this.preimageLegacy(r,a.lastScript,u);else if(a.txType==="segwit"){let I=a.lastScript;a.last.type==="wpkh"&&(I=Mt.encode({type:"pkh",hash:a.last.hash})),P=this.preimageWitnessV0(r,I,u,h.amount)}else throw new Error(`Transaction/sign: unknown tx type: ${a.txType}`);let B=sT(P,t,this.opts.lowR);this.updateInput(r,{partialSig:[[v,li(B,new Uint8Array([u]))]]},!0)}return!0}sign(t,r,n){let i=0;for(let o=0;o<this.inputs.length;o++)try{this.signIdx(t,o,r,n)&&i++}catch{}if(!i)throw new Error("No inputs signed");return i}finalizeIdx(t){if(this.checkInputIdx(t),this.fee<0n)throw new Error("Outputs spends more than inputs amount");let r=this.inputs[t],n=this.inputType(r);if(n.txType==="taproot"){if(r.tapKeySig)r.finalScriptWitness=[r.tapKeySig];else if(r.tapLeafScript&&r.tapScriptSig){let l=r.tapLeafScript.sort((h,v)=>rs.encode(h[0]).length-rs.encode(v[0]).length);for(let[h,v]of l){let b=v.slice(0,-1),T=v[v.length-1],P=Mt.decode(b),B=fu(b,T),I=r.tapScriptSig.filter(V=>ot(V[0].leafHash,B)),_=[];if(P.type==="tr_ms"){let V=P.m,R=P.pubkeys,N=0;for(let H of R){let K=I.findIndex(C=>ot(C[0].pubKey,H));if(N===V||K===-1){_.push(pt);continue}_.push(I[K][1]),N++}if(N!==V)continue}else if(P.type==="tr_ns"){for(let V of P.pubkeys){let R=I.findIndex(N=>ot(N[0].pubKey,V));R!==-1&&_.push(I[R][1])}if(_.length!==P.pubkeys.length)continue}else if(P.type==="unknown"&&this.opts.allowUnknownInputs){let V=It.decode(b);if(_=I.map(([{pubKey:R},N])=>{let H=V.findIndex(K=>ft(K)&&ot(K,R));if(H===-1)throw new Error("finalize/taproot: cannot find position of pubkey in script");return{signature:N,pos:H}}).sort((R,N)=>R.pos-N.pos).map(R=>R.signature),!_.length)continue}else throw new Error("Finalize: Unknown tapLeafScript");r.finalScriptWitness=_.reverse().concat([b,rs.encode(h)]);break}if(!r.finalScriptWitness)throw new Error("finalize/taproot: empty witness")}else throw new Error("finalize/taproot: unknown input");r.finalScriptSig=pt,fb(r);return}if(!r.partialSig||!r.partialSig.length)throw new Error("Not enough partial sign");let i=pt,o=[];if(n.last.type==="ms"){let l=n.last.m,h=n.last.pubkeys,v=[];for(let b of h){let T=r.partialSig.find(P=>ot(b,P[0]));T&&v.push(T[1])}if(v=v.slice(0,l),v.length!==l)throw new Error(`Multisig: wrong signatures count, m=${l} n=${h.length} signatures=${v.length}`);i=It.encode([0,...v])}else if(n.last.type==="pk")i=It.encode([r.partialSig[0][1]]);else if(n.last.type==="pkh")i=It.encode([r.partialSig[0][1],r.partialSig[0][0]]);else if(n.last.type==="wpkh")i=pt,o=[r.partialSig[0][1],r.partialSig[0][0]];else if(n.last.type==="unknown"&&!this.opts.allowUnknownInputs)throw new Error("Unknown inputs not allowed");let a,u;if(n.type.includes("wsh-")&&(i.length&&n.lastScript.length&&(o=It.decode(i).map(l=>{if(l===0)return pt;if(ft(l))return l;throw new Error(`Wrong witness op=${l}`)})),o=o.concat(n.lastScript)),n.txType==="segwit"&&(u=o),n.type.startsWith("sh-wsh-")?a=It.encode([It.encode([0,Ht(n.lastScript)])]):n.type.startsWith("sh-")?a=It.encode([...It.decode(i),n.lastScript]):n.type.startsWith("wsh-")||n.txType!=="segwit"&&(a=i),!a&&!u)throw new Error("Unknown error finalizing input");a&&(r.finalScriptSig=a),u&&(r.finalScriptWitness=u),fb(r)}finalize(){for(let t=0;t<this.inputs.length;t++)this.finalizeIdx(t)}extract(){if(!this.isFinal)throw new Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw new Error("Transaction has no outputs");if(this.fee<0n)throw new Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(t){for(let i of["PSBTVersion","version","lockTime"])if(this.opts[i]!==t.opts[i])throw new Error(`Transaction/combine: different ${i} this=${this.opts[i]} other=${t.opts[i]}`);for(let i of["inputs","outputs"])if(this[i].length!==t[i].length)throw new Error(`Transaction/combine: different ${i} length this=${this[i].length} other=${t[i].length}`);let r=this.global.unsignedTx?bn.encode(this.global.unsignedTx):pt,n=t.global.unsignedTx?bn.encode(t.global.unsignedTx):pt;if(!ot(r,n))throw new Error("Transaction/combine: different unsigned tx");this.global=Ud(Gd,this.global,t.global);for(let i=0;i<this.inputs.length;i++)this.updateInput(i,t.inputs[i],!0);for(let i=0;i<this.outputs.length;i++)this.updateOutput(i,t.outputs[i],!0);return this}clone(){return e.fromPSBT(this.toPSBT(2),this.opts)}};var Ab=Ze(Fy()),eh=Ze(fA());S();A();S();A();var jT=$.array($.object({address:$.string(),signingIndexes:$.array($.number()),sigHash:$.number().optional(),isScriptSpend:$.boolean().optional()})),FT=$.object({chainType:ia,signingType:$.literal("transaction"),message:$.string().min(1),inputsToSign:jT.optional(),finalize:$.boolean()}),WT=$.object({chainType:ia,signingType:$.literal("message"),message:$.instanceof(Uint8Array)}),$T=FT.or(WT),zT=$.object({chainType:$.literal("sui"),signingType:$.literal("transaction"),transaction:$.instanceof(Uint8Array)}),GT=$.object({chainType:$.literal("sui"),signingType:$.literal("personalMessage"),message:$.instanceof(Uint8Array)}),ZT=zT.or(GT),YT=$.object({chainType:$.literal("solana"),signingType:$.literal("transaction"),message:$.union([$.string().min(1),$.instanceof(Uint8Array)])}),JT=$.object({chainType:$.literal("solana"),signingType:$.literal("message"),message:$.string().min(1)}),XT=YT.or(JT),QT=$.object({chainType:$.literal("eip155"),signingType:$.literal("transaction"),message:$.string().min(1)}),e8=$.object({chainType:$.literal("eip155"),signingType:$.literal("message"),message:$.string().min(1)}),t8=$.object({chainType:$.literal("eip155"),signingType:$.literal("typedData"),version:$.literal(1),data:wy}),r8=$.object({chainType:$.literal("eip155"),signingType:$.literal("typedData"),version:$.literal(3),data:vy}),n8=$.object({chainType:$.literal("eip155"),signingType:$.literal("typedData"),version:$.literal(4),data:xy}),i8=QT.or(e8).or(t8).or(r8).or(n8),o8=$.object({isJWT:$.literal(!0),data:tg}),s8=$.object({status:$.literal("success"),signature:$.string()}),a8=$.object({status:$.literal("success"),signature:$.string()}),c8=$.object({status:$.literal("success"),signature:$.string(),message:$.instanceof(Uint8Array).optional()}),u8=$.object({status:$.literal("success"),signature:$.string()}),f8=$.object({status:$.literal("success"),signature:$.string(),signedJWT:eg.optional()}),Qd=XT.or(i8).or($T).or(ZT).or(o8),wn=(I=>(I.InvalidInput="invalidInput",I.InvalidAccountId="invalidAccountId",I.InvalidAddressType="invalidAddressType",I.InvalidMessageEncoding="invalidMessageEncoding",I.InvalidDerivationPath="invalidDerivationPath",I.LedgerAppNotOpen="ledgerAppNotOpen",I.LedgerNotConnected="ledgerNotConnected",I.LedgerNeedPermission="ledgerNeedPermission",I.LedgerRejectAction="ledgerRejectAction",I.LedgerUnknownSignError="ledgerUnknownSignError",I.UnsupportedOperation="unsupportedOperation",I.InternalError="internalError",I.ExpiredTokenError="expiredToken",I.BeforeIATError="beforeTimeOfIssuance",I.InvalidClaimError="invalidClaim",I))(wn||{}),l8=$.object({status:$.literal("error"),type:$.nativeEnum(wn),message:$.string()}),d8=$.union([f8,c8,s8,a8,u8,l8]);var h8={invalidInput:{message:"Invalid input"},invalidAccountId:{message:"Invalid account identifier."},invalidAddressType:{message:"Invalid chain type."},invalidMessageEncoding:{message:"Invalid message encoding."},invalidDerivationPath:{message:"Invalid derivation path."},ledgerAppNotOpen:{message:"Ledger App not open."},ledgerNotConnected:{message:"Ledger not connected."},ledgerNeedPermission:{message:"Need permission to connect to Ledger."},ledgerRejectAction:{message:"Ledger user rejected action."},ledgerUnknownSignError:{message:"Ledger unknown sign error."},unsupportedOperation:{message:"Unsupported operation."},internalError:{message:"Internal error."},expiredToken:{message:"Token is expired"},beforeTimeOfIssuance:{message:"Received token before issuance time"},invalidClaim:{message:"Claim is invalid"}},nt=(e,t)=>({status:"error",type:e,message:t??h8[e].message});var th=e=>e.length===32?e:e.slice(1,33);function p8(e){return Qt.Buffer.concat([(0,eh.encode)(e.byteLength),e])}function y8(e){let{sha256:t}=Ab.crypto,n=t(Qt.Buffer.from("BIP0322-signed-message"));return t(Qt.Buffer.concat([n,n,Qt.Buffer.from(e)])).toString("hex")}var g8=(e,t)=>{switch(e){case"bip122_p2tr":return Vy.getPublicKey(t);case"bip122_p2sh":return Al(t,!0);case"bip122_p2wpkh":return Al(t,!0);default:throw new Error("Unsupported Address Type")}},m8=(e,t)=>{let r=di;switch(e){case"bip122_p2tr":return xb(t,void 0,r);case"bip122_p2wpkh":return Xd(t,r);case"bip122_p2sh":{let n=Xd(t,r);return wb(n,r)}default:throw new Error("Unsupported Address Type")}};function b8(e,t,r,n){let i=co.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(o=>{let a=sa("bip122:000000000019d6689c085ae165831e93",o.address),u=e[a];if(!u)throw new Error("missing private key for ("+a+")");let{publicKey:l,privateKey:h}=u;o.signingIndexes.forEach(v=>{let b=i.getInput(v),T=b.witnessUtxo?.script&&Mt.decode(b.witnessUtxo.script);if(!o.isScriptSpend&&!b.tapInternalKey&&T?.type==="tr"&&i.updateInput(v,{tapInternalKey:th(Qt.Buffer.from(l))}),o.sigHash)try{i.signIdx(h,v,[o.sigHash],ma(32))}catch{i.signIdx(h,v,void 0,ma(32))}else i.signIdx(h,v,void 0,ma(32));if(n)try{i.finalizeIdx(v)}catch{}})})}catch(o){throw console.error(o),new Error(`Error signing PSBT ${o.toString()}`)}return Promise.resolve(i.toPSBT(0))}var Eb=()=>({type:"keyPair",sign:async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,n=Qt.Buffer.from(t.message).toString("utf8"),i=e[t.chainType]?.privateKey;if(!i)throw new Error("missing private key for ("+t.chainType+")");let o=Qt.Buffer.from(i).toString("hex"),a=g8(r,o),u=m8(r,a),l=Qt.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),h=0,v=4294967295,b=0,T=It.encode(["OP_0",Qt.Buffer.from(y8(n),"hex")]),P=new co({allowUnknownOutputs:!0,version:h});P.addOutput({amount:BigInt(0),script:u.script}),P.addInput({txid:l,index:v,sequence:b,finalScriptSig:T});let B=new co({allowUnknownOutputs:!0,version:h});B.addInput({txid:P.id,index:0,sequence:b,tapInternalKey:r==="bip122_p2tr"?a:void 0,witnessUtxo:{script:u.script,amount:BigInt(0)},redeemScript:u.redeemScript}),B.addOutput({script:It.encode(["RETURN"]),amount:BigInt(0)}),B.sign(Qt.Buffer.from(o,"hex"),void 0,ma(32)),B.finalize();let I=null,_=B.getInput(0);if(_.finalScriptWitness?.length){let V=(0,eh.encode)(_.finalScriptWitness?.length);I=Qt.Buffer.concat([V,..._.finalScriptWitness.map(R=>p8(R))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:I.toString("hex"),message:B.toBytes()}}case"transaction":{let r=await b8(e,t.inputsToSign??[],Qt.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:Qt.Buffer.from(r).toString("hex")}}}}catch{return nt("internalError")}}});S();A();var Rs=Ze(zi()),K1=Ze(rA());var Pn=Ze(D1()),q1=Ze(Do());var H1=()=>({type:"keyPair",sign:(e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=Rs.Buffer.from(e.privateKey.slice()),n=Pn.SignTypedDataVersion.V1,{data:i}=t,o=(0,Pn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 3:{let r=Rs.Buffer.from(e.privateKey.slice()),n=Pn.SignTypedDataVersion.V3,i=t.data,o=(0,Pn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 4:{let r=Rs.Buffer.from(e.privateKey.slice()),n=Pn.SignTypedDataVersion.V4,i=t.data,o=(0,Pn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}}break}case"message":{let r=t.message,n=(0,Pn.personalSign)({privateKey:Rs.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:n})}case"transaction":{let r=Rs.Buffer.from(t.message.replace("0x",""),"hex"),n=new Dy(e.privateKey),i=`0x${(0,q1.keccak256)(r)}`,o=(0,K1.joinSignature)(n.signDigest(i));return Promise.resolve({status:"success",signature:o})}}}catch(r){return console.error(r),Promise.resolve(nt("invalidMessageEncoding"))}}});S();A();var No=Ze(zi());S();A();S();A();S();A();S();A();function j1(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function w4(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Sp(e,...t){if(!w4(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function F1(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");j1(e.outputLen),j1(e.blockLen)}function Cs(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function W1(e,t){Sp(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}S();A();S();A();var bf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function $1(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var wf=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),fn=(e,t)=>e<<32-t|e>>>t,v4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!v4)throw new Error("Non little-endian hardware is not supported");function x4(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ec(e){if(typeof e=="string"&&(e=x4(e)),!$1(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function z1(...e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];if(!$1(i))throw new Error("Uint8Array expected");t+=i.length}let r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Ds=class{clone(){return this._cloneInto()}},uD={}.toString;function G1(e){let t=n=>e().update(ec(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Z1(e=32){if(bf&&typeof bf.getRandomValues=="function")return bf.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}var vf=class extends Ds{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,F1(t);let n=ec(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return Cs(this),this.iHash.update(t),this}digestInto(t){Cs(this),Sp(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:a,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=a,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Ap=(e,t,r)=>new vf(e,t).update(r).digest();Ap.create=(e,t)=>new vf(e,t);S();A();S();A();var Pp={};hy(Pp,{bitGet:()=>M4,bitLen:()=>P4,bitMask:()=>tc,bitSet:()=>B4,bytesToHex:()=>Bo,bytesToNumberBE:()=>Gn,bytesToNumberLE:()=>Sf,concatBytes:()=>Ks,createHmacDrbg:()=>Ip,ensureBytes:()=>yr,equalBytes:()=>T4,hexToBytes:()=>ko,hexToNumber:()=>Tp,isBytes:()=>ln,numberToBytesBE:()=>xi,numberToBytesLE:()=>Af,numberToHexUnpadded:()=>Q1,numberToVarBytesBE:()=>E4,utf8ToBytes:()=>I4,validateObject:()=>Si});S();A();var X1=BigInt(0),xf=BigInt(1),S4=BigInt(2);function ln(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var A4=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Bo(e){if(!ln(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=A4[e[r]];return t}function Q1(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Tp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var zn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Y1(e){if(e>=zn._0&&e<=zn._9)return e-zn._0;if(e>=zn._A&&e<=zn._F)return e-(zn._A-10);if(e>=zn._a&&e<=zn._f)return e-(zn._a-10)}function ko(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let a=Y1(e.charCodeAt(o)),u=Y1(e.charCodeAt(o+1));if(a===void 0||u===void 0){let l=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}n[i]=a*16+u}return n}function Gn(e){return Tp(Bo(e))}function Sf(e){if(!ln(e))throw new Error("Uint8Array expected");return Tp(Bo(Uint8Array.from(e).reverse()))}function xi(e,t){return ko(e.toString(16).padStart(t*2,"0"))}function Af(e,t){return xi(e,t).reverse()}function E4(e){return ko(Q1(e))}function yr(e,t,r){let n;if(typeof t=="string")try{n=ko(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(ln(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Ks(...e){let t=0;for(let i=0;i<e.length;i++){let o=e[i];if(!ln(o))throw new Error("Uint8Array expected");t+=o.length}let r=new Uint8Array(t),n=0;for(let i=0;i<e.length;i++){let o=e[i];r.set(o,n),n+=o.length}return r}function T4(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function I4(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function P4(e){let t;for(t=0;e>X1;e>>=xf,t+=1);return t}function M4(e,t){return e>>BigInt(t)&xf}var B4=(e,t,r)=>e|(r?xf:X1)<<BigInt(t),tc=e=>(S4<<BigInt(e-1))-xf,Ep=e=>new Uint8Array(e),J1=e=>Uint8Array.from(e);function Ip(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Ep(e),i=Ep(e),o=0,a=()=>{n.fill(1),i.fill(0),o=0},u=(...b)=>r(i,n,...b),l=(b=Ep())=>{i=u(J1([0]),b),n=u(),b.length!==0&&(i=u(J1([1]),b),n=u())},h=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let b=0,T=[];for(;b<t;){n=u();let P=n.slice();T.push(P),b+=n.length}return Ks(...T)};return(b,T)=>{a(),l(b);let P;for(;!(P=T(h()));)l();return a(),P}}var k4={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||ln(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Si(e,t,r={}){let n=(i,o,a)=>{let u=k4[o];if(typeof u!="function")throw new Error(`Invalid validator "${o}", expected function`);let l=e[i];if(!(a&&l===void 0)&&!u(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var Rt=BigInt(0),bt=BigInt(1),_o=BigInt(2),_4=BigInt(3),Mp=BigInt(4),eS=BigInt(5),tS=BigInt(8),V4=BigInt(9),N4=BigInt(16);function gr(e,t){let r=e%t;return r>=Rt?r:t+r}function O4(e,t,r){if(r<=Rt||t<Rt)throw new Error("Expected power/modulo > 0");if(r===bt)return Rt;let n=bt;for(;t>Rt;)t&bt&&(n=n*e%r),e=e*e%r,t>>=bt;return n}function Ef(e,t){if(e===Rt||t<=Rt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=gr(e,t),n=t,i=Rt,o=bt,a=bt,u=Rt;for(;r!==Rt;){let h=n/r,v=n%r,b=i-a*h,T=o-u*h;n=r,r=v,i=a,o=u,a=b,u=T}if(n!==bt)throw new Error("invert: does not exist");return gr(i,t)}function U4(e){let t=(e-bt)/_o,r,n,i;for(r=e-bt,n=0;r%_o===Rt;r/=_o,n++);for(i=_o;i<e&&O4(i,t,e)!==e-bt;i++);if(n===1){let a=(e+bt)/Mp;return function(l,h){let v=l.pow(h,a);if(!l.eql(l.sqr(v),h))throw new Error("Cannot find square root");return v}}let o=(r+bt)/_o;return function(u,l){if(u.pow(l,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let h=n,v=u.pow(u.mul(u.ONE,i),r),b=u.pow(l,o),T=u.pow(l,r);for(;!u.eql(T,u.ONE);){if(u.eql(T,u.ZERO))return u.ZERO;let P=1;for(let I=u.sqr(T);P<h&&!u.eql(I,u.ONE);P++)I=u.sqr(I);let B=u.pow(v,bt<<BigInt(h-P-1));v=u.sqr(B),b=u.mul(b,B),T=u.mul(T,v),h=P}return b}}function L4(e){if(e%Mp===_4){let t=(e+bt)/Mp;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%tS===eS){let t=(e-eS)/tS;return function(n,i){let o=n.mul(i,_o),a=n.pow(o,t),u=n.mul(i,a),l=n.mul(n.mul(u,_o),a),h=n.mul(u,n.sub(l,n.ONE));if(!n.eql(n.sqr(h),i))throw new Error("Cannot find square root");return h}}return e%N4,U4(e)}var R4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Bp(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=R4.reduce((n,i)=>(n[i]="function",n),t);return Si(e,r)}function C4(e,t,r){if(r<Rt)throw new Error("Expected power > 0");if(r===Rt)return e.ONE;if(r===bt)return t;let n=e.ONE,i=t;for(;r>Rt;)r&bt&&(n=e.mul(n,i)),i=e.sqr(i),r>>=bt;return n}function D4(e,t){let r=new Array(t.length),n=t.reduce((o,a,u)=>e.is0(a)?o:(r[u]=o,e.mul(o,a)),e.ONE),i=e.inv(n);return t.reduceRight((o,a,u)=>e.is0(a)?o:(r[u]=e.mul(o,r[u]),e.mul(o,a)),i),r}function kp(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function rS(e,t,r=!1,n={}){if(e<=Rt)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=kp(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let a=L4(e),u=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:tc(i),ZERO:Rt,ONE:bt,create:l=>gr(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Rt<=l&&l<e},is0:l=>l===Rt,isOdd:l=>(l&bt)===bt,neg:l=>gr(-l,e),eql:(l,h)=>l===h,sqr:l=>gr(l*l,e),add:(l,h)=>gr(l+h,e),sub:(l,h)=>gr(l-h,e),mul:(l,h)=>gr(l*h,e),pow:(l,h)=>C4(u,l,h),div:(l,h)=>gr(l*Ef(h,e),e),sqrN:l=>l*l,addN:(l,h)=>l+h,subN:(l,h)=>l-h,mulN:(l,h)=>l*h,inv:l=>Ef(l,e),sqrt:n.sqrt||(l=>a(u,l)),invertBatch:l=>D4(u,l),cmov:(l,h,v)=>v?h:l,toBytes:l=>r?Af(l,o):xi(l,o),fromBytes:l=>{if(l.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${l.length}`);return r?Sf(l):Gn(l)}});return Object.freeze(u)}function nS(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function _p(e){let t=nS(e);return t+Math.ceil(t/2)}function Tf(e,t,r=!1){let n=e.length,i=nS(t),o=_p(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let a=r?Gn(e):Sf(e),u=gr(a,t-bt)+bt;return r?Af(u,i):xi(u,i)}S();A();var K4=BigInt(0),Vp=BigInt(1);function oS(e,t){let r=(i,o)=>{let a=o.negate();return i?a:o},n=i=>{let o=Math.ceil(t/i)+1,a=2**(i-1);return{windows:o,windowSize:a}};return{constTimeNegate:r,unsafeLadder(i,o){let a=e.ZERO,u=i;for(;o>K4;)o&Vp&&(a=a.add(u)),u=u.double(),o>>=Vp;return a},precomputeWindow(i,o){let{windows:a,windowSize:u}=n(o),l=[],h=i,v=h;for(let b=0;b<a;b++){v=h,l.push(v);for(let T=1;T<u;T++)v=v.add(h),l.push(v);h=v.double()}return l},wNAF(i,o,a){let{windows:u,windowSize:l}=n(i),h=e.ZERO,v=e.BASE,b=BigInt(2**i-1),T=2**i,P=BigInt(i);for(let B=0;B<u;B++){let I=B*l,_=Number(a&b);a>>=P,_>l&&(_-=T,a+=Vp);let V=I,R=I+Math.abs(_)-1,N=B%2!==0,H=_<0;_===0?v=v.add(r(N,o[V])):h=h.add(r(H,o[R]))}return{p:h,f:v}},wNAFCached(i,o,a,u){let l=i._WINDOW_SIZE||1,h=o.get(i);return h||(h=this.precomputeWindow(i,l),l!==1&&o.set(i,u(h))),this.wNAF(l,h,a)}}}function Np(e){return Bp(e.Fp),Si(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...kp(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function q4(e){let t=Np(e);Si(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:H4,hexToBytes:j4}=Pp,Vo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Vo;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:H4(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=Vo,r=typeof e=="string"?j4(e):e;if(!ln(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=Vo._parseInt(r.subarray(2)),{d:a,l:u}=Vo._parseInt(o);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){let t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,r=h=>{let v=h.toString(16);return v.length&1?`0${v}`:v},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,a=i.length/2,u=r(o),l=r(a);return`30${r(a+o+4)}02${l}${i}02${u}${n}`}},Zn=BigInt(0),Mr=BigInt(1),_D=BigInt(2),sS=BigInt(3),VD=BigInt(4);function F4(e){let t=q4(e),{Fp:r}=t,n=t.toBytes||((B,I,_)=>{let V=I.toAffine();return Ks(Uint8Array.from([4]),r.toBytes(V.x),r.toBytes(V.y))}),i=t.fromBytes||(B=>{let I=B.subarray(1),_=r.fromBytes(I.subarray(0,r.BYTES)),V=r.fromBytes(I.subarray(r.BYTES,2*r.BYTES));return{x:_,y:V}});function o(B){let{a:I,b:_}=t,V=r.sqr(B),R=r.mul(V,B);return r.add(r.add(R,r.mul(B,I)),_)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(B){return typeof B=="bigint"&&Zn<B&&B<t.n}function u(B){if(!a(B))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(B){let{allowedPrivateKeyLengths:I,nByteLength:_,wrapPrivateKey:V,n:R}=t;if(I&&typeof B!="bigint"){if(ln(B)&&(B=Bo(B)),typeof B!="string"||!I.includes(B.length))throw new Error("Invalid key");B=B.padStart(_*2,"0")}let N;try{N=typeof B=="bigint"?B:Gn(yr("private key",B,_))}catch{throw new Error(`private key must be ${_} bytes, hex or bigint, not ${typeof B}`)}return V&&(N=gr(N,R)),u(N),N}let h=new Map;function v(B){if(!(B instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(I,_,V){if(this.px=I,this.py=_,this.pz=V,I==null||!r.isValid(I))throw new Error("x required");if(_==null||!r.isValid(_))throw new Error("y required");if(V==null||!r.isValid(V))throw new Error("z required")}static fromAffine(I){let{x:_,y:V}=I||{};if(!I||!r.isValid(_)||!r.isValid(V))throw new Error("invalid affine point");if(I instanceof b)throw new Error("projective point not allowed");let R=N=>r.eql(N,r.ZERO);return R(_)&&R(V)?b.ZERO:new b(_,V,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){let _=r.invertBatch(I.map(V=>V.pz));return I.map((V,R)=>V.toAffine(_[R])).map(b.fromAffine)}static fromHex(I){let _=b.fromAffine(i(yr("pointHex",I)));return _.assertValidity(),_}static fromPrivateKey(I){return b.BASE.multiply(l(I))}_setWindowSize(I){this._WINDOW_SIZE=I,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:I,y:_}=this.toAffine();if(!r.isValid(I)||!r.isValid(_))throw new Error("bad point: x or y not FE");let V=r.sqr(_),R=o(I);if(!r.eql(V,R))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:I}=this.toAffine();if(r.isOdd)return!r.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){v(I);let{px:_,py:V,pz:R}=this,{px:N,py:H,pz:K}=I,C=r.eql(r.mul(_,K),r.mul(N,R)),q=r.eql(r.mul(V,K),r.mul(H,R));return C&&q}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){let{a:I,b:_}=t,V=r.mul(_,sS),{px:R,py:N,pz:H}=this,K=r.ZERO,C=r.ZERO,q=r.ZERO,U=r.mul(R,R),G=r.mul(N,N),x=r.mul(H,H),s=r.mul(R,N);return s=r.add(s,s),q=r.mul(R,H),q=r.add(q,q),K=r.mul(I,q),C=r.mul(V,x),C=r.add(K,C),K=r.sub(G,C),C=r.add(G,C),C=r.mul(K,C),K=r.mul(s,K),q=r.mul(V,q),x=r.mul(I,x),s=r.sub(U,x),s=r.mul(I,s),s=r.add(s,q),q=r.add(U,U),U=r.add(q,U),U=r.add(U,x),U=r.mul(U,s),C=r.add(C,U),x=r.mul(N,H),x=r.add(x,x),U=r.mul(x,s),K=r.sub(K,U),q=r.mul(x,G),q=r.add(q,q),q=r.add(q,q),new b(K,C,q)}add(I){v(I);let{px:_,py:V,pz:R}=this,{px:N,py:H,pz:K}=I,C=r.ZERO,q=r.ZERO,U=r.ZERO,G=t.a,x=r.mul(t.b,sS),s=r.mul(_,N),f=r.mul(V,H),d=r.mul(R,K),y=r.add(_,V),p=r.add(N,H);y=r.mul(y,p),p=r.add(s,f),y=r.sub(y,p),p=r.add(_,R);let w=r.add(N,K);return p=r.mul(p,w),w=r.add(s,d),p=r.sub(p,w),w=r.add(V,R),C=r.add(H,K),w=r.mul(w,C),C=r.add(f,d),w=r.sub(w,C),U=r.mul(G,p),C=r.mul(x,d),U=r.add(C,U),C=r.sub(f,U),U=r.add(f,U),q=r.mul(C,U),f=r.add(s,s),f=r.add(f,s),d=r.mul(G,d),p=r.mul(x,p),f=r.add(f,d),d=r.sub(s,d),d=r.mul(G,d),p=r.add(p,d),s=r.mul(f,p),q=r.add(q,s),s=r.mul(w,p),C=r.mul(y,C),C=r.sub(C,s),s=r.mul(y,f),U=r.mul(w,U),U=r.add(U,s),new b(C,q,U)}subtract(I){return this.add(I.negate())}is0(){return this.equals(b.ZERO)}wNAF(I){return P.wNAFCached(this,h,I,_=>{let V=r.invertBatch(_.map(R=>R.pz));return _.map((R,N)=>R.toAffine(V[N])).map(b.fromAffine)})}multiplyUnsafe(I){let _=b.ZERO;if(I===Zn)return _;if(u(I),I===Mr)return this;let{endo:V}=t;if(!V)return P.unsafeLadder(this,I);let{k1neg:R,k1:N,k2neg:H,k2:K}=V.splitScalar(I),C=_,q=_,U=this;for(;N>Zn||K>Zn;)N&Mr&&(C=C.add(U)),K&Mr&&(q=q.add(U)),U=U.double(),N>>=Mr,K>>=Mr;return R&&(C=C.negate()),H&&(q=q.negate()),q=new b(r.mul(q.px,V.beta),q.py,q.pz),C.add(q)}multiply(I){u(I);let _=I,V,R,{endo:N}=t;if(N){let{k1neg:H,k1:K,k2neg:C,k2:q}=N.splitScalar(_),{p:U,f:G}=this.wNAF(K),{p:x,f:s}=this.wNAF(q);U=P.constTimeNegate(H,U),x=P.constTimeNegate(C,x),x=new b(r.mul(x.px,N.beta),x.py,x.pz),V=U.add(x),R=G.add(s)}else{let{p:H,f:K}=this.wNAF(_);V=H,R=K}return b.normalizeZ([V,R])[0]}multiplyAndAddUnsafe(I,_,V){let R=b.BASE,N=(K,C)=>C===Zn||C===Mr||!K.equals(R)?K.multiplyUnsafe(C):K.multiply(C),H=N(this,_).add(N(I,V));return H.is0()?void 0:H}toAffine(I){let{px:_,py:V,pz:R}=this,N=this.is0();I==null&&(I=N?r.ONE:r.inv(R));let H=r.mul(_,I),K=r.mul(V,I),C=r.mul(R,I);if(N)return{x:r.ZERO,y:r.ZERO};if(!r.eql(C,r.ONE))throw new Error("invZ was invalid");return{x:H,y:K}}isTorsionFree(){let{h:I,isTorsionFree:_}=t;if(I===Mr)return!0;if(_)return _(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:I,clearCofactor:_}=t;return I===Mr?this:_?_(b,this):this.multiplyUnsafe(t.h)}toRawBytes(I=!0){return this.assertValidity(),n(b,this,I)}toHex(I=!0){return Bo(this.toRawBytes(I))}}b.BASE=new b(t.Gx,t.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);let T=t.nBitLength,P=oS(b,t.endo?Math.ceil(T/2):T);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function W4(e){let t=Np(e);return Si(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function aS(e){let t=W4(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function a(p){return Zn<p&&p<r.ORDER}function u(p){return gr(p,n)}function l(p){return Ef(p,n)}let{ProjectivePoint:h,normPrivateKeyToScalar:v,weierstrassEquation:b,isWithinCurveOrder:T}=F4({...t,toBytes(p,w,E){let g=w.toAffine(),c=r.toBytes(g.x),m=Ks;return E?m(Uint8Array.from([w.hasEvenY()?2:3]),c):m(Uint8Array.from([4]),c,r.toBytes(g.y))},fromBytes(p){let w=p.length,E=p[0],g=p.subarray(1);if(w===i&&(E===2||E===3)){let c=Gn(g);if(!a(c))throw new Error("Point is not on curve");let m=b(c),O=r.sqrt(m),L=(O&Mr)===Mr;return(E&1)===1!==L&&(O=r.neg(O)),{x:c,y:O}}else if(w===o&&E===4){let c=r.fromBytes(g.subarray(0,r.BYTES)),m=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:c,y:m}}else throw new Error(`Point of length ${w} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),P=p=>Bo(xi(p,t.nByteLength));function B(p){let w=n>>Mr;return p>w}function I(p){return B(p)?u(-p):p}let _=(p,w,E)=>Gn(p.slice(w,E));class V{constructor(w,E,g){this.r=w,this.s=E,this.recovery=g,this.assertValidity()}static fromCompact(w){let E=t.nByteLength;return w=yr("compactSignature",w,E*2),new V(_(w,0,E),_(w,E,2*E))}static fromDER(w){let{r:E,s:g}=Vo.toSig(yr("DER",w));return new V(E,g)}assertValidity(){if(!T(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!T(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new V(this.r,this.s,w)}recoverPublicKey(w){let{r:E,s:g,recovery:c}=this,m=q(yr("msgHash",w));if(c==null||![0,1,2,3].includes(c))throw new Error("recovery id invalid");let O=c===2||c===3?E+t.n:E;if(O>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let L=c&1?"03":"02",D=h.fromHex(L+P(O)),j=l(O),W=u(-m*j),Z=u(g*j),Re=h.BASE.multiplyAndAddUnsafe(D,W,Z);if(!Re)throw new Error("point at infinify");return Re.assertValidity(),Re}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new V(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return ko(this.toDERHex())}toDERHex(){return Vo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ko(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}let R={isValidPrivateKey(p){try{return v(p),!0}catch{return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{let p=_p(t.n);return Tf(t.randomBytes(p),t.n)},precompute(p=8,w=h.BASE){return w._setWindowSize(p),w.multiply(BigInt(3)),w}};function N(p,w=!0){return h.fromPrivateKey(p).toRawBytes(w)}function H(p){let w=ln(p),E=typeof p=="string",g=(w||E)&&p.length;return w?g===i||g===o:E?g===2*i||g===2*o:p instanceof h}function K(p,w,E=!0){if(H(p))throw new Error("first arg must be private key");if(!H(w))throw new Error("second arg must be public key");return h.fromHex(w).multiply(v(p)).toRawBytes(E)}let C=t.bits2int||function(p){let w=Gn(p),E=p.length*8-t.nBitLength;return E>0?w>>BigInt(E):w},q=t.bits2int_modN||function(p){return u(C(p))},U=tc(t.nBitLength);function G(p){if(typeof p!="bigint")throw new Error("bigint expected");if(!(Zn<=p&&p<U))throw new Error(`bigint expected < 2^${t.nBitLength}`);return xi(p,t.nByteLength)}function x(p,w,E=s){if(["recovered","canonical"].some(Y=>Y in E))throw new Error("sign() legacy options not supported");let{hash:g,randomBytes:c}=t,{lowS:m,prehash:O,extraEntropy:L}=E;m==null&&(m=!0),p=yr("msgHash",p),O&&(p=yr("prehashed msgHash",g(p)));let D=q(p),j=v(w),W=[G(j),G(D)];if(L!=null){let Y=L===!0?c(r.BYTES):L;W.push(yr("extraEntropy",Y))}let Z=Ks(...W),Re=D;function X(Y){let yt=C(Y);if(!T(yt))return;let ne=l(yt),J=h.BASE.multiply(yt).toAffine(),gt=u(J.x);if(gt===Zn)return;let te=u(ne*u(Re+gt*j));if(te===Zn)return;let ie=(J.x===gt?0:2)|Number(J.y&Mr),Jt=te;return m&&B(te)&&(Jt=I(te),ie^=1),new V(gt,Jt,ie)}return{seed:Z,k2sig:X}}let s={lowS:t.lowS,prehash:!1},f={lowS:t.lowS,prehash:!1};function d(p,w,E=s){let{seed:g,k2sig:c}=x(p,w,E),m=t;return Ip(m.hash.outputLen,m.nByteLength,m.hmac)(g,c)}h.BASE._setWindowSize(8);function y(p,w,E,g=f){let c=p;if(w=yr("msgHash",w),E=yr("publicKey",E),"strict"in g)throw new Error("options.strict was renamed to lowS");let{lowS:m,prehash:O}=g,L,D;try{if(typeof c=="string"||ln(c))try{L=V.fromDER(c)}catch(J){if(!(J instanceof Vo.Err))throw J;L=V.fromCompact(c)}else if(typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint"){let{r:J,s:gt}=c;L=new V(J,gt)}else throw new Error("PARSE");D=h.fromHex(E)}catch(J){if(J.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(m&&L.hasHighS())return!1;O&&(w=t.hash(w));let{r:j,s:W}=L,Z=q(w),Re=l(W),X=u(Z*Re),Y=u(j*Re),yt=h.BASE.multiplyAndAddUnsafe(D,X,Y)?.toAffine();return yt?u(yt.x)===j:!1}return{CURVE:t,getPublicKey:N,getSharedSecret:K,sign:d,verify:y,ProjectivePoint:h,Signature:V,utils:R}}function $4(e){return{hash:e,hmac:(t,...r)=>Ap(e,t,z1(...r)),randomBytes:Z1}}function cS(e,t){let r=n=>aS({...e,...$4(n)});return Object.freeze({...r(t),create:r})}S();A();S();A();function z4(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),a=Number(r>>i&o),u=Number(r&o),l=n?4:0,h=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+h,u,n)}var If=class extends Ds{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=wf(this.buffer)}update(t){Cs(this);let{view:r,buffer:n,blockLen:i}=this;t=ec(t);let o=t.length;for(let a=0;a<o;){let u=Math.min(i-this.pos,o-a);if(u===i){let l=wf(t);for(;i<=o-a;a+=i)this.process(l,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Cs(this),W1(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let b=a;b<i;b++)r[b]=0;z4(n,i-8,BigInt(this.length*8),o),this.process(n,0);let u=wf(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=l/4,v=this.get();if(h>v.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)u.setUint32(4*b,v[b],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:a,pos:u}=this;return t.length=i,t.pos=u,t.finished=o,t.destroyed=a,i%r&&t.buffer.set(n),t}};var G4=(e,t,r)=>e&t^~e&r,Z4=(e,t,r)=>e&t^e&r^t&r,Y4=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ai=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ei=new Uint32Array(64),Op=class extends If{constructor(){super(64,32,8,!1),this.A=Ai[0]|0,this.B=Ai[1]|0,this.C=Ai[2]|0,this.D=Ai[3]|0,this.E=Ai[4]|0,this.F=Ai[5]|0,this.G=Ai[6]|0,this.H=Ai[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:a,G:u,H:l}=this;return[t,r,n,i,o,a,u,l]}set(t,r,n,i,o,a,u,l){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=a|0,this.G=u|0,this.H=l|0}process(t,r){for(let b=0;b<16;b++,r+=4)Ei[b]=t.getUint32(r,!1);for(let b=16;b<64;b++){let T=Ei[b-15],P=Ei[b-2],B=fn(T,7)^fn(T,18)^T>>>3,I=fn(P,17)^fn(P,19)^P>>>10;Ei[b]=I+Ei[b-7]+B+Ei[b-16]|0}let{A:n,B:i,C:o,D:a,E:u,F:l,G:h,H:v}=this;for(let b=0;b<64;b++){let T=fn(u,6)^fn(u,11)^fn(u,25),P=v+T+G4(u,l,h)+Y4[b]+Ei[b]|0,I=(fn(n,2)^fn(n,13)^fn(n,22))+Z4(n,i,o)|0;v=h,h=l,l=u,u=a+P|0,a=o,o=i,i=n,n=P+I|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,a=a+this.D|0,u=u+this.E|0,l=l+this.F|0,h=h+this.G|0,v=v+this.H|0,this.set(n,i,o,a,u,l,h,v)}roundClean(){Ei.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var uS=G1(()=>new Op);var fS=rS(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),J4=fS.create(BigInt("-3")),X4=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),rc=cS({a:J4,b:X4,Fp:fS,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},uS);var lS=()=>({type:"keyPair",sign:(e,t)=>{if(!t.isJWT)return Promise.resolve(nt("invalidAddressType"));let r=Math.floor(Date.now()/1e3);if(t.data.payload.iat>r)return Promise.resolve(nt("beforeTimeOfIssuance"));if(t.data.payload.exp<r)return Promise.resolve(nt("expiredToken"));if(t.data.payload.iss!==Xy)return Promise.resolve(nt("invalidClaim"));if(t.data.payload.aud!==Qy)return Promise.resolve(nt("invalidClaim"));let n={...t.data.header,kid:Zr(No.Buffer.from(e.publicKey))},i={...t.data.payload,sub:Zr(No.Buffer.from(e.publicKey))},o=Zr(No.Buffer.from(JSON.stringify(n)))+"."+Zr(No.Buffer.from(JSON.stringify(i))),u=rc.sign(No.Buffer.from(o).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),l=Zr(No.Buffer.from(u)),h={header:n,payload:i,signature:l};return Promise.resolve({status:"success",signature:l,signedJWT:h})}});S();A();var dS=Ze(zi());var Up=Ze(ml()),hS=Ze(Gi());var pS=()=>({type:"keyPair",sign:(e,t)=>{if(t.chainType!=="solana")return Promise.resolve(nt("invalidAddressType"));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=Up.default.decode(t.message):r=dS.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(nt("invalidMessageEncoding"))}let n=Up.default.encode(hS.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:n})}});S();A();S();A();S();A();var Lo=Ze(Gi(),1);S();A();S();A();S();A();S();A();function qs(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Q4(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Hs(e,...t){if(!Q4(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function yS(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");qs(e.outputLen),qs(e.blockLen)}function Yn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Pf(e,t){Hs(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}S();A();var js=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Mf=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);var Ii=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,mS=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,dn=Ii?e=>e:e=>mS(e);function Oo(e){for(let t=0;t<e.length;t++)e[t]=mS(e[t])}var eB=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Bf(e){Hs(e);let t="";for(let r=0;r<e.length;r++)t+=eB[e[r]];return t}var Jn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function gS(e){if(e>=Jn._0&&e<=Jn._9)return e-Jn._0;if(e>=Jn._A&&e<=Jn._F)return e-(Jn._A-10);if(e>=Jn._a&&e<=Jn._f)return e-(Jn._a-10)}function bS(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let a=gS(e.charCodeAt(o)),u=gS(e.charCodeAt(o+1));if(a===void 0||u===void 0){let l=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}n[i]=a*16+u}return n}function tB(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Br(e){return typeof e=="string"&&(e=tB(e)),Hs(e),e}var Ti=class{clone(){return this._cloneInto()}},x7={}.toString;function wS(e){let t=n=>e().update(Br(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function vS(e){let t=(n,i)=>e(i).update(Br(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}var xS=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),kf=class extends Ti{constructor(t,r,n={},i,o,a){if(super(),this.blockLen=t,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,qs(t),qs(r),qs(i),r<0||r>i)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>i))throw new Error(`key must be up 1..${i} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==o)throw new Error(`salt must be ${o} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==a)throw new Error(`personalization must be ${a} byte long or undefined`);this.buffer32=js(this.buffer=new Uint8Array(t))}update(t){Yn(this);let{blockLen:r,buffer:n,buffer32:i}=this;t=Br(t);let o=t.length,a=t.byteOffset,u=t.buffer;for(let l=0;l<o;){this.pos===r&&(Ii||Oo(i),this.compress(i,0,!1),Ii||Oo(i),this.pos=0);let h=Math.min(r-this.pos,o-l),v=a+l;if(h===r&&!(v%4)&&l+h<o){let b=new Uint32Array(u,v,Math.floor((o-l)/4));Ii||Oo(b);for(let T=0;l+r<o;T+=i.length,l+=r)this.length+=r,this.compress(b,T,!1);Ii||Oo(b);continue}n.set(t.subarray(l,l+h),this.pos),this.pos+=h,this.length+=h,l+=h}return this}digestInto(t){Yn(this),Pf(t,this);let{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),Ii||Oo(n),this.compress(n,0,!0),Ii||Oo(n);let i=js(t);this.get().forEach((o,a)=>i[a]=dn(o))}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){let{buffer:r,length:n,finished:i,destroyed:o,outputLen:a,pos:u}=this;return t||(t=new this.constructor({dkLen:a})),t.set(...this.get()),t.length=n,t.finished=i,t.destroyed=o,t.outputLen=a,t.buffer.set(r),t.pos=u,t}};S();A();var _f=BigInt(4294967295),Lp=BigInt(32);function SS(e,t=!1){return t?{h:Number(e&_f),l:Number(e>>Lp&_f)}:{h:Number(e>>Lp&_f)|0,l:Number(e&_f)|0}}function rB(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:a}=SS(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}var nB=(e,t)=>BigInt(e>>>0)<<Lp|BigInt(t>>>0),iB=(e,t,r)=>e>>>r,oB=(e,t,r)=>e<<32-r|t>>>r,sB=(e,t,r)=>e>>>r|t<<32-r,aB=(e,t,r)=>e<<32-r|t>>>r,cB=(e,t,r)=>e<<64-r|t>>>r-32,uB=(e,t,r)=>e>>>r-32|t<<64-r,fB=(e,t)=>t,lB=(e,t)=>e,dB=(e,t,r)=>e<<r|t>>>32-r,hB=(e,t,r)=>t<<r|e>>>32-r,pB=(e,t,r)=>t<<r-32|e>>>64-r,yB=(e,t,r)=>e<<r-32|t>>>64-r;function gB(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var mB=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),bB=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,wB=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),vB=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,xB=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),SB=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0;var AB={fromBig:SS,split:rB,toBig:nB,shrSH:iB,shrSL:oB,rotrSH:sB,rotrSL:aB,rotrBH:cB,rotrBL:uB,rotr32H:fB,rotr32L:lB,rotlSH:dB,rotlSL:hB,rotlBH:pB,rotlBL:yB,add:gB,add3L:mB,add3H:bB,add4L:wB,add4H:vB,add5H:SB,add5L:xB},ee=AB;var kt=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),z=new Uint32Array(32);function Pi(e,t,r,n,i,o){let a=i[o],u=i[o+1],l=z[2*e],h=z[2*e+1],v=z[2*t],b=z[2*t+1],T=z[2*r],P=z[2*r+1],B=z[2*n],I=z[2*n+1],_=ee.add3L(l,v,a);h=ee.add3H(_,h,b,u),l=_|0,{Dh:I,Dl:B}={Dh:I^h,Dl:B^l},{Dh:I,Dl:B}={Dh:ee.rotr32H(I,B),Dl:ee.rotr32L(I,B)},{h:P,l:T}=ee.add(P,T,I,B),{Bh:b,Bl:v}={Bh:b^P,Bl:v^T},{Bh:b,Bl:v}={Bh:ee.rotrSH(b,v,24),Bl:ee.rotrSL(b,v,24)},z[2*e]=l,z[2*e+1]=h,z[2*t]=v,z[2*t+1]=b,z[2*r]=T,z[2*r+1]=P,z[2*n]=B,z[2*n+1]=I}function Mi(e,t,r,n,i,o){let a=i[o],u=i[o+1],l=z[2*e],h=z[2*e+1],v=z[2*t],b=z[2*t+1],T=z[2*r],P=z[2*r+1],B=z[2*n],I=z[2*n+1],_=ee.add3L(l,v,a);h=ee.add3H(_,h,b,u),l=_|0,{Dh:I,Dl:B}={Dh:I^h,Dl:B^l},{Dh:I,Dl:B}={Dh:ee.rotrSH(I,B,16),Dl:ee.rotrSL(I,B,16)},{h:P,l:T}=ee.add(P,T,I,B),{Bh:b,Bl:v}={Bh:b^P,Bl:v^T},{Bh:b,Bl:v}={Bh:ee.rotrBH(b,v,63),Bl:ee.rotrBL(b,v,63)},z[2*e]=l,z[2*e+1]=h,z[2*t]=v,z[2*t+1]=b,z[2*r]=T,z[2*r+1]=P,z[2*n]=B,z[2*n+1]=I}var Rp=class extends kf{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=kt[0]|0,this.v0h=kt[1]|0,this.v1l=kt[2]|0,this.v1h=kt[3]|0,this.v2l=kt[4]|0,this.v2h=kt[5]|0,this.v3l=kt[6]|0,this.v3h=kt[7]|0,this.v4l=kt[8]|0,this.v4h=kt[9]|0,this.v5l=kt[10]|0,this.v5h=kt[11]|0,this.v6l=kt[12]|0,this.v6h=kt[13]|0,this.v7l=kt[14]|0,this.v7h=kt[15]|0;let r=t.key?t.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,t.salt){let n=js(Br(t.salt));this.v4l^=dn(n[0]),this.v4h^=dn(n[1]),this.v5l^=dn(n[2]),this.v5h^=dn(n[3])}if(t.personalization){let n=js(Br(t.personalization));this.v6l^=dn(n[0]),this.v6h^=dn(n[1]),this.v7l^=dn(n[2]),this.v7h^=dn(n[3])}if(t.key){let n=new Uint8Array(this.blockLen);n.set(Br(t.key)),this.update(n)}}get(){let{v0l:t,v0h:r,v1l:n,v1h:i,v2l:o,v2h:a,v3l:u,v3h:l,v4l:h,v4h:v,v5l:b,v5h:T,v6l:P,v6h:B,v7l:I,v7h:_}=this;return[t,r,n,i,o,a,u,l,h,v,b,T,P,B,I,_]}set(t,r,n,i,o,a,u,l,h,v,b,T,P,B,I,_){this.v0l=t|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=o|0,this.v2h=a|0,this.v3l=u|0,this.v3h=l|0,this.v4l=h|0,this.v4h=v|0,this.v5l=b|0,this.v5h=T|0,this.v6l=P|0,this.v6h=B|0,this.v7l=I|0,this.v7h=_|0}compress(t,r,n){this.get().forEach((l,h)=>z[h]=l),z.set(kt,16);let{h:i,l:o}=ee.fromBig(BigInt(this.length));z[24]=kt[8]^o,z[25]=kt[9]^i,n&&(z[28]=~z[28],z[29]=~z[29]);let a=0,u=xS;for(let l=0;l<12;l++)Pi(0,4,8,12,t,r+2*u[a++]),Mi(0,4,8,12,t,r+2*u[a++]),Pi(1,5,9,13,t,r+2*u[a++]),Mi(1,5,9,13,t,r+2*u[a++]),Pi(2,6,10,14,t,r+2*u[a++]),Mi(2,6,10,14,t,r+2*u[a++]),Pi(3,7,11,15,t,r+2*u[a++]),Mi(3,7,11,15,t,r+2*u[a++]),Pi(0,5,10,15,t,r+2*u[a++]),Mi(0,5,10,15,t,r+2*u[a++]),Pi(1,6,11,12,t,r+2*u[a++]),Mi(1,6,11,12,t,r+2*u[a++]),Pi(2,7,8,13,t,r+2*u[a++]),Mi(2,7,8,13,t,r+2*u[a++]),Pi(3,4,9,14,t,r+2*u[a++]),Mi(3,4,9,14,t,r+2*u[a++]);this.v0l^=z[0]^z[16],this.v0h^=z[1]^z[17],this.v1l^=z[2]^z[18],this.v1h^=z[3]^z[19],this.v2l^=z[4]^z[20],this.v2h^=z[5]^z[21],this.v3l^=z[6]^z[22],this.v3h^=z[7]^z[23],this.v4l^=z[8]^z[24],this.v4h^=z[9]^z[25],this.v5l^=z[10]^z[26],this.v5h^=z[11]^z[27],this.v6l^=z[12]^z[28],this.v6h^=z[13]^z[29],this.v7l^=z[14]^z[30],this.v7h^=z[15]^z[31],z.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Uo=vS(e=>new Rp(e));var ac=Ze(sA(),1);S();A();S();A();S();A();S();A();var Bi=32;function AS(e){return EB(e)&&TB(e)===Bi}function Mn(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Bi*2,"0")}`}function EB(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function TB(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}S();A();var IB=/^vector<(.+)>$/,PB=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,nc=class e{static parseFromStr(t,r=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};let n=t.match(IB);if(n)return{vector:e.parseFromStr(n[1],r)};let i=t.match(PB);if(i)return{struct:{address:r?Mn(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:e.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,r=!1){return qy(t).map(n=>e.parseFromStr(n,r))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${e.tagToString(t.vector)}>`;if("struct"in t){let r=t.struct,n=r.typeParams.map(e.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function MB(e){return M.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function BB(e){return M.enum("Option",{None:null,Some:e})}var st=M.bytes(Bi).transform({validate:e=>{let t=typeof e=="string"?e:Zi(e);if(!t||!AS(Mn(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?Ac(Mn(e)):e,output:e=>Mn(Zi(e))}),mr=M.vector(M.u8()).transform({name:"ObjectDigest",input:e=>Tl(e),output:e=>Ky(new Uint8Array(e)),validate:e=>{if(Tl(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),ir=M.struct("SuiObjectRef",{objectId:st,version:M.u64(),digest:mr}),Cp=M.struct("SharedObjectRef",{objectId:st,initialSharedVersion:M.u64(),mutable:M.bool()}),Dp=M.enum("ObjectArg",{ImmOrOwnedObject:ir,SharedObject:Cp,Receiving:ir}),Kp=M.enum("CallArg",{Pure:M.struct("Pure",{bytes:M.vector(M.u8()).transform({input:e=>typeof e=="string"?Xt(e):e,output:e=>_t(new Uint8Array(e))})}),Object:Dp}),qp=M.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:M.lazy(()=>qp),struct:M.lazy(()=>zp),u16:null,u32:null,u256:null}),Vf=qp.transform({input:e=>typeof e=="string"?nc.parseFromStr(e,!0):e,output:e=>nc.tagToString(e)}),hn=M.enum("Argument",{GasCoin:null,Input:M.u16(),Result:M.u16(),NestedResult:M.tuple([M.u16(),M.u16()])}),Hp=M.struct("ProgrammableMoveCall",{package:st,module:M.string(),function:M.string(),typeArguments:M.vector(Vf),arguments:M.vector(hn)}),jp=M.enum("Command",{MoveCall:Hp,TransferObjects:M.struct("TransferObjects",{objects:M.vector(hn),address:hn}),SplitCoins:M.struct("SplitCoins",{coin:hn,amounts:M.vector(hn)}),MergeCoins:M.struct("MergeCoins",{destination:hn,sources:M.vector(hn)}),Publish:M.struct("Publish",{modules:M.vector(M.vector(M.u8()).transform({input:e=>typeof e=="string"?Xt(e):e,output:e=>_t(new Uint8Array(e))})),dependencies:M.vector(st)}),MakeMoveVec:M.struct("MakeMoveVec",{type:BB(Vf).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:M.vector(hn)}),Upgrade:M.struct("Upgrade",{modules:M.vector(M.vector(M.u8()).transform({input:e=>typeof e=="string"?Xt(e):e,output:e=>_t(new Uint8Array(e))})),dependencies:M.vector(st),package:st,ticket:hn})}),Fp=M.struct("ProgrammableTransaction",{inputs:M.vector(Kp),commands:M.vector(jp)}),Wp=M.enum("TransactionKind",{ProgrammableTransaction:Fp,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),$p=M.enum("TransactionExpiration",{None:null,Epoch:MB()}),zp=M.struct("StructTag",{address:st,module:M.string(),name:M.string(),typeParams:M.vector(qp)}),Gp=M.struct("GasData",{payment:M.vector(ir),owner:st,price:M.u64(),budget:M.u64()}),Zp=M.struct("TransactionDataV1",{kind:Wp,sender:st,gasData:Gp,expiration:$p}),Yp=M.enum("TransactionData",{V1:Zp}),Jp=M.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Xp=M.enum("IntentVersion",{V0:null}),Qp=M.enum("AppId",{Sui:null}),e0=M.struct("Intent",{scope:Jp,version:Xp,appId:Qp});function t0(e){return M.struct(`IntentMessage<${e.name}>`,{intent:e0,value:e})}var r0=M.enum("CompressedSignature",{ED25519:M.fixedArray(64,M.u8()),Secp256k1:M.fixedArray(64,M.u8()),Secp256r1:M.fixedArray(64,M.u8()),ZkLogin:M.vector(M.u8())}),n0=M.enum("PublicKey",{ED25519:M.fixedArray(32,M.u8()),Secp256k1:M.fixedArray(33,M.u8()),Secp256r1:M.fixedArray(33,M.u8()),ZkLogin:M.vector(M.u8())}),i0=M.struct("MultiSigPkMap",{pubKey:n0,weight:M.u8()}),o0=M.struct("MultiSigPublicKey",{pk_map:M.vector(i0),threshold:M.u16()}),ES=M.struct("MultiSig",{sigs:M.vector(r0),bitmap:M.u16(),multisig_pk:o0}),kB=M.vector(M.u8()).transform({input:e=>typeof e=="string"?Xt(e):e,output:e=>_t(new Uint8Array(e))}),s0=M.struct("SenderSignedTransaction",{intentMessage:t0(Yp),txSignatures:M.vector(kB)}),TS=M.vector(s0,{name:"SenderSignedData"});S();A();var _B=M.enum("PackageUpgradeError",{UnableToFetchPackage:M.struct("UnableToFetchPackage",{packageId:st}),NotAPackage:M.struct("NotAPackage",{objectId:st}),IncompatibleUpgrade:null,DigestDoesNotMatch:M.struct("DigestDoesNotMatch",{digest:M.vector(M.u8())}),UnknownUpgradePolicy:M.struct("UnknownUpgradePolicy",{policy:M.u8()}),PackageIDDoesNotMatch:M.struct("PackageIDDoesNotMatch",{packageId:st,ticketId:st})}),VB=M.struct("ModuleId",{address:st,name:M.string()}),IS=M.struct("MoveLocation",{module:VB,function:M.u16(),instruction:M.u16(),functionName:M.option(M.string())}),NB=M.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:M.struct("IndexOutOfBounds",{idx:M.u16()}),SecondaryIndexOutOfBounds:M.struct("SecondaryIndexOutOfBounds",{resultIdx:M.u16(),secondaryIdx:M.u16()}),InvalidResultArity:M.struct("InvalidResultArity",{resultIdx:M.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),OB=M.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),UB=M.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:M.struct("MoveObjectTooBig",{objectSize:M.u64(),maxObjectSize:M.u64()}),MovePackageTooBig:M.struct("MovePackageTooBig",{objectSize:M.u64(),maxObjectSize:M.u64()}),CircularObjectOwnership:M.struct("CircularObjectOwnership",{object:st}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:M.option(IS),MoveAbort:M.tuple([IS,M.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:M.struct("CommandArgumentError",{argIdx:M.u16(),kind:NB}),TypeArgumentError:M.struct("TypeArgumentError",{argumentIdx:M.u16(),kind:OB}),UnusedValueWithoutDrop:M.struct("UnusedValueWithoutDrop",{resultIdx:M.u16(),secondaryIdx:M.u16()}),InvalidPublicFunctionReturnType:M.struct("InvalidPublicFunctionReturnType",{idx:M.u16()}),InvalidTransferObject:null,EffectsTooLarge:M.struct("EffectsTooLarge",{currentSize:M.u64(),maxSize:M.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:M.struct("PackageUpgradeError",{upgradeError:_B}),WrittenObjectsTooLarge:M.struct("WrittenObjectsTooLarge",{currentSize:M.u64(),maxSize:M.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:M.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:M.vector(st)}),AddressDeniedForCoin:M.struct("AddressDeniedForCoin",{address:st,coinType:M.string()}),CoinTypeGlobalPause:M.struct("CoinTypeGlobalPause",{coinType:M.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),PS=M.enum("ExecutionStatus",{Success:null,Failed:M.struct("ExecutionFailed",{error:UB,command:M.option(M.u64())})}),MS=M.struct("GasCostSummary",{computationCost:M.u64(),storageCost:M.u64(),storageRebate:M.u64(),nonRefundableStorageFee:M.u64()}),Fs=M.enum("Owner",{AddressOwner:st,ObjectOwner:st,Shared:M.struct("Shared",{initialSharedVersion:M.u64()}),Immutable:null}),LB=M.struct("TransactionEffectsV1",{status:PS,executedEpoch:M.u64(),gasUsed:MS,modifiedAtVersions:M.vector(M.tuple([st,M.u64()])),sharedObjects:M.vector(ir),transactionDigest:mr,created:M.vector(M.tuple([ir,Fs])),mutated:M.vector(M.tuple([ir,Fs])),unwrapped:M.vector(M.tuple([ir,Fs])),deleted:M.vector(ir),unwrappedThenDeleted:M.vector(ir),wrapped:M.vector(ir),gasObject:M.tuple([ir,Fs]),eventsDigest:M.option(mr),dependencies:M.vector(mr)}),a0=M.tuple([M.u64(),mr]),RB=M.enum("ObjectIn",{NotExist:null,Exist:M.tuple([a0,Fs])}),CB=M.enum("ObjectOut",{NotExist:null,ObjectWrite:M.tuple([mr,Fs]),PackageWrite:a0}),DB=M.enum("IDOperation",{None:null,Created:null,Deleted:null}),KB=M.struct("EffectsObjectChange",{inputState:RB,outputState:CB,idOperation:DB}),qB=M.enum("UnchangedSharedKind",{ReadOnlyRoot:a0,MutateDeleted:M.u64(),ReadDeleted:M.u64(),Cancelled:M.u64(),PerEpochConfig:null}),HB=M.struct("TransactionEffectsV2",{status:PS,executedEpoch:M.u64(),gasUsed:MS,transactionDigest:mr,gasObjectIndex:M.option(M.u32()),eventsDigest:M.option(mr),dependencies:M.vector(mr),lamportVersion:M.u64(),changedObjects:M.vector(M.tuple([st,KB])),unchangedSharedObjects:M.vector(M.tuple([st,qB])),auxDataDigest:M.option(mr)}),BS=M.enum("TransactionEffects",{V1:LB,V2:HB});var Xn={...M,U8:M.u8(),U16:M.u16(),U32:M.u32(),U64:M.u64(),U128:M.u128(),U256:M.u256(),ULEB128:M.uleb128(),Bool:M.bool(),String:M.string(),Address:st,AppId:Qp,Argument:hn,CallArg:Kp,CompressedSignature:r0,GasData:Gp,Intent:e0,IntentMessage:t0,IntentScope:Jp,IntentVersion:Xp,MultiSig:ES,MultiSigPkMap:i0,MultiSigPublicKey:o0,ObjectArg:Dp,ObjectDigest:mr,ProgrammableMoveCall:Hp,ProgrammableTransaction:Fp,PublicKey:n0,SenderSignedData:TS,SenderSignedTransaction:s0,SharedObjectRef:Cp,StructTag:zp,SuiObjectRef:ir,Command:jp,TransactionData:Yp,TransactionDataV1:Zp,TransactionExpiration:$p,TransactionKind:Wp,TypeTag:Vf,TransactionEffects:BS};function Nf(e,t){return Xn.IntentMessage(Xn.fixedArray(t.length,Xn.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}S();A();var Qn={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},kS={ED25519:32,Secp256k1:33,Secp256r1:33},Of={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};S();A();S();A();S();A();function c0(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Ws=class{equals(t){return c0(this.toRawBytes(),t.toRawBytes())}toBase64(){return _t(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return _t(t)}verifyWithIntent(t,r,n){let i=Nf(n,t),o=Uo(i,{dkLen:32});return this.verify(o,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(Xn.vector(Xn.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return Mn(Bf(Uo(this.toSuiBytes(),{dkLen:32})).slice(0,Bi*2))}};S();A();S();A();S();A();function _S(e,t){if(!!!e)throw new Error(t)}S();A();var f0={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},jB=new Set(Object.keys(f0));function l0(e){let t=e?.kind;return typeof t=="string"&&jB.has(t)}var u0;(function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"})(u0||(u0={}));S();A();var ic;(function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(ic||(ic={}));S();A();S();A();function d0(e){return e===9||e===32}function VS(e,t){let r=e.replace(/"""/g,'\\"""'),n=r.split(/\r\n|[\n\r]/g),i=n.length===1,o=n.length>1&&n.slice(1).every(P=>P.length===0||d0(P.charCodeAt(0))),a=r.endsWith('\\"""'),u=e.endsWith('"')&&!a,l=e.endsWith("\\"),h=u||l,v=!(t!=null&&t.minimize)&&(!i||e.length>70||h||o||a),b="",T=i&&d0(e.charCodeAt(0));return(v&&!T||o)&&(b+=`
`),b+=r,(v||h)&&(b+=`
`),'"""'+b+'"""'}S();A();function NS(e){return Uf(e,[])}function Uf(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return FB(e,t);default:return String(e)}}function FB(e,t){if(e===null)return"null";if(t.includes(e))return"[Circular]";let r=[...t,e];if(WB(e)){let n=e.toJSON();if(n!==e)return typeof n=="string"?n:Uf(n,r)}else if(Array.isArray(e))return zB(e,r);return $B(e,r)}function WB(e){return typeof e.toJSON=="function"}function $B(e,t){let r=Object.entries(e);return r.length===0?"{}":t.length>2?"["+GB(e)+"]":"{ "+r.map(([i,o])=>i+": "+Uf(o,t)).join(", ")+" }"}function zB(e,t){if(e.length===0)return"[]";if(t.length>2)return"[Array]";let r=Math.min(10,e.length),n=e.length-r,i=[];for(let o=0;o<r;++o)i.push(Uf(e[o],t));return n===1?i.push("... 1 more item"):n>1&&i.push(`... ${n} more items`),"["+i.join(", ")+"]"}function GB(e){let t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){let r=e.constructor.name;if(typeof r=="string"&&r!=="")return r}return t}S();A();S();A();function OS(e){return`"${e.replace(ZB,YB)}"`}var ZB=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function YB(e){return JB[e.charCodeAt(0)]}var JB=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];S();A();var US=Object.freeze({});function h0(e,t,r=f0){let n=new Map;for(let V of Object.values(ic))n.set(V,LS(t,V));let i,o=Array.isArray(e),a=[e],u=-1,l=[],h=e,v,b,T=[],P=[];do{u++;let V=u===a.length,R=V&&l.length!==0;if(V){if(v=P.length===0?void 0:T[T.length-1],h=b,b=P.pop(),R)if(o){h=h.slice();let H=0;for(let[K,C]of l){let q=K-H;C===null?(h.splice(q,1),H++):h[q]=C}}else{h=Object.defineProperties({},Object.getOwnPropertyDescriptors(h));for(let[H,K]of l)h[H]=K}u=i.index,a=i.keys,l=i.edits,o=i.inArray,i=i.prev}else if(b){if(v=o?u:a[u],h=b[v],h==null)continue;T.push(v)}let N;if(!Array.isArray(h)){var B,I;l0(h)||_S(!1,`Invalid AST Node: ${NS(h)}.`);let H=V?(B=n.get(h.kind))===null||B===void 0?void 0:B.leave:(I=n.get(h.kind))===null||I===void 0?void 0:I.enter;if(N=H?.call(t,h,v,b,T,P),N===US)break;if(N===!1){if(!V){T.pop();continue}}else if(N!==void 0&&(l.push([v,N]),!V))if(l0(N))h=N;else{T.pop();continue}}if(N===void 0&&R&&l.push([v,h]),V)T.pop();else{var _;i={inArray:o,index:u,keys:a,edits:l,prev:i},o=Array.isArray(h),a=o?h:(_=r[h.kind])!==null&&_!==void 0?_:[],u=-1,l=[],b&&P.push(b),b=h}}while(i!==void 0);return l.length!==0?l[l.length-1][1]:e}function LS(e,t){let r=e[t];return typeof r=="object"?r:typeof r=="function"?{enter:r,leave:void 0}:{enter:e.enter,leave:e.leave}}function Rf(e){return h0(e,QB)}var XB=80,QB={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>Q(e.definitions,`

`)},OperationDefinition:{leave(e){let t=We("(",Q(e.variableDefinitions,", "),")"),r=Q([e.operation,Q([e.name,t]),Q(e.directives," ")]," ");return(r==="query"?"":r+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:r,directives:n})=>e+": "+t+We(" = ",r)+We(" ",Q(n," "))},SelectionSet:{leave:({selections:e})=>pn(e)},Field:{leave({alias:e,name:t,arguments:r,directives:n,selectionSet:i}){let o=We("",e,": ")+t,a=o+We("(",Q(r,", "),")");return a.length>XB&&(a=o+We(`(
`,Lf(Q(r,`
`)),`
)`)),Q([a,Q(n," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+We(" ",Q(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:r})=>Q(["...",We("on ",e),Q(t," "),r]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:r,directives:n,selectionSet:i})=>`fragment ${e}${We("(",Q(r,", "),")")} on ${t} ${We("",Q(n," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?VS(e):OS(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+Q(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+Q(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+We("(",Q(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:r})=>We("",e,`
`)+Q(["schema",Q(t," "),pn(r)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:r})=>We("",e,`
`)+Q(["scalar",t,Q(r," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:r,directives:n,fields:i})=>We("",e,`
`)+Q(["type",t,We("implements ",Q(r," & ")),Q(n," "),pn(i)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:r,type:n,directives:i})=>We("",e,`
`)+t+(RS(r)?We(`(
`,Lf(Q(r,`
`)),`
)`):We("(",Q(r,", "),")"))+": "+n+We(" ",Q(i," "))},InputValueDefinition:{leave:({description:e,name:t,type:r,defaultValue:n,directives:i})=>We("",e,`
`)+Q([t+": "+r,We("= ",n),Q(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:r,directives:n,fields:i})=>We("",e,`
`)+Q(["interface",t,We("implements ",Q(r," & ")),Q(n," "),pn(i)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:r,types:n})=>We("",e,`
`)+Q(["union",t,Q(r," "),We("= ",Q(n," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:r,values:n})=>We("",e,`
`)+Q(["enum",t,Q(r," "),pn(n)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:r})=>We("",e,`
`)+Q([t,Q(r," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:r,fields:n})=>We("",e,`
`)+Q(["input",t,Q(r," "),pn(n)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:r,repeatable:n,locations:i})=>We("",e,`
`)+"directive @"+t+(RS(r)?We(`(
`,Lf(Q(r,`
`)),`
)`):We("(",Q(r,", "),")"))+(n?" repeatable":"")+" on "+Q(i," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>Q(["extend schema",Q(e," "),pn(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>Q(["extend scalar",e,Q(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>Q(["extend type",e,We("implements ",Q(t," & ")),Q(r," "),pn(n)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>Q(["extend interface",e,We("implements ",Q(t," & ")),Q(r," "),pn(n)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:r})=>Q(["extend union",e,Q(t," "),We("= ",Q(r," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:r})=>Q(["extend enum",e,Q(t," "),pn(r)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:r})=>Q(["extend input",e,Q(t," "),pn(r)]," ")}};function Q(e,t=""){var r;return(r=e?.filter(n=>n).join(t))!==null&&r!==void 0?r:""}function pn(e){return We(`{
`,Lf(Q(e,`
`)),`
}`)}function We(e,t,r=""){return t!=null&&t!==""?e+t+r:""}function Lf(e){return We("  ",e.replace(/\n/g,`
  `))}function RS(e){var t;return(t=e?.some(r=>r.includes(`
`)))!==null&&t!==void 0?t:!1}S();A();var CS=e=>{throw TypeError(e)},DS=(e,t,r)=>t.has(e)||CS("Cannot "+r),Cf=(e,t,r)=>(DS(e,t,"read from private field"),r?r.call(e):t.get(e)),Df=(e,t,r)=>t.has(e)?CS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Kf=(e,t,r,n)=>(DS(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),qf,Hf,jf,Ff,p0=class extends Error{},Wf=class{constructor({url:t,fetch:r=fetch,headers:n={},queries:i={}}){Df(this,qf),Df(this,Hf),Df(this,jf),Df(this,Ff),Kf(this,qf,t),Kf(this,Hf,i),Kf(this,jf,n),Kf(this,Ff,(...o)=>r(...o))}async query(t){let r=await Cf(this,Ff).call(this,Cf(this,qf),{method:"POST",headers:{"Content-Type":"application/json",...Cf(this,jf)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):Rf(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new p0(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:Cf(this,Hf)[t]})}};qf=new WeakMap;Hf=new WeakMap;jf=new WeakMap;Ff=new WeakMap;S();A();var KS=Hy();S();A();function ek(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}function tk(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r),i=ek(n);t=t.concat(i)}return t}function rk(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=tk(e),n=t%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let i=(t+e.length-1)%4;if(i!==3)if(i===2)r=r.slice(0,r.length-2);else if(i===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let o=new Uint8Array(Math.floor(r.length/8)),a=0;for(let u=0;u<r.length;u+=8){let l=r.slice(u,u+8),h=parseInt(l.join(""),2);o[a++]=h}return new TextDecoder().decode(o)}function nk(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}function qS(e,t){let r=rk(e.value,e.indexMod4),[n,i]=nk(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return i}S();A();S();A();var HS=M.struct("ZkLoginSignature",{inputs:M.struct("ZkLoginSignatureInputs",{proofPoints:M.struct("ZkLoginSignatureInputsProofPoints",{a:M.vector(M.string()),b:M.vector(M.vector(M.string())),c:M.vector(M.string())}),issBase64Details:M.struct("ZkLoginSignatureInputsClaim",{value:M.string(),indexMod4:M.u8()}),headerBase64:M.string(),addressSeed:M.string()}),maxEpoch:M.u64(),userSignature:M.vector(M.u8())});function jS(e){return HS.parse(typeof e=="string"?Xt(e):e)}S();A();function ik(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}function $f(e,t){let r=e.toString(16);return bS(r.padStart(t*2,"0").slice(-t*2))}function y0(e,t){let r=$f(e,t),n=ik(r);return n===-1?new Uint8Array([0]):r.slice(n)}var $S=e=>{throw TypeError(e)},zS=(e,t,r)=>t.has(e)||$S("Cannot "+r),ei=(e,t,r)=>(zS(e,t,"read from private field"),r?r.call(e):t.get(e)),g0=(e,t,r)=>t.has(e)?$S("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),$s=(e,t,r,n)=>(zS(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),yn,oc,sc,ok=class m0 extends Ws{constructor(t,{client:r}={}){super(),g0(this,yn),g0(this,oc),g0(this,sc),$s(this,oc,r),typeof t=="string"?$s(this,yn,Xt(t)):t instanceof Uint8Array?$s(this,yn,t):$s(this,yn,Uint8Array.from(t)),$s(this,sc,ei(this,yn).length!==ei(this,yn)[0]+1+32),ei(this,sc)&&$s(this,yn,FS(ei(this,yn)))}equals(t){return super.equals(t)}toSuiAddress(){if(ei(this,sc)){let t=FS(ei(this,yn),!0),r=new Uint8Array(t.length+1);return r[0]=this.flag(),r.set(t,1),Mn(Bf(Uo(r,{dkLen:32})).slice(0,Bi*2))}return super.toSuiAddress()}toRawBytes(){return ei(this,yn)}flag(){return Qn.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let n=zf(r),i=new m0(n.publicKey).toSuiAddress();return WS({address:i,bytes:_t(t),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:ei(this,oc)})}verifyTransaction(t,r){let n=zf(r),i=new m0(n.publicKey).toSuiAddress();return WS({address:i,bytes:_t(t),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:ei(this,oc)})}};yn=new WeakMap;oc=new WeakMap;sc=new WeakMap;var sk=ok;function ak(e,t,r){let n=r?.legacyAddress?y0(e,32):$f(e,32),i=new TextEncoder().encode(t),o=new Uint8Array(1+i.length+n.length);return o.set([i.length],0),o.set(i,1),o.set(n,1+i.length),new sk(o,r)}var ck=KS(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function FS(e,t=!1){let r=e[0]+1,n=BigInt(`0x${Zi(e.slice(r))}`),i=t?y0(n,32):$f(n,32),o=new Uint8Array(r+i.length);return o.set(e.slice(0,r),0),o.set(i,r),o}async function WS({address:e,bytes:t,signature:r,intentScope:n,client:i=new Wf({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let o=await i.query({query:ck,variables:{bytes:t,signature:r,intentScope:n,author:e}});return o.data?.verifyZkloginSignature.success===!0&&o.data?.verifyZkloginSignature.errors.length===0}function zf(e){let t=typeof e=="string"?Xt(e):e;if(t[0]!==Qn.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:n,maxEpoch:i,userSignature:o}=jS(r),{issBase64Details:a,addressSeed:u}=n,l=qS(a,"iss"),h=ak(BigInt(u),l);return{serializedSignature:_t(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:i,userSignature:o,iss:l,addressSeed:BigInt(u)},signature:t,publicKey:h.toRawBytes()}}function GS({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");let n=r.toRawBytes(),i=new Uint8Array(1+e.length+n.length);return i.set([Qn[t]]),i.set(e,1),i.set(n,1+e.length),_t(i)}function ZS(e){let t=Xt(e),r=Of[t[0]];switch(r){case"MultiSig":let n=Xn.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:n,bytes:t};case"ZkLogin":return zf(e);case"ED25519":case"Secp256k1":case"Secp256r1":let i=kS[r],o=t.slice(1,t.length-i),a=t.slice(1+o.length);return{serializedSignature:e,signatureScheme:r,signature:o,publicKey:a,bytes:t};default:throw new Error("Unsupported signature scheme")}}var cc=32;var YS="suiprivkey",b0=class{async signWithIntent(t,r){let n=Nf(r,t),i=Uo(n,{dkLen:32});return{signature:GS({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:_t(t)}}async signTransaction(t){return this.signWithIntent(t,"TransactionData")}async signPersonalMessage(t){let{signature:r}=await this.signWithIntent(M.vector(M.u8()).serialize(t).toBytes(),"PersonalMessage");return{bytes:_t(t),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}},Gf=class extends b0{};function JS(e){let{prefix:t,words:r}=ac.bech32.decode(e);if(t!==YS)throw new Error("invalid private key prefix");let n=new Uint8Array(ac.bech32.fromWords(r)),i=n.slice(1);return{schema:Of[n[0]],secretKey:i}}function XS(e,t){if(e.length!==cc)throw new Error("Invalid bytes length");let r=Qn[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),ac.bech32.encode(YS,ac.bech32.toWords(n))}S();A();function w0(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}function uk(e){return jy(e,"")}function QS(e){return Zi(uk(e))}S();A();S();A();var Zf=class extends Ti{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,yS(t);let n=Br(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return Yn(this),this.iHash.update(t),this}digestInto(t){Yn(this),Hs(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:a,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=a,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Yf=(e,t,r)=>new Zf(e,t).update(r).digest();Yf.create=(e,t)=>new Zf(e,t);S();A();S();A();function fk(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),a=Number(r>>i&o),u=Number(r&o),l=n?4:0,h=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+h,u,n)}var Jf=class extends Ti{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Mf(this.buffer)}update(t){Yn(this);let{view:r,buffer:n,blockLen:i}=this;t=Br(t);let o=t.length;for(let a=0;a<o;){let u=Math.min(i-this.pos,o-a);if(u===i){let l=Mf(t);for(;i<=o-a;a+=i)this.process(l,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Yn(this),Pf(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let b=a;b<i;b++)r[b]=0;fk(n,i-8,BigInt(this.length*8),o),this.process(n,0);let u=Mf(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=l/4,v=this.get();if(h>v.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)u.setUint32(4*b,v[b],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:a,pos:u}=this;return t.length=i,t.pos=u,t.finished=o,t.destroyed=a,i%r&&t.buffer.set(n),t}};var[lk,dk]=ee.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ki=new Uint32Array(80),_i=new Uint32Array(80),v0=class extends Jf{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:a,Dh:u,Dl:l,Eh:h,El:v,Fh:b,Fl:T,Gh:P,Gl:B,Hh:I,Hl:_}=this;return[t,r,n,i,o,a,u,l,h,v,b,T,P,B,I,_]}set(t,r,n,i,o,a,u,l,h,v,b,T,P,B,I,_){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=a|0,this.Dh=u|0,this.Dl=l|0,this.Eh=h|0,this.El=v|0,this.Fh=b|0,this.Fl=T|0,this.Gh=P|0,this.Gl=B|0,this.Hh=I|0,this.Hl=_|0}process(t,r){for(let N=0;N<16;N++,r+=4)ki[N]=t.getUint32(r),_i[N]=t.getUint32(r+=4);for(let N=16;N<80;N++){let H=ki[N-15]|0,K=_i[N-15]|0,C=ee.rotrSH(H,K,1)^ee.rotrSH(H,K,8)^ee.shrSH(H,K,7),q=ee.rotrSL(H,K,1)^ee.rotrSL(H,K,8)^ee.shrSL(H,K,7),U=ki[N-2]|0,G=_i[N-2]|0,x=ee.rotrSH(U,G,19)^ee.rotrBH(U,G,61)^ee.shrSH(U,G,6),s=ee.rotrSL(U,G,19)^ee.rotrBL(U,G,61)^ee.shrSL(U,G,6),f=ee.add4L(q,s,_i[N-7],_i[N-16]),d=ee.add4H(f,C,x,ki[N-7],ki[N-16]);ki[N]=d|0,_i[N]=f|0}let{Ah:n,Al:i,Bh:o,Bl:a,Ch:u,Cl:l,Dh:h,Dl:v,Eh:b,El:T,Fh:P,Fl:B,Gh:I,Gl:_,Hh:V,Hl:R}=this;for(let N=0;N<80;N++){let H=ee.rotrSH(b,T,14)^ee.rotrSH(b,T,18)^ee.rotrBH(b,T,41),K=ee.rotrSL(b,T,14)^ee.rotrSL(b,T,18)^ee.rotrBL(b,T,41),C=b&P^~b&I,q=T&B^~T&_,U=ee.add5L(R,K,q,dk[N],_i[N]),G=ee.add5H(U,V,H,C,lk[N],ki[N]),x=U|0,s=ee.rotrSH(n,i,28)^ee.rotrBH(n,i,34)^ee.rotrBH(n,i,39),f=ee.rotrSL(n,i,28)^ee.rotrBL(n,i,34)^ee.rotrBL(n,i,39),d=n&o^n&u^o&u,y=i&a^i&l^a&l;V=I|0,R=_|0,I=P|0,_=B|0,P=b|0,B=T|0,{h:b,l:T}=ee.add(h|0,v|0,G|0,x|0),h=u|0,v=l|0,u=o|0,l=a|0,o=n|0,a=i|0;let p=ee.add3L(x,f,y);n=ee.add3H(p,G,s,d),i=p|0}({h:n,l:i}=ee.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:a}=ee.add(this.Bh|0,this.Bl|0,o|0,a|0),{h:u,l}=ee.add(this.Ch|0,this.Cl|0,u|0,l|0),{h,l:v}=ee.add(this.Dh|0,this.Dl|0,h|0,v|0),{h:b,l:T}=ee.add(this.Eh|0,this.El|0,b|0,T|0),{h:P,l:B}=ee.add(this.Fh|0,this.Fl|0,P|0,B|0),{h:I,l:_}=ee.add(this.Gh|0,this.Gl|0,I|0,_|0),{h:V,l:R}=ee.add(this.Hh|0,this.Hl|0,V|0,R|0),this.set(n,i,o,a,u,l,h,v,b,T,P,B,I,_,V,R)}roundClean(){ki.fill(0),_i.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var x0=wS(()=>new v0);var hk=Ze(Gi(),1),pk="ed25519 seed",yk=2147483648,gk=new RegExp("^m(\\/[0-9]+')+$"),e2=e=>e.replace("'",""),mk=e=>{let r=Yf.create(x0,pk).update(Ac(e)).digest(),n=r.slice(0,32),i=r.slice(32);return{key:n,chainCode:i}},bk=({key:e,chainCode:t},r)=>{let n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);let o=new Uint8Array(1+e.length+n.byteLength);o.set(new Uint8Array(1).fill(0)),o.set(e,1),o.set(new Uint8Array(n,0,n.byteLength),e.length+1);let a=Yf.create(x0,t).update(o).digest(),u=a.slice(0,32),l=a.slice(32);return{key:u,chainCode:l}};var wk=e=>gk.test(e)?!e.split("/").slice(1).map(e2).some(isNaN):!1,S0=(e,t,r=yk)=>{if(!wk(e))throw new Error("Invalid derivation path");let{key:n,chainCode:i}=mk(t);return e.split("/").slice(1).map(e2).map(a=>parseInt(a,10)).reduce((a,u)=>bk(a,u+r),{key:n,chainCode:i})};S();A();var t2=Ze(Gi(),1);var A0=32,uc=class extends Ws{constructor(t){if(super(),typeof t=="string"?this.data=Xt(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==A0)throw new Error(`Invalid public key input. Expected ${A0} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Qn.ED25519}async verify(t,r){let n;if(typeof r=="string"){let i=ZS(r);if(i.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!c0(this.toRawBytes(),i.publicKey))throw new Error("Signature does not match public key");n=i.signature}else n=r;return t2.default.sign.detached.verify(t,n,this.toRawBytes())}};uc.SIZE=A0;var E0="m/44'/784'/0'/0'/0'",fc=class e extends Gf{constructor(t){super(),t?this.keypair=t:this.keypair=Lo.default.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new e(Lo.default.sign.keyPair())}static fromSecretKey(t,r){if(typeof t=="string"){let o=JS(t);if(o.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${o.schema}`);return this.fromSecretKey(o.secretKey,r)}let n=t.length;if(n!==cc)throw new Error(`Wrong secretKey size. Expected ${cc} bytes, got ${n}.`);let i=Lo.default.sign.keyPair.fromSeed(t);if(!r||!r.skipValidation){let a=new TextEncoder().encode("sui validation"),u=Lo.default.sign.detached(a,i.secretKey);if(!Lo.default.sign.detached.verify(a,u,i.publicKey))throw new Error("provided secretKey is invalid")}return new e(i)}getPublicKey(){return new uc(this.keypair.publicKey)}getSecretKey(){return XS(this.keypair.secretKey.slice(0,cc),this.getKeyScheme())}async sign(t){return Lo.default.sign.detached(t,this.keypair.secretKey)}static deriveKeypair(t,r){if(r==null&&(r=E0),!w0(r))throw new Error("Invalid derivation path");let{key:n}=S0(r,QS(t));return e.fromSecretKey(n)}static deriveKeypairFromSeed(t,r){if(r==null&&(r=E0),!w0(r))throw new Error("Invalid derivation path");let{key:n}=S0(r,t);return e.fromSecretKey(n)}};var r2=()=>({type:"keyPair",sign:async(e,t)=>{let r=fc.fromSecretKey(e.privateKey);try{let n;switch(t.signingType){case"personalMessage":{n=await r.signPersonalMessage(t.message);break}case"transaction":{n=await r.signTransaction(t.transaction);break}}return Promise.resolve({status:"success",signature:n.signature})}catch(n){return console.error(n),Promise.resolve(nt("invalidMessageEncoding"))}}});S();A();var Xf=class{#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);let n=r.chainType;switch(n){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return this.#e.keyPair[n].sign(t,r);case"eip155":return this.#e.keyPair[n].sign(t,r);case"solana":return this.#e.keyPair[n].sign(t,r);case"sui":return this.#e.keyPair[n].sign(t,r)}}async signWithHardware(t,r,n){return this.#e.ledger.sign(t,r,n)}async signWithSolanaSeedVault(t,r,n){return this.#e.seedVault.sign(t,r,n)}};S();A();var n2=e=>Qd.safeParse(e).success;S();A();var vk=e=>({getSeed:t=>xk(e,t),setSeed:(t,r)=>Sk(e,t,r),getClientJWTSigner:(t,r)=>Ak(e,t,r),setClientJWTSigner:(t,r,n)=>Ek(e,t,r,n),removeSeeds:t=>i2(e,t),removeClientJWTKeypairs:t=>o2(e,t),clear:async()=>{await i2(e,"all"),await o2(e,"all")}}),Vi=`${Yr}.cache.secrets`,T0=e=>`${Yr}.cache.seed.${e}`,I0=e=>`${Yr}.cache.client-jwt.${e}`,xk=async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let n=T0(r),i=null;try{i=await t.getSecureValue(n)}catch{}if(!i)return null;let{bytes:o,encoding:a}=i.seed;return new Uint8Array(Buffer.from(o,a))},Sk=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i)=>{if(!e())return;let o=T0(n);await r.setSecureValue(o,{version:1,identifier:n,seed:{bytes:Buffer.from(i).toString("base64"),encoding:"base64"}});let a=await t.get(Vi);if(!a)a={version:1,seedIdentifiers:[n],clientJWTKeypairIdentifiers:[]};else{let u=new Set(a.seedIdentifiers);u.add(n),a.seedIdentifiers=Array.from(u)}await t.set(Vi,a)},i2=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(Vi);if(!n)return;let i=r==="all"?n.seedIdentifiers:r,o=new Set(i),a=n.seedIdentifiers.filter(u=>o.has(u));await t.removeSecureValue(a.map(T0)),await e.set(Vi,{version:1,seedIdentifiers:n.seedIdentifiers.filter(u=>!o.has(u)),clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers??[]})},Ak=async({isEnabled:e,secretsStorage:t},r,n)=>{if(!e())return null;let i=I0(r),o=null;try{o=await t.getSecureValue(i)}catch{}if(!o||!o.keyPairs[n])return null;let a=o.keyPairs[n],u=new Uint8Array(Buffer.from(a.p256pubkey.bytes,a.p256pubkey.encoding)),l=new Uint8Array(Buffer.from(a.p256privkey.bytes,a.p256privkey.encoding));return{p256pubkey:u,p256privkey:l}},Ek=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i,o)=>{if(!e())return;let a=I0(n),u=await r.getSecureValue(a)??{version:1,identifier:n,keyPairs:{}};u.keyPairs[i]={p256pubkey:{bytes:Zr(Buffer.from(o.p256pubkey)),encoding:"base64"},p256privkey:{bytes:Zr(Buffer.from(o.p256privkey)),encoding:"base64"}},await r.setSecureValue(a,u);let l=await t.get(Vi);if(!l)l={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[n]};else{let h=new Set(l.clientJWTKeypairIdentifiers??[]);h.add(n),l.clientJWTKeypairIdentifiers=Array.from(h)}await t.set(Vi,l)},o2=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(Vi);if(!n||!n.clientJWTKeypairIdentifiers||n.clientJWTKeypairIdentifiers.length===0)return;let i=r==="all"?n.clientJWTKeypairIdentifiers:r,o=new Set(i);await t.removeSecureValue(i.map(I0)),await e.set(Vi,{version:1,seedIdentifiers:n.seedIdentifiers,clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers.filter(a=>!o.has(a))})};S();A();S();A();S();A();S();A();S();A();async function P0(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}S();A();var f2=Ze(zi());S();A();S();A();function M0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Tk(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function s2(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Ik(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");M0(e.outputLen),M0(e.blockLen)}function Pk(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Mk(e,t){s2(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Bk={number:M0,bool:Tk,bytes:s2,hash:Ik,exists:Pk,output:Mk},or=Bk;S();A();S();A();S();A();var kk={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Gs=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),gn=(e,t)=>e<<32-t|e>>>t,_k=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!_k)throw new Error("Non little-endian hardware is not supported");var bj=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Vk(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Ni(e){if(typeof e=="string"&&(e=Vk(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}var zs=class{clone(){return this._cloneInto()}},Nk=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function a2(e,t){if(t!==void 0&&(typeof t!="object"||!Nk(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function Oi(e){let t=n=>e().update(Ni(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}var Qf=class extends zs{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,or.hash(t);let n=Ni(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return or.exists(this),this.iHash.update(t),this}digestInto(t){or.exists(this),or.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:a,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=a,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},el=(e,t,r)=>new Qf(e,t).update(r).digest();el.create=(e,t)=>new Qf(e,t);function Ok(e,t,r,n){or.hash(e);let i=a2({dkLen:32,asyncTick:10},n),{c:o,dkLen:a,asyncTick:u}=i;if(or.number(o),or.number(a),or.number(u),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let l=Ni(t),h=Ni(r),v=new Uint8Array(a),b=el.create(e,l),T=b._cloneInto().update(h);return{c:o,dkLen:a,asyncTick:u,DK:v,PRF:b,PRFSalt:T}}function Uk(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function c2(e,t,r,n){let{c:i,dkLen:o,DK:a,PRF:u,PRFSalt:l}=Ok(e,t,r,n),h,v=new Uint8Array(4),b=Gs(v),T=new Uint8Array(u.outputLen);for(let P=1,B=0;B<o;P++,B+=u.outputLen){let I=a.subarray(B,B+u.outputLen);b.setInt32(0,P,!1),(h=l._cloneInto(h)).update(v).digestInto(T),I.set(T.subarray(0,I.length));for(let _=1;_<i;_++){u._cloneInto(h).update(T).digestInto(T);for(let V=0;V<I.length;V++)I[V]^=T[V]}}return Uk(u,l,a,h,T)}S();A();S();A();function Lk(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),a=Number(r>>i&o),u=Number(r&o),l=n?4:0,h=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+h,u,n)}var Zs=class extends zs{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Gs(this.buffer)}update(t){or.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=Ni(t);let o=t.length;for(let a=0;a<o;){let u=Math.min(i-this.pos,o-a);if(u===i){let l=Gs(t);for(;i<=o-a;a+=i)this.process(l,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){or.exists(this),or.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let b=a;b<i;b++)r[b]=0;Lk(n,i-8,BigInt(this.length*8),o),this.process(n,0);let u=Gs(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=l/4,v=this.get();if(h>v.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)u.setUint32(4*b,v[b],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:a,pos:u}=this;return t.length=i,t.pos=u,t.finished=o,t.destroyed=a,i%r&&t.buffer.set(n),t}};var Rk=(e,t,r)=>e&t^~e&r,Ck=(e,t,r)=>e&t^e&r^t&r,Dk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ui=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Li=new Uint32Array(64),tl=class extends Zs{constructor(){super(64,32,8,!1),this.A=Ui[0]|0,this.B=Ui[1]|0,this.C=Ui[2]|0,this.D=Ui[3]|0,this.E=Ui[4]|0,this.F=Ui[5]|0,this.G=Ui[6]|0,this.H=Ui[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:a,G:u,H:l}=this;return[t,r,n,i,o,a,u,l]}set(t,r,n,i,o,a,u,l){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=a|0,this.G=u|0,this.H=l|0}process(t,r){for(let b=0;b<16;b++,r+=4)Li[b]=t.getUint32(r,!1);for(let b=16;b<64;b++){let T=Li[b-15],P=Li[b-2],B=gn(T,7)^gn(T,18)^T>>>3,I=gn(P,17)^gn(P,19)^P>>>10;Li[b]=I+Li[b-7]+B+Li[b-16]|0}let{A:n,B:i,C:o,D:a,E:u,F:l,G:h,H:v}=this;for(let b=0;b<64;b++){let T=gn(u,6)^gn(u,11)^gn(u,25),P=v+T+Rk(u,l,h)+Dk[b]+Li[b]|0,I=(gn(n,2)^gn(n,13)^gn(n,22))+Ck(n,i,o)|0;v=h,h=l,l=u,u=a+P|0,a=o,o=i,i=n,n=P+I|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,a=a+this.D|0,u=u+this.E|0,l=l+this.F|0,h=h+this.G|0,v=v+this.H|0,this.set(n,i,o,a,u,l,h,v)}roundClean(){Li.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},B0=class extends tl{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},k0=Oi(()=>new tl),qj=Oi(()=>new B0);S();A();S();A();var rl=BigInt(4294967295),_0=BigInt(32);function u2(e,t=!1){return t?{h:Number(e&rl),l:Number(e>>_0&rl)}:{h:Number(e>>_0&rl)|0,l:Number(e&rl)|0}}function Kk(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:a}=u2(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}var qk=(e,t)=>BigInt(e>>>0)<<_0|BigInt(t>>>0),Hk=(e,t,r)=>e>>>r,jk=(e,t,r)=>e<<32-r|t>>>r,Fk=(e,t,r)=>e>>>r|t<<32-r,Wk=(e,t,r)=>e<<32-r|t>>>r,$k=(e,t,r)=>e<<64-r|t>>>r-32,zk=(e,t,r)=>e>>>r-32|t<<64-r,Gk=(e,t)=>t,Zk=(e,t)=>e,Yk=(e,t,r)=>e<<r|t>>>32-r,Jk=(e,t,r)=>t<<r|e>>>32-r,Xk=(e,t,r)=>t<<r-32|e>>>64-r,Qk=(e,t,r)=>e<<r-32|t>>>64-r;function e5(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var t5=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),r5=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,n5=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),i5=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,o5=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),s5=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,a5={fromBig:u2,split:Kk,toBig:qk,shrSH:Hk,shrSL:jk,rotrSH:Fk,rotrSL:Wk,rotrBH:$k,rotrBL:zk,rotr32H:Gk,rotr32L:Zk,rotlSH:Yk,rotlSL:Jk,rotlBH:Xk,rotlBL:Qk,add:e5,add3L:t5,add3H:r5,add4L:n5,add4H:i5,add5H:s5,add5L:o5},Le=a5;var[c5,u5]=Le.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ri=new Uint32Array(80),Ci=new Uint32Array(80),Ys=class extends Zs{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:a,Dh:u,Dl:l,Eh:h,El:v,Fh:b,Fl:T,Gh:P,Gl:B,Hh:I,Hl:_}=this;return[t,r,n,i,o,a,u,l,h,v,b,T,P,B,I,_]}set(t,r,n,i,o,a,u,l,h,v,b,T,P,B,I,_){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=a|0,this.Dh=u|0,this.Dl=l|0,this.Eh=h|0,this.El=v|0,this.Fh=b|0,this.Fl=T|0,this.Gh=P|0,this.Gl=B|0,this.Hh=I|0,this.Hl=_|0}process(t,r){for(let N=0;N<16;N++,r+=4)Ri[N]=t.getUint32(r),Ci[N]=t.getUint32(r+=4);for(let N=16;N<80;N++){let H=Ri[N-15]|0,K=Ci[N-15]|0,C=Le.rotrSH(H,K,1)^Le.rotrSH(H,K,8)^Le.shrSH(H,K,7),q=Le.rotrSL(H,K,1)^Le.rotrSL(H,K,8)^Le.shrSL(H,K,7),U=Ri[N-2]|0,G=Ci[N-2]|0,x=Le.rotrSH(U,G,19)^Le.rotrBH(U,G,61)^Le.shrSH(U,G,6),s=Le.rotrSL(U,G,19)^Le.rotrBL(U,G,61)^Le.shrSL(U,G,6),f=Le.add4L(q,s,Ci[N-7],Ci[N-16]),d=Le.add4H(f,C,x,Ri[N-7],Ri[N-16]);Ri[N]=d|0,Ci[N]=f|0}let{Ah:n,Al:i,Bh:o,Bl:a,Ch:u,Cl:l,Dh:h,Dl:v,Eh:b,El:T,Fh:P,Fl:B,Gh:I,Gl:_,Hh:V,Hl:R}=this;for(let N=0;N<80;N++){let H=Le.rotrSH(b,T,14)^Le.rotrSH(b,T,18)^Le.rotrBH(b,T,41),K=Le.rotrSL(b,T,14)^Le.rotrSL(b,T,18)^Le.rotrBL(b,T,41),C=b&P^~b&I,q=T&B^~T&_,U=Le.add5L(R,K,q,u5[N],Ci[N]),G=Le.add5H(U,V,H,C,c5[N],Ri[N]),x=U|0,s=Le.rotrSH(n,i,28)^Le.rotrBH(n,i,34)^Le.rotrBH(n,i,39),f=Le.rotrSL(n,i,28)^Le.rotrBL(n,i,34)^Le.rotrBL(n,i,39),d=n&o^n&u^o&u,y=i&a^i&l^a&l;V=I|0,R=_|0,I=P|0,_=B|0,P=b|0,B=T|0,{h:b,l:T}=Le.add(h|0,v|0,G|0,x|0),h=u|0,v=l|0,u=o|0,l=a|0,o=n|0,a=i|0;let p=Le.add3L(x,f,y);n=Le.add3H(p,G,s,d),i=p|0}({h:n,l:i}=Le.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:a}=Le.add(this.Bh|0,this.Bl|0,o|0,a|0),{h:u,l}=Le.add(this.Ch|0,this.Cl|0,u|0,l|0),{h,l:v}=Le.add(this.Dh|0,this.Dl|0,h|0,v|0),{h:b,l:T}=Le.add(this.Eh|0,this.El|0,b|0,T|0),{h:P,l:B}=Le.add(this.Fh|0,this.Fl|0,P|0,B|0),{h:I,l:_}=Le.add(this.Gh|0,this.Gl|0,I|0,_|0),{h:V,l:R}=Le.add(this.Hh|0,this.Hl|0,V|0,R|0),this.set(n,i,o,a,u,l,h,v,b,T,P,B,I,_,V,R)}roundClean(){Ri.fill(0),Ci.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},V0=class extends Ys{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},N0=class extends Ys{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},O0=class extends Ys{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},U0=Oi(()=>new Ys),Jj=Oi(()=>new V0),Xj=Oi(()=>new N0),Qj=Oi(()=>new O0);var l5=Ze(Gi());S();A();var L0=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],nF=new Set(L0);var d5=(e,t,r,n,i)=>{let o;switch(i){case"rmd160":case"md5":case"sha":throw new Error(`${i} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${i} is supported by noble, but we don't need it for bip39`);case"sha256":o=k0;break;case"sha512":o=U0;break}return c2(o,e,t,{c:r,dkLen:n})},h5=(e,t,r)=>{for(;e.length<r;)e=t+e;return e},l2=e=>e.map(t=>h5(t.toString(2),"0",8)).join(""),p5=e=>parseInt(e,2),y5=e=>{let r=e.length*8/32,n=k0(e);return l2(Array.from(n)).slice(0,r)};var R0=async e=>{let t=L0;if(e.length<16)throw new Error("LessThanTwelve");if(e.length>32)throw new Error("MoreThanTwentyFour");if(e.length%4!==0)throw new Error("WrongWord");let r,n;try{r=l2(Array.from(e))}catch{throw new Error("InvalidEntropyBits")}try{n=y5(e)}catch{throw new Error("InvalidChecksumBits")}let o=(r+n).match(/(.{1,11})/g);if(!o)throw new Error("InvalidChecksum");let a=o.map(h=>{let v=p5(h);return t[v]}),u=f2.Buffer.from(a.join(" "));return{seed:await P0({mnemonic:u,pbkdf2:d5}),mnemonic:u}};S();A();var g5=Ze(Gi()),mF=new RegExp("^m(\\/[0-9]+')+$");S();A();async function Di(e,t){let r=await rm(e,t);if(!r)throw new Ji;let n=br.from(r.entropy);return r.entropy.fill(0),n}async function Ct(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let o=await Di(e,t),{seed:a}=await o.foldAsync(R0);r=a,await e.secureCache.setSeed(t,r)}let i=br.from(r);return r.fill(0),i}S();A();var C0=Ze(Do());function Ro(e){return e.fold(C0.keccak256)}function Ki(e,t,r){let n=qn[r];return C0.keccak256(`${e}:${t}:${n}`)}function Bn(e,t,r,n){let i={};for(let o of n){let{publicKey:a}=e.keypairGenerator.generateKeypairFromSeed(t,r,o),u=oa.getAddressType(o);switch(o){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":{i[u]={chainType:u,pathType:o,publicKey:a,addresses:Object.values(jt).reduce((l,h)=>({...l,[h]:wr({publicKey:a,addressType:u,networkID:h})}),{})};break}case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44Change":case"bip44":case"deprecated":{i[u]={chainType:u,pathType:o,publicKey:wr({publicKey:a,addressType:u})};break}case"bip44Sui":{i[u]={chainType:u,pathType:o,publicKey:a,address:wr({publicKey:a,addressType:u})};break}default:Ye(o)}}return i}async function d2(e,t){let r=new Set,n=await it(e);for(let o of n)o.type==="seed"&&o.seedIdentifier===t&&qn[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return h2(e,t,i)}async function h2(e,t,r){try{return await m5(e,t,r)}catch(n){if(n instanceof oi)return await h2(e,t,r+1);throw n}}async function m5(e,t,r){let n=await Ct(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=Gr(i),a=await Ki(t,r,o[0]),u={version:1,type:"seed",identifier:a,seedIdentifier:t,derivationIndex:r,chains:Bn(e,n,r,o)};return await Ft(e,u,!1),u}S();A();var v2=Ze(cA());var x2=Ze(Fy()),S2=Ze(w2()),A2=Ze(Do());function A5(e,t,r){let n=qn[r];return A2.keccak256(`${e}:${t}:${n}`)}async function E2(e,t,r){let n=[];for(let i of r){if(i.addresses.length===0&&i.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let o=i.addresses[0]?.pathType||i.publicKeys[0]?.pathType,a=A5(t,i.derivationIndex,o);x2.initEccLib(v2);let u=(0,S2.ECPairFactory)(v2),l={...i.addresses.reduce((v,b)=>{let T=oa.getAddressType(b.pathType);switch(T){case"eip155":case"solana":{v[T]={chainType:T,pathType:b.pathType,publicKey:b.value};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw new Error("Bitcoin accounts should be using public key not computed addresses");case"sui":throw new Pl("add ledger account");default:Ye(T)}return v},{}),...i.publicKeys.reduce((v,b)=>{let T=oa.getAddressType(b.pathType);switch(T){case"eip155":case"solana":throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let P=u.fromPublicKey(Buffer.from(b.value,"hex")),B=new Uint8Array(P.publicKey);v[T]={chainType:T,pathType:b.pathType,publicKey:B,addresses:Object.values(jt).reduce((I,_)=>({...I,[_]:wr({publicKey:B,addressType:T,networkID:_})}),{})};break}case"sui":throw new Pl("add ledger account");default:Ye(T)}return v},{})},h={version:1,type:"ledger",identifier:a,ledgerGroupIdentifier:t,derivationIndex:i.derivationIndex,chains:l};n.push(h),await Ft(e,h)}return n}S();A();var T2=Ze(Do());function E5(e){return T2.keccak256(e)}async function I2(e,t,r,n){let i=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),o=await cr(e),a=E5(i.publicKey);if((o?.privateKeyIdentifiers??[]).includes(a))throw new Nl;let h={version:1,identifier:a,name:n,chainType:t,privateKey:Buffer.from(i.privateKey)},v=a,b;switch(t){case"eip155":case"solana":{b={version:1,type:"privateKey",identifier:v,privateKeyIdentifier:a,publicKey:wr({publicKey:i.publicKey,addressType:t}),chainType:t};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{b={version:1,type:"privateKey",identifier:v,privateKeyIdentifier:a,publicKey:i.publicKey,addresses:Object.values(jt).reduce((T,P)=>({...T,[P]:wr({publicKey:i.publicKey,addressType:t,networkID:P})}),{}),chainType:t};break}case"sui":{b={version:1,type:"privateKey",identifier:v,privateKeyIdentifier:a,publicKey:i.publicKey,address:wr({publicKey:i.publicKey,addressType:t}),chainType:t};break}default:Ye(t)}if(!b)throw new Error("unable to create a private key account based on the address type");return await Ft(e,b),await nm(e,h),b}S();A();var P2=Ze(Do());function T5(e){return P2.keccak256(e)}async function M2(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new _l;let n=T5(r),i={version:1,type:"readOnly",identifier:n,addresses:t};return await Ft(e,i),i}S();A();async function B2(e,t){let r=new Set,n=await it(e);for(let o of n)o.type==="seedless"&&o.seedIdentifier===t&&qn[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return k2(e,t,i)}async function k2(e,t,r){try{return await I5(e,t,r)}catch(n){if(n instanceof oi)return await k2(e,t,r+1);throw n}}async function I5(e,t,r){let n=await Ct(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=Gr(i),a=await Ki(t,r,o[0]),u={version:1,type:"seedless",identifier:a,seedIdentifier:t,derivationIndex:r,chains:Bn(e,n,r,o)};return await Ft(e,u,!1),u}S();A();S();A();S();A();async function Qs(e,t){let r=await cr(e),n=Ro(t),i=r?.seedIdentifiers??[],o=r?.seedlessIdentifiers??[];return i.concat(o).includes(n)}async function il(e,t,r,n){if((await Kc(e)).length>0)throw new Gy;if(n.length===0)throw new Vl;if(await Qs(e,t))throw new ca;let a=Ro(t),u=t.fold(v=>({version:1,identifier:a,name:r,entropy:new Uint8Array(v)}));await om(e,u);let l=[],h=await Ct(e,a);for(let v of n){let b=Ki(a,v.derivationIndex,v.derivationPathTypes[0]),T=Bn(e,h,v.derivationIndex,v.derivationPathTypes),P={version:1,type:"seedless",identifier:b,seedIdentifier:a,derivationIndex:v.derivationIndex,chains:T};await Ft(e,P),l.push(P)}return l}async function _2(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=Gr(n);return(await il(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}S();A();S();A();async function ol(e,t,r,n,i=!1){let o=await Qs(e,t);if(!i&&o)throw new ca;let a=Ro(t),u=t.fold(v=>({version:1,identifier:a,name:r,entropy:new Uint8Array(v)}));await im(e,u);let l=[],h=await Ct(e,a);for(let v of n){let b=await Ki(a,v.derivationIndex,v.derivationPathTypes[0]),T=Bn(e,h,v.derivationIndex,v.derivationPathTypes),P={version:1,type:"seed",identifier:b,seedIdentifier:a,derivationIndex:v.derivationIndex,chains:T};await Ft(e,P),l.push(P)}return l}async function V2(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=Gr(n);return(await ol(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}S();A();var N2=Ze(Do());function P5(e){return N2.keccak256(e)}async function O2(e,t){let r=[];for(let{publicKey:n,derivationPath:i,authToken:o}of t){let a=P5(n),u={version:1,type:"seedVault",identifier:a,derivationPath:i,authToken:o,publicKey:n,chainType:"solana"};r.push(u),await Ft(e,u)}return r}S();A();S();A();async function sl(e,t,r){let i=(await it(e)).find(o=>o.identifier===t);if(!i)throw new ii;switch(i.type){case"seed":case"seedless":{let o=i.chains[r]?.pathType;if(!o)throw new Ko;let a=await Ct(e,i.seedIdentifier),u=e.keypairGenerator.generateKeypairFromSeed(a,i.derivationIndex,o);return br.from(u.privateKey)}case"privateKey":{let o=await zo(e,i.privateKeyIdentifier);if(o.chainType!==r)throw new Ko;let a=e.keypairGenerator.generateKeypairFromPrivateKey(br.from(o.privateKey),r);return br.from(a.privateKey)}case"ledger":case"seedVault":throw new Bl;case"readOnly":throw new kl;default:(o=>{throw new Error("invalid account type")})(i)}}S();A();S();A();S();A();function H0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function M5(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function U2(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function B5(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");H0(e.outputLen),H0(e.blockLen)}function k5(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function _5(e,t){U2(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var V5={number:H0,bool:M5,bytes:U2,hash:B5,exists:k5,output:_5},sr=V5;S();A();var al=class extends Go{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,sr.hash(t);let n=ai(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return sr.exists(this),this.iHash.update(t),this}digestInto(t){sr.exists(this),sr.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:a,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=a,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},j0=(e,t,r)=>new al(e,t).update(r).digest();j0.create=(e,t)=>new al(e,t);function N5(e,t,r,n){sr.hash(e);let i=cm({dkLen:32,asyncTick:10},n),{c:o,dkLen:a,asyncTick:u}=i;if(sr.number(o),sr.number(a),sr.number(u),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let l=ai(t),h=ai(r),v=new Uint8Array(a),b=j0.create(e,l),T=b._cloneInto().update(h);return{c:o,dkLen:a,asyncTick:u,DK:v,PRF:b,PRFSalt:T}}function O5(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function L2(e,t,r,n){let{c:i,dkLen:o,DK:a,PRF:u,PRFSalt:l}=N5(e,t,r,n),h,v=new Uint8Array(4),b=Zo(v),T=new Uint8Array(u.outputLen);for(let P=1,B=0;B<o;P++,B+=u.outputLen){let I=a.subarray(B,B+u.outputLen);b.setInt32(0,P,!1),(h=l._cloneInto(h)).update(v).digestInto(T),I.set(T.subarray(0,I.length));for(let _=1;_<i;_++){u._cloneInto(h).update(T).digestInto(T);for(let V=0;V<I.length;V++)I[V]^=T[V]}}return O5(u,l,a,h,T)}S();A();S();A();function U5(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),a=Number(r>>i&o),u=Number(r&o),l=n?4:0,h=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+h,u,n)}var cl=class extends Go{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Zo(this.buffer)}update(t){sr.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=ai(t);let o=t.length;for(let a=0;a<o;){let u=Math.min(i-this.pos,o-a);if(u===i){let l=Zo(t);for(;i<=o-a;a+=i)this.process(l,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){sr.exists(this),sr.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let b=a;b<i;b++)r[b]=0;U5(n,i-8,BigInt(this.length*8),o),this.process(n,0);let u=Zo(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=l/4,v=this.get();if(h>v.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)u.setUint32(4*b,v[b],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:a,pos:u}=this;return t.length=i,t.pos=u,t.finished=o,t.destroyed=a,i%r&&t.buffer.set(n),t}};var L5=(e,t,r)=>e&t^~e&r,R5=(e,t,r)=>e&t^e&r^t&r,C5=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Hi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ji=new Uint32Array(64),ul=class extends cl{constructor(){super(64,32,8,!1),this.A=Hi[0]|0,this.B=Hi[1]|0,this.C=Hi[2]|0,this.D=Hi[3]|0,this.E=Hi[4]|0,this.F=Hi[5]|0,this.G=Hi[6]|0,this.H=Hi[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:a,G:u,H:l}=this;return[t,r,n,i,o,a,u,l]}set(t,r,n,i,o,a,u,l){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=a|0,this.G=u|0,this.H=l|0}process(t,r){for(let b=0;b<16;b++,r+=4)ji[b]=t.getUint32(r,!1);for(let b=16;b<64;b++){let T=ji[b-15],P=ji[b-2],B=Xr(T,7)^Xr(T,18)^T>>>3,I=Xr(P,17)^Xr(P,19)^P>>>10;ji[b]=I+ji[b-7]+B+ji[b-16]|0}let{A:n,B:i,C:o,D:a,E:u,F:l,G:h,H:v}=this;for(let b=0;b<64;b++){let T=Xr(u,6)^Xr(u,11)^Xr(u,25),P=v+T+L5(u,l,h)+C5[b]+ji[b]|0,I=(Xr(n,2)^Xr(n,13)^Xr(n,22))+R5(n,i,o)|0;v=h,h=l,l=u,u=a+P|0,a=o,o=i,i=n,n=P+I|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,a=a+this.D|0,u=u+this.E|0,l=l+this.F|0,h=h+this.G|0,v=v+this.H|0,this.set(n,i,o,a,u,l,h,v)}roundClean(){ji.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},F0=class extends ul{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},W0=ad(()=>new ul),wz=ad(()=>new F0);S();A();S();A();var dc=new Error("Unknown error"),fl=new Error("Invalid entropy length"),lc=new Error("Invalid mn*monic sentence length"),G0=new Error("Invalid checksum"),R2=new RangeError("Invalid mn*monic word"),z0=new RangeError("Invalid wordlist"),Z0=new RangeError("Invalid wordlist index"),kr=(e,t)=>{if(!e)throw t};function Fi(e){kr(e>=128,fl),kr(e<=256,fl),kr(e%32===0,fl)}function hc(e){kr(e>=12,lc),kr(e<=24,lc),kr(e%3===0,lc)}function ea(e){kr(e.length===2048,z0),kr(e.every(t=>typeof t=="string"),z0)}function Y0(e,t){return hc(e),t(e*4/3)}async function ll(e,t){let r=e.length*8;Fi(r);let n=r/32,i=await t(e),[o]=i,a=8-n,u=o>>>a<<a>>>0,l=new Uint8Array(e.length+1);return l.set(e,0),l[l.length-1]=u,l}function dl(e){let t=(e.length-1)*8;Fi(t);let r=t/32,n=(t+r)/11,i=new ArrayBuffer(n*4),o=new DataView(i),a=0,u=0,l=0;for(let h of e)if(l+=8,u|=h<<32-l,u>>>=0,l>=11){let v=u>>>21;kr(v>=0&&v<=2047,Z0),o.setUint32(a*4,v,!0),a++,u<<=11,u>>>=0,l-=11}return kr(a===n,lc),new Uint32Array(i)}function C2(e){let t=e.length;hc(t);let r=11,n=e.length*r,i=new ArrayBuffer(Math.ceil(n/8)),o=new DataView(i),a=new DataView(e.buffer),u=e.length,l=0,h=0,v=0,b=8;for(let T=0;T<u;T++){let P=a.getUint32(T*4,!0);kr(P<2048,Z0);let B=r;for(;B>0;){let I=32-B,_=B>=b?b:B;l|=P>>32-I-_&(1<<_)-1,h+=_,l<<=b-_,l>>>=0,B-=_,b-=_,b<=0&&(b=8),h%8===0&&(o.setUint8(v,l),v++,l=0)}}return u%8!==0&&o.setUint8(v,l),new Uint8Array(i)}function J0(e){hc(e.length);let t=C2(e),r=t.slice(0,t.length-1);return t.fill(0),r}async function ta(e,t){let r=e.length*8;Fi(r);let n=await ll(e,t),i=dl(n);return n.fill(0),i}function X0(e,t){ea(t);let r=new Set(t),n=new Uint32Array(24),i=0,o="";for(let u=0;u<e.length;u++){let l=e[u],h=l===32,v=u===e.length-1;if(v&&(o+=String.fromCharCode(l)),h||v){kr(r.has(o),R2);let b=0;for(let T of t){if(o===T)break;b++}n[i++]=b,o=""}else o+=String.fromCharCode(l)}hc(i);let a=n.slice(0,i);return n.fill(0),a}async function ra(e,t,r){let n=await ta(e,r),i=new Uint8Array(n.reduce((a,u)=>a+t[u].length+1,-1)),o=0;for(let a of n){o>0&&(i[o++]=32);let u=t[a];for(let l of u)i[o++]=l.charCodeAt(0)}return n.fill(0),i}var $0=Uint8Array.of(109,110,101,109,111,110,105,99);async function Co(e,t,r,n,i){let o=await ra(e,r,n),a=new Uint8Array($0.length+t.length);a.set($0,0),a.set(t,$0.length);let u=await i(o,a,2048,64,"sha512");return a.fill(0),o.fill(0),u}S();A();var na=Ze(tA());S();A();var pc=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function Q0(e){switch(e){case"english":return pc}}function ey(e){return t=>new e(t)}function ty(e,t){return async r=>{let n=null,i=null,o=null,a=null,u=null;try{i=J0(r),o=await ll(i,t),a=dl(o);let l=r[r.length-1],h=a[a.length-1];if(l!==h)throw G0;u=e.fromEntropy(i)}catch(l){l instanceof Error?n=l:(console.error(l),n=dc)}finally{if(i?.fill(0),o?.fill(0),a?.fill(0),n)throw n;return u}}}function ry(e,t){return async r=>{let n=null,i=null,o=null;try{i=X0(r,t),o=await e.fromIndexes(i)}catch(a){a instanceof Error?n=a:(console.error(a),n=dc)}finally{if(i?.fill(0),n)throw n;return o}}}function ny(e,t){return r=>{let n=null,i=null,o=null;try{i=Y0(r,t),o=e.fromEntropy(i)}catch(a){a instanceof Error?n=a:(console.error(a),n=dc)}finally{if(i?.fill(0),n)throw n;return o}}}var iy=class{static async webCrypto(t){let r=typeof t=="string"?await Q0(t):t;ea(r);let n=a=>self.crypto.getRandomValues(new Uint8Array(a)),i=async a=>new Uint8Array(await self.crypto.subtle.digest("SHA-256",a)),o=async(a,u,l,h,v)=>{let b="SHA-"+v.substring(3),T=await self.crypto.subtle.importKey("raw",a,"PBKDF2",!1,["deriveBits"]),P=await self.crypto.subtle.deriveBits({name:"PBKDF2",salt:u,iterations:l,hash:b},T,h*8);return new Uint8Array(P)};return class yc{static fromEntropy=ey(yc);static fromIndexes=ty(yc,i);static fromMnemonic=ry(yc,r);static fromSentenceLength=ny(yc,n);static wordlist=r;#e;constructor(u){Fi(u.length*8),this.#e=u.slice()}deriveSeed=(u=new Uint8Array)=>Co(this.#e,u,r,i,o);getEntropy=()=>this.#e.slice();getIndexes=()=>ta(this.#e,i);getMnemonic=()=>ra(this.#e,r,i);getSentenceLength=()=>{let u=this.#e.length*8,l=u/32;return(u+l)/11}}}static async nodeCrypto(t){let r=typeof t=="string"?await Q0(t):t;ea(r);let n=a=>new Uint8Array((0,na.randomBytes)(a).buffer),i=a=>new Uint8Array((0,na.createHash)("sha256").update(a).digest().buffer),o=(...a)=>new Promise((u,l)=>{(0,na.pbkdf2)(...a,(h,v)=>{if(h)return l(h);u(new Uint8Array(v.buffer))})});return class gc{static fromEntropy=ey(gc);static fromIndexes=ty(gc,i);static fromMnemonic=ry(gc,r);static fromSentenceLength=ny(gc,n);static wordlist=r;#e;constructor(u){Fi(u.length*8),this.#e=u.slice()}deriveSeed=(u=new Uint8Array)=>Co(this.#e,u,r,i,o);getEntropy=()=>this.#e.slice();getIndexes=()=>ta(this.#e,i);getMnemonic=()=>ra(this.#e,r,i);getSentenceLength=()=>{let u=this.#e.length*8,l=u/32;return(u+l)/11}}}static async customCrypto(t,r){let n=typeof t=="string"?await Q0(t):t;ea(n);let{random:i,sha256:o,pbkdf2:a}=r;return class mc{static fromEntropy=ey(mc);static fromIndexes=ty(mc,o);static fromMnemonic=ry(mc,n);static fromSentenceLength=ny(mc,i);static wordlist=n;#e;constructor(l){Fi(l.length*8),this.#e=l.slice()}deriveSeed=(l=new Uint8Array)=>Co(this.#e,l,n,o,a);getEntropy=()=>this.#e.slice();getIndexes=()=>ta(this.#e,o);getMnemonic=()=>ra(this.#e,n,o);getSentenceLength=()=>{let l=this.#e.length*8,h=l/32;return(l+h)/11}}}};async function D2(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let o=await Di(e,t);try{r=await o.foldAsync(async u=>Co(u,new Uint8Array,pc,W0,(l,h,v,b)=>L2(W0,l,h,{c:v,dkLen:b})))}catch{throw new Error("InvalidEntropyBip39")}await e.secureCache.setSeed(t,r)}let i=br.from(r);return r.fill(0),i}var D5=new Ji,K5=new Ko,q5=new ua,Je={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBip39:{status:"invalid-entropy-bip-39",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksumBits:{status:"invalid-checksum-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBits:{status:"invalid-entropy-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksum:{status:"invalid-checksum",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthLessThanTwelve:{status:"invalid-entropy-length-less-than-twelve",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthMoreThanTwentyFour:{status:"invalid-entropy-length-more-than-twenty-four",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthWrongWord:{status:"invalid-entropy-length-wrong-word",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}};async function H2(e,t=!1,r=!1){let n;try{if(n=await it(e),n.length===0)return Je.unonboarded}catch{return Je.unableToLoadAccounts}return t?H5(e,n,r):j2(e,n)}var H5=async(e,t,r)=>{let n=await j2(e,t);if(n.status!=="safely-onboarded")return n;try{let u=await sd(e);if(u?.version===3&&u?.isSafelyOnboarded)return Je.safelyOnboarded}catch{return Je.fetchIntegrityStorageError}let i=await q2(e,t,"seed",r),o=await q2(e,t,"seedless",r),a=await F5(e,t);return i.status!=="safely-onboarded"?i:o.status!=="safely-onboarded"?o:a.status!=="safely-onboarded"?a:(await od(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),Je.safelyOnboarded)},j2=async(e,t)=>{try{if((await sd(e))?.isSafelyOnboarded)return Je.safelyOnboarded}catch{return Je.fetchIntegrityStorageError}let r=await K2(e,t,"seed"),n=await K2(e,t,"seedless");return r.status!=="safely-onboarded"?r:n.status!=="safely-onboarded"?n:(await od(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),Je.safelyOnboarded)},K2=async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await Di(e,i)}catch(o){if(o instanceof Error){if(o.message===D5.message)return Je.invalidIdentifier;if(o.message.match(/ExpoSecureStorage/))return Je.fetchEntropyStorageError}return Je.internalError}return Je.safelyOnboarded},j5=e=>{if(!(e instanceof Error))return Je.invalidEntropy;let t=[[/ExpoSecureStorage/,Je.fetchEntropyStorageError],[/InvalidEntropyBip39/,Je.invalidEntropyBip39],[/LessThanTwelve/,Je.invalidEntropyLengthLessThanTwelve],[/MoreThanTwentyFour/,Je.invalidEntropyLengthMoreThanTwentyFour],[/WrongWord/,Je.invalidEntropyLengthWrongWord],[/InvalidChecksumBits/,Je.invalidChecksumBits],[/InvalidEntropyBits/,Je.invalidEntropyBits],[/InvalidChecksum/,Je.invalidChecksum]];for(let[r,n]of t)if(e.message.match(r))return n;return Je.invalidEntropy},q2=async(e,t,r,n)=>{let i=new Set;for(let o of t)o.type===r&&i.add(o.seedIdentifier);for(let o of i)try{n?await D2(e,o):await Ct(e,o)}catch(a){return j5(a)}return Je.safelyOnboarded},F5=async(e,t)=>{for(let r of t)if(r.type==="privateKey")try{await sl(e,r.identifier,r.chainType)}catch(n){if(n instanceof Error){if(n.message===K5.message)return Je.invalidPkAddressType;if(n.message===q5.message)return Je.invalidPkIdentifier;if(n.message.match(/ExpoSecureStorage/))return Je.fetchPkStorageError}return Je.invalidPk}return Je.safelyOnboarded};S();A();async function F2(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,n=await it(e);if(n.length===0)return r;let i=new Map;for(let o of n){if(o.type!=="seed"&&o.type!=="seedless")continue;let a=i.get(o.seedIdentifier);a?a.push(o):i.set(o.seedIdentifier,[o])}for(let[o,a]of i){let u;for(let l of a)if(!(l.chains&&!Hl(Object.values(l.chains)[0].pathType)))for(let h of t){if(l.chains[h])continue;u||(u=await Ct(e,o));let b=Gr([h]),T=Bn(e,u,l.derivationIndex,b);l.chains={...l.chains,...T},r=!0}}return r&&await Jr(e,n),r}S();A();S();A();var oy="m/23001'/0'";async function hl(e,t){let r;switch(t.type){case"seedless":case"seed":r=t.seedIdentifier;break;case"privateKey":r=t.privateKeyIdentifier;break}let n=await e.secureCache.getClientJWTSigner(r,oy);if(n)return{publicKey:n.p256pubkey,privateKey:n.p256privkey};let i;switch(t.type){case"seedless":case"seed":{i=(await Ct(e,t.seedIdentifier)).fold(a=>new El(a));break}case"privateKey":{let o=await zo(e,t.privateKeyIdentifier);i=new El(o.privateKey);break}}try{let o=i.derivePath({ellipticCurve:"ed25519",derivationPath:oy,bytesInPrivateKey:64}),a=Tf(o.secretKey,rc.CURVE.n),u=rc.getPublicKey(a);return await e.secureCache.setClientJWTSigner(r,oy,{p256pubkey:u,p256privkey:a}),{publicKey:u,privateKey:a}}finally{i.cleanup()}}var W5=e=>e.type==="seed"||e.type==="seedless"||e.type==="privateKey",W2=async(e,t)=>{let r=await it(e);if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let i=r.filter(W5).find(u=>u.type==="privateKey"?u.privateKeyIdentifier===t:u.seedIdentifier===t);if(!i)throw new Error("Unable to derive authentication public key for given secret identifier.");let o=await hl(e,i);return Zr(Buffer.from(o.publicKey))};S();A();async function $2(e,t){let r=await it(e);if(r.length===0)throw new ii;let n=r.filter(i=>i.identifier!==t);await Jr(e,n),await id(e)}S();A();async function z2(e,t,r){let n=await it(e);if(r<0||r>=n.length)throw new ii;let i=n.map(a=>a.identifier).indexOf(t);if(i<0)throw new ii;if(i===r)return;let o=n[i];n.splice(i,1),n.splice(r,0,o),await Jr(e,n)}S();A();async function pl(e,t,r){let n=t.chains[r]?.pathType;if(!n)return nt("invalidAddressType",`Seed Account does not contain a chain address for the chain type ${r}.`);let i=await Ct(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(i,t.derivationIndex,n)}async function G2(e,t,r){let n=await it(e),i=n.find(o=>o.identifier===t);if(!i)return nt("invalidAccountId",`Vault (${n.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isJWT"in r)switch(i.type){case"seedless":case"seed":case"privateKey":{let o=await hl(e,i);return e.vaultSigner.signWithKeypair(o,r)}default:return nt("unsupportedOperation","Invalid signingAccount type provided for paramType")}switch(i.type){case"seedless":case"seed":{switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{enabledAddressTypes:o}=await e.fetchChainAvailability(),a={},u=Object.keys(i.chains).filter(l=>ia.safeParse(l).success).filter(l=>o.includes(l));for(let l of u){let h=await pl(e,i,l);if("status"in h&&h.status==="error")return h;a[l]=h}return e.vaultSigner.signWithKeypair(a,r)}case"eip155":{let o=await pl(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}case"solana":{let o=await pl(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}case"sui":{let o=await pl(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}}break}case"privateKey":{let o=await zo(e,i.privateKeyIdentifier);if(o.chainType!==r.chainType)return nt("invalidAddressType",`Private Key account from accountID is a different chain type from params. Expected ${o.chainType}, got ${r.chainType}`);let a=e.keypairGenerator.generateKeypairFromPrivateKey(br.from(o.privateKey),r.chainType);switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return e.vaultSigner.signWithKeypair({[r.chainType]:a},r);case"eip155":return e.vaultSigner.signWithKeypair(a,r);case"solana":return e.vaultSigner.signWithKeypair(a,r);case"sui":return e.vaultSigner.signWithKeypair(a,r)}break}case"ledger":{let o=i.chains[r.chainType];if(!o)return nt("invalidAddressType",`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let a=Ny.safeParse({pathType:o.pathType,index:i.derivationIndex});if(!a.success)return nt("invalidDerivationPath","Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let u=Oy(a.data);return e.vaultSigner.signWithHardware(t,u,r)}case"seedVault":{let{authToken:o,derivationPath:a,chainType:u}=i;return u!==r.chainType?nt("invalidAddressType",`Solana Seed Vault account from accountID is a different chain type from params. Expected ${u}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(o,a,r)}case"readOnly":return nt("unsupportedOperation","Read Only Accounts cannot sign transactions.");default:(o=>{throw new Error("invalid account type")})(i)}}S();A();function sy(e){switch(e.type){case"seed":return bc(e);case"seedless":return wc(e);case"privateKey":return cy(e);case"ledger":return ay(e);case"seedVault":return uy(e);case"readOnly":return e}}function ay(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let a=t[o];if(!a)continue;let u;switch(a.chainType){case"solana":case"eip155":{let{publicKey:l,...h}=a;u={...h,address:l};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:l,...h}=a,v=Object.values(jt).reduce((b,T)=>{let P=l?l[T]:void 0;if(!P)throw new aa;return{...b,[T]:P}},{});u={...h,addresses:v};break}case"sui":{u=a;break}}i[o]=u}return{...n,chains:i}}function cy(e){switch(e.chainType){case"solana":case"eip155":{let{publicKey:t,version:r,...n}=e;return{...n,address:t}}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:t,version:r,...n}=e,i=Object.values(jt).reduce((o,a)=>{let u=t?t[a]:void 0;if(!u)throw new aa;return{...o,[a]:u}},{});return{...n,addresses:i}}case"sui":return e}}function uy(e){let{publicKey:t,version:r,...n}=e;return{...n,address:t}}function bc(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let a=t[o];if(!a)continue;let u;switch(a.chainType){case"solana":case"eip155":{let{publicKey:l,...h}=a;u={...h,address:l};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:l,...h}=a,v=Object.values(jt).reduce((b,T)=>{let P=l?l[T]:void 0;if(!P)throw new aa;return{...b,[T]:P}},{});u={...h,addresses:v};break}case"sui":{u=a;break}}i[o]=u}return{...n,chains:i}}function wc(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let a=t[o];if(!a)continue;let u;switch(a.chainType){case"solana":case"eip155":{let{publicKey:l,...h}=a;u={...h,address:l};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:l,...h}=a,v=Object.values(jt).reduce((b,T)=>{let P=l?l[T]:void 0;if(!P)throw new aa;return{...b,[T]:P}},{});u={...h,addresses:v};break}case"sui":u=a}i[o]=u}return{...n,chains:i}}S();A();var dy=Ze(ml());var $5=new Set(Object.values(Xe)),Z2=e=>e!==null&&$5.has(e),ly=e=>{},yl=e=>{let t=e.addresses.reduce((r,n)=>{try{let i=sa(n.networkId,n.address);r[i]=n.address}catch{vt.addBreadcrumb("Auth","Unable to derive AddressType from networkID and address.","error",{networkID:n.networkId,address:n.address})}return r},{});return Object.entries(t).length===0?(vt.captureError(new Error("Unable to convert synced account to read-only account. No addresses found."),"Auth"),null):{version:1,type:"readOnly",identifier:e.accountHash,addresses:t}},fy=(e,t)=>{let r=t==="seed"?"se*d":"se*dless";if(e.derivationIndex===null||e.derivationIndex<0)return vt.addBreadcrumb("Auth",`Invalid derivation index for ${r} account: ${e.derivationIndex}`,"error"),null;let n=e.addresses.reduce((o,a)=>{if(a.pathType==="privateKey")return vt.addBreadcrumb("Auth",`Invalid path type when converting synced account to ${r} account: ${a.pathType}`,"error"),o;let u=Wy(a.pathType);switch(a.pathType){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":Il(u)?o[u]={chainType:u,publicKey:Buffer.from(a.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":a.address},pathType:a.pathType}:vt.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:u,pathType:a.pathType});break;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":u==="solana"?o[u]={chainType:u,publicKey:dy.default.encode(Buffer.from(a.publicKey.replace("0x",""),"hex")),pathType:a.pathType}:vt.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:u,pathType:a.pathType});break;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":u==="eip155"?o[u]={chainType:u,publicKey:a.address,pathType:a.pathType}:vt.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:u,pathType:a.pathType});break;case"bip44Sui":u==="sui"?o[u]={chainType:u,publicKey:Sl(a.publicKey),address:a.address,pathType:a.pathType}:vt.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:u,pathType:a.pathType});break;default:ly(a.pathType)}return o},{});if(Object.entries(n).length===0)return vt.captureError(new Error(`Unable to convert synced account to ${r} account. No addresses found.`),"Auth"),null;let i=fa(e);return i?{version:1,type:t,identifier:e.accountHash,seedIdentifier:i,derivationIndex:e.derivationIndex,chains:n}:(vt.captureError(new Error(`Unable to convert synced account to ${r} account. Missing account origin.`),"Auth"),null)},Y2=e=>{let t=fa(e);if(!t)return vt.captureError(new Error("Unable to convert synced account to pk account. Missing account origin."),"Auth"),null;let r=e.addresses[0];if(!r)return vt.captureError(new Error("Unable to convert synced account to pk account. No address."),"Auth"),null;let n;try{n=sa(r.networkId,r.address)}catch{return vt.captureError(new Error("Unable to convert synced account to pk account. Unable to determine address type."),"Auth"),null}return Il(n)?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:Buffer.from(r.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":r.address},chainType:n}:n==="solana"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:dy.default.encode(Buffer.from(r.publicKey.replace("0x",""),"hex")),chainType:n}:n==="eip155"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:r.address,chainType:n}:n==="sui"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:Sl(r.publicKey),address:r.address,chainType:n}:(Ye(n),null)},J2=async(e,t)=>{let r=await it(e),n=await cr(e),i=new Set(n.seedIdentifiers),o=new Set(n.seedlessIdentifiers),a=new Set(n.privateKeyIdentifiers);for(let l=0;l<r.length;++l){let h=r[l],v=t[h.identifier];if(delete t[h.identifier],!v||h.type!=="readOnly")continue;let b=Cl(v),T=fa(v);if(!Z2(b)||!T)continue;let P=null;switch(b){case"seed":case"seedless":try{(i.has(T)||o.has(T))&&(P=fy(v,b))}catch{}break;case"privateKey":try{a.has(T)&&(P=Y2(v))}catch{}break;default:ly(b)}P&&(r[l]=P)}let u=[...r];for(let l of Object.values(t)){if(l.addresses.length===0)continue;let h=Cl(l),v=fa(l);if(!Z2(h)||!v){let b=yl(l);b&&u.push(b);continue}switch(h){case"seed":if(i.has(v)){let b=fy(l,h);b&&u.push(b)}else{let b=yl(l);b&&u.push(b)}break;case"seedless":if(o.has(v)){let b=fy(l,h);b&&u.push(b)}else{let b=yl(l);b&&u.push(b)}break;case"privateKey":if(a.has(v)){let b=Y2(l);b&&u.push(b)}else{let b=yl(l);b&&u.push(b)}break;default:ly(h)}}return await Jr(e,u),!1};function z5(e){return{addSeedWithDefaultAccount:(t,r)=>V2(e,t,r).then(bc),addAccountForExistingSeed:t=>d2(e,t).then(bc),addSeedWithMultipleAccounts:(t,r,n,i)=>ol(e,t,r,n,i).then(o=>o.map(bc)),addPrivateKeyAccount:(t,r,n)=>I2(e,t,r,n).then(cy),addLedgerAccounts:(t,r)=>E2(e,t,r).then(n=>n.map(ay)),addSolanaSeedVaultAccounts:t=>O2(e,t).then(r=>r.map(uy)),addReadonlyAccount:t=>M2(e,t),deriveAddresses:()=>F2(e),removeAccount:t=>$2(e,t),reorderAccount:(t,r)=>z2(e,t,r),exportEntropy:t=>Di(e,t),exportPrivateKey:(t,r)=>sl(e,t,r),fetchAllAccounts:()=>it(e).then(t=>t.map(sy)),fetchAllSeedMetas:()=>tm(e),fetchAllSeedlessMetas:()=>Kc(e),sign:(t,r)=>G2(e,t,r),isExistingSeed:t=>Qs(e,t),checkVaultIntegrity:t=>H2(e,t),clearVault:()=>sm(e),addSeedlessWithMultipleAccounts:(t,r,n)=>il(e,t,r,n).then(i=>i.map(wc)),addSeedlessWithDefaultAccount:(t,r)=>_2(e,t,r).then(wc),addAccountForExistingSeedless:t=>B2(e,t).then(wc),getAuthenticationPublicKey:t=>W2(e,t),syncAccounts:t=>J2(e,t)}}S();A();S();A();var FZ=ky(rg,e=>new gl(e)),gl=class{#e;constructor(t){this.#e=t}onMigrateInvalidChecksum(){this.#e.capture("migrationMultichainMigrateInvalidChecksum")}onAccountsOnlyMigrationStarted(){this.#e.capture("migrationMultichainAccountOnlyMigrationStarted")}onAccountsOnlyMigrationSettled(t){this.#e.capture("migrationMultichainAccountOnlyMigrationSettled",{data:{isSuccess:t}})}onMigrationFailureFlowOpened(){this.#e.capture("migrationFailureOpen")}onMigrationFailureUnableToFetchLegacyMnemonic(t){this.#e.capture("migrationFailureUnableToFetchLegacyMnemonic",{data:{reason:t}})}onCanStartMigrationResult(t){t.result||this.#e.capture("migrationMultichainCannotStart",{data:{reason:t.reason}})}onMigrationStarted(){this.#e.capture("migrationMultichainStarted")}onMigrationSettled(t,r){this.#e.capture("migrationMultichain",{data:{isGTM:t,isSuccess:r}})}onMigrationSecureStore(){this.#e.capture("migrationSecureStore")}};S();A();S();A();S();A();export{yA as a,Hl as b,gA as c,mA as d,ig as e,bA as f,Ic as g,la as h,lA as i,hA as j,pA as k,wA as l,vA as m,xA as n,TA as o,IA as p,PA as q,Yg as r,t3 as s,r3 as t,Lc as u,co as v,Qd as w,nt as x,th as y,Eb as z,Da as A,D1 as B,H1 as C,lS as D,pS as E,r2 as F,Xf as G,n2 as H,vk as I,Ro as J,w2 as K,iy as L,z5 as M};
/*! Bundled license information:

assert/build/internal/util/comparisons.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/base/lib/esm/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/btc-signer/index.js:
  (*! scure-btc-signer - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-ETHULGZP.js.map
