import{g as z}from"./chunk-O2GJOI3B.js";import{b as S}from"./chunk-W27Z2YZM.js";import{a as E}from"./chunk-XJTFMD4C.js";import{_ as K,c as N,rb as B}from"./chunk-RFHVH32K.js";import{a as f,b as D}from"./chunk-UCBZOSRF.js";import{a as G,g as Y}from"./chunk-B73KBMEE.js";import{a as m,b as g}from"./chunk-BB4NLGB2.js";import{a as y}from"./chunk-BTKBODVJ.js";import{N as V,_ as $,n as F}from"./chunk-LWOUUIX7.js";import{n as P,u as W}from"./chunk-ETHULGZP.js";import{Qc as C,Rc as b,Sc as I,Wc as M,ne as q,tc as O,uc as x,ye as U}from"./chunk-ERHX3GUR.js";import{a as _}from"./chunk-FI5JCZQR.js";import{S as T,Y as k}from"./chunk-W476YZUB.js";import{k as v}from"./chunk-ZIPBM4OE.js";import{a as se}from"./chunk-6MAAUKN7.js";import{f as c,h as s,n}from"./chunk-3KENBVE7.js";s();n();var j=c(y());s();n();var A=c(y());var ne=async()=>{let r=E("serviceWorkerMutexAcquire",void 0),e=D(await A.default.runtime.sendMessage(f(r)));if("error"in e)throw new Error(e.error.message);return()=>{let t=E("serviceWorkerMutexRelease",void 0);A.default.runtime.sendMessage(f(t))}},H=async r=>{let e=await ne();try{return await r()}finally{e()}};s();n();var J=c(y()),X=async(r,e,t)=>{let o=await J.default.identity.launchWebAuthFlow({interactive:t,url:e});if(!I(r,o))return b(r,o);throw new Error("Error fetching auth code")};var w=z(),ae={getClientID:M,redirectURL:j.default.identity.getRedirectURL(),fetchAuthorizationCode:(r,e,t)=>X(r,e,t)},ie={storage:new m,signer:{sign:(r,e)=>P(w,r,e),getAuthenticationPublicKey:r=>w.getAuthenticationPublicKey(r),getAllSecretIdentifiers:()=>x(w)},authConfig:ae,queryClient:B,runExclusive:H},ce=C(ie);ce.subscribe("userID",r=>{g.addUserProperties({authUserId:r})});s();n();var i=c(se());s();n();var u=class{async get(e){let t=null;try{if(t=self.localStorage.getItem(e),typeof t!="string")return null;try{return JSON.parse(t)}catch{return console.warn(`[DeprecatedLocalStorage.get] Error parsing JSON for key "${e}"`),t}}catch(o){let a=`[DeprecatedLocalStorage.get] Error getting key (${e}): ${o}`;throw new Error(a)}}async getAll(e){try{let t={};e=e||Object.keys(self.localStorage);for(let o of e)t[o]=await this.get(o);return t}catch(t){let o=`[DeprecatedLocalStorage.getAll] Error getting key(s) (${e}): ${t}`;throw new Error(o)}}async remove(e){let t=`[DeprecatedLocalStorage.remove] Error removing key(s) (${e}): Method not implemented`;throw new Error(t)}async set(e,t){let o=`[DeprecatedLocalStorage.set] Error setting key (${e}): Method not implemented`;throw new Error(o)}async setAll(e){let o=`[DeprecatedLocalStorage.setAll] Error setting key (${Object.keys(e)}): Method not implemented`;throw new Error(o)}subscribe(e){return console.warn("[DeprecatedLocalStorage.subscribe] Method not implemented"),()=>{}}async update(e){let t=`[DeprecatedLocalStorage.update] Error updating key(s) (${e}): Method not implemented`;throw new Error(t)}};var me=new m,ge=new u,pe=[...O,...N,K,W,"i18nextLng"],et=()=>{let{data:r,isFetching:e}=q(),{data:t,isFetching:o}=$(),{data:a,isFetching:Q}=T([{key:"Local Storage",storage:me},{key:"Deprecated Local Storage",storage:ge}],pe),{data:L}=V(),R=U(),l=(0,i.useCallback)(async()=>{let{version:d}=chrome.runtime.getManifest(),h=await g.getDeviceId(),oe=await R();return{"App Version":d,"Platform Information":G,"Display Language":F(_.language),"Phantom Auth":oe,"Device Id":h,"Auto Lock Timer(ms)":L,...r,...t,...a}},[r,t,a,R,L]),Z=e||o||Q,ee=(0,i.useCallback)(async d=>{d?.preventDefault();let h=await l();await k.downloadLog(h)},[l]),te=(0,i.useCallback)(()=>{S({url:Y})},[]),re=(0,i.useCallback)(()=>{S({url:v})},[]);return{appState:l,isFetching:Z,goCreateTicket:te,goSupportDesk:re,downloadLogs:ee}};export{ce as a,et as b};
//# sourceMappingURL=chunk-RW2YJBDQ.js.map
