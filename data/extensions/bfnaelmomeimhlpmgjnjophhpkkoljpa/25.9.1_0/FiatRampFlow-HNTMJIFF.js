import{a as ke,b as we}from"./chunk-CKYVDBFS.js";import{a as be}from"./chunk-6HZ5LT25.js";import"./chunk-B5RBJIEI.js";import{d as Ce}from"./chunk-WWTHUL36.js";import{b as Te}from"./chunk-NGO5FOJW.js";import"./chunk-DIDVQIO4.js";import{b as he}from"./chunk-HROBW3I6.js";import"./chunk-2P7VAWV5.js";import{a as ge}from"./chunk-SAX3UIWU.js";import"./chunk-RB5D6XZ6.js";import{Wc as ne,sd as ie}from"./chunk-PQZYPWXP.js";import"./chunk-WFPABEAU.js";import"./chunk-FIZDH5HD.js";import"./chunk-QDZH7H34.js";import"./chunk-LWOUUIX7.js";import{h as K}from"./chunk-ETHULGZP.js";import{a as le,b as me}from"./chunk-LGUE2NXS.js";import{a as se,d as de,i as ce,j as A}from"./chunk-RNP7TDDY.js";import{Cb as ee,Mb as te,Yb as oe,fe as re,gb as x,gd as ae,yb as Z}from"./chunk-ERHX3GUR.js";import"./chunk-WY7QFQOG.js";import{a as I}from"./chunk-ZTEVIBRP.js";import{C as fe,a as h,aa as ye,b as E,c as pe,h as Q,l as L,m as S,r as ue}from"./chunk-X6EPTHBD.js";import"./chunk-24ISZ5TA.js";import"./chunk-2J2WSGCG.js";import"./chunk-DHK5JDA3.js";import{a as H,m as J}from"./chunk-FI5JCZQR.js";import"./chunk-7XYHSLSH.js";import"./chunk-W476YZUB.js";import{q as U}from"./chunk-ZIPBM4OE.js";import{U as X,V as Y,c as z,ia as G}from"./chunk-HTY4DAML.js";import{a as P}from"./chunk-6MAAUKN7.js";import"./chunk-UNDMYLJW.js";import{f as M,h as k,n as w}from"./chunk-3KENBVE7.js";k();w();var D=M(P());k();w();var o=M(P());k();w();var B=M(P());k();w();var c=M(P());var xe=s=>{if(!s)return E.colors.legacy.textTertiary;if(s>0)return E.colors.legacy.accentSuccess;if(s<0)return E.colors.legacy.accentAlert},Se=c.default.memo(s=>{let{tokenAddress:n,walletAddress:r,balance:p,chainMetadata:a,currencyValue:f,currencyChange:t,isLoadingPrices:u,logoUri:e,name:d,onClick:C,onMouseEnter:b,showCurrencyValues:i=!0,hideEmptyCurrency:l=!1,showBalance:m=!0,symbol:T,type:y,tooltip:_}=s,N=n?K(n):void 0,R=T??N??"",$=f!==void 0?G(f):l?"":"\u2013",W=t!==void 0?G(t,{includePlusPrefix:!0}):l?"":"-",O=m?`${ie(p)} ${R}`:R,F=`${T??(n&&K(n))}`,v=`fungible-token-row-${x.getChainName(a.id).toLowerCase()}-${F}`;return r&&oe(a.id,r)&&(v+=`-${ee(a.id,r)}`),c.default.createElement("div",{className:g.container,"data-testid":v,onMouseEnter:b,onClick:C,role:"button"},c.default.createElement(he,{image:{type:"fungible",src:e,fallback:T||n},tokenType:y,chainMeta:a}),c.default.createElement("div",{className:g.tokenDetailContainer},c.default.createElement("div",{className:g.styledRowTop},c.default.createElement(S,{className:g.textLeft,font:"body",style:g.textLeftStyles},d),i?u?c.default.createElement(Q,{font:"caption",width:75,height:8,borderRadius:8}):c.default.createElement(S,{font:"caption",className:g.formattedCurrencyValueText},$):null),c.default.createElement("div",{className:g.styledRowBottom},c.default.createElement(S,{font:"caption",className:g.textLeft,style:{...g.textLeftStyles,color:"#777777"}},O),i?u?c.default.createElement(Q,{font:"caption",width:35,height:8,borderRadius:8}):c.default.createElement(S,{font:"caption",className:g.formattedCurrencyChangeText,style:{color:xe(t)}},W):null)))}),Fe={display:"flex",flexDirection:"row",justifyContent:"space-between",gap:16},g={container:h({backgroundColor:{base:"bgRow",hover:"bgButton"},cursor:"pointer",borderRadius:16,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"row",gap:12,padding:"base"}),tokenDetailContainer:h({flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",overflow:"hidden"}),styledRow:h({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:16}),styledRowTop:h({...Fe,marginBottom:2}),styledRowBottom:h({...Fe,marginTop:2}),textLeft:h({textAlign:"left",overflow:"hidden",wordBreak:"break-all",whiteSpace:"nowrap"}),textLeftStyles:{WebkitLineClamp:1,WebkitBoxOrient:"vertical",textOverflow:"ellipsis"},formattedCurrencyValueText:h({textAlign:"right",fontWeight:"medium"}),formattedCurrencyChangeText:h({textAlign:"right"})};var q=B.default.memo(s=>{let{data:n,index:r,style:p}=s,{listItems:a,moveToNextPage:f,availableAddresses:t}=n,u=a[r],{token:e,addressType:d}=u,{caip19:C}=e,{chainId:b}=C,i=e.caip19.resourceType==="address"?e.caip19.address:void 0,l=t?.find(m=>d?m.addressType===d&&m.networkID===b:m.networkID===b)?.address??"";return B.default.createElement("div",{key:`${e.symbol}-${e.caip19.chainId}-${i}-${r}`,style:p?{...p,top:`${parseFloat(p.top)+ke}px`}:void 0},B.default.createElement(Se,{chainMetadata:Z(e.caip19.chainId),logoUri:e.logoURI,name:e.name??"",symbol:e.symbol,tokenAddress:i,walletAddress:l,onClick:()=>f(u),type:ne(e.caip19),showBalance:!1,showCurrencyValues:!1,balance:new z(0),currencyValue:void 0,currencyChange:void 0}))},Ce);var Ae=({onSelect:s})=>{let{t:n}=J(),{fiatRampGroupedTokens:r,isSearching:p,searchResults:a,handleSearch:f,moveToNextPage:t,isLoading:u,availableAddresses:e,enabledAddressTypes:d}=Ie({onSelect:s}),C=I(),b=(0,o.useMemo)(()=>p?o.default.createElement(L,{gap:8,marginTop:16,marginBottom:96},a.map(({token:i,addressType:l},m)=>l&&!d.includes(l)?null:o.default.createElement(q,{key:`${i.symbol}-${i.caip19.chainId}-${m}`,index:m,data:{listItems:a,moveToNextPage:t,availableAddresses:e}}))):o.default.createElement(o.default.Fragment,null,o.default.createElement(ge,null),r?.groups?.map((i,l)=>o.default.createElement(L,{key:`${i.groupName}-${l}`,gap:8,marginTop:l===0?16:24,marginBottom:l===r.groups.length-1?96:0},o.default.createElement(S,{font:"bodyMedium",color:"textSecondary",align:"left",children:i.groupName}),i.tokens.map(({token:m,addressType:T},y)=>T&&!d.includes(T)?null:o.default.createElement(q,{key:`${m.symbol}-${m.caip19.chainId}-${y}`,index:y,data:{listItems:i.tokens,moveToNextPage:t,availableAddresses:e}}))))),[e,d,r?.groups,p,t,a]);return o.default.createElement(we,{isLoading:u,isEmpty:a.length===0,emptyStateText:n("noBuyOptionsAvailableInCountry"),header:o.default.createElement(fe,{id:"search",label:"Search",showLabel:!1,placeholder:n("assetListSearch"),onChange:f,maxLength:te},o.default.createElement(pe.Search,{size:16,color:"textSecondary"})),content:b,footer:o.default.createElement(L,null,o.default.createElement(ue,{onClick:()=>void C.popStack()},n("commandClose")))})},ve=Ae,Ie=({onSelect:s})=>{let{setState:n}=A(),{data:r}=re(),p=Array.from(new Set(r?.addresses?.map(y=>y.addressType))),a=ae(),{data:f,isLoading:t,isError:u}=le("web-embedded",U,H.language),{data:e=[]}=me("web-embedded",U,H.language),[d,C]=(0,o.useState)(""),b=X(d)??"",i=y=>C(y.currentTarget.value),l=d.length>0,m=Y(e,b,se),T=y=>{let{token:_,addressType:N,quickSelectDenominations:R}=y,{name:$,symbol:W,caip19:O}=_,{chainId:F}=O,v=r?.addresses.find(V=>N?V.addressType===N&&V.networkID===F:V.networkID===F)?.address??"";x.isEVMNetworkID(F)&&(v=v.toLowerCase()),a.capture("fiatOnrampFungibleSelected",{data:{networkId:F,chainId:x.getChainID(F),asset:{name:$,symbol:W,type:"fungible"}}}),n({...ce,ownerPublicKey:v,fungible:_,quickSelectDenominations:R??de}),s()};return Te(()=>void a.capture("fiatOnrampInitiated")),{fiatRampGroupedTokens:f,isSearching:l,searchResults:m,handleSearch:i,moveToNextPage:T,isLoading:t||u,availableAddresses:r?.addresses,enabledAddressTypes:p}};var bt=()=>{let s=I(),n=I(),r=A(t=>t.fungible),p=A(t=>t.reset),a=()=>{p(),s.popStack()},f=(t,u,e,d)=>{s.toStack("fiat-ramp-redirect-to-provider"),n.to("fiat-ramp-redirect-to-provider",{params:{sessionId:u,caip19:e,url:t,provider:d}})};return D.default.createElement(ye,{onClose:a,initialStep:r==null?0:1},[({nextStep:t})=>D.default.createElement(ve,{onSelect:t}),()=>D.default.createElement(be,{onClose:a,onClickBuy:f})])};export{bt as FiatRampFlow};
//# sourceMappingURL=FiatRampFlow-HNTMJIFF.js.map
