import{h as Ys}from"./chunk-QYQ24YHA.js";import{Aa as lo,Ab as Ds,Ba as Ar,Ca as or,Da as vs,Db as Rs,Ea as Es,G as xs,Gc as qs,H as io,Hc as Ws,Ic as Ks,Kb as Ls,La as Is,Lb as Ns,Lc as Qs,Pb as js,Ra as co,Ta as uo,Ua as po,Vb as xr,Wb as Vs,_b as kt,ab as ks,ac as ot,bc as Tn,cc as vr,dd as Xs,ea as Zt,ed as Js,fa as X,fc as An,ga as so,gc as _s,ha as Tr,hb as fu,hc as Er,ia as v,ib as Ps,ja as wn,jb as Os,jc as xn,ka as er,kc as fo,l as wr,la as tr,lc as Fs,ld as Zs,ma as E,mc as zs,na as j,nc as $s,oa as bt,od as ea,p as gs,pa as K,qa as w,qd as ta,r as Cs,ra as pe,rc as Hs,s as Ss,sa as rr,ta as I,u as no,ua as ao,v as ws,va as ce,vb as mo,vc as Gs,wa as rt,wb as Us,x as Ts,xa as H,xb as Bs,y as As,ya as F,yb as Ms}from"./chunk-PQZYPWXP.js";import{a as fs,c as bs,j as hs}from"./chunk-LWOUUIX7.js";import{$a as ss,Cb as to,Cd as Xt,Ce as ro,Db as ds,Gb as ps,Ge as oo,H as Xi,Hb as ms,K as Oe,L as B,S as Q,Ua as is,V as mt,W as ft,Wa as Jr,bb as as,db as Qt,eb as Zr,ee as ys,fe as Jt,gb as M,gd as ae,hb as ls,ib as Yt,rb as cs,tb as eo,xb as us,y as gn}from"./chunk-ERHX3GUR.js";import{n as qt}from"./chunk-WY7QFQOG.js";import{a as Ee,m as ee}from"./chunk-FI5JCZQR.js";import{$ as q,L as se,N as Re,Q as oe,V as ne}from"./chunk-W476YZUB.js";import{c as Kr}from"./chunk-ZIPBM4OE.js";import{U as os,Y as Cn,a as f,b as It,ba as Yr,c as Z,d as Ji,da as Sn,f as Zi,fa as Xr,ia as ns,k as es,l as Wt,o as ts,p as Kt,r as Qr,s as rs,x as Y}from"./chunk-HTY4DAML.js";import{a as k}from"./chunk-6MAAUKN7.js";import{f as x,h as a,l as mu,m as Buffer,n as l}from"./chunk-3KENBVE7.js";a();l();var we=t=>{if(t!=null&&!(t.constructor===Object&&Object.keys(t).length===0))return t},bu=t=>t??[],Ue=class extends Error{constructor(e){super(e),this.name="CollectiblesError"}},V=f.string().nullish().transform(we),Pt=f.number().nullish().transform(we),vn=f.union([V,Pt]).transform(t=>typeof t=="number"?t.toString():t),hu=f.object({name:V,symbol:V,decimals:Pt,address:V}),En=(y=>(y[y.Uninitialized=0]="Uninitialized",y[y.EditionV1=1]="EditionV1",y[y.MasterEditionV1=2]="MasterEditionV1",y[y.ReservationListV1=3]="ReservationListV1",y[y.MetadataV1=4]="MetadataV1",y[y.ReservationListV2=5]="ReservationListV2",y[y.MasterEditionV2=6]="MasterEditionV2",y[y.EditionMarker=7]="EditionMarker",y[y.UseAuthorityRecord=8]="UseAuthorityRecord",y[y.CollectionAuthorityRecord=9]="CollectionAuthorityRecord",y[y.TokenOwnedEscrow=10]="TokenOwnedEscrow",y[y.TokenRecord=11]="TokenRecord",y[y.MetadataDelegate=12]="MetadataDelegate",y))(En||{}),bo=f.nativeEnum(En),ra=f.object({price:f.number(),token:hu.nullish().transform(we)}),yu=ra.nullish().transform(we),gu=f.object({name:V,url:V,isVerified:f.coerce.boolean()}),oa=f.object({id:f.string(),isValidCollectionId:f.coerce.boolean(),name:V,description:V,externalUrl:V,imageUrl:V,isSpam:f.coerce.boolean(),spamStatus:f.nativeEnum(kt).optional().default("NOT_VERIFIED"),floorPrice:ra.nullish().transform(we),ownerCount:Pt,totalCount:Pt,tokenCount:Pt,marketplaces:f.array(gu)}),Cu=f.object({small:V,medium:V,large:V,blurhash:V}),Su=Cu.nullish().transform(we),wu=f.enum(["image","video","audio","model","other"]),Tu=f.object({url:V}),Ir=Tu.nullish().transform(we),Au=f.object({type:wu,image:Ir,video:Ir,audio:Ir,model:Ir,other:Ir,previews:Su}),xu=Au.nullish().transform(we),vu=f.object({trait_type:V,value:V.or(Pt),display_type:V}),Eu=f.object({id:f.string(),contract:f.string(),standard:f.nativeEnum(Vs)}),In=f.object({compressed:f.boolean(),merkleTree:f.string(),leafIndex:f.number()}),Iu=f.object({mint:f.string(),tokenAccount:f.string(),standard:f.nativeEnum(xr),compression:In.nullish().transform(we),programId:f.string(),mintExtensions:es(js).optional()}),ku=f.object({id:f.string(),url:f.string(),displayName:f.string(),description:f.string(),count:f.number()}),na=f.object({hash:f.string(),index:f.number(),distinctRareSats:f.number(),satributes:f.array(ku),blockNumber:f.number(),value:f.number(),backgroundImageUrl:f.string()}),Pu=f.object({firstCreatedTransactionHash:f.string(),firstCreatedInscriptionId:f.string(),inscriptionId:V,inscriptionNumber:vn,outputValue:vn,satNumber:vn,satName:V,satRarity:V,protocolName:V,utxoHash:V,utxoIndex:Pt,createdAt:f.string().nullish().transform(we),utxoDetails:na.nullish().transform(we)}),Ou=f.object({objectId:f.string().optional()}),Ab=f.object({firstCreatedTransactionHash:f.string(),firstCreatedInscriptionId:f.string(),utxoDetails:na}),Uu=f.object({listingPrice:f.string(),listingPriceUiAmount:f.string(),isNative:f.boolean(),url:f.string()}),Bu=f.union([Iu,Eu,Pu,Ou]),kn=f.object({id:ls,chain:us,name:V,symbol:V,description:V,externalUrl:V,collection:oa,media:xu,uri:V,attributes:f.array(vu).nullish().transform(bu),lastSalePrice:yu,balance:V,decimals:V,owner:V,chainData:Bu.optional(),listings:f.record(Uu).nullish().transform(we)}),Mu=oa.extend({items:f.array(kn)}),xb=f.object({items:f.array(Mu),isTrimmed:f.boolean()});var Du=f.object({networkID:Zr}),ho=Du.extend({type:f.literal("transferSPLToken"),senderAddress:eo,mint:f.string(),amount:f.union([f.instanceof(Z),f.string()]),memo:f.string().optional()}),vb=ho.extend({destination:f.string(),senderAccount:f.string(),decimals:f.number(),references:f.array(f.string()).optional(),programId:f.string()}),Eb=ho.extend({destination:f.string(),compression:In.nullish().transform(we).refine(t=>t?.compressed)}),Ib=f.object({compression:In.nullish().transform(we).refine(t=>t?.compressed),mint:f.string()}),kb=ho.extend({destination:f.string(),senderAccount:f.string(),standard:f.enum(["ProgrammableNonFungible","ProgrammableNonFungibleEdition"])}),Pb=ho.extend({destination:f.string()}),Ob=f.object({root:f.string(),proof:f.array(f.string()),merkleTree:f.string(),dataHash:f.string(),creatorHash:f.string(),leafIndex:f.number(),owner:f.string(),delegate:f.string().optional()}),ia=f.object({networkID:Qt}),Ub=ia.extend({senderAddress:eo,type:f.literal("transferERC721Evm"),destination:f.string(),amount:f.literal(1),contractAddress:f.string(),tokenID:f.string()}),Bb=ia.extend({senderAddress:eo,type:f.literal("transferERC1155Evm"),destination:f.string(),amount:f.union([f.instanceof(Z),f.string()]),contractAddress:f.string(),tokenID:f.string()}),sa=f.object({networkID:as}),Mb=sa.extend({type:f.literal("ordinal"),inscriptionId:f.string(),value:f.string(),senderAddress:f.string(),destination:f.string(),amount:f.literal(1),utxoHash:f.string(),utxoIndex:f.number()}),Db=sa.extend({type:f.literal("raresats"),hash:f.string(),index:f.number(),value:f.string(),senderAddress:f.string(),destination:f.string(),amount:f.literal(1)}),Rb=f.object({networkID:ss,type:f.literal("suiobject"),objectId:f.string(),destination:f.string(),amount:f.literal(1),senderAddress:f.string()});a();l();function ue(t){return t?.tokenAccount!==void 0}function Le(t){return t?.contract!==void 0}function Ne(t){return t!==void 0&&"firstCreatedTransactionHash"in t}function aa(t){return t!==void 0&&"objectId"in t}function yo(t){return Ne(t)&&!!t.utxoDetails}var la=t=>t.type==="transferERC721Evm",ca=t=>t.type==="transferERC1155Evm",ua=t=>"compression"in t&&!!t.compression?.compressed,da=t=>"standard"in t&&(t.standard==="ProgrammableNonFungible"||t.standard==="ProgrammableNonFungibleEdition"),pa=t=>t.type==="transferSPLToken"&&"destination"in t,ma=t=>t.type==="ordinal",fa=t=>t.type==="raresats";a();l();a();l();var Pn=x(mu());a();l();var ba=new B.PublicKey("NTYeYJ1wr4bpM5xo6zx5En44SvJFAd35zTxxNoERYqd"),Hb=new B.PublicKey("M2mx93ekt1fmXSVkTrUL9xVFHkmME8HTUi5Cyc5aF7K"),Gb="https://magiceden.io/terms-of-service.pdf";var nr=t=>{for(let e of t.instructions)for(let r of e.keys)if(r.isSigner&&r.pubkey.toBase58()===ba.toBase58())return!0;return!1},Je=t=>{switch(t){case"mainnet-beta":return 101;case"testnet":return 102;case"devnet":return 103;case"localhost":return 101}},go=t=>new Z(t).multipliedBy(B.LAMPORTS_PER_SOL).toNumber();function Co(t){let e=[2,6],r=bo.safeParse(t);return r.success&&e.includes(r.data)}var On=Pn.Buffer.from("metadata"),Ru=Pn.Buffer.from("edition"),Un=wr.toBuffer();function eh(t){let[e]=B.PublicKey.findProgramAddressSync([On,Un,t],wr);return e}function ha(t){let[e]=B.PublicKey.findProgramAddressSync([On,Un,t,Ru],wr);return e}function th(t){let[e]=B.PublicKey.findProgramAddressSync([On,Un,t],wr);return e}a();l();a();l();var Be=(t,e,r,o)=>{(!e||e>=400&&e<500)&&(q.addBreadcrumb(r,t.message,"info",o),q.captureError(t,"collectibles"))};a();l();var So=t=>{let e=!1;return{collectibles:t.reduce((o,n)=>{let i=kn.safeParse(n);return i.success?o.push(i.data):e=!0,o},[]),containsParseFailure:e}};var Lu="collectibles",Nu=new Error("Failed to fetch collectibles for addresses");async function wo(t){let e="/collectibles/v1";try{let o=(await Q.api().post(e,{addresses:t})).data,n=!!o.isTrimmed;if(!o.collectibles)throw Nu;let{collectibles:i,containsParseFailure:s}=So(o.collectibles);return s&&q.captureError(new Error("collectibles failed to parse some items"),"collectibles"),{allCollectibles:i,isTrimmed:n}}catch(r){if(ft(r)){let o=r.response?.status;Be(r,o,Lu)}throw r}}a();l();var ya=new Error("Failed to fetch spl collectible marketplace stats"),Bn=async(t,e,r)=>{let o=`/solana/nft/v1/mint/${t}/stats`,n=new URLSearchParams;n.set("chainId",e.toString()),r&&n.set("pubkey",r);let i;try{i=await Q.api().headers({Accept:"application/json"}).get(`${o}?${n.toString()}`)}catch{throw ya}if(!mt(i))throw ya;return i.data.stats};a();l();var ju="spl-listings",Vu=new Error("Failed to fetch SPL listings"),To=async t=>{let e;try{let r=t.chainId.replace("solana:",""),o=t.address,n=new URLSearchParams;n.append("chainId",r);let i=await Q.api().headers({Accept:"application/json"}).get(`/solana/nft/v1/pubkey/${o}/listings?${n.toString()}`);if(e=i.status,!mt(i))throw Vu;return i.data.filter(d=>!!d.listings?.magic_eden)}catch(r){let o=r instanceof Error?r:new Error("Non-Error was thrown during fetching of spl listings");throw Be(o,e,ju),o}};var _u=Y({seconds:10}),Fu=Y({seconds:5}),zu="CollectibleEdition";function $u(t,e){return oe({queryKey:[zu,{mintAddress:t}],async queryFn(){if(!e)return{};let r=Buffer.from(new B.PublicKey(t).toBytes()),o=ha(r),{Edition:n}=await Cs();try{let i=await n.fromAccountAddress(e,o),s=bo.safeParse(i.key);if(!s.success)throw new Error(`Invalid MetaplexTokenEdition: ${i.key}`);return{key:s.data,isMasterEdition:Co(i.key)}}catch{return{key:void 0,isMasterEdition:void 0}}}})}var Hu="SPLTokenAccountListingStats";function Gu(t,e,r){return oe({enabled:e!=="",refetchInterval:_u,gcTime:Fu,queryKey:[Hu,{cluster:t,mint:e,pubkey:r}],async queryFn({queryKey:o}){let[,{mint:n,cluster:i}]=o,s=Je(i);return await Bn(n,s,r)}})}var qu=async(t,e,r,o,n=20,i=1e3)=>{try{let s=Je(e);return await Kt(async()=>{let d=await Bn(t,s);if(!d[r])return;let m=(d[r].activities??[]).find(b=>b.signature===o);if(!m)throw new Error("no activity with that signature yet!");return m},()=>!0,n,i)}catch{}},Wu=async(t,e,r,o,n=20,i=1e3)=>{try{let s=Je(r);return await Kt(async()=>{let d=await To({address:t,chainId:`solana:${s}`});for(let p of d)if(p.listings?.[o]&&p.asset.mintPubKey===e)throw new Error("still in listings");return d},()=>!0,n,i)}catch{}},Ku=async(t,e,r=20,o=1e3)=>{try{return await Kt(async()=>{let{allCollectibles:i}=await wo(t.map(co));for(let s of i)if(ue(s.chainData)&&s.chainData.mint===e)return s;throw new Error("cant find mint in tokens")},()=>!0,r,o)}catch{}};a();l();var Dn=x(k());a();l();a();l();var Qu="collectibles",ga=new Error("Failed to fetch collectibles details for addresses");async function Ca(t){let e="/collectibles/v1/collectibles-details",r;try{let o=await Q.api().post(e,{addresses:t});if(r=o.status,!mt(o))throw ga;let n=o.data;if(!n.collectibles)throw ga;let{collectibles:i,containsParseFailure:s}=So(n.collectibles);return s&&q.captureError(new Error("collectibles failed to parse some items"),"collectibles"),i}catch(o){let n=o instanceof Error?o:new Error("Non-Error was thrown during fetching of collectibles details");throw Be(n,r,Qu),n}}var Sa=async t=>{let e=t.find(m=>M.isSolanaNetworkID(m.chainId));if(!e)throw new Error("no solana account");let{chainId:r}=e,o=await Kt(()=>To(e),()=>!0),n=o.reduce((m,b)=>({...m,[b.asset.mintPubKey]:b}),{}),i=o.map(m=>({chainId:r,address:m.asset.mintPubKey})),c=Ji(i,100).map(m=>Ca(m));return(await Promise.all(c)).flat().reduce((m,b)=>{if(!ue(b.chainData))return m;let{asset:g,listings:y}=n[b.chainData.mint];return m.push({...b,chainData:{...b.chainData,tokenAccount:g.pubkey},...y?{listings:y}:{}}),m},[])};a();l();a();l();var Ta=t=>{let e=[];for(let[r,o]of t){o.sort((i,s)=>{let c=i.name??"",d=s.name??"",p=c.localeCompare(d);if(c.localeCompare(d))return p;let m=wa(i),b=wa(s);return m.localeCompare(b)});let[n]=o;n&&e.push({..."externalUrl"in n?{externalUrl:n.externalUrl}:void 0,...n.collection,items:o})}return e.sort((r,o)=>{if(r.items.length>o.items.length)return-1;if(o.items.length>r.items.length)return 1;let n=r.name??r.id??"",i=o.name??o.id??"";return n.localeCompare(i)})};function wa(t){let e=t.chainData;return ue(e)?e.tokenAccount:Le(e)?e.id:(Ne(e),t.id)}function Aa(t){let e=new Map;for(let r of t){let o=r.collection.id,n=e.get(o)??[];n.push(r),e.set(o,n)}return Ta(e)}a();l();var xa=(t,e)=>{let r=[],o=new Set,n=[...t,...e];for(let i of n)o.has(i.id)||(r.push(i),o.add(i.id));return r};a();l();a();l();var Ve="collectibles",Mn=[Ve,"collectibleBids"],P={collections:t=>[Ve,"collections",{addresses:t.map(co)}],hiddenCollections:t=>[Ve,"hiddenCollections",t],unhiddenCollections:t=>[Ve,"unhiddenCollections",t],visibilityOverrides:t=>[Ve,"visibilityOverrides",t],pinnedCollections:t=>[Ve,"pinnedCollections",t],optimisticUpdates:()=>[Ve,"optimisticUpdates"],collectibleBids:t=>[...Mn,t],collectibleMintGasEstimation:t=>[Ve,"mintNFTGasEstimation",t],collectibleSellSteps:t=>[Ve,"collectibleSellSteps",t],createMintTransaction:t=>[Ve,"createMintTransaction",t],transferTransaction:(t,e,r)=>[Ve,"transferTransaction",{transferArgs:t,transactionUnitCost:e,utxoState:r}]};var Yu=20;function ir(t,e){let r=P.optimisticUpdates(),o=t.getQueryData(r)??[];t.setQueryData(r,[...o,e])}async function va(t,e){let r=P.optimisticUpdates(),o=await t.getQueryState(r);if(o){let n=e??Date.now(),i=o.dataUpdatedAt,s=Y({seconds:Yu});return n-i>s?(t.removeQueries({queryKey:r}),[]):o?.data??[]}else return[]}function Ea(t,e){let r=e.reduce((o,n)=>{let{id:i,amount:s}=n,c=new Z(s);return o[i]=(o[i]??new Z(0)).plus(c),o},{});for(let o of t)o.items=o.items.reduce((n,i)=>{let s=i.id,c=r[s];if(c){let d=new Z(i.balance??0);return d.minus(c).isGreaterThan(0)?n.concat({...i,balance:d.minus(c).toString()}):n}else return n.concat(i)},[]);return t=t.filter(o=>o.items.length>0),t}a();l();var _e=(n=>(n[n.Always=1/0]="Always",n[n.Short=Y({days:1})]="Short",n[n.Medium=Y({days:3})]="Medium",n[n.Long=Y({days:7})]="Long",n))(_e||{}),Ze=(i=>(i[i.Immediate=0]="Immediate",i[i.Short=Y({minutes:1})]="Short",i[i.Medium=Y({minutes:2.5})]="Medium",i[i.Long=Y({minutes:5})]="Long",i[i.Never=1/0]="Never",i))(Ze||{}),kr=(c=>(c[c.Shortest=Y({seconds:10})]="Shortest",c[c.Shorter=Y({seconds:30})]="Shorter",c[c.Short=Y({minutes:1})]="Short",c[c.Medium=Y({minutes:2.5})]="Medium",c[c.Long=Y({minutes:5})]="Long",c[c.Longer=Y({minutes:7.5})]="Longer",c[c.Longest=Y({minutes:10})]="Longest",c))(kr||{});var Ia=({addresses:t,queryOptions:e={staleTime:Ze.Short,refetchInterval:kr.Long,enabled:!0},select:r})=>{let o=se(),n=P.collections(t),i=t.length!==0&&t.every(s=>!M.isLocalNetworkID(s.networkID));return oe({enabled:i&&e.enabled,queryKey:n,gcTime:_e.Medium,staleTime:e.staleTime,refetchInterval:e.refetchInterval,async queryFn({queryKey:[,,{addresses:s}]}){let[c,d]=await Promise.allSettled([Sa(s),wo(s)]);if(d.status==="rejected")throw new Error("failed to load unlisted collections");let{allCollectibles:p,isTrimmed:m}=d.status==="fulfilled"?d.value:{allCollectibles:[],isTrimmed:!1},b=c.status==="fulfilled"?c.value:[],g=xa(b,p),y=Aa(g),C=await va(o),S=Ea(y,C);return{items:S,nrOfItems:S.reduce((A,U)=>A+U.items.length,0),isTrimmed:m}},select:r})},Ot=t=>Ia({...t,select:(0,Dn.useCallback)(e=>e.items,[])}),Xu=t=>Ia({...t,select:(0,Dn.useCallback)(r=>r.isTrimmed,[])}).data??!1;a();l();a();l();var Rn=class extends Ue{constructor(e){super(e),this.name="GetPinnedCollectionsError"}};async function Ao(t){try{return await t.get("pinnedCollections")}catch{throw new Rn("")}}var Ln=class extends Ue{constructor(e){super(e),this.name="SetPinnedCollectionsError"}};async function Nn(t,e){try{return await t.set("pinnedCollections",e)}catch{throw new Ln("")}}var xo=t=>{let e=ne();return oe({enabled:t.length!==0,queryKey:P.pinnedCollections(t),gcTime:_e.Long,staleTime:1/0,refetchInterval:!1,refetchOnMount:!0,async queryFn(){try{return(await Ao(e)??{})[t]||[]}catch(r){return r instanceof Error&&q.captureError(r,"collectibles"),[]}}})};a();l();var ka=x(k());var Ju=({id:t,addresses:e})=>{let{data:r,isSuccess:o}=Ot({addresses:e});return(0,ka.useMemo)(()=>{let i={isSuccess:o,data:void 0};for(let s of r??[])for(let c of s.items)if(c.id===t)return{...i,data:c};return i},[t,r,o])};a();l();var be=x(k());a();l();function Te(t){let e=ne();return oe({gcTime:_e.Long,staleTime:1/0,enabled:!!t,queryKey:P.visibilityOverrides(t??""),async queryFn(){return t?await ot(e,t):new Map}})}a();l();var Bt=x(k());a();l();function Ut(){let t=ne(),e=se(),r=ae();return Re({async mutationFn({accountId:o,mutations:n}){await vr(t,r,{accountId:o,mutations:n})},async onSuccess(o,{accountId:n}){await e.invalidateQueries({queryKey:P.visibilityOverrides(n)}),await Promise.allSettled([e.invalidateQueries({queryKey:P.hiddenCollections(n)}),e.invalidateQueries({queryKey:P.unhiddenCollections(n)})])}})}async function Eo({collectible:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:o,desiredVisibility:n,onSuccess:i,onError:s}){if(!e)return;let c=t.collection.id||t.id,d=e.get(c)?.status;try{let p=Oa(n,t.collection);await r({accountId:o,mutations:[{id:c,visibility:p}]}),await i({collectible:t,desiredVisibility:n,previousVisibility:d,updatedVisibility:p})}catch(p){await s(p,{collectible:t,desiredVisibility:n})}}async function Pa({collection:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:o,desiredVisibility:n,onSuccess:i,onError:s}){if(!e)return;let c=t.id,d=e.get(c)?.status;try{let p=Oa(n,t);await r({accountId:o,mutations:[{id:c,visibility:p}]}),i&&await i({collection:t,desiredVisibility:n,previousVisibility:d,updatedVisibility:p})}catch(p){s&&await s(p,{collection:t,desiredVisibility:n})}}function Oa(t,e){let{spamStatus:r}=e;switch(t){case"hidden:reported_spam":if(r==="NOT_VERIFIED"||r==="VERIFIED")return"hidden:reported_spam";if(r==="POSSIBLE_SPAM"||r==="SPAM")return null;throw new Error(`Unexpected spam status: ${r} found while marking spam.`);case"visible:reported_notSpam":if(r==="NOT_VERIFIED"||r==="VERIFIED")return null;if(r==="POSSIBLE_SPAM"||r==="SPAM")return"visible:reported_notSpam";throw new Error(`Unexpected spam status: ${r} found while marking not spam.`);case"hidden":if(r==="NOT_VERIFIED"||r==="VERIFIED")return"hidden";if(r==="POSSIBLE_SPAM"||r==="SPAM")return null;throw new Error(`Unexpected spam status: ${r} found while marking hidden.`);case"visible":if(r==="NOT_VERIFIED"||r==="VERIFIED")return null;if(r==="POSSIBLE_SPAM"||r==="SPAM")return"visible";throw new Error(`Unexpected spam status: ${r} found while marking visible.`)}throw new Error(`Unexpected desired visibility: ${t} found while calculating new visibility.`)}function ht(t){return{networkId:t.chain.id,chainId:M.getChainID(t.chain.id),collectionId:t.collection.id,collectibleId:t.id,collectibleName:t.name,collectibleDescription:t.description,collectionName:t.collection.name,collectionDescription:t.collection.description,collectionUrl:t.collection.externalUrl}}function Ua({accountId:t,onError:e,onSuccess:r}){let{data:o}=Te(t),{mutateAsync:n}=Ut();return(0,Bt.useCallback)(async i=>{await Eo({collectible:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"hidden:reported_spam",onSuccess:r,onError:e})},[o,n,t,e,r])}function Ba({accountId:t,onError:e,onSuccess:r}){let{data:o}=Te(t),{mutateAsync:n}=Ut();return(0,Bt.useCallback)(async i=>{await Eo({collectible:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"visible:reported_notSpam",onSuccess:r,onError:e})},[o,n,t,e,r])}function Ma({accountId:t,onError:e,onSuccess:r}){let{data:o}=Te(t),{mutateAsync:n}=Ut();return(0,Bt.useCallback)(async i=>{await Eo({collectible:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"hidden",onSuccess:r,onError:e})},[o,n,t,e,r])}function Da({accountId:t,onError:e,onSuccess:r}){let{data:o}=Te(t),{mutateAsync:n}=Ut();return(0,Bt.useCallback)(async i=>{await Eo({collectible:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"visible",onSuccess:r,onError:e})},[o,n,t,e,r])}function Ra({accountId:t,onError:e,onSuccess:r}){let{data:o}=Te(t),{mutateAsync:n}=Ut();return(0,Bt.useCallback)(async i=>{await Pa({collection:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"hidden",onSuccess:r,onError:e})},[o,n,t,e,r])}function La({accountId:t,onError:e,onSuccess:r}){let{data:o}=Te(t),{mutateAsync:n}=Ut();return(0,Bt.useCallback)(async i=>{await Pa({collection:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"visible",onSuccess:r,onError:e})},[o,n,t,e,r])}a();l();var jn=x(k());var Na=({toast:t,accountId:e})=>{let{t:r}=ee(),o=ae(),n=(0,jn.useCallback)(({collectible:s,updatedVisibility:c})=>{c!==null&&o.capture("collectionHidden",{data:ht(s)}),t&&t.success(r("collectionHideSuccess"))},[r,t,o]),i=(0,jn.useCallback)((s,c)=>{t&&t.error(r("collectionHideFail"))},[r,t]);return Ma({accountId:e,onSuccess:n,onError:i})};a();l();var Vn=x(k());var ja=({toast:t,accountId:e})=>{let{t:r}=ee(),o=ae(),n=(0,Vn.useCallback)(({collectible:s,updatedVisibility:c})=>{c!==null&&o.capture("collectionUnhidden",{data:ht(s)}),t&&t.success(r("collectionUnhideSuccess"))},[r,t,o]),i=(0,Vn.useCallback)((s,c)=>{t&&t.error(r("collectionUnhideFail"))},[r,t]);return Da({accountId:e,onSuccess:n,onError:i})};function Zu({accountId:t,collectible:e,toast:r}){let o=Na({accountId:t,toast:r}),n=(0,be.useCallback)(()=>{if(e)return o(e)},[o,e]),i=ja({accountId:t,toast:r}),s=(0,be.useCallback)(()=>{if(e)return i(e)},[i,e]),{data:c}=Te(t??""),d=(0,be.useMemo)(()=>c?.get(e?.collection.id??e?.id??""),[c,e]),p=(0,be.useMemo)(()=>e?fo(d,{spamStatus:e.collection.spamStatus}):!1,[e,d]),m=(0,be.useCallback)(()=>p?s():n(),[p,n,s]);return(0,be.useMemo)(()=>({isHidden:p,onHideCollectible:n,onUnhideCollectible:s,onToggleHide:m}),[n,m,s,p])}function ed(t){let{data:e,isPending:r}=Te(t),o=(0,be.useCallback)(s=>{if(!s)return!1;let c=s.collection.id||s.id;return xn(e,{spamStatus:s.collection.spamStatus,key:c})},[e]),n=(0,be.useCallback)(s=>{if(!s)return"NOT_VERIFIED";let c=s.collection.id||s.id;return An(e,{spamStatus:s.collection.spamStatus,key:c})},[e]),i=(0,be.useCallback)(s=>Er(n(s)),[n]);return(0,be.useMemo)(()=>({getIsHidden:o,getSpamStatus:n,getIsSpam:i,isLoading:r}),[o,n,i,r])}function Va(t){let{data:e,isPending:r}=Te(t),o=(0,be.useCallback)(s=>{if(!s)return!1;let c=s.id;return xn(e,{spamStatus:s.spamStatus,key:c})},[e]),n=(0,be.useCallback)(s=>{if(!s)return"NOT_VERIFIED";let c=s.id;return An(e,{spamStatus:s.spamStatus,key:c})},[e]),i=(0,be.useCallback)(s=>Er(n(s)),[n]);return(0,be.useMemo)(()=>({getIsHidden:o,getSpamStatus:n,getIsSpam:i,isLoading:r}),[o,n,i,r])}function _a(t){let e=Va(t),r=Ra({accountId:t}),o=La({accountId:t});return(0,be.useMemo)(()=>({...e,hideCollection:r,unhideCollection:o}),[e,r,o])}a();l();var Fa=x(k());var td=({id:t,addresses:e})=>{let{data:r}=Ot({addresses:e});return(0,Fa.useMemo)(()=>(r??[]).find(o=>o.id===t),[t,r])};a();l();var za=x(k()),Io=(t,e)=>(0,za.useMemo)(()=>e?t.includes(e):!1,[e,t]);a();l();var tC=t=>`${t/100}%`,$a=(t,e)=>t*e/100/100;a();l();var Ka=x(Cn()),Mt=x(k());a();l();var rd=f.object({caip19:f.string(),name:f.string(),symbol:f.string()}),Ga=f.object({bps:f.number(),kind:f.union([f.literal("marketplace"),f.literal("royalty")]),recipient:f.string().optional()}),od=f.object({amount:f.number(),feeBreakdown:f.array(Ga),netAmount:f.number(),token:rd,totalFeeBps:f.number()}),nd=f.object({name:f.string(),logo:f.string(),url:f.string().optional()}),qa=f.object({id:f.string(),expiration:f.string().optional(),price:od,source:nd}),id=f.object({bids:f.array(qa)}),Ha=new Ue("Failed to fetch collectible bids."),sd="collectible-instant-sell-bids",ad=async t=>{if(!t.address)throw Ha;try{let e=await Q.api().validateStatus(!0).post("/collectibles/v1/bids",{asset:t}),{bids:r}=id.parse(e.data);return r}catch(e){if(ft(e)){let r=e.response?.status;Be(e,r,sd)}throw Ha}},_n=({bidAsset:t,isEnabled:e})=>{let r=e&&t.address!==null&&t.chainId!==null;return oe({enabled:r,staleTime:Ze.Short,refetchInterval:kr.Shortest,queryKey:P.collectibleBids(t),async queryFn(){return ad(t)}})},ko=t=>{let e=t?.chainData,r=t?.chain.id??null,o=Le(e),n=ue(e),i=o?{tokenId:e.id}:{},s=n?{contractType:e.standard}:{},c=o?e.contract.toLowerCase():n?e.mint:null;return{chainId:r,address:c,resourceType:"address",...i,...s}};a();l();var ld=x(k());var le=f.enum(["auth","nft-approval","sale","order-signature","refetch","blur-swap","update-proof"]),cd=f.enum(["/execute/auth-signature/v1","/order/v3"]),et=f.enum(["transaction","signature","post","refetch"]),ud=f.enum(["eip712","eip191"]),dd=f.object({domain:f.any(),types:f.any(),value:f.any()}),pd=f.object({message:f.string()}),md=f.object({from:f.string(),to:f.string(),data:f.string()}),fd=f.object({endpoint:cd,body:f.object({id:f.string(),kind:f.string()})}),bd=f.object({action:le,chainId:Qt,type:f.literal(et.enum.signature),data:f.object({signatureKind:ud,signatureData:f.union([pd,dd]),postData:fd})}),hd=f.object({chainId:Qt,action:le,data:md,type:f.literal(et.enum.transaction)}),yd=f.object({chainId:Qt,action:le,type:f.literal(et.enum.refetch),data:f.object({resource:f.string()})}),gd=f.union([bd,hd,yd]),Cd=f.object({action:le,chainId:Zr,type:f.literal(et.enum.transaction),data:f.object({transaction:f.string()})}),Sd=f.union([gd,Cd]),wd=f.object({steps:f.array(Sd),orderId:f.string().optional()}),Td=new Ue("Failed to fetch collectible sell steps."),Ad="collectible-instant-sell-steps",xd=async t=>{try{let e=await Q.api().validateStatus(!0).post("/collectibles/v1/sell",t);return wd.parse(e.data)}catch(e){if(ft(e)){let r=e.response?.status;if(Be(e,r,Ad),e.response?.data?.code){let{code:o}=e.response.data;throw{code:o}}if(r)throw e}throw Td}},Fn=({sellAsset:t})=>{let e=t.details.orderId!==void 0;return oe({enabled:e,queryKey:P.collectibleSellSteps(t),staleTime:1/0,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:(r,o)=>o.code?!1:r<3,async queryFn(){return xd(t)}})};var Wa=(t,e,r)=>{let o=r?.chainData,n=Le(o),i=ue(o),s=r?.owner,c=n?s?.toLowerCase():s,d=e?.id,p=e?.source?.name,m=i?{minPrice:e?.price?.netAmount,tokenAccount:o.tokenAccount}:{};return{details:{asset:t,owner:c,orderId:d,marketplace:p,...m}}};a();l();It.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});var sr=(t,e)=>new It(t).div(Yr(e)).toNumber();var vd={steps:[],orderId:""},Ed=({collectible:t})=>{let{t:e}=ee(),r=(0,Mt.useMemo)(()=>ko(t),[t]),o=(0,Mt.useMemo)(()=>Qa(t),[t]),{data:n=[],isPending:i,isError:s}=_n({bidAsset:r,isEnabled:!o}),c=(0,Mt.useMemo)(()=>n.length>0?n[0]:void 0,[n]),d=(0,Mt.useMemo)(()=>Wa(r,c,t),[r,c,t]),{data:p=vd,isPending:m,isError:b,refetch:g,error:y}=Fn({sellAsset:d}),C=(0,Mt.useMemo)(()=>c&&t?Ya({t:e,bid:c,collectible:t}):void 0,[e,c,t]),S=(0,Mt.useMemo)(()=>b?Number.isInteger(y.code):!1,[b,y]);return{bid:c,bidSummary:C,isLoadingBids:i,isErrorBids:s,sellSteps:p,isLoadingSellSteps:m,isErrorSellSteps:b,refetchSellSteps:g,sellStepsError:y,isSellErrorCode:S,isListedOnSolana:o}},Id=({lastSale:t,receiveAmount:e})=>t!==void 0?e-t:e,Qa=t=>{if(!t)return!1;let{listings:e,chainData:r}=t,n=(e?Object.keys(e):[]).length>0,i=r?ue(r):!1;return n&&i},kd=({offerAmount:t,collectionFloor:e})=>t-e,Pd=t=>{let e=Math.abs(t)<.001?"0.0000%":"0.00%",r=(0,Ka.default)(t).format(e);return`${t>0?"+":""}${r}`},Od=t=>{if(t){let{price:e,token:r}=t,o=r?.decimals;if(o)return sr(e,o)}},Ud=t=>{if(t){let{price:e,token:r}=t,o=r?.decimals;if(o)return sr(e,o)}},Bd=t=>{if(!t||!t.previews)return;let{previews:e}=t;if(e.small)return e.small;if(e.medium)return e.medium;if(e.large)return e.large};var Ya=({bid:t,collectible:e,t:r})=>{let{lastSalePrice:o,media:n,name:i,collection:s}=e,{name:c,logo:d}=t.source,{amount:p,netAmount:m,feeBreakdown:b,token:g,totalFeeBps:y}=t.price,{symbol:C,caip19:S}=g,A=0,U=m,_=s.id,z=e.id,$=Ud(o),ve=C.slice(0,6),L=e.chain.symbol,Xe=Od(s.floorPrice),te=Xe?kd({offerAmount:p,collectionFloor:Xe}):void 0,fe=te?Pd(te):void 0;return{bidTokenSymbol:ve,caip19:S,collectionId:_,collectibleId:z,orderId:t.id,collectibleChainId:e.chain.id,collectibleChainSymbol:L,collectionFloor:Xe,collectibleImage:Bd(n),collectibleName:i??r("collectiblesUnknownCollectible"),collectionName:s.name??r("collectiblesUnknownCollection"),currencySymbol:t.source.name==="Blur"?L:ve,fees:b,floorDifference:te,floorDifferencePercent:fe,lastSale:$,marketplace:c,marketplaceLogoURL:d,offerAmount:p,offerAmountFormatted:Xr(p),phantomFeePercentage:A,pnl:Id({lastSale:$,receiveAmount:U}),receiveAmount:U,receiveAmountFormatted:Xr(U),totalFeeBps:y}},Md=({gasFee:t,totalFeeBps:e,offerAmount:r})=>{let o=$a(e,r)+t.toNumber();return{raw:o,formatted:Xr(o)}};a();l();var Xa=new Map([[le.enum["nft-approval"],8e4],[le.enum["blur-swap"],42e3],[le.enum.sale,39e4],["default",42e4]]),Rd=(t,e,r,o)=>{let n=t==="Blur",i=r.filter(S=>S.type==="transaction").map(({action:S})=>({action:S}));if(i.some(({action:S})=>S===le.enum["nft-approval"])||(i=[...i,{action:le.enum["nft-approval"]}]),n){let S=i.some(({action:U})=>U===le.enum.sale),A=i.some(({action:U})=>U===le.enum["blur-swap"]);S||(i=[...i,{action:le.enum.sale}]),A||(i=[...i,{action:le.enum["blur-swap"]}])}let c=i?.reduce((S,{action:A})=>{let U=Xa.get(A)??Xa.get("default");return S+(U??0)},0),d=new Z(c),{status:p,data:m}=$s({gasLimit:d,networkID:e,transactionSpeed:"standard"}),{data:b}=Gs(e,m),g=xs(m),y=Number(g?.replace(/[^\d.]/g,"")??0),C=o?o.isGreaterThan(y):!1;return{gasEvm:y,gasEstimation:m,gasEstimationStatus:p,ethFeeUI:g,gasEstimationPrice:b,hasEnoughGas:C}};a();l();var nt=x(k());a();l();var Po=(t,e)=>{t.invalidateQueries({queryKey:Mn}),t.invalidateQueries({predicate:({queryKey:r})=>r.includes("collectibleSellSteps")&&r[2].details.orderId===e?.orderId})};var Vd=()=>{let{data:t}=Jt();return(0,nt.useMemo)(()=>{let r=t?.type,o=t?.name??"",n=t?.addresses??[],i=t?.identifier??"";return{isLedger:t?.type==="ledger",accountName:o,accountType:r,chainAddresses:n,accountIdentifier:i}},[t])},_d=({networkID:t,unsignedTransaction:e,pendingActivityRows:r,accountIdentifier:o,accountSigner:n,storage:i,includeCallPayload:s})=>({accountSigner:n,accountIdentifier:o,networkID:t,unsignedTransaction:e,...s&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:"sell",display:{summary:r}},storage:i}),Fd=async(t,e,r,o,n,i,s)=>{try{if(!r)throw new Error("Gas estimation is required");if(!s)throw new Error("Bid summary is required");let{data:c,chainId:d,action:p}=e,{collectionName:m,marketplace:b,receiveAmount:g,currencySymbol:y,collectibleChainSymbol:C,bidTokenSymbol:S}=s,A=Qr(b),U={};p==="nft-approval"&&(U={topRight:{text:""},bottomRight:{text:""},topLeft:{text:t("collectiblesApproveCollection",{collectionName:m})},bottomLeft:{text:A}}),p==="sale"&&(U={topRight:{text:`+${g} ${y}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${m}`},bottomLeft:{text:A}}),p==="blur-swap"&&(U={topRight:{text:`+${g} ${C}`},topLeft:{text:t("transactionsSwapped")},bottomRight:{text:`-${g} ${S}`},bottomLeft:{text:A}});let _=qt.parse({type:"0x2",to:c.to,from:c.from,data:c.data,chainId:M.getEVMNetworkIDValue(d),gas:`0x${r.gasLimit.toString(16)}`,maxFeePerGas:`0x${r.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${r.maxPriorityFeePerGas.toString(16)}`}),z=_d({storage:o,accountSigner:n,pendingActivityRows:U,includeCallPayload:!1,networkID:d,unsignedTransaction:_,accountIdentifier:i.accountIdentifier}),$=await ks(z);return{type:e.type,data:$}}catch(c){return{type:e.type,error:c}}},zd=async(t,e,r)=>{try{let{chainId:o,data:n}=t,{signatureData:i,signatureKind:s,postData:c}=n;if(s==="eip191"&&"message"in i){let d=await e.sign(r.accountIdentifier,{signingType:"message",chainType:"eip155",message:i.message});if(d.status==="success")return await Q.api().post("/collectibles/v1/submit-signature",{chainId:o,signature:d.signature,postData:c}),{type:t.type,data:"success"};throw new Error("Execute Sell: Couldn't sign message")}throw new Error("Execute Sell: EIP721 is not yet supported")}catch(o){return{type:t.type,error:o}}},$d=async(t,e)=>{try{let{resource:r}=t.data;if(r==="/sell"){let{data:o}=await e();return{type:t.type,data:o?.steps}}throw new Error("Execute Sell: Resource is not supported")}catch(r){return{type:t.type,error:r}}},Hd=[le.enum.auth,le.enum["nft-approval"],le.enum.sale],Gd="Steps are required",qd="These steps are not from the same bid",Oo=class extends Error{message=Gd},Uo=class extends Error{message=qd},Wd=(t,e,r,o,n,i,s)=>{let c=ne(),d=ae(),p=se(),m=Xt(),[b,g]=(0,nt.useState)("idle"),[y,C]=(0,nt.useState)(null),[S,A]=(0,nt.useState)(null),{t:U}=ee(),_=Vd(),{chainAddresses:z,isLedger:$}=_;(0,nt.useEffect)(function(){b==="loading"&&Po(p,n)},[b,p,n]),(0,nt.useEffect)(function(){b==="success"&&n&&ir(p,{id:n.collectibleId,amount:1})},[b,p,z,n]);let ve=()=>{g("idle"),C(null),A(null)},L=s&&n?.receiveAmount?n.receiveAmount*s:void 0,Xe=async(te,fe=new Map)=>{let ie=te??e;try{if(t&&t!==""&&t!==n?.orderId)throw new Uo;if(!Array.isArray(ie)||ie.length===0)throw new Oo;g("loading");for await(let Se of ie){let{action:Pe}=Se,cu=fe.get(Pe)==="success",uu=Pe===le.enum.sale,Ki=Pe===le.enum.refetch,du=Hd.some(Gt=>Gt===Pe);if(cu)continue;Ki||fe.set(Pe,"loading");let pu=async Gt=>{switch(Gt.type){case et.enum.transaction:return await Fd(U,Gt,r,c,m,_,n);case et.enum.signature:return await zd(Gt,m,_);case et.enum.refetch:return await $d(Gt,o)}},{type:Qi,data:yn,error:Yi}=await pu(Se);if(du&&Yi)throw Yi;if(yn&&(Ki||fe.set(Pe,"success"),Qi===et.enum.transaction&&uu&&A(yn),Qi===et.enum.refetch))return await ts(500),await Xe(yn,fe)}g("success"),d.capture("collectibleSellSuccess",{data:{bidSummary:n,usdSaleValue:L}})}catch(Se){let Pe=Se?.message??"";(!(Se instanceof Oo)||!(Se instanceof Uo))&&(q.captureError(Se,"collectibles"),d.capture("collectibleSellFailure",{data:{bidSummary:n,usdSaleValue:L,errorMessage:Pe}})),g("error"),C(Se)}};return{executeSellEvmSteps:Xe,reset:ve,error:y,result:S,status:b,isLedger:$}};a();l();var Fe=x(k());var Kd=()=>{let{data:t}=Jt();return(0,Fe.useMemo)(()=>{let r=t?.identifier??"",o=t?.type==="ledger",n=t?.addresses??[],i=n.find(cs),s=i?.networkID,c=i?.address??"",d=Es(s),p=vs(d);return{accountIdentifier:r,chainAddresses:n,chainId:s,solanaPublicKey:c,isLedger:o,cluster:d,connection:p}},[t])},Qd=(t,e)=>{let[r,o]=(0,Fe.useState)(void 0);return(0,Fe.useEffect)(()=>{(async()=>{if(!t)return;let s=t.find(m=>m.type==="transaction")?.data?.transaction;if(!s)return;let c=gn(s,"base64"),d=await Ms(e,[c.message]),p=Xi(d.value);o(p)})()},[t,e]),r},Yd=async(t,e,r,o,n,i)=>{if(!i)throw new Error("Bid summary is required");let{collectionName:s,marketplace:c,receiveAmount:d,currencySymbol:p}=i,m={topRight:{text:`+${d} ${p}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${s}`},bottomLeft:{text:Qr(c)}},{data:b,chainId:g,type:y}=e,{transaction:C}=b,S=gn(C,"base64"),A={ownerAddress:r.solanaPublicKey,networkID:g,data:{signature:""},type:"sell",display:{summary:m}},{accountIdentifier:U,solanaPublicKey:_,connection:z}=r,$=new B.PublicKey(_),ve=await Rs({accountIdentifier:U,feePayer:$,transaction:S,pendingTransactionInput:A,connection:z,accountSigner:o,storage:n,opts:{skipPreflight:!0}});return{type:y,data:ve}},Xd="Steps are required",Jd="These steps are not from the same bid",Bo=class extends Error{message=Xd},Mo=class extends Error{message=Jd},Zd=(t,e,r,o)=>{let n=ne(),i=ae(),s=se(),c=Xt(),[d,p]=(0,Fe.useState)("idle"),[m,b]=(0,Fe.useState)(null),[g,y]=(0,Fe.useState)(null),{t:C}=ee(),S=Kd(),{chainId:A,connection:U,chainAddresses:_,isLedger:z}=S,$=A&&M.isSolanaNetworkID(A)?A:Yt.Solana.Mainnet,ve=Qd(e,$);(0,Fe.useEffect)(function(){d==="loading"&&Po(s,r)},[d,s,r]),(0,Fe.useEffect)(function(){d==="success"&&r&&ir(s,{id:r.collectibleId,amount:1})},[d,s,_,r]);let L=()=>{p("idle"),b(null),y(null)},Xe=o&&r?.receiveAmount?r.receiveAmount*o:void 0;return{executeSellSolanaSteps:async()=>{try{if(t&&t!==r?.orderId)throw new Mo;if(!Array.isArray(e)||e.length===0)throw new Bo;p("loading");for await(let fe of e){let ie=await Yd(C,fe,S,c,n,r);y(ie.data),await Ds({connection:U,signature:ie.data})}p("success"),i.capture("collectibleSellSuccess",{data:{bidSummary:r,usdSaleValue:Xe}})}catch(fe){let ie=fe?.message??"";(!(fe instanceof Bo)||!(fe instanceof Mo))&&(q.captureError(fe,"collectibles"),i.capture("collectibleSellFailure",{data:{bidSummary:r,usdSaleValue:Xe,errorMessage:ie}})),p("error"),b(fe)}},reset:L,gas:ve,error:m,result:g,status:d,isLedger:z}};a();l();var ep=.01,tp=t=>{let{fungible:e}=Zs({key:ea(t.collectibleChainId,void 0)}),r=e?.data.balance;return{hasEnoughGas:r?r.isGreaterThan(ep):!1}};a();l();var el=x(k()),rp=t=>t.reduce((e,r)=>({...e,[r]:1}),{});function zn({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:o}){let n=[],i=[],s=[],c=[],d=rp(e),p={};for(let b of t)o(b)&&r(b)?c.push(b):r(b)?i.push(b):d[b.id]?p[b.id]=b:o(b)?s.push(b):n.push(b);let m=[];for(let b of e)p[b]&&m.push(p[b]);return{collections:[...m,...n,...s],hiddenCollections:i,spamCollections:c}}var op=({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:o})=>(0,el.useMemo)(()=>zn({allCollections:t,pinnedCollectionIds:e,getIsHidden:r,getIsSpam:o}),[t,r,o,e]);a();l();var Do=x(k()),$n={location:0,distance:50,threshold:.3},qS={...$n,keys:["name"]},WS={...$n,keys:["name"]},KS={...$n,keys:["name"]},Pr=(t,e)=>{if(e===void 0)return!1;let r=t.toLowerCase();return e.toLowerCase().split(" ").map(o=>o.startsWith(r)||r.startsWith(o)&&e.toLowerCase().includes(r)).includes(!0)};var tl=(t,e)=>(0,Do.useMemo)(()=>({collections:t.filter(o=>Pr(e,o.name||o.items[0].name))}),[e,t]),np=(t,e,r,o)=>{let n=(0,Do.useMemo)(()=>t.flatMap(i=>i.items),[t]);return(0,Do.useMemo)(()=>{let i=t.filter(p=>Pr(o,p.name)),s=n.filter(p=>Pr(o,p.name)),c=e.filter(p=>Pr(o,p.name)),d=r.filter(p=>Pr(o,p.name));return{collections:i,collectibles:s,hiddenCollections:c,spamCollections:d}},[o,n,t,e,r])};a();l();var yt=x(k());var ip=Y({seconds:10}),sp=Y({seconds:5});function ap({account:t}){let e=t?.identifier??"",r=t?.addresses??[],{data:o=[],isLoading:n}=Ot({addresses:r,queryOptions:{staleTime:sp,refetchInterval:ip}}),[i,s]=(0,yt.useState)(""),c=os(i)??"",d=(0,yt.useCallback)(z=>s(typeof z=="string"?z:z.currentTarget.value),[s]),{getIsHidden:p,getIsSpam:m,getSpamStatus:b,hideCollection:g,unhideCollection:y,isLoading:C}=_a(e),S=(0,yt.useMemo)(()=>{let{collections:z,hiddenCollections:$,spamCollections:ve}=zn({allCollections:o,getIsHidden:p,getIsSpam:m});return[...z,...$,...ve]},[o]),A=tl(S,c),U=(0,yt.useCallback)(({item:z,status:$})=>$==="show"?y(z):g(z),[y,g]);return{viewState:(0,yt.useMemo)(()=>({accountId:e,listItems:c?A.collections:S,searchQuery:i,debouncedSearchQuery:c,handleSearch:d,getIsHidden:p,getIsSpam:m,getSpamStatus:b,onToggleHidden:U}),[e,A.collections,i,d,S,U,p,m,b,c]),viewStateLoading:C||n}}a();l();var rl={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},it=oo(t=>({...rl,reset:()=>t({...rl}),setListCollectible:e=>t({listCollectible:e}),setListPrice:e=>t({listCollectiblePrice:e}),setEditListPrice:e=>t({editListCollectiblePrice:e}),setUnlistCollectible:e=>t({unlistCollectible:e}),setTransactionURL:e=>t({transactionURL:e})}));a();l();var me=x(fu());var lp="token-account-min-balances",ol=me.struct([me.blob(32,"mint"),me.blob(32,"owner"),me.nu64("amount"),me.blob(93)]),mw=me.struct([me.blob(44),me.u8("decimals"),me.blob(37)]),cp=me.struct([me.blob(679)]),up=me.struct([me.u8("edition"),me.blob(281)]),dp=async t=>t.getMinimumBalanceForRentExemption(ol.span).then(Z),pp=async t=>Z(await t.getMinimumBalanceForRentExemption(cp.span)+await t.getMinimumBalanceForRentExemption(up.span)+await t.getMinimumBalanceForRentExemption(ol.span));function mp({tokenEdition:t,connection:e}){return oe({queryKey:[lp,{tokenEdition:t}],queryFn:async()=>e?t===null||!Co(t)?dp(e):pp(e):Z(0)})}a();l();var nl=x(k()),fp=(t,e,r=!1,o)=>(0,nl.useMemo)(()=>{if(t)return Ro({collectibleMedia:t,isImageAnimationEnabled:r,previewSize:o??"medium",mediaTypeOverride:e})},[t,e,r,o]),Ro=({collectibleMedia:t,isImageAnimationEnabled:e,previewSize:r,mediaTypeOverride:o})=>{let n=o??t.type;if((n==="image"||n==="other")&&t.previews?.[r]){let s=e?"":`${r==="medium"?"=":"-"}k`;return`${t.previews[r]}${s}`}return t[n]?.url};a();l();var il=x(k());var bp=!1,hp="small",yp="image",gp=t=>(0,il.useMemo)(()=>sl(t),[t]),sl=(t,e=hp)=>{if(!t)return;let{media:r,collection:o}=t,n=bp,i=yp;return r?Ro({collectibleMedia:r,isImageAnimationEnabled:n,previewSize:e,mediaTypeOverride:i}):o.imageUrl};a();l();var al=x(k()),ll=t=>{let{items:e}=t;if(e.length!==0)return e.find(({media:r})=>r?.type==="image")},Cp=t=>(0,al.useMemo)(()=>{if(t)return ll(t)??t.items[0]},[t]);a();l();var cl=x(k());var Sp=t=>(0,cl.useMemo)(()=>{if(!(!t||t.items.length===0))return ul(t)},[t]),ul=t=>{let{items:e}=t,{length:r}=e;if(r===1){let[{balance:o="",chainData:n}]=e;if(ue(n)&&n.standard==="SemiFungible"){let i=parseInt(o,10);return isNaN(i)?1:i}}return r};a();l();a();l();var dl={burnCollectibleTx:void 0,burnCollectibleTxFee:void 0},pl=t=>({...dl,resetBurnCollectible:()=>t({...dl}),setBurnCollectibleTx:e=>t({burnCollectibleTx:e}),setBurnCollectibleTxFee:e=>t({burnCollectibleTxFee:e})});a();l();var ml={multichainSellCollectible:void 0},fl=t=>({...ml,resetMultichainSellCollectible:()=>t({...ml}),setMultichainSellCollectible:e=>t({multichainSellCollectible:e})});a();l();var bl={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},hl=t=>({...bl,reset:()=>t({...bl}),setListCollectible:e=>t({listCollectible:e}),setListPrice:e=>t({listCollectiblePrice:e}),setEditListPrice:e=>t({editListCollectiblePrice:e}),setUnlistCollectible:e=>t({unlistCollectible:e}),setTransactionURL:e=>t({transactionURL:e})});a();l();var yl={multichainListCollectible:null,multichainListCollectiblePrice:null,editMultichainListCollectiblePrice:null,unlistMultichainCollectible:null,multichainTransactionURL:null},gl=t=>({...yl,reset:()=>t({...yl}),setMultichainListCollectible:e=>t({multichainListCollectible:e}),setMultichainListPrice:e=>t({multichainListCollectiblePrice:e}),setEditMultichainListPrice:e=>t({editMultichainListCollectiblePrice:e}),setUnlistMultichainCollectible:e=>t({unlistMultichainCollectible:e}),setMultichainTransactionURL:e=>t({multichainTransactionURL:e})});var wp=oo((t,e)=>({...hl(t,e),...pl(t,e),...gl(t,e),...fl(t,e)}));a();l();a();l();var Tp=500,Cl=P.collections([])[1],Ap=[Cl,P.hiddenCollections("")[1],P.unhiddenCollections("")[1],P.pinnedCollections("")[1]],xp=t=>{let e=String(t.queryKey[1]);return e===Cl?t.state.data?.nrOfItems<=Tp:Ap.includes(e)};a();l();var Il=x(k());a();l();a();l();a();l();var Sl="#F7931A",vp=5e4,Ep="https://help.magiceden.io/en/articles/8450002-mastering-utxo-management-extracting-splitting-sats-on-magic-eden-bitcoin",wl={sendSuccessCondition:"SUBMISSION",collectibleDetailPrecision:7,collectibleDetailCtaBanner:(t,e)=>{let r=t.chainData;if(yo(r)&&e){let o=new Z(r.utxoDetails.value??0);if(o.lte(vp))return;let n=Object.values(r.utxoDetails.satributes).reduce((d,{count:p})=>d+p,0),i=Sn(n,M.bitcoin.tokenDecimals),s=Sn(o,M.bitcoin.tokenDecimals),c=ns(s.minus(i).times(e));return{title:Ee.t("collectibleDetailUtxoSplitterCtaTitle"),subtitle:Ee.t("collectibleDetailUtxoSplitterCtaSubtitle",{value:c}),iconFill:Sl,modal:{title:Ee.t("collectibleDetailUtxoSplitterModalCtaTitle"),subtitle:Ee.t("collectibleDetailUtxoSplitterModalCtaSubtitle",{value:c}),buttonText:Ee.t("collectibleDetailUtxoSplitterModalCtaButton"),uri:Ep,iconFill:Sl}}}}};a();l();var Or={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};a();l();var Tl={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};a();l();var Al={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:9,collectibleDetailCtaBanner:void 0};var Ip=new ms({solana:Tl,ethereum:Or,polygon:Or,base:Or,monad:Or,bitcoin:wl,sui:Al}),Dt=ps(Ip);a();l();var El=x(k());a();l();var xl=x(Cn()),vl=({value:t,type:e})=>{if(!t)return"";try{switch(e){case"number":return(0,xl.default)(t).format("0,0.[00]").toString();case"date":return new Date(Number(t)).toLocaleDateString();default:return`${t}`}}catch{return`${t}`}};var Hn=t=>(0,El.useMemo)(()=>{if(!t)return[];let e=t.chainData;return Ne(e)&&e.utxoDetails?e.utxoDetails.satributes.map(({count:r,displayName:o,description:n,url:i})=>({type:o.toUpperCase(),value:Ee.t(kp(r,"collectibleDetailSatsCount_one","collectibleDetailSatsCount_other"),{count:r})??"",modal:{name:o,description:n,iconUrl:i}})):t.attributes.map(({trait_type:r,value:o,display_type:n})=>({type:r,value:vl({value:o,type:n})}))},[t]),kp=(t,e,r)=>t===1?e:r;function Pp(t){let{chain:e,owner:r}=t||{},o=e?.id,{data:n}=ro({address:r,networkID:o});Ks(n);let i=Hn(t),s=o?M.getChainID(o):void 0,c=s?ds(s):void 0,{data:d}=Hs({query:c?{data:c}:void 0});return{ctaBanner:(0,Il.useMemo)(()=>{if(!(!t||!d||!s))return Dt.get(s).collectibleDetailCtaBanner?.(t,d.price)},[s,t,d]),traits:i}}a();l();var Gc=x(k());a();l();function Op(t,e,r){let o=e.collectible;if(!o||!e.sendFormValues)throw new Error("State is missing necessary data");let{decimals:n="0"}=o,i=parseFloat(n),s=o.chainData,{mint:c,standard:d,tokenAccount:p,compression:m}=s,{amountAsset:b}=e.sendFormValues,g={networkID:o.chain.id,addressType:"solana",address:o.owner??""},y=Js(o);switch(d){case"NonFungible":case"NonFungibleEdition":case"ProgrammableNonFungible":case"ProgrammableNonFungibleEdition":return{type:"transferSPLToken",networkID:t,senderAddress:g,destination:r,amount:"1",senderAccount:p,mint:c,decimals:i,standard:d,compression:m,programId:s.programId,transferHookProgramId:y};case"SemiFungible":return{type:"transferSPLToken",networkID:t,senderAddress:g,destination:r,amount:b.isZero()?"1":b.toString(),senderAccount:p,mint:c,decimals:i,standard:d,programId:s.programId,transferHookProgramId:y};default:throw new Error("Unknown fungible token type")}}function Up(t,e,r){let o=e.collectible;if(!o||!e.sendFormValues)throw new Error("State is missing necessary data");let{chainData:n}=o,{id:i,contract:s,standard:c}=n,{amountAsset:d}=e.sendFormValues,p={networkID:o.chain.id,addressType:"eip155",address:o.owner??""};switch(c){case"ERC721":return{type:"transferERC721Evm",networkID:t,senderAddress:p,destination:r,amount:1,contractAddress:s,tokenID:i};case"ERC1155":return{type:"transferERC1155Evm",networkID:t,senderAddress:p,destination:r,amount:d??"1",contractAddress:s,tokenID:i};default:throw new Error("Unknown fungible token type")}}function Bp(t,e,r){let o=e.collectible;if(!o||!o.owner||!e.sendFormValues)throw new Error("State is missing necessary data");let{chainData:n}=o,{firstCreatedInscriptionId:i,utxoDetails:s,outputValue:c,utxoHash:d,utxoIndex:p}=n,m;if(s)m={type:"raresats",networkID:t,hash:s.hash,index:s.index,value:s.value.toString(),senderAddress:o.owner,destination:r,amount:1};else if(d&&p!==void 0)m={type:"ordinal",networkID:t,inscriptionId:i,value:c,amount:1,senderAddress:o.owner,destination:r,utxoHash:d,utxoIndex:p};else throw new Error(`Unable to determine transfer type for collectible: ${o.id}`);return m}function Mp(t,e,r){let o=e.collectible;if(!o||!e.sendFormValues)throw new Error("State is missing necessary data");let{chainData:n}=o,{objectId:i}=n;if(!i)throw new Error(`Unable to determine object id for collectible: ${o.id}`);return{type:"suiobject",networkID:t,objectId:i,destination:r,amount:1,senderAddress:o.owner??""}}function kl(t,e){let r=t?.collectible?.chain.id;if(r)return M.isBitcoinNetworkID(r)?Bp(r,t,e):M.isSolanaNetworkID(r)?Op(r,t,e):M.isEVMNetworkID(r)?Up(r,t,e):M.isSuiNetworkID(r)?Mp(r,t,e):Wt(r)}a();l();a();l();a();l();var Pl=x(Jr()),Ol=x(Jr()),Ul=x(is()),Bl=({value:t,senderAddress:e,destination:r,utxoState:{safeToSendUtxos:o},feerate:n,utxoHash:i,utxoIndex:s})=>{let c={transactionHash:i,index:s,value:t,isSafeToSend:!1,owner:e},d=[c],p=[{address:r,value:parseFloat(c.value),script:(0,Ul.toOutputScript)(r)}],m=uo(to(Yt.Bitcoin.Mainnet,e),o,p,n,d),b=new Ol.Psbt({network:Pl.networks.bitcoin});if(m.type==="success"){let{inputs:g,outputs:y}=m;b.addInputs(g.map(C=>po(C,e,!0))),b.addOutputs(y)}return[b,b.data.inputs.map((g,y)=>({address:e,signingIndexes:[y]})),m.vb]};a();l();var Ml=x(Jr()),Dl=x(Jr()),Rl=x(is()),Ll=({hash:t,index:e,value:r,senderAddress:o,destination:n,utxoState:{safeToSendUtxos:i},feerate:s})=>{let c={index:e,transactionHash:t,value:r,isSafeToSend:!1,owner:o},d=[c],p=[{address:n,value:parseFloat(c.value),script:(0,Rl.toOutputScript)(n)}],m=uo(to(Yt.Bitcoin.Mainnet,o),i,p,s,d),b=new Dl.Psbt({network:Ml.networks.bitcoin});if(m.type==="success"){let{inputs:y,outputs:C}=m;b.addInputs(y.map(S=>po(S,o,!0))),b.addOutputs(C)}let g=b.data.inputs.map((y,C)=>({address:o,signingIndexes:[C]}));return[b,g,m.vb]};function Nl(t,e,r){let o,n,i,s=r,c=Math.round(s?Ts(s.btcPerKilobyte).toNumber():ws);if(ma(t))[o,n,i]=Bl({...t,utxoState:e,feerate:c});else if(fa(t))[o,n,i]=Ll({...t,utxoState:e,feerate:c});else return Wt(t);return{networkID:t.networkID,psbt:o,vb:i,psbtChain:void 0,inputsToSign:n}}a();l();a();l();var Dp=["function safeTransferFrom(address from, address to, uint256 tokenId)","function transferFrom(address from, address to, uint256 tokenId)"],jl=new Error("Error populating ERC721 transaction data."),Vl=async t=>{let{sender:e,networkID:r,destination:o,contractAddress:n,tokenID:i,ethereumNetworkID:s}=t,c=io(r,n,Dp,e),d;try{let m=await c.populateTransaction.safeTransferFrom(e,o,new Z(i).toString(10));if(m.data)d=m.data;else throw jl}catch{throw jl}return qt.parse({type:"0x2",from:e,to:n,chainId:typeof s=="number"?s:M.getEVMNetworkIDValue(s),data:d})};a();l();var Rp=["function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data)","function transferFrom(address from, address to, uint256 id, uint256 amount, bytes data)"],_l=new Error("Error populating ERC1155 transaction data."),Fl=async t=>{let{sender:e,networkID:r,destination:o,contractAddress:n,tokenID:i,value:s,ethereumNetworkID:c}=t,d=io(r,n,Rp,e),p;try{let b=await d.populateTransaction.safeTransferFrom(e,o,new Z(i).toString(10),s.toString(10),[]);if(b.data)p=b.data;else throw _l}catch{throw _l}return qt.parse({type:"0x2",from:e,to:n,chainId:typeof c=="number"?c:M.getEVMNetworkIDValue(c),data:p})};async function zl(t){let e;if(la(t)){let{networkID:r,senderAddress:o,destination:n,contractAddress:i,tokenID:s}=t;e=await Vl({sender:o.address,networkID:r,destination:n,contractAddress:i,tokenID:s,value:1,ethereumNetworkID:r})}else if(ca(t)){let{networkID:r,senderAddress:o,destination:n,contractAddress:i,tokenID:s,amount:c}=t;e=await Fl({sender:o.address,networkID:r,destination:n,contractAddress:i,tokenID:s,value:typeof c=="string"?new Z(c,10):c,ethereumNetworkID:r})}else return Wt(t);return{networkID:t.networkID,unsignedTransaction:e}}a();l();a();l();a();l();var No=class extends Error{constructor(e){super(e),this.name="ProofError"}};async function $l({networkID:t,mintAddress:e}){let r="/collectibles/v1/proof",o;try{o=await Q.api().post(r,{chainId:t,address:e})}catch{let i=new No(`Failed to fetch proof for ${e} on network ${t}.`);throw q.captureError(i,"collectibles"),i}if(o.status!==200){let i=new No(`Failed to fetch proof for ${e} on network ${t}.`);throw q.captureError(i,"collectibles"),i}return await o.data}async function Hl(t){let{senderAddress:e,mint:r}=t,o=new Oe.Transaction,n=await $l({networkID:e.networkID,mintAddress:r});return o.add(await gs({...t,...n})),o}a();l();async function Gl({networkID:t,destination:e,mint:r,senderAddress:o}){let{createComputeBudgetIx:n,createOCPTransferIX:i,getOCPMintState:s}=await no(),c=or(t),d=new B.PublicKey(r),p=await s(d,c);if(!p)throw new Error("Mint state not found for OCP transfer");Kr()&&console.log("This is a Magic Eden Open Creator Protocol Token");let m=new Oe.Transaction;m.add(n());let{destinationAddress:b}=await mo({solanaConnection:c,destination:new B.PublicKey(e),mint:d,programId:Ar}),g=new B.PublicKey(o.address),{initAccountIX:y,transferIX:C}=await i({senderAddress:g,destinationAddress:b,mintAddress:d,mintState:p,connection:c});return y&&m.add(y),m.add(C),m}a();l();async function ql({networkID:t,senderAddress:e,senderAccount:r,destination:o,mint:n}){let i=or(t),s=new B.PublicKey(n),{destinationAddress:c,destinationAccount:d}=await mo({solanaConnection:i,destination:new B.PublicKey(o),mint:s,programId:Ar}),{createPNFTTransferIX:p}=await no(),m=new Oe.Transaction,b=new B.PublicKey(e.address),g=new B.PublicKey(r),y=d;if(!y){let[C,S]=await Os(b,c,s,Ar);m.add(Ps({account:c,owner:B.SystemProgram.programId})),m.add(C),y=S}return m.add(await p({senderAddress:b,tokenAccount:g,destinationAddress:c,destinationAccount:y,mintAddress:s,connection:i})),m}async function Wl(t){let{networkID:e,mint:r}=t,o=or(e),n;if(ua(t))n=await Hl(t);else if(da(t))n=await ql(t);else if(pa(t)&&await Ss(new B.PublicKey(r),o))n=await Gl({...t});else if(As(t))n=await Bs({...t,connection:o});else throw new Error("Unsupported transferSPLSolana args");let{memo:i}=t;return i&&n.add(Us({memoText:i})),n.feePayer=new B.PublicKey(t.senderAddress.address),n=await Is(n,{connection:o}),n.recentBlockhash=(await o.getLatestBlockhash("confirmed")).blockhash,{networkID:t.networkID,transaction:[n]}}a();l();a();l();a();l();a();l();var Kl="1.21.2",Ql="1.43.0";a();l();var Lp={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"},jo=class extends Error{},ar=class extends jo{constructor(e,r){super(e),this.code=r,this.type=Lp[r]??"ServerError"}},Vo=class extends jo{constructor(e,r,o){super(e),this.status=r,this.statusText=o}};a();l();var Yl=t=>{throw TypeError(t)},qn=(t,e,r)=>e.has(t)||Yl("Cannot "+r),re=(t,e,r)=>(qn(t,e,"read from private field"),r?r.call(t):e.get(t)),Rt=(t,e,r)=>e.has(t)?Yl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),lr=(t,e,r,o)=>(qn(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),Xl=(t,e,r)=>(qn(t,e,"access private method"),r),Np=(t,e,r,o)=>({set _(n){lr(t,e,n,r)},get _(){return re(t,e,o)}}),Lt,Ur,st,Nt,Br,cr,_o,Jl,Zl;function jp(t){let e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}var Vp={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5},Fo=class{constructor(e,r={}){if(Rt(this,_o),Rt(this,Lt,0),Rt(this,Ur,0),Rt(this,st,null),Rt(this,Nt,null),Rt(this,Br,new Set),Rt(this,cr,new Map),this.endpoint=e,this.options={...Vp,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=jp(this.endpoint))}async makeRequest(e,r){let o=await Xl(this,_o,Jl).call(this);return new Promise((n,i)=>{lr(this,Lt,re(this,Lt)+1),re(this,cr).set(re(this,Lt),{resolve:n,reject:i,timeout:setTimeout(()=>{re(this,cr).delete(re(this,Lt)),i(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),o.send(JSON.stringify({jsonrpc:"2.0",id:re(this,Lt),method:e,params:r}))}).then(({error:n,result:i})=>{if(n)throw new ar(n.message,n.code);return i})}async subscribe(e){let r=new Gn(e);return re(this,Br).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}};Lt=new WeakMap;Ur=new WeakMap;st=new WeakMap;Nt=new WeakMap;Br=new WeakMap;cr=new WeakMap;_o=new WeakSet;Jl=function(){return re(this,Nt)?re(this,Nt):(lr(this,Nt,new Promise(t=>{re(this,st)?.close(),lr(this,st,new this.options.WebSocketConstructor(this.endpoint)),re(this,st).addEventListener("open",()=>{lr(this,Ur,0),t(re(this,st))}),re(this,st).addEventListener("close",()=>{Np(this,Ur)._++,re(this,Ur)<=this.options.maxReconnects&&setTimeout(()=>{Xl(this,_o,Zl).call(this)},this.options.reconnectTimeout)}),re(this,st).addEventListener("message",({data:e})=>{let r;try{r=JSON.parse(e)}catch(o){console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:o}));return}if("id"in r&&r.id!=null&&re(this,cr).has(r.id)){let{resolve:o,timeout:n}=re(this,cr).get(r.id);clearTimeout(n),o(r)}else if("params"in r){let{params:o}=r;re(this,Br).forEach(n=>{n.subscriptionId===o.subscription&&o.subscription===n.subscriptionId&&n.onMessage(o.result)})}})})),re(this,Nt))};Zl=async function(){return re(this,st)?.close(),lr(this,Nt,null),Promise.allSettled([...re(this,Br)].map(t=>t.subscribe(this)))};var Gn=class{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}};var ec=t=>{throw TypeError(t)},Qn=(t,e,r)=>e.has(t)||ec("Cannot "+r),Me=(t,e,r)=>(Qn(t,e,"read from private field"),r?r.call(t):e.get(t)),zo=(t,e,r)=>e.has(t)?ec("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Wn=(t,e,r,o)=>(Qn(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),_p=(t,e,r)=>(Qn(t,e,"access private method"),r),Mr,ze,Dr,Kn,tc,$o=class{constructor(e){zo(this,Kn),zo(this,Mr,0),zo(this,ze),zo(this,Dr),Wn(this,ze,e)}fetch(e,r){let o=Me(this,ze).fetch??fetch;if(!o)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return o(e,r)}async request(e){Wn(this,Mr,Me(this,Mr)+1);let r=await this.fetch(Me(this,ze).rpc?.url??Me(this,ze).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Kl,"Client-Target-Api-Version":Ql,"Client-Request-Method":e.method,...Me(this,ze).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:Me(this,Mr),method:e.method,params:e.params})});if(!r.ok)throw new Vo(`Unexpected status code: ${r.status}`,r.status,r.statusText);let o=await r.json();if("error"in o&&o.error!=null)throw new ar(o.error.message,o.error.code);return o.result}async subscribe(e){let r=await _p(this,Kn,tc).call(this).subscribe(e);return async()=>!!await r()}};Mr=new WeakMap;ze=new WeakMap;Dr=new WeakMap;Kn=new WeakSet;tc=function(){if(!Me(this,Dr)){let t=Me(this,ze).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Wn(this,Dr,new Fo(Me(this,ze).websocket?.url??Me(this,ze).url,{WebSocketConstructor:t,...Me(this,ze).websocket}))}return Me(this,Dr)};a();l();a();l();a();l();a();l();a();l();function Fp(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let p=0;p<e.length;p++)e[p]=255;for(let p=0;p<t.length;p++){let m=t.charAt(p),b=m.charCodeAt(0);if(e[b]!==255)throw new TypeError(m+" is ambiguous");e[b]=p}let r=t.length,o=t.charAt(0),n=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function s(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";let m=0,b=0,g=0,y=p.length;for(;g!==y&&p[g]===0;)g++,m++;let C=(y-g)*i+1>>>0,S=new Uint8Array(C);for(;g!==y;){let _=p[g],z=0;for(let $=C-1;(_!==0||z<b)&&$!==-1;$--,z++)_+=256*S[$]>>>0,S[$]=_%r>>>0,_=_/r>>>0;if(_!==0)throw new Error("Non-zero carry");b=z,g++}let A=C-b;for(;A!==C&&S[A]===0;)A++;let U=o.repeat(m);for(;A<C;++A)U+=t.charAt(S[A]);return U}function c(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;let m=0,b=0,g=0;for(;p[m]===o;)b++,m++;let y=(p.length-m)*n+1>>>0,C=new Uint8Array(y);for(;p[m];){let _=e[p.charCodeAt(m)];if(_===255)return;let z=0;for(let $=y-1;(_!==0||z<g)&&$!==-1;$--,z++)_+=r*C[$]>>>0,C[$]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");g=z,m++}let S=y-g;for(;S!==y&&C[S]===0;)S++;let A=new Uint8Array(b+(y-S)),U=b;for(;S!==y;)A[U++]=C[S++];return A}function d(p){let m=c(p);if(m)return m;throw new Error("Non-base"+r+" character")}return{encode:s,decodeUnsafe:c,decode:d}}var rc=Fp;var zp="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Yn=rc(zp);var at=t=>Yn.encode(t),$e=t=>Yn.decode(t);a();l();function he(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}var Xn=8192;function J(t){if(t.length<Xn)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=Xn){let o=t.slice(r,r+Xn);e+=String.fromCharCode(...o)}return btoa(e)}a();l();a();l();function ur(t){let e=t.startsWith("0x")?t.slice(2):t,r=e.length%2===0?e:`0${e}`,o=r.match(/[0-9a-fA-F]{2}/g)?.map(n=>parseInt(n,16))??[];if(o.length!==r.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(o)}function tt(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}a();l();a();l();function jt(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function oc(t){let e=0,r=0,o=0;for(;;){let n=t[o];if(o+=1,e|=(n&127)<<r,!(n&128))break;r+=7}return{value:e,length:o}}var Ho=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),o=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+o).toString(10)}read128(){let e=BigInt(this.read64()),o=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+o).toString(10)}read256(){let e=BigInt(this.read128()),o=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+o).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,o=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),o}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:o,length:n}=oc(r);return this.shift(n),o}readVec(e){let r=this.readULEB(),o=[];for(let n=0;n<r;n++)o.push(e(this,n,r));return o}};a();l();a();l();function Jn(t,e){switch(e){case"base58":return at(t);case"base64":return J(t);case"hex":return tt(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Go(t,e=["<",">"]){let[r,o]=e,n=[],i="",s=0;for(let c=0;c<t.length;c++){let d=t[c];if(d===r&&s++,d===o&&s--,s===0&&d===","){n.push(i.trim()),i="";continue}i+=d}return n.push(i.trim()),n}var qo=class{constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:o=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=o,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let r=this.bytePosition+e;if(r>this.size){let o=Math.min(this.maxSize,this.size+this.allocateSize);if(r>o)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=o;let n=new ArrayBuffer(this.size);new Uint8Array(n).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(n)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return Zn(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return Zn(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return Zn(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return jt(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((o,n)=>r(this,o,n,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return Jn(this.toBytes(),e)}};function Zn(t,e){let r=new Uint8Array(e),o=0;for(;t>0;)r[o]=Number(t%BigInt(256)),t=t/BigInt(256),o+=1;return r}var nc=t=>{throw TypeError(t)},ic=(t,e,r)=>e.has(t)||nc("Cannot "+r),He=(t,e,r)=>(ic(t,e,"read from private field"),r?r.call(t):e.get(t)),Ko=(t,e,r)=>e.has(t)?nc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Qo=(t,e,r,o)=>(ic(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),dr,Rr,Wo,gt,$p=class sc{constructor(e){Ko(this,dr),Ko(this,Rr),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Qo(this,dr,e.write),Qo(this,Rr,e.serialize??((r,o)=>{let n=new qo({initialSize:this.serializedSize(r)??void 0,...o});return He(this,dr).call(this,r,n),n.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),He(this,dr).call(this,e,r)}serialize(e,r){return this.validate(e),new Yo(this,He(this,Rr).call(this,e,r))}parse(e){let r=new Ho(e);return this.read(r)}fromHex(e){return this.parse(ur(e))}fromBase58(e){return this.parse($e(e))}fromBase64(e){return this.parse(he(e))}transform({name:e,input:r,output:o,validate:n}){return new sc({name:e??this.name,read:i=>o?o(this.read(i)):this.read(i),write:(i,s)=>He(this,dr).call(this,r?r(i):i,s),serializedSize:i=>this.serializedSize(r?r(i):i),serialize:(i,s)=>He(this,Rr).call(this,r?r(i):i,s),validate:i=>{n?.(i),this.validate(r?r(i):i)}})}};dr=new WeakMap;Rr=new WeakMap;var De=$p,ac=Symbol.for("@mysten/serialized-bcs");function pr(t){return!!t&&typeof t=="object"&&t[ac]===!0}var Yo=class{constructor(e,r){Ko(this,Wo),Ko(this,gt),Qo(this,Wo,e),Qo(this,gt,r)}get[ac](){return!0}toBytes(){return He(this,gt)}toHex(){return tt(He(this,gt))}toBase64(){return J(He(this,gt))}toBase58(){return at(He(this,gt))}parse(){return He(this,Wo).parse(He(this,gt))}};Wo=new WeakMap;gt=new WeakMap;function Lr({size:t,...e}){return new De({...e,serializedSize:()=>t})}function Xo({readMethod:t,writeMethod:e,...r}){return Lr({...r,read:o=>o[t](),write:(o,n)=>n[e](o),validate:o=>{if(o<0||o>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${o}. Expected value in range 0-${r.maxValue}`);r.validate?.(o)}})}function Jo({readMethod:t,writeMethod:e,...r}){return Lr({...r,read:o=>o[t](),write:(o,n)=>n[e](BigInt(o)),validate:o=>{let n=BigInt(o);if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);r.validate?.(n)}})}function lc({serialize:t,...e}){let r=new De({...e,serialize:t,write:(o,n)=>{for(let i of r.serialize(o).toBytes())n.write8(i)}});return r}function cc({toBytes:t,fromBytes:e,...r}){return new De({...r,read:o=>{let n=o.readULEB(),i=o.readBytes(n);return e(i)},write:(o,n)=>{let i=t(o);n.writeULEB(i.length);for(let s=0;s<i.length;s++)n.write8(i[s])},serialize:o=>{let n=t(o),i=jt(n.length),s=new Uint8Array(i.length+n.length);return s.set(i,0),s.set(n,i.length),s},validate:o=>{if(typeof o!="string")throw new TypeError(`Invalid ${r.name} value: ${o}. Expected string`);r.validate?.(o)}})}function uc(t){let e=null;function r(){return e||(e=t()),e}return new De({name:"lazy",read:o=>r().read(o),serializedSize:o=>r().serializedSize(o),write:(o,n)=>r().write(o,n),serialize:(o,n)=>r().serialize(o,n).toBytes()})}a();l();var u={u8(t){return Xo({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return Xo({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return Xo({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Jo({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Jo({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Jo({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return Lr({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return lc({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(jt(e)),...t})},bytes(t,e){return Lr({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,o)=>{let n=new Uint8Array(r);for(let i=0;i<t;i++)o.write8(n[i]??0)},...e,validate:r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},byteVector(t){return new De({name:"bytesVector",read:e=>{let r=e.readULEB();return e.readBytes(r)},write:(e,r)=>{let o=new Uint8Array(e);r.writeULEB(o.length);for(let n=0;n<o.length;n++)r.write8(o[n]??0)},...t,serializedSize:e=>{let r="length"in e?e.length:null;return r==null?null:jt(r).length+r},validate:e=>{if(t?.validate?.(e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)}})},string(t){return cc({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new De({name:`${e.name}[${t}]`,read:o=>{let n=new Array(t);for(let i=0;i<t;i++)n[i]=e.read(o);return n},write:(o,n)=>{for(let i of o)e.write(i,n)},...r,validate:o=>{if(r?.validate?.(o),!o||typeof o!="object"||!("length"in o))throw new TypeError(`Expected array, found ${typeof o}`);if(o.length!==t)throw new TypeError(`Expected array of length ${t}, found ${o.length}`)}})},option(t){return u.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new De({name:`vector<${t.name}>`,read:r=>{let o=r.readULEB(),n=new Array(o);for(let i=0;i<o;i++)n[i]=t.read(r);return n},write:(r,o)=>{o.writeULEB(r.length);for(let n of r)t.write(n,o)},...e,validate:r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new De({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let o=0;for(let n=0;n<t.length;n++){let i=t[n].serializedSize(r[n]);if(i==null)return null;o+=i}return o},read:r=>{let o=[];for(let n of t)o.push(n.read(r));return o},write:(r,o)=>{for(let n=0;n<t.length;n++)t[n].write(r[n],o)},...e,validate:r=>{if(e?.validate?.(r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){let o=Object.entries(e);return new De({name:t,serializedSize:n=>{let i=0;for(let[s,c]of o){let d=c.serializedSize(n[s]);if(d==null)return null;i+=d}return i},read:n=>{let i={};for(let[s,c]of o)i[s]=c.read(n);return i},write:(n,i)=>{for(let[s,c]of o)c.write(n[s],i)},...r,validate:n=>{if(r?.validate?.(n),typeof n!="object"||n==null)throw new TypeError(`Expected object, found ${typeof n}`)}})},enum(t,e,r){let o=Object.entries(e);return new De({name:t,read:n=>{let i=n.readULEB(),s=o[i];if(!s)throw new TypeError(`Unknown value ${i} for enum ${t}`);let[c,d]=s;return{[c]:d?.read(n)??!0,$kind:c}},write:(n,i)=>{let[s,c]=Object.entries(n).filter(([d])=>Object.hasOwn(e,d))[0];for(let d=0;d<o.length;d++){let[p,m]=o[d];if(p===s){i.writeULEB(d),m?.write(c,i);return}}},...r,validate:n=>{if(r?.validate?.(n),typeof n!="object"||n==null)throw new TypeError(`Expected object, found ${typeof n}`);let i=Object.keys(n).filter(c=>n[c]!==void 0&&Object.hasOwn(e,c));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${t}}`);let[s]=i;if(!Object.hasOwn(e,s))throw new TypeError(`Invalid enum variant ${s}`)}})},map(t,e){return u.vector(u.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{let o=new Map;for(let[n,i]of r)o.set(n,i);return o}})},lazy(t){return uc(t)}};a();l();a();l();a();l();a();l();a();l();var Hp=32;function Zo(t){try{return $e(t).length===Hp}catch{return!1}}var Nr=32;function Ie(t){return Gp(t)&&qp(t)===Nr}function mr(t){return Ie(t)}function O(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Nr*2,"0")}`}function Ae(t,e=!1){return O(t,e)}function Gp(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function qp(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}a();l();var Wp=/^vector<(.+)>$/,Kp=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,lt=class t{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};let o=e.match(Wp);if(o)return{vector:t.parseFromStr(o[1],r)};let n=e.match(Kp);if(n)return{struct:{address:r?O(n[1]):n[1],module:n[2],name:n[3],typeParams:n[5]===void 0?[]:t.parseStructTypeArgs(n[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return Go(e).map(o=>t.parseFromStr(o,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${t.tagToString(e.vector)}>`;if("struct"in e){let r=e.struct,o=r.typeParams.map(t.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${o?`<${o}>`:""}`}throw new Error("Invalid TypeTag")}};function Qp(t){return u.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function Yp(t){return u.enum("Option",{None:null,Some:t})}var G=u.bytes(Nr).transform({validate:t=>{let e=typeof t=="string"?t:tt(t);if(!e||!Ie(O(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?ur(O(t)):t,output:t=>O(tt(t))}),ke=u.vector(u.u8()).transform({name:"ObjectDigest",input:t=>$e(t),output:t=>at(new Uint8Array(t)),validate:t=>{if($e(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),xe=u.struct("SuiObjectRef",{objectId:G,version:u.u64(),digest:ke}),ei=u.struct("SharedObjectRef",{objectId:G,initialSharedVersion:u.u64(),mutable:u.bool()}),ti=u.enum("ObjectArg",{ImmOrOwnedObject:xe,SharedObject:ei,Receiving:xe}),ri=u.enum("CallArg",{Pure:u.struct("Pure",{bytes:u.vector(u.u8()).transform({input:t=>typeof t=="string"?he(t):t,output:t=>J(new Uint8Array(t))})}),Object:ti}),oi=u.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:u.lazy(()=>oi),struct:u.lazy(()=>ci),u16:null,u32:null,u256:null}),en=oi.transform({input:t=>typeof t=="string"?lt.parseFromStr(t,!0):t,output:t=>lt.tagToString(t)}),Ge=u.enum("Argument",{GasCoin:null,Input:u.u16(),Result:u.u16(),NestedResult:u.tuple([u.u16(),u.u16()])}),ni=u.struct("ProgrammableMoveCall",{package:G,module:u.string(),function:u.string(),typeArguments:u.vector(en),arguments:u.vector(Ge)}),ii=u.enum("Command",{MoveCall:ni,TransferObjects:u.struct("TransferObjects",{objects:u.vector(Ge),address:Ge}),SplitCoins:u.struct("SplitCoins",{coin:Ge,amounts:u.vector(Ge)}),MergeCoins:u.struct("MergeCoins",{destination:Ge,sources:u.vector(Ge)}),Publish:u.struct("Publish",{modules:u.vector(u.vector(u.u8()).transform({input:t=>typeof t=="string"?he(t):t,output:t=>J(new Uint8Array(t))})),dependencies:u.vector(G)}),MakeMoveVec:u.struct("MakeMoveVec",{type:Yp(en).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:u.vector(Ge)}),Upgrade:u.struct("Upgrade",{modules:u.vector(u.vector(u.u8()).transform({input:t=>typeof t=="string"?he(t):t,output:t=>J(new Uint8Array(t))})),dependencies:u.vector(G),package:G,ticket:Ge})}),si=u.struct("ProgrammableTransaction",{inputs:u.vector(ri),commands:u.vector(ii)}),ai=u.enum("TransactionKind",{ProgrammableTransaction:si,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),li=u.enum("TransactionExpiration",{None:null,Epoch:Qp()}),ci=u.struct("StructTag",{address:G,module:u.string(),name:u.string(),typeParams:u.vector(oi)}),ui=u.struct("GasData",{payment:u.vector(xe),owner:G,price:u.u64(),budget:u.u64()}),di=u.struct("TransactionDataV1",{kind:ai,sender:G,gasData:ui,expiration:li}),pi=u.enum("TransactionData",{V1:di}),mi=u.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),fi=u.enum("IntentVersion",{V0:null}),bi=u.enum("AppId",{Sui:null}),hi=u.struct("Intent",{scope:mi,version:fi,appId:bi});function yi(t){return u.struct(`IntentMessage<${t.name}>`,{intent:hi,value:t})}var gi=u.enum("CompressedSignature",{ED25519:u.fixedArray(64,u.u8()),Secp256k1:u.fixedArray(64,u.u8()),Secp256r1:u.fixedArray(64,u.u8()),ZkLogin:u.vector(u.u8())}),Ci=u.enum("PublicKey",{ED25519:u.fixedArray(32,u.u8()),Secp256k1:u.fixedArray(33,u.u8()),Secp256r1:u.fixedArray(33,u.u8()),ZkLogin:u.vector(u.u8())}),Si=u.struct("MultiSigPkMap",{pubKey:Ci,weight:u.u8()}),wi=u.struct("MultiSigPublicKey",{pk_map:u.vector(Si),threshold:u.u16()}),dc=u.struct("MultiSig",{sigs:u.vector(gi),bitmap:u.u16(),multisig_pk:wi}),Xp=u.vector(u.u8()).transform({input:t=>typeof t=="string"?he(t):t,output:t=>J(new Uint8Array(t))}),Ti=u.struct("SenderSignedTransaction",{intentMessage:yi(pi),txSignatures:u.vector(Xp)}),pc=u.vector(Ti,{name:"SenderSignedData"}),mc=u.struct("PasskeyAuthenticator",{authenticatorData:u.vector(u.u8()),clientDataJson:u.string(),userSignature:u.vector(u.u8())});a();l();var Jp=u.enum("PackageUpgradeError",{UnableToFetchPackage:u.struct("UnableToFetchPackage",{packageId:G}),NotAPackage:u.struct("NotAPackage",{objectId:G}),IncompatibleUpgrade:null,DigestDoesNotMatch:u.struct("DigestDoesNotMatch",{digest:u.vector(u.u8())}),UnknownUpgradePolicy:u.struct("UnknownUpgradePolicy",{policy:u.u8()}),PackageIDDoesNotMatch:u.struct("PackageIDDoesNotMatch",{packageId:G,ticketId:G})}),Zp=u.struct("ModuleId",{address:G,name:u.string()}),fc=u.struct("MoveLocation",{module:Zp,function:u.u16(),instruction:u.u16(),functionName:u.option(u.string())}),em=u.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:u.struct("IndexOutOfBounds",{idx:u.u16()}),SecondaryIndexOutOfBounds:u.struct("SecondaryIndexOutOfBounds",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidResultArity:u.struct("InvalidResultArity",{resultIdx:u.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),tm=u.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),rm=u.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:u.struct("MoveObjectTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),MovePackageTooBig:u.struct("MovePackageTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),CircularObjectOwnership:u.struct("CircularObjectOwnership",{object:G}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:u.option(fc),MoveAbort:u.tuple([fc,u.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:u.struct("CommandArgumentError",{argIdx:u.u16(),kind:em}),TypeArgumentError:u.struct("TypeArgumentError",{argumentIdx:u.u16(),kind:tm}),UnusedValueWithoutDrop:u.struct("UnusedValueWithoutDrop",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidPublicFunctionReturnType:u.struct("InvalidPublicFunctionReturnType",{idx:u.u16()}),InvalidTransferObject:null,EffectsTooLarge:u.struct("EffectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:u.struct("PackageUpgradeError",{upgradeError:Jp}),WrittenObjectsTooLarge:u.struct("WrittenObjectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:u.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:u.vector(G)}),AddressDeniedForCoin:u.struct("AddressDeniedForCoin",{address:G,coinType:u.string()}),CoinTypeGlobalPause:u.struct("CoinTypeGlobalPause",{coinType:u.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),bc=u.enum("ExecutionStatus",{Success:null,Failed:u.struct("ExecutionFailed",{error:rm,command:u.option(u.u64())})}),hc=u.struct("GasCostSummary",{computationCost:u.u64(),storageCost:u.u64(),storageRebate:u.u64(),nonRefundableStorageFee:u.u64()}),fr=u.enum("Owner",{AddressOwner:G,ObjectOwner:G,Shared:u.struct("Shared",{initialSharedVersion:u.u64()}),Immutable:null}),om=u.struct("TransactionEffectsV1",{status:bc,executedEpoch:u.u64(),gasUsed:hc,modifiedAtVersions:u.vector(u.tuple([G,u.u64()])),sharedObjects:u.vector(xe),transactionDigest:ke,created:u.vector(u.tuple([xe,fr])),mutated:u.vector(u.tuple([xe,fr])),unwrapped:u.vector(u.tuple([xe,fr])),deleted:u.vector(xe),unwrappedThenDeleted:u.vector(xe),wrapped:u.vector(xe),gasObject:u.tuple([xe,fr]),eventsDigest:u.option(ke),dependencies:u.vector(ke)}),Ai=u.tuple([u.u64(),ke]),nm=u.enum("ObjectIn",{NotExist:null,Exist:u.tuple([Ai,fr])}),im=u.enum("ObjectOut",{NotExist:null,ObjectWrite:u.tuple([ke,fr]),PackageWrite:Ai}),sm=u.enum("IDOperation",{None:null,Created:null,Deleted:null}),am=u.struct("EffectsObjectChange",{inputState:nm,outputState:im,idOperation:sm}),lm=u.enum("UnchangedSharedKind",{ReadOnlyRoot:Ai,MutateDeleted:u.u64(),ReadDeleted:u.u64(),Cancelled:u.u64(),PerEpochConfig:null}),cm=u.struct("TransactionEffectsV2",{status:bc,executedEpoch:u.u64(),gasUsed:hc,transactionDigest:ke,gasObjectIndex:u.option(u.u32()),eventsDigest:u.option(ke),dependencies:u.vector(ke),lamportVersion:u.u64(),changedObjects:u.vector(u.tuple([G,am])),unchangedSharedObjects:u.vector(u.tuple([G,lm])),auxDataDigest:u.option(ke)}),yc=u.enum("TransactionEffects",{V1:om,V2:cm});a();l();function br(t){switch(t){case"u8":return u.u8();case"u16":return u.u16();case"u32":return u.u32();case"u64":return u.u64();case"u128":return u.u128();case"u256":return u.u256();case"bool":return u.bool();case"string":return u.string();case"id":case"address":return G}let e=t.match(/^(vector|option)<(.+)>$/);if(e){let[r,o]=e.slice(1);return r==="vector"?u.vector(br(o)):u.option(br(o))}throw new Error(`Invalid Pure type name: ${t}`)}var D={...u,U8:u.u8(),U16:u.u16(),U32:u.u32(),U64:u.u64(),U128:u.u128(),U256:u.u256(),ULEB128:u.uleb128(),Bool:u.bool(),String:u.string(),Address:G,AppId:bi,Argument:Ge,CallArg:ri,CompressedSignature:gi,GasData:ui,Intent:hi,IntentMessage:yi,IntentScope:mi,IntentVersion:fi,MultiSig:dc,MultiSigPkMap:Si,MultiSigPublicKey:wi,ObjectArg:ti,ObjectDigest:ke,ProgrammableMoveCall:ni,ProgrammableTransaction:si,PublicKey:Ci,SenderSignedData:pc,SenderSignedTransaction:Ti,SharedObjectRef:ei,StructTag:ci,SuiObjectRef:xe,Command:ii,TransactionData:pi,TransactionDataV1:di,TransactionExpiration:li,TransactionKind:ai,TypeTag:en,TransactionEffects:yc,PasskeyAuthenticator:mc};a();l();a();l();var um=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,dm=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function gc(t,e="at"){let r=t.toLowerCase(),o;if(r.includes("@")){if(!um.test(r))throw new Error(`Invalid SuiNS name ${t}`);let[n,i]=r.split("@");o=[...n?n.split("."):[],i]}else{if(!dm.test(r))throw new Error(`Invalid SuiNS name ${t}`);o=r.split(".").slice(0,-1)}return e==="dot"?`${o.join(".")}.sui`:`${o.slice(0,-1).join(".")}@${o[o.length-1]}`}a();l();var pm=BigInt(1e9),xi="0x1",tn="0x2";var mm=Ae("0x6");var vi=`${tn}::sui::SUI`,fm=Ae("0x5");a();l();a();l();a();l();function rn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function bm(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Ei(t,...e){if(!bm(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Ii(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Cc(t,e){Ei(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}a();l();var hr=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));var Ct=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Sc=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,qe=Ct?t=>t:t=>Sc(t);function Vt(t){for(let e=0;e<t.length;e++)t[e]=Sc(t[e])}function hm(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function _t(t){return typeof t=="string"&&(t=hm(t)),Ei(t),t}var on=class{clone(){return this._cloneInto()}},FE={}.toString;function wc(t){let e=(o,n)=>t(n).update(_t(o)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=o=>t(o),e}var Tc=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),nn=class extends on{constructor(e,r,o={},n,i,s){if(super(),this.blockLen=e,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,rn(e),rn(r),rn(n),r<0||r>n)throw new Error("outputLen bigger than keyLen");if(o.key!==void 0&&(o.key.length<1||o.key.length>n))throw new Error(`key must be up 1..${n} byte long or undefined`);if(o.salt!==void 0&&o.salt.length!==i)throw new Error(`salt must be ${i} byte long or undefined`);if(o.personalization!==void 0&&o.personalization.length!==s)throw new Error(`personalization must be ${s} byte long or undefined`);this.buffer32=hr(this.buffer=new Uint8Array(e))}update(e){Ii(this);let{blockLen:r,buffer:o,buffer32:n}=this;e=_t(e);let i=e.length,s=e.byteOffset,c=e.buffer;for(let d=0;d<i;){this.pos===r&&(Ct||Vt(n),this.compress(n,0,!1),Ct||Vt(n),this.pos=0);let p=Math.min(r-this.pos,i-d),m=s+d;if(p===r&&!(m%4)&&d+p<i){let b=new Uint32Array(c,m,Math.floor((i-d)/4));Ct||Vt(b);for(let g=0;d+r<i;g+=n.length,d+=r)this.length+=r,this.compress(b,g,!1);Ct||Vt(b);continue}o.set(e.subarray(d,d+p),this.pos),this.pos+=p,this.length+=p,d+=p}return this}digestInto(e){Ii(this),Cc(e,this);let{pos:r,buffer32:o}=this;this.finished=!0,this.buffer.subarray(r).fill(0),Ct||Vt(o),this.compress(o,0,!0),Ct||Vt(o);let n=hr(e);this.get().forEach((i,s)=>n[s]=qe(i))}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let o=e.slice(0,r);return this.destroy(),o}_cloneInto(e){let{buffer:r,length:o,finished:n,destroyed:i,outputLen:s,pos:c}=this;return e||(e=new this.constructor({dkLen:s})),e.set(...this.get()),e.length=o,e.finished=n,e.destroyed=i,e.outputLen=s,e.buffer.set(r),e.pos=c,e}};a();l();var sn=BigInt(4294967295),ki=BigInt(32);function Ac(t,e=!1){return e?{h:Number(t&sn),l:Number(t>>ki&sn)}:{h:Number(t>>ki&sn)|0,l:Number(t&sn)|0}}function ym(t,e=!1){let r=new Uint32Array(t.length),o=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let{h:i,l:s}=Ac(t[n],e);[r[n],o[n]]=[i,s]}return[r,o]}var gm=(t,e)=>BigInt(t>>>0)<<ki|BigInt(e>>>0),Cm=(t,e,r)=>t>>>r,Sm=(t,e,r)=>t<<32-r|e>>>r,wm=(t,e,r)=>t>>>r|e<<32-r,Tm=(t,e,r)=>t<<32-r|e>>>r,Am=(t,e,r)=>t<<64-r|e>>>r-32,xm=(t,e,r)=>t>>>r-32|e<<64-r,vm=(t,e)=>e,Em=(t,e)=>t,Im=(t,e,r)=>t<<r|e>>>32-r,km=(t,e,r)=>e<<r|t>>>32-r,Pm=(t,e,r)=>e<<r-32|t>>>64-r,Om=(t,e,r)=>t<<r-32|e>>>64-r;function Um(t,e,r,o){let n=(e>>>0)+(o>>>0);return{h:t+r+(n/2**32|0)|0,l:n|0}}var Bm=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Mm=(t,e,r,o)=>e+r+o+(t/2**32|0)|0,Dm=(t,e,r,o)=>(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0),Rm=(t,e,r,o,n)=>e+r+o+n+(t/2**32|0)|0,Lm=(t,e,r,o,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0)+(n>>>0),Nm=(t,e,r,o,n,i)=>e+r+o+n+i+(t/2**32|0)|0;var jm={fromBig:Ac,split:ym,toBig:gm,shrSH:Cm,shrSL:Sm,rotrSH:wm,rotrSL:Tm,rotrBH:Am,rotrBL:xm,rotr32H:vm,rotr32L:Em,rotlSH:Im,rotlSL:km,rotlBH:Pm,rotlBL:Om,add:Um,add3L:Bm,add3H:Mm,add4L:Dm,add4H:Rm,add5H:Nm,add5L:Lm},ye=jm;var de=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),T=new Uint32Array(32);function St(t,e,r,o,n,i){let s=n[i],c=n[i+1],d=T[2*t],p=T[2*t+1],m=T[2*e],b=T[2*e+1],g=T[2*r],y=T[2*r+1],C=T[2*o],S=T[2*o+1],A=ye.add3L(d,m,s);p=ye.add3H(A,p,b,c),d=A|0,{Dh:S,Dl:C}={Dh:S^p,Dl:C^d},{Dh:S,Dl:C}={Dh:ye.rotr32H(S,C),Dl:ye.rotr32L(S,C)},{h:y,l:g}=ye.add(y,g,S,C),{Bh:b,Bl:m}={Bh:b^y,Bl:m^g},{Bh:b,Bl:m}={Bh:ye.rotrSH(b,m,24),Bl:ye.rotrSL(b,m,24)},T[2*t]=d,T[2*t+1]=p,T[2*e]=m,T[2*e+1]=b,T[2*r]=g,T[2*r+1]=y,T[2*o]=C,T[2*o+1]=S}function wt(t,e,r,o,n,i){let s=n[i],c=n[i+1],d=T[2*t],p=T[2*t+1],m=T[2*e],b=T[2*e+1],g=T[2*r],y=T[2*r+1],C=T[2*o],S=T[2*o+1],A=ye.add3L(d,m,s);p=ye.add3H(A,p,b,c),d=A|0,{Dh:S,Dl:C}={Dh:S^p,Dl:C^d},{Dh:S,Dl:C}={Dh:ye.rotrSH(S,C,16),Dl:ye.rotrSL(S,C,16)},{h:y,l:g}=ye.add(y,g,S,C),{Bh:b,Bl:m}={Bh:b^y,Bl:m^g},{Bh:b,Bl:m}={Bh:ye.rotrBH(b,m,63),Bl:ye.rotrBL(b,m,63)},T[2*t]=d,T[2*t+1]=p,T[2*e]=m,T[2*e+1]=b,T[2*r]=g,T[2*r+1]=y,T[2*o]=C,T[2*o+1]=S}var Pi=class extends nn{constructor(e={}){super(128,e.dkLen===void 0?64:e.dkLen,e,64,16,16),this.v0l=de[0]|0,this.v0h=de[1]|0,this.v1l=de[2]|0,this.v1h=de[3]|0,this.v2l=de[4]|0,this.v2h=de[5]|0,this.v3l=de[6]|0,this.v3h=de[7]|0,this.v4l=de[8]|0,this.v4h=de[9]|0,this.v5l=de[10]|0,this.v5h=de[11]|0,this.v6l=de[12]|0,this.v6h=de[13]|0,this.v7l=de[14]|0,this.v7h=de[15]|0;let r=e.key?e.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,e.salt){let o=hr(_t(e.salt));this.v4l^=qe(o[0]),this.v4h^=qe(o[1]),this.v5l^=qe(o[2]),this.v5h^=qe(o[3])}if(e.personalization){let o=hr(_t(e.personalization));this.v6l^=qe(o[0]),this.v6h^=qe(o[1]),this.v7l^=qe(o[2]),this.v7h^=qe(o[3])}if(e.key){let o=new Uint8Array(this.blockLen);o.set(_t(e.key)),this.update(o)}}get(){let{v0l:e,v0h:r,v1l:o,v1h:n,v2l:i,v2h:s,v3l:c,v3h:d,v4l:p,v4h:m,v5l:b,v5h:g,v6l:y,v6h:C,v7l:S,v7h:A}=this;return[e,r,o,n,i,s,c,d,p,m,b,g,y,C,S,A]}set(e,r,o,n,i,s,c,d,p,m,b,g,y,C,S,A){this.v0l=e|0,this.v0h=r|0,this.v1l=o|0,this.v1h=n|0,this.v2l=i|0,this.v2h=s|0,this.v3l=c|0,this.v3h=d|0,this.v4l=p|0,this.v4h=m|0,this.v5l=b|0,this.v5h=g|0,this.v6l=y|0,this.v6h=C|0,this.v7l=S|0,this.v7h=A|0}compress(e,r,o){this.get().forEach((d,p)=>T[p]=d),T.set(de,16);let{h:n,l:i}=ye.fromBig(BigInt(this.length));T[24]=de[8]^i,T[25]=de[9]^n,o&&(T[28]=~T[28],T[29]=~T[29]);let s=0,c=Tc;for(let d=0;d<12;d++)St(0,4,8,12,e,r+2*c[s++]),wt(0,4,8,12,e,r+2*c[s++]),St(1,5,9,13,e,r+2*c[s++]),wt(1,5,9,13,e,r+2*c[s++]),St(2,6,10,14,e,r+2*c[s++]),wt(2,6,10,14,e,r+2*c[s++]),St(3,7,11,15,e,r+2*c[s++]),wt(3,7,11,15,e,r+2*c[s++]),St(0,5,10,15,e,r+2*c[s++]),wt(0,5,10,15,e,r+2*c[s++]),St(1,6,11,12,e,r+2*c[s++]),wt(1,6,11,12,e,r+2*c[s++]),St(2,7,8,13,e,r+2*c[s++]),wt(2,7,8,13,e,r+2*c[s++]),St(3,4,9,14,e,r+2*c[s++]),wt(3,4,9,14,e,r+2*c[s++]);this.v0l^=T[0]^T[16],this.v0h^=T[1]^T[17],this.v1l^=T[2]^T[18],this.v1h^=T[3]^T[19],this.v2l^=T[4]^T[20],this.v2h^=T[5]^T[21],this.v3l^=T[6]^T[22],this.v3h^=T[7]^T[23],this.v4l^=T[8]^T[24],this.v4h^=T[9]^T[25],this.v5l^=T[10]^T[26],this.v5h^=T[11]^T[27],this.v6l^=T[12]^T[28],this.v6h^=T[13]^T[29],this.v7l^=T[14]^T[30],this.v7h^=T[15]^T[31],T.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},xc=wc(t=>new Pi(t));var Vm="object",_m="ID",Fm="ascii",zm="String",$m="string",Hm="String",Gm="option",qm="Option";function vc(t){let e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&O(e.package)===O("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function an(t){if(typeof t=="string")switch(t){case"address":return D.Address;case"bool":return D.Bool;case"u8":return D.U8;case"u16":return D.U16;case"u32":return D.U32;case"u64":return D.U64;case"u128":return D.U128;case"u256":return D.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return D.vector(D.U8).transform({input:r=>typeof r=="string"?new TextEncoder().encode(r):r,output:r=>r});let e=an(t.vector);return e?D.vector(e):null}if("datatype"in t){let e=O(t.datatype.package);if(e===O(xi)){if(t.datatype.module===Fm&&t.datatype.type===zm)return D.String;if(t.datatype.module===$m&&t.datatype.type===Hm)return D.String;if(t.datatype.module===Gm&&t.datatype.type===qm){let r=an(t.datatype.typeParameters[0]);return r?D.vector(r):null}}if(e===O(tn)&&t.datatype.module===Vm&&t.datatype.type===_m)return D.Address}return null}function Ec(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:jr(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:jr(t.MutableReference)}:{ref:null,body:jr(t)}}function jr(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:jr(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(jr)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}a();l();function Wm(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?J(t):t.toBase64()}}}var We={Pure:Wm,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:O(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:O(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:O(t)}}}}};a();l();a();l();function At(t){let e=Object.entries(t).map(([r,o])=>w({[r]:o}));return F(ce(e),so(r=>({...r,$kind:Object.keys(r)[0]})))}var Ft=F(I(),so(t=>O(t)),Zt(Ie)),Ce=Ft,Tt=I(),ge=F(ce([I(),F(K(),X())]),Zt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Ke=w({objectId:Ft,version:ge,digest:I()}),W=F(ce([w({GasCoin:E(!0)}),w({Input:F(K(),X()),type:pe(E("pure"))}),w({Input:F(K(),X()),type:pe(E("object"))}),w({Result:F(K(),X())}),w({NestedResult:ao([F(K(),X()),F(K(),X())])})]),so(t=>({...t,$kind:Object.keys(t)[0]}))),Km=w({budget:j(ge),price:j(ge),owner:j(Ft),payment:j(v(Ke))}),kI=w({address:I(),module:I(),name:I(),typeParams:v(I())}),Oi=ce([E("address"),E("bool"),E("u8"),E("u16"),E("u32"),E("u64"),E("u128"),E("u256"),w({vector:tr(()=>Oi)}),w({datatype:w({package:I(),module:I(),type:I(),typeParameters:v(tr(()=>Oi))})}),w({typeParameter:F(K(),X())})]),Qm=w({ref:j(ce([E("&"),E("&mut")])),body:Oi}),Ym=w({package:Ce,module:I(),function:I(),typeArguments:v(I()),arguments:v(W),_argumentTypes:pe(j(v(Qm)))}),Xm=w({name:I(),inputs:rr(I(),ce([W,v(W)])),data:rr(I(),rt())}),Jm=At({MoveCall:Ym,TransferObjects:w({objects:v(W),address:W}),SplitCoins:w({coin:W,amounts:v(W)}),MergeCoins:w({destination:W,sources:v(W)}),Publish:w({modules:v(Tt),dependencies:v(Ce)}),MakeMoveVec:w({type:j(I()),elements:v(W)}),Upgrade:w({modules:v(Tt),dependencies:v(Ce),package:Ce,ticket:W}),$Intent:Xm}),Ic=At({ImmOrOwnedObject:Ke,SharedObject:w({objectId:Ce,initialSharedVersion:ge,mutable:er()}),Receiving:Ke}),Zm=At({Object:Ic,Pure:w({bytes:Tt}),UnresolvedPure:w({value:rt()}),UnresolvedObject:w({objectId:Ce,version:pe(j(ge)),digest:pe(j(I())),initialSharedVersion:pe(j(ge))})}),Ui=At({Object:Ic,Pure:w({bytes:Tt})}),Bi=At({None:E(!0),Epoch:ge}),yr=w({version:E(2),sender:bt(Ft),expiration:bt(Bi),gasData:Km,inputs:v(Zm),commands:v(Jm)});var xt={MoveCall(t){let[e,r="",o=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:o,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>H(W,r)),address:H(W,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:H(W,t),amounts:e.map(r=>H(W,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:H(W,t),sources:e.map(r=>H(W,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:J(new Uint8Array(r))),dependencies:e.map(r=>Ae(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:o}){return{$kind:"Upgrade",Upgrade:{modules:t.map(n=>typeof n=="string"?n:J(new Uint8Array(n))),dependencies:e.map(n=>Ae(n)),package:r,ticket:H(W,o)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>H(W,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([o,n])=>[o,Array.isArray(n)?n.map(i=>H(W,i)):H(W,n)])),data:r}}}};a();l();a();l();var Mi=w({digest:I(),objectId:I(),version:ce([F(K(),X()),I(),wn()])}),ef=At({ImmOrOwned:Mi,Shared:w({objectId:Ce,initialSharedVersion:ge,mutable:er()}),Receiving:Mi}),kc=At({Object:ef,Pure:v(F(K(),X()))}),Oc=ce([w({kind:E("Input"),index:F(K(),X()),value:rt(),type:pe(E("object"))}),w({kind:E("Input"),index:F(K(),X()),value:rt(),type:E("pure")})]),tf=ce([w({Epoch:F(K(),X())}),w({None:j(E(!0))})]),Pc=F(ce([K(),I(),wn()]),Zt(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),Di=ce([w({bool:j(E(!0))}),w({u8:j(E(!0))}),w({u64:j(E(!0))}),w({u128:j(E(!0))}),w({address:j(E(!0))}),w({signer:j(E(!0))}),w({vector:tr(()=>Di)}),w({struct:tr(()=>rf)}),w({u16:j(E(!0))}),w({u32:j(E(!0))}),w({u256:j(E(!0))})]),rf=w({address:I(),module:I(),name:I(),typeParams:v(Di)}),of=w({budget:pe(Pc),price:pe(Pc),payment:pe(v(Mi)),owner:pe(I())}),nf=[Oc,w({kind:E("GasCoin")}),w({kind:E("Result"),index:F(K(),X())}),w({kind:E("NestedResult"),index:F(K(),X()),resultIndex:F(K(),X())})],dt=ce([...nf]),sf=w({kind:E("MoveCall"),target:F(I(),Zt(t=>t.split("::").length===3)),typeArguments:v(I()),arguments:v(dt)}),af=w({kind:E("TransferObjects"),objects:v(dt),address:dt}),lf=w({kind:E("SplitCoins"),coin:dt,amounts:v(dt)}),cf=w({kind:E("MergeCoins"),destination:dt,sources:v(dt)}),uf=w({kind:E("MakeMoveVec"),type:ce([w({Some:Di}),w({None:j(E(!0))})]),objects:v(dt)}),df=w({kind:E("Publish"),modules:v(v(F(K(),X()))),dependencies:v(I())}),pf=w({kind:E("Upgrade"),modules:v(v(F(K(),X()))),dependencies:v(I()),packageId:I(),ticket:dt}),mf=[sf,af,lf,cf,df,pf,uf],ff=ce([...mf]),$I=w({version:E(1),sender:pe(I()),expiration:bt(tf),gasConfig:of,inputs:v(Oc),transactions:v(ff)});function Ri(t){let e=t.inputs.map((r,o)=>{if(r.Object)return{kind:"Input",index:o,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:o,value:{Pure:Array.from(he(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:o,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:o,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:t.expiration?.$kind==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:lt.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(o=>ct(o,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:ct(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(o=>ct(o,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(o=>ct(o,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(o=>Array.from(he(o))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:ct(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(o=>ct(o,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(o=>ct(o,e)),address:ct(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(o=>Array.from(he(o))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:ct(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}function ct(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function Uc(t){return H(yr,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:t.inputs.map(e=>{if(e.kind==="Input"){if(Tr(kc,e.value)){let r=H(kc,e.value);if(r.Object){if(r.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:r.Object.ImmOrOwned.objectId,version:String(r.Object.ImmOrOwned.version),digest:r.Object.ImmOrOwned.digest}}};if(r.Object.Shared)return{Object:{SharedObject:{mutable:r.Object.Shared.mutable??null,initialSharedVersion:r.Object.Shared.initialSharedVersion,objectId:r.Object.Shared.objectId}}};if(r.Object.Receiving)return{Object:{Receiving:{digest:r.Object.Receiving.digest,version:String(r.Object.Receiving.version),objectId:r.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:J(new Uint8Array(r.Pure))}}}return e.type==="object"?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?lt.tagToString(e.type.Some):null,elements:e.objects.map(r=>ut(r))}};case"MergeCoins":return{MergeCoins:{destination:ut(e.destination),sources:e.sources.map(r=>ut(r))}};case"MoveCall":{let[r,o,n]=e.target.split("::");return{MoveCall:{package:r,module:o,function:n,typeArguments:e.typeArguments,arguments:e.arguments.map(i=>ut(i))}}}case"Publish":return{Publish:{modules:e.modules.map(r=>J(Uint8Array.from(r))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:ut(e.coin),amounts:e.amounts.map(r=>ut(r))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(r=>ut(r)),address:ut(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(r=>J(Uint8Array.from(r))),dependencies:e.dependencies,package:e.packageId,ticket:ut(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)})})}function ut(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}a();l();function Vr(t){return ce(Object.entries(t).map(([e,r])=>w({[e]:r})))}var Qe=Vr({GasCoin:E(!0),Input:F(K(),X()),Result:F(K(),X()),NestedResult:ao([F(K(),X()),F(K(),X())])}),bf=w({budget:j(ge),price:j(ge),owner:j(Ft),payment:j(v(Ke))}),hf=w({package:Ce,module:I(),function:I(),typeArguments:v(I()),arguments:v(Qe)}),yf=w({name:I(),inputs:rr(I(),ce([Qe,v(Qe)])),data:rr(I(),rt())}),gf=Vr({MoveCall:hf,TransferObjects:w({objects:v(Qe),address:Qe}),SplitCoins:w({coin:Qe,amounts:v(Qe)}),MergeCoins:w({destination:Qe,sources:v(Qe)}),Publish:w({modules:v(Tt),dependencies:v(Ce)}),MakeMoveVec:w({type:j(I()),elements:v(Qe)}),Upgrade:w({modules:v(Tt),dependencies:v(Ce),package:Ce,ticket:Qe}),$Intent:yf}),Cf=Vr({ImmOrOwnedObject:Ke,SharedObject:w({objectId:Ce,initialSharedVersion:ge,mutable:er()}),Receiving:Ke}),Sf=Vr({Object:Cf,Pure:w({bytes:Tt}),UnresolvedPure:w({value:rt()}),UnresolvedObject:w({objectId:Ce,version:pe(j(ge)),digest:pe(j(I())),initialSharedVersion:pe(j(ge))})}),wf=Vr({None:E(!0),Epoch:ge}),Bc=w({version:E(2),sender:bt(Ft),expiration:bt(wf),gasData:bf,inputs:v(Sf),commands:v(gf)});a();l();var Tf=50,Af=1000n,xf=5e10;async function Dc(t,e,r){return await Pf(t,e),await kf(t,e),e.onlyTransactionKind||(await vf(t,e),await Ef(t,e),await If(t,e)),await Of(t),await r()}async function vf(t,e){t.gasConfig.price||(t.gasConfig.price=String(await _r(e).getReferenceGasPrice()))}async function Ef(t,e){if(t.gasConfig.budget)return;let r=await _r(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(xf),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});let o=Af*BigInt(t.gasConfig.price||1n),n=BigInt(r.effects.gasUsed.computationCost)+o,i=n+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>n?i:n)}async function If(t,e){if(!t.gasConfig.payment){let o=(await _r(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:vi})).data.filter(n=>!t.inputs.find(s=>s.Object?.ImmOrOwnedObject?n.coinObjectId===s.Object.ImmOrOwnedObject.objectId:!1)).map(n=>({objectId:n.coinObjectId,digest:n.digest,version:n.version}));if(!o.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=o.map(n=>H(Ke,n))}}async function kf(t,e){let r=t.inputs.filter(m=>m.UnresolvedObject&&!(m.UnresolvedObject.version||m.UnresolvedObject?.initialSharedVersion)),o=[...new Set(r.map(m=>Ae(m.UnresolvedObject.objectId)))],n=o.length?Df(o,Tf):[],i=(await Promise.all(n.map(m=>_r(e).multiGetObjects({ids:m,options:{showOwner:!0}})))).flat(),s=new Map(o.map((m,b)=>[m,i[b]])),c=Array.from(s).filter(([m,b])=>b.error).map(([m,b])=>JSON.stringify(b.error));if(c.length)throw new Error(`The following input objects are invalid: ${c.join(", ")}`);let d=i.map(m=>{if(m.error||!m.data)throw new Error(`Failed to fetch object: ${m.error}`);let b=m.data.owner,g=b&&typeof b=="object"&&"Shared"in b?b.Shared.initial_shared_version:null;return{objectId:m.data.objectId,digest:m.data.digest,version:m.data.version,initialSharedVersion:g}}),p=new Map(o.map((m,b)=>[m,d[b]]));for(let[m,b]of t.inputs.entries()){if(!b.UnresolvedObject)continue;let g,y=O(b.UnresolvedObject.objectId),C=p.get(y);b.UnresolvedObject.initialSharedVersion??C?.initialSharedVersion?g=We.SharedObjectRef({objectId:y,initialSharedVersion:b.UnresolvedObject.initialSharedVersion||C?.initialSharedVersion,mutable:Uf(t,m)}):Bf(t,m)&&(g=We.ReceivingRef({objectId:y,digest:b.UnresolvedObject.digest??C?.digest,version:b.UnresolvedObject.version??C?.version})),t.inputs[t.inputs.indexOf(b)]=g??We.ObjectRef({objectId:y,digest:b.UnresolvedObject.digest??C?.digest,version:b.UnresolvedObject.version??C?.version})}}async function Pf(t,e){let{inputs:r,commands:o}=t,n=[],i=new Set;o.forEach(c=>{if(c.MoveCall){if(c.MoveCall._argumentTypes)return;if(c.MoveCall.arguments.map(m=>m.$kind==="Input"?t.inputs[m.Input]:null).some(m=>m?.UnresolvedPure||m?.UnresolvedObject)){let m=`${c.MoveCall.package}::${c.MoveCall.module}::${c.MoveCall.function}`;i.add(m),n.push(c.MoveCall)}}switch(c.$kind){case"SplitCoins":c.SplitCoins.amounts.forEach(d=>{Mc(d,D.U64,t)});break;case"TransferObjects":Mc(c.TransferObjects.address,D.Address,t);break}});let s=new Map;if(i.size>0){let c=_r(e);await Promise.all([...i].map(async d=>{let[p,m,b]=d.split("::"),g=await c.getNormalizedMoveFunction({package:p,module:m,function:b});s.set(d,g.parameters.map(y=>Ec(y)))}))}n.length&&await Promise.all(n.map(async c=>{let d=s.get(`${c.package}::${c.module}::${c.function}`);if(!d)return;let m=d.length>0&&vc(d.at(-1))?d.slice(0,d.length-1):d;c._argumentTypes=m})),o.forEach(c=>{if(!c.MoveCall)return;let d=c.MoveCall,p=`${d.package}::${d.module}::${d.function}`,m=d._argumentTypes;if(m){if(m.length!==c.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${p}`);m.forEach((b,g)=>{let y=d.arguments[g];if(y.$kind!=="Input")return;let C=r[y.Input];if(!C.UnresolvedPure&&!C.UnresolvedObject)return;let S=C.UnresolvedPure?.value??C.UnresolvedObject?.objectId,A=an(b.body);if(A){y.type="pure",r[r.indexOf(C)]=We.Pure(A.serialize(S));return}if(typeof S!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(S,null,2)}`);y.type="object";let U=C.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:S}}:C;r[y.Input]=U})}})}function Of(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function Mc(t,e,r){if(t.$kind!=="Input")return;let o=r.inputs[t.Input];o.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=We.Pure(e.serialize(o.UnresolvedPure.value)))}function Uf(t,e){let r=!1;return t.getInputUses(e,(o,n)=>{if(n.MoveCall&&n.MoveCall._argumentTypes){let i=n.MoveCall.arguments.indexOf(o);r=n.MoveCall._argumentTypes[i].ref!=="&"||r}(n.$kind==="MakeMoveVec"||n.$kind==="MergeCoins"||n.$kind==="SplitCoins")&&(r=!0)}),r}function Bf(t,e){let r=!1;return t.getInputUses(e,(o,n)=>{if(n.MoveCall&&n.MoveCall._argumentTypes){let i=n.MoveCall.arguments.indexOf(o);r=Mf(n.MoveCall._argumentTypes[i])||r}}),r}function Mf(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function _r(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function Df(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,o)=>t.slice(o*e,o*e+e))}a();l();function Rc(t){function e(r){return t(r)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:r,value:o})=>n=>n.moveCall({typeArguments:[r],target:`0x1::option::${o===null?"none":"some"}`,arguments:o===null?[]:[n.object(o)]}),e}a();l();function Lc(t){function e(r,o){if(typeof r=="string")return t(br(r).serialize(o));if(r instanceof Uint8Array||pr(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=r=>t(D.U8.serialize(r)),e.u16=r=>t(D.U16.serialize(r)),e.u32=r=>t(D.U32.serialize(r)),e.u64=r=>t(D.U64.serialize(r)),e.u128=r=>t(D.U128.serialize(r)),e.u256=r=>t(D.U256.serialize(r)),e.bool=r=>t(D.Bool.serialize(r)),e.string=r=>t(D.String.serialize(r)),e.address=r=>t(D.Address.serialize(r)),e.id=e.address,e.vector=(r,o)=>t(D.vector(br(r)).serialize(o)),e.option=(r,o)=>t(D.option(br(r)).serialize(o)),e}a();l();a();l();function Nc(t,e){let r=Array.from(`${t}::`).map(n=>n.charCodeAt(0)),o=new Uint8Array(r.length+e.length);return o.set(r),o.set(e,r.length),xc(o,{dkLen:32})}function jc(t){return O(t).replace("0x","")}var vt=class t{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let o=D.TransactionKind.parse(e).ProgrammableTransaction;if(!o)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:o.inputs,commands:o.commands})}static fromBytes(e){let o=D.TransactionData.parse(e)?.V1,n=o.kind.ProgrammableTransaction;if(!o||!n)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:o.sender,expiration:o.expiration,gasData:o.gasData,inputs:n.inputs,commands:n.commands})}static restore(e){return e.version===2?new t(H(yr,e)):new t(H(yr,Uc(e)))}static getDigestFromBytes(e){let r=Nc("TransactionData",e);return at(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:o}={}){let n=this.inputs,i=this.commands,s={ProgrammableTransaction:{inputs:n,commands:i}};if(o)return D.TransactionKind.serialize(s,{maxSize:e}).toBytes();let c=r?.expiration??this.expiration,d=r?.sender??this.sender,p={...this.gasData,...r?.gasConfig,...r?.gasData};if(!d)throw new Error("Missing transaction sender");if(!p.budget)throw new Error("Missing gas budget");if(!p.payment)throw new Error("Missing gas payment");if(!p.price)throw new Error("Missing gas price");let m={sender:jc(d),expiration:c||{None:!0},gasData:{payment:p.payment,owner:jc(this.gasData.owner??d),price:BigInt(p.price),budget:BigInt(p.budget)},kind:{ProgrammableTransaction:{inputs:n,commands:i}}};return D.TransactionData.serialize({V1:m},{maxSize:e}).toBytes()}addInput(e,r){let o=this.inputs.length;return this.inputs.push(r),{Input:o,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((o,n)=>(o.$kind==="Input"&&o.Input===e&&r(o,n),o))}mapArguments(e){for(let r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(n=>e(n,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(n=>e(n,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(n=>e(n,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(n=>e(n,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(n=>e(n,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":let o=r.$Intent.inputs;r.$Intent.inputs={};for(let[n,i]of Object.entries(o))r.$Intent.inputs[n]=Array.isArray(i)?i.map(s=>e(s,r)):e(i,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}let o=r.length-1;this.commands.splice(e,1,...r),o!==0&&this.mapArguments(n=>{switch(n.$kind){case"Result":n.Result>e&&(n.Result+=o);break;case"NestedResult":n.NestedResult[0]>e&&(n.NestedResult[0]+=o);break}return n})}getDigest(){let e=this.build({onlyTransactionKind:!1});return t.getDigestFromBytes(e)}snapshot(){return H(yr,this)}};a();l();function Li(t){if(typeof t=="string")return O(t);if(t.Object)return t.Object.ImmOrOwnedObject?O(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?O(t.Object.Receiving.objectId):O(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return O(t.UnresolvedObject.objectId)}var Fc=t=>{throw TypeError(t)},_i=(t,e,r)=>e.has(t)||Fc("Cannot "+r),R=(t,e,r)=>(_i(t,e,"read from private field"),r?r.call(t):e.get(t)),Fr=(t,e,r)=>e.has(t)?Fc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),zt=(t,e,r,o)=>(_i(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),pt=(t,e,r)=>(_i(t,e,"access private method"),r),$r,Hr,$t,N,Ye,ln,Fi,ji,zi;function Vc(t,e=1/0){let r={$kind:"Result",Result:t},o=[],n=i=>o[i]??(o[i]={$kind:"NestedResult",NestedResult:[t,i]});return new Proxy(r,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,s){if(s in i)return Reflect.get(i,s);if(s===Symbol.iterator)return function*(){let d=0;for(;d<e;)yield n(d),d++};if(typeof s=="symbol")return;let c=parseInt(s,10);if(!(Number.isNaN(c)||c<0))return n(c)}})}var zc=Symbol.for("@mysten/transaction");function cn(t){return!!t&&typeof t=="object"&&t[zc]===!0}var _c={buildPlugins:new Map,serializationPlugins:new Map},Ni=Symbol.for("@mysten/transaction/registry");function zr(){try{let t=globalThis;return t[Ni]||(t[Ni]=_c),t[Ni]}catch{return _c}}var Rf=class Vi{constructor(){Fr(this,Ye),Fr(this,$r),Fr(this,Hr),Fr(this,$t,new Map),Fr(this,N),this.object=Rc(r=>{if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&Tr(W,r))return r;let o=Li(r),n=R(this,N).inputs.find(i=>o===Li(i));return n?.Object?.SharedObject&&typeof r=="object"&&r.Object?.SharedObject&&(n.Object.SharedObject.mutable=n.Object.SharedObject.mutable||r.Object.SharedObject.mutable),n?{$kind:"Input",Input:R(this,N).inputs.indexOf(n),type:"object"}:R(this,N).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:O(r)}}:r)});let e=zr();zt(this,N,new vt),zt(this,Hr,[...e.buildPlugins.values()]),zt(this,$r,[...e.serializationPlugins.values()])}static fromKind(e){let r=new Vi;return zt(r,N,vt.fromKindBytes(typeof e=="string"?he(e):e)),r}static from(e){let r=new Vi;return cn(e)?zt(r,N,new vt(e.getData())):typeof e!="string"||!e.startsWith("{")?zt(r,N,vt.fromBytes(typeof e=="string"?he(e):e)):zt(r,N,vt.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){zr().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){zr().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){zr().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){zr().buildPlugins.delete(e)}addSerializationPlugin(e){R(this,$r).push(e)}addBuildPlugin(e){R(this,Hr).push(e)}addIntentResolver(e,r){if(R(this,$t).has(e)&&R(this,$t).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);R(this,$t).set(e,r)}setSender(e){R(this,N).sender=e}setSenderIfNotSet(e){R(this,N).sender||(R(this,N).sender=e)}setExpiration(e){R(this,N).expiration=e?H(Bi,e):null}setGasPrice(e){R(this,N).gasConfig.price=String(e)}setGasBudget(e){R(this,N).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){R(this,N).gasData.budget==null&&(R(this,N).gasConfig.budget=String(e))}setGasOwner(e){R(this,N).gasConfig.owner=e}setGasPayment(e){R(this,N).gasConfig.payment=e.map(r=>H(Ke,r))}get blockData(){return Ri(R(this,N).snapshot())}getData(){return R(this,N).snapshot()}get[zc](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Lc(e=>pr(e)?R(this,N).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):R(this,N).addInput("pure",Tr(Ui,e)?H(Ui,e):e instanceof Uint8Array?We.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(We.ObjectRef(...e))}receivingRef(...e){return this.object(We.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(We.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);let r=R(this,N).commands.push(e);return Vc(r-1)}splitCoins(e,r){let o=xt.SplitCoins(typeof e=="string"?this.object(e):pt(this,Ye,Fi).call(this,e),r.map(i=>typeof i=="number"||typeof i=="bigint"||typeof i=="string"?this.pure.u64(i):pt(this,Ye,ln).call(this,i))),n=R(this,N).commands.push(o);return Vc(n-1,r.length)}mergeCoins(e,r){return this.add(xt.MergeCoins(this.object(e),r.map(o=>this.object(o))))}publish({modules:e,dependencies:r}){return this.add(xt.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:o,ticket:n}){return this.add(xt.Upgrade({modules:e,dependencies:r,package:o,ticket:this.object(n)}))}moveCall({arguments:e,...r}){return this.add(xt.MoveCall({...r,arguments:e?.map(o=>pt(this,Ye,ln).call(this,o))}))}transferObjects(e,r){return this.add(xt.TransferObjects(e.map(o=>this.object(o)),typeof r=="string"?this.pure.address(r):pt(this,Ye,ln).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(xt.MakeMoveVec({type:e,elements:r.map(o=>this.object(o))}))}serialize(){return JSON.stringify(Ri(R(this,N).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(H(Bc,R(this,N).snapshot()),(r,o)=>typeof o=="bigint"?o.toString():o,2)}async sign(e){let{signer:r,...o}=e,n=await this.build(o);return r.signTransaction(n)}async build(e={}){return await this.prepareForSerialization(e),await pt(this,Ye,ji).call(this,e),R(this,N).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await pt(this,Ye,ji).call(this,e),R(this,N).getDigest()}async prepareForSerialization(e){let r=new Set;for(let n of R(this,N).commands)n.$Intent&&r.add(n.$Intent.name);let o=[...R(this,$r)];for(let n of r)if(!e.supportedIntents?.includes(n)){if(!R(this,$t).has(n))throw new Error(`Missing intent resolver for ${n}`);o.push(R(this,$t).get(n))}await pt(this,Ye,zi).call(this,o,e)}};$r=new WeakMap;Hr=new WeakMap;$t=new WeakMap;N=new WeakMap;Ye=new WeakSet;ln=function(t){return pr(t)?this.pure(t):pt(this,Ye,Fi).call(this,t)};Fi=function(t){return typeof t=="function"?H(W,t(this)):H(W,t)};ji=async function(t){if(!t.onlyTransactionKind&&!R(this,N).sender)throw new Error("Missing transaction sender");await pt(this,Ye,zi).call(this,[...R(this,Hr),Dc],t)};zi=async function(t,e){let r=o=>{if(o>=t.length)return()=>{};let n=t[o];return async()=>{let i=r(o+1),s=!1,c=!1;if(await n(R(this,N),e,async()=>{if(s)throw new Error(`next() was call multiple times in TransactionPlugin ${o}`);s=!0,await i(),c=!0}),!s)throw new Error(`next() was not called in TransactionPlugin ${o}`);if(!c)throw new Error(`next() was not awaited in TransactionPlugin ${o}`)}};await r(0)()};var $i=Rf;var Lf=Symbol.for("@mysten/SuiClient");var Gr=class{get[Lf](){return!0}constructor(e){this.transport=e.transport??new $o({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!Ie(O(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!Ie(O(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!Ie(O(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!Ie(O(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!Ie(O(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!mr(Ae(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(o=>{if(!o||!mr(Ae(o)))throw new Error(`Invalid Sui Object id ${o}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Zo(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(o=>{if(!Zo(o))throw new Error(`Invalid Transaction digest ${o}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:r,options:o,requestType:n}){let i=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:J(e),Array.isArray(r)?r:[r],o]});if(n==="WaitForLocalExecution")try{await this.waitForTransaction({digest:i.digest})}catch{}return i}async signAndExecuteTransaction({transaction:e,signer:r,...o}){let n;e instanceof Uint8Array?n=e:(e.setSenderIfNotSet(r.toSuiAddress()),n=await e.build({client:this}));let{signature:i,bytes:s}=await r.signTransaction(n);return this.executeTransactionBlock({transactionBlock:s,signature:i,...o})}async getTotalTransactionBlocks(){let e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){let e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!Ie(O(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!mr(Ae(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let r;if(cn(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=J(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=J(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:J(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!mr(Ae(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){let e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){let e=await this.getCheckpoint({id:"0"}),r=$e(e.digest);return tt(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...r}){let{nextCursor:o,hasNextPage:n,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit]});return{hasNextPage:n,nextCursor:o,data:i.map(s=>gc(s,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:o=2*1e3,...n}){let i=AbortSignal.timeout(r),s=new Promise((c,d)=>{i.addEventListener("abort",()=>d(i.reason))});for(s.catch(()=>{});!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch{await Promise.race([new Promise(d=>setTimeout(d,o)),s])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};var $c=async t=>{let{networkID:e,objectId:r,destination:o,senderAddress:n}=t,i=M.getRpcProxyUrl(e);if(!i)throw new Error("Failed to get Sui RPC url");let s=new Gr({url:i}),c=new $i;c.setSender(n),c.transferObjects([r],o);let d=await c.build({client:s});return{networkID:e,transaction:d}};async function Hc(t,e,r){if(Nf(t))return Wl(t);if(jf(t))return zl(t);if(Vf(t)){if(!e)throw new Error("Missing utxo state for Bitcoin transaction.");return Nl(t,e,r)}else{if(_f(t))return $c(t);throw new Error(`Unsupported transaction type: ${JSON.stringify(t)}`)}}var Nf=t=>M.isSolanaNetworkID(t.networkID),jf=t=>M.isEVMNetworkID(t.networkID),Vf=t=>M.isBitcoinNetworkID(t.networkID),_f=t=>M.isSuiNetworkID(t.networkID);var Ff="collectible-transfer-tx",zf=Y({seconds:30});function $f(t){let{data:e}=Jt(),r=Qs(t?.sendFormValues?.recipient,t?.collectible?.chain.id)??"",o=(0,Gc.useMemo)(()=>{if(e)return kl(t,r)},[e,t,r]),n=t?.collectible?.owner,{data:i}=ro({address:n,networkID:o?.networkID}),{data:s}=Ws(i),c=t?.sendFormValues.transactionSpeed??"standard",{data:d}=zs({networkID:o?.networkID,enableFallback:!0}),p=d?d[c]:void 0;return oe({staleTime:zf,enabled:Hf(o,s),queryKey:P.transferTransaction(o,p,s),async queryFn(){if(o)try{return await Hc(o,s,p)}catch(m){if(ft(m)){let b=m.response?.status;Be(m,b,Ff)}throw m}}})}function Hf(t,e){return!t||M.isBitcoinNetworkID(t.networkID)&&!e?!1:!new It(t.amount).isNaN()}a();l();var un=t=>{let e=ne();return oe({enabled:t.length!==0,queryKey:P.hiddenCollections(t),gcTime:_e.Long,staleTime:1/0,async queryFn(){try{let r=await ot(e,t);return Array.from(r.values()).filter(o=>fo(o,{spamStatus:"NOT_VERIFIED"})).map(({id:o})=>o)}catch(r){return r instanceof Error&&q.captureError(r,"collectibles"),[]}}})};a();l();a();l();var qc=x(k());var Gf=t=>{let e=se();return(0,qc.useCallback)(()=>e.invalidateQueries({queryKey:P.collections(t)}),[e,t])};a();l();var qf=2e3,dn=class extends Ue{constructor(e){super(e),this.name="UsePinCollectionError"}};function pn(){let t=ne(),e=se();return Re({async mutationFn({collectionId:r,accountId:o,pinned:n}){let i=await Ao(t)??{},s=i[o]??[];if(n){if(Object.values(i).flat().length+1>qf)throw new dn("Pinned limit reached");let d=[...new Set([...s,r])],p={...i,[o]:d};await Nn(t,p)}else{let c=s.indexOf(r);if(c===-1)throw new dn("Collection not previously pinned");let d=[...s];d.splice(c,1);let p={...i,[o]:d};await Nn(t,p)}},async onSuccess(r,o){await e.invalidateQueries({queryKey:P.pinnedCollections(o.accountId)})}})}a();l();var Wc=x(k());var Wf=t=>{let e=se();return(0,Wc.useCallback)(()=>e.refetchQueries({queryKey:P.collections(t)}),[e,t])};a();l();a();l();var Kf=new Error("Failed to report event for collectible");async function Kc(t){try{let e=await Q.api().post("/collectibles/v1/events",{events:t});if(!mt(e))throw new Error}catch{throw Kf}}function Qc(){return Re({async mutationFn({event:t}){try{await Kc([t])}catch{}}})}a();l();function Qf(){let{data:t}=ys(),e=ne(),r=se(),o=qs(),n=Xt();return Re({mutationFn:async({multichainTransaction:s,pendingTransactionInput:c,senderAddress:d,optimisticUpdate:p,gasEstimation:m})=>{if(!t)throw new Error("No account identifier found");let{networkID:b}=s,g=await lo.get(b).onBeforeSend({multichainTransaction:s,gasEstimation:m}),y=await Ns({accountIdentifier:t,accountSigner:n,multichainTransaction:g,networkID:b,pendingTransactionInput:c,senderAddress:d,storage:e,utxoManager:o});return p&&ir(r,p),Ls(b,y)},onError(s){s instanceof Error&&q.captureError(s,"collectibles")}})}a();l();var mn=t=>{let e=ne();return oe({enabled:t.length!==0,queryKey:P.unhiddenCollections(t),gcTime:_e.Long,staleTime:1/0,async queryFn(){try{let r=await ot(e,t);return Array.from(r.values()).filter(o=>Fs(o,{spamStatus:"NOT_VERIFIED"})).map(({id:o})=>o)}catch(r){return r instanceof Error&&q.captureError(r,"collectibles"),[]}}})};a();l();var Yf=2e3,Hi=class extends Error{constructor(e){super(e),this.name="UseUnhideCollectionError"}};function fn(){let t=ne(),e=se(),r=ae();return Re({async mutationFn(o){let{collectionId:n,accountId:i}=o,s=await Tn(t);if(!(await ot(t,i)).has(n)&&s>=Yf)throw new Hi("Too many ids unhidden");await vr(t,r,{accountId:i,mutations:[{id:n,visibility:"visible"}]})},async onSuccess(o,n){await e.invalidateQueries({queryKey:P.unhiddenCollections(n.accountId)}),await e.invalidateQueries({queryKey:P.hiddenCollections(n.accountId)})}})}a();l();var Ht=x(k());a();l();var Gi=x(k());var Yc=({toast:t,accountId:e})=>{let{t:r}=ee(),o=ae(),n=(0,Gi.useCallback)(({collectible:s,previousVisibility:c,updatedVisibility:d})=>{d!==null&&o.capture("collectiblesReportAsNotSpam",{data:ht(s)}),t.success(c==="visible"?r("collectiblesNotSpamSuccess"):r("collectiblesNotSpamAndUnhiddenSuccess"))},[r,t,o]),i=(0,Gi.useCallback)((s,c)=>{t.error(r("collectiblesNotSpamFail"))},[r,t]);return Ba({accountId:e,onSuccess:n,onError:i})};a();l();var qi=x(k());var Xc=({toast:t,accountId:e})=>{let{t:r}=ee(),o=ae(),n=(0,qi.useCallback)(({collectible:s,previousVisibility:c,updatedVisibility:d})=>{d!==null&&o.capture("collectiblesReportAsSpam",{data:ht(s)}),t.success(c==="hidden"?r("collectiblesSpamSuccess"):r("collectiblesSpamAndHiddenSuccess"))},[r,t,o]),i=(0,qi.useCallback)((s,c)=>{t.error(r("collectiblesSpamFail"))},[r,t]);return Ua({accountId:e,onSuccess:n,onError:i})};function Xf({accountId:t,collectible:e,toast:r}){let o=Xc({collectible:e,accountId:t,toast:r}),n=(0,Ht.useCallback)(()=>{if(e)return o(e)},[o,e]),i=Yc({collectible:e,accountId:t,toast:r}),s=(0,Ht.useCallback)(()=>{if(e)return i(e)},[i,e]),{data:c}=Te(t??""),d=(0,Ht.useMemo)(()=>c?.get(e?.collection.id??e?.id??""),[c,e]),p=(0,Ht.useMemo)(()=>e?_s(d,{spamStatus:e.collection.spamStatus}):"NOT_VERIFIED",[e,d]),m=Er(p);return(0,Ht.useMemo)(()=>({isSpam:m,spamStatus:p,onReportSpam:m?void 0:n,onReportNotSpam:m?s:void 0}),[p,m,n,s])}a();l();var Jc=x(Cn()),Zc=x(k());a();l();var bn=(t,e)=>{let r=new It(t);if(r.isZero())return"0";let o=Yr(-e);return r.abs().lt(o)?r.isPositive()?`<${o.toFixed()}`:`-<${o.toFixed()}`:parseFloat(r.toString()).toLocaleString("en-US",{maximumFractionDigits:e})};var Jf=(t,e)=>{let{t:r}=ee();return(0,Zc.useMemo)(()=>{let n=[];if(!t)return n;let i=t?.chain.id,s=Dt.get(i).collectibleDetailPrecision;t.collection.name&&n.push({label:r("collectibleScreenCollectionLabel"),value:t.collection.name});let c,d;if(t.collection.floorPrice){let{price:b,token:g}=t.collection.floorPrice;if(g&&g.decimals&&g.symbol){let{decimals:y,symbol:C}=g,S=sr(b,y);n.push({label:r("collectiblesFloorPrice"),value:`${bn(S,s)} ${C}`}),c=S,d=C}}let p,m;if(t.lastSalePrice){let{price:b,token:g}=t.lastSalePrice;if(g&&g.decimals&&(g.symbol||g.name)){let{decimals:y,symbol:C,name:S}=g,A=sr(b,y);n.push({label:r("collectiblesLastSalePrice"),value:`${bn(A,s)} ${C??S}`}),p=A,m=C}}if(c&&p&&d===m){let b=c-p;n.push({label:r("collectiblesTotalReturn"),value:`${bn(b,s)} ${m}`,color:b>0?e?.positiveColor:b===0?void 0:e?.negativeColor})}return t.collection.ownerCount&&n.push({label:r("collectiblesUniqueHolders"),value:(0,Jc.default)(t.collection.ownerCount).format("0,0")}),t.chain.name&&n.push({label:r("sendFungibleSummaryNetwork"),value:M.getNetworkName(t.chain.id)}),Kr()&&n.push({label:"Standard",value:Zf(t)}),Xs(t)&&n.push({label:r("collectiblesNonTransferable"),value:r("collectiblesNonTransferableYes")}),n},[t,e?.negativeColor,e?.positiveColor,r])};function Zf(t){let e=t.chainData;if(ue(e))return e.standard;if(Le(e))return e.standard;if(Ne(e))return"Ordinals"}a();l();var tu=x(k());a();l();var eb=x(k());a();l();var tb=x(k());a();l();var eu=x(k()),hn=(t,e,r,o)=>(0,eu.useMemo)(()=>e.includes(r)?!1:t.includes(r)?!0:!!o,[t,e,r,o]);a();l();var qr=x(k());a();l();var ru=x(k()),Wi=({accountId:t,collectionId:e,isPinned:r,pinMessages:o,pinCollection:n,toast:i,sendAnalyticEvent:s,unhideCollection:c,isHidden:d})=>(0,ru.useCallback)(()=>{(async()=>{if(!e||!t){i.error(r?o.unpinFail:o.pinFail);return}try{await n({collectionId:e,accountId:t,pinned:!r}),d&&!r&&await c({collectionId:e,accountId:t}),i.success(r?o.unpinSuccess:o.pinSuccess),s&&s(r?"collectionUnpinned":"collectionPinned")}catch{i.error(r?o.unpinFail:o.pinFail)}})()},[e,t,r,o,n,i,s,c,d]);var ib=({collectionId:t,isSpam:e,accountId:r,networkId:o,toast:n})=>{let{t:i}=ee(),s=ae(),{mutateAsync:c}=fn(),{data:d=[]}=un(r||""),{data:p=[]}=mn(r||""),m=hn(d,p,t??"",!!e),{mutateAsync:b}=pn(),{data:g=[]}=xo(r||""),y=Io(g,t??""),C=(0,qr.useMemo)(()=>({pinSuccess:i("collectionPinSuccess"),pinFail:i("collectionPinFail"),unpinSuccess:i("collectionUnpinSuccess"),unpinFail:i("collectionUnpinFail")}),[i]),S=(0,qr.useCallback)(U=>{o&&s.capture(U,{data:{networkId:o,chainId:M.getChainID(o)}})},[s,o]),A=Wi({accountId:r,collectionId:t,isPinned:y,pinMessages:C,pinCollection:b,toast:n,sendAnalyticEvent:S,unhideCollection:c,isHidden:m});return(0,qr.useMemo)(()=>({isPinned:y,onTogglePin:A}),[y,A])};a();l();var Wr=x(k());var sb=({networkID:t,isTxError:e,isTxConfirmed:r,isTxSubmitted:o})=>{let n=Dt.get(t).sendSuccessCondition,i=(0,Wr.useMemo)(()=>e?"ERROR":n==="SUBMISSION"&&o||n==="CONFIRMATION"&&r?"SUCCESS":"LOADING",[r,e,o,n]),s=n==="CONFIRMATION"?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",c=(0,Wr.useMemo)(()=>{switch(i){case"LOADING":return Ee.t("sendStatusLoadingTitle");case"ERROR":return Ee.t("sendStatusErrorTitle");case"SUCCESS":return Ee.t(s)}},[i,s]),{isError:d,isSuccess:p}=(0,Wr.useMemo)(()=>({isError:i==="ERROR",isSuccess:i==="SUCCESS"}),[i]),{transactionSpeed:m="standard"}=Ys(g=>g.sendFormValues),b=(0,Wr.useMemo)(()=>{let g=lo.get(t).transactionSpeedDescription(m);return g?Ee.t(g):""},[t,m]);return{title:c,isError:d,isSuccess:p,sendSuccessCondition:n,estimatedTime:b}};a();l();var gr=x(k());var ab=()=>{let t=it(p=>p.listCollectible),e=it(p=>p.editListCollectiblePrice),[r,o]=(0,gr.useState)(),[n,i]=(0,gr.useState)(!1),[s,c]=(0,gr.useState)();return{editList:(0,gr.useCallback)(async(p,m)=>{if(o(void 0),i(!0),!t||!e){o(new Error("missing collectible or price")),i(!1);return}try{let b=new URLSearchParams;b.set("pubKey",m.toBase58()),b.set("mint",t.asset.mintPubKey),b.set("account",t.asset.pubkey),b.set("quotePrice",`${go(e)}`),b.set("marketplace","magic_eden");let g=Je(p);b.set("chainId",g.toString());let y=`/solana/composer/v1/list?${b.toString()}`,S=(await Q.api().retry(3,2e3).get(y)).data,A=Oe.Transaction.from(Buffer.from(S.transaction,"base64"));nr(A)?c(A):o(new Error("Failed to initialize transaction")),i(!1)}catch(b){console.error(b),o(new Error("Failed to initialize transaction")),i(!1)}},[t,e]),isLoading:n,error:r,transaction:s}};a();l();var Cr=x(k());var lb=()=>{let t=it(p=>p.listCollectible),e=it(p=>p.listCollectiblePrice),[r,o]=(0,Cr.useState)(),[n,i]=(0,Cr.useState)(!1),[s,c]=(0,Cr.useState)();return{list:(0,Cr.useCallback)(async(p,m)=>{if(o(void 0),i(!0),!t||!e){o(new Error("missing collectible or price")),i(!1);return}try{let b=new URLSearchParams;b.set("pubKey",m.toBase58()),b.set("mint",t.asset.mintPubKey),b.set("account",t.asset.pubkey),b.set("quotePrice",`${go(e)}`),b.set("marketplace","magic_eden");let g=Je(p);b.set("chainId",g.toString());let y=`/solana/composer/v1/list?${b.toString()}`,S=(await Q.api().retry(3,2e3).get(y)).data,A=Oe.Transaction.from(Buffer.from(S.transaction,"base64"));nr(A)?c(A):o(new Error("Failed to initialize transaction")),i(!1)}catch(b){o(new Error("Failed to initialize transaction")),i(!1),q.captureError(b,"magicEden")}},[t,e]),isLoading:n,error:r,transaction:s}};a();l();var Sr=x(k());var cb=()=>{let t=it(d=>d.unlistCollectible),[e,r]=(0,Sr.useState)(),[o,n]=(0,Sr.useState)(!1),[i,s]=(0,Sr.useState)();return{unlist:(0,Sr.useCallback)(async(d,p)=>{if(r(void 0),n(!0),!t){r(new Error("missing collectible")),n(!1);return}try{let m=new URLSearchParams;m.set("pubKey",p.toBase58()),m.set("mint",t.asset.mintPubKey),m.set("account",t.asset.pubkey),m.set("marketplace","magic_eden");let b=Je(d);m.set("chainId",b.toString());let g=`/solana/composer/v1/unlist?${m.toString()}`,C=(await Q.api().retry(3,2e3).get(g)).data,S=Oe.Transaction.from(Buffer.from(C.transaction,"base64"));nr(S)?s(S):r(new Error("Failed to initialize transaction")),n(!1)}catch(m){r(new Error("Failed to initialize transaction")),n(!1),q.captureError(m,"magicEden")}},[t]),isLoading:o,error:e,transaction:i}};a();l();var ou=x(k()),ub=t=>(0,ou.useMemo)(()=>t.filter(e=>e?.media?.type==="image"),[t]);a();l();var nu=x(k());var db=(t,e)=>(0,nu.useMemo)(()=>{if(!t||!e)return;let r=t.chain.id,o=e.explorers[r]??fs.get(r).defaultExplorer,n,i;if(ue(t.chainData))i="address",n=t.chainData.mint;else if(Le(t.chainData))if(t.chainData.contract)t.chainData.id?(i="nft",n=[t.chainData.contract,t.chainData.id]):(i="token",n=t.chainData.contract);else return;else if(Ne(t.chainData))if(yo(t.chainData)){let{hash:c,index:d}=t.chainData.utxoDetails;i="transaction",n=`${c}#flow=&vout=${d}`}else return{name:"Ordinals",url:`https://ordinals.com/inscription/${t.chainData.firstCreatedInscriptionId}`};else if(aa(t.chainData))i="nft",n=t.chainData.objectId??"";else throw new Error(`Unhandled collectible explorer for chain id: ${t.chain.id}`);if(!n)return;let s=hs({networkID:r,endpoint:i,explorerType:o,param:n});if(s)return{name:bs[o],url:s}},[t,e]);a();l();var iu=x(k()),pb=t=>(0,iu.useMemo)(()=>{let e=new Set;return t.filter(r=>{if(!r?.media?.image?.url)return!1;let{url:o}=r.media.image;return e.has(o)?!1:(e.add(o),!0)})},[t]);a();l();var su=x(k());var mb=t=>{let{t:e}=ee();return(0,su.useMemo)(()=>{let o=[];if(!t)return;let n=t.chainData;if(Ne(n)){let{outputValue:i,satNumber:s,satName:c,inscriptionId:d,inscriptionNumber:p,protocolName:m,createdAt:b,utxoDetails:g}=n,y=e(d?"collectibleDetailOrdinalInfo":"collectibleDetailRareSatsInfo"),C;return i?C=parseFloat(i).toLocaleString("en-US"):g&&(C=g.value.toLocaleString("en-US")),o.push(C?{label:e("collectibleDetailSatsInUtxo"),value:e("collectibleDetailSatsInUtxoValue",{satsInUtxo:C})??void 0}:null),o.push(s?{label:e("collectibleDetailSatNumber"),value:s}:null),o.push(c?{label:e("collectibleDetailSatName"),value:c}:null),o.push(d?{label:e("collectibleDetailInscriptionId"),value:rs(d,5,3)}:null),o.push(p?{label:e("collectibleDetailInscriptionNumber"),value:p}:null),o.push(m?{label:e("collectibleDetailStandard"),value:m?.toUpperCase()}:null),o.push(b?{label:e("collectibleDetailCreated"),value:fb(new Date(b))}:null),{label:y,items:o.filter(Zi)}}},[t,e])};function fb(t){let e=t.toLocaleDateString(void 0,{month:"numeric",day:"numeric",year:"numeric"}),r=t.toLocaleTimeString();return`${e} ${r}`}a();l();var lu=x(k()),Et=()=>{},au=new Map([["send",1],["list",2],["pin",3],["unpin",4],["share",5],["setAsAvatar",6],["saveToLibrary",7],["hide",8],["reportAsSpam",9],["reportAsNotSpam",10],["burnToken",11],["viewOnExplorer",12]]);function bb(t){let{amountToBurn:e=0,explorerName:r,isBurnable:o,isHidden:n,isPinned:i,isSpam:s,onBurnToken:c,onList:d,onReportNotSpam:p,onReportSpam:m,onSaveToLibrary:b,onSend:g,onSetAsAvatar:y,onShare:C,onToggleHide:S,onTogglePin:A,onViewOnExplorer:U,shortcuts:_,shouldDisplaySend:z,shouldDisplayShortcuts:$,shouldDisplayListOnSolana:ve}=t,{t:L}=ee();return(0,lu.useMemo)(()=>{let te=[];if(z&&te.push({text:L("commandSend"),type:"send",onClick:g??Et}),ve&&te.push({text:L("collectibleDetailList"),type:"list",onClick:d}),b&&te.push({text:L("assetDetailSaveToPhotos"),singleWordAltText:L("commandSave"),type:"saveToLibrary",menuOnly:!0,onClick:b??Et}),y&&!s&&te.push({text:L("collectibleDetailSetAsAvatar"),singleWordAltText:L("collectibleDetailSetAsAvatarSingleWorkAlt"),type:"setAsAvatar",menuOnly:!0,onClick:y??Et}),C&&te.push({text:L("collectibleDetailShare"),singleWordAltText:L("commandShare"),type:"share",menuOnly:!0,onClick:C??Et}),A){let ie=L(i?"assetDetailUnpinCollection":"assetDetailPinCollection"),Se=L(i?"commandUnpin":"commandPin"),Pe=i?"unpin":"pin";te.push({text:ie,singleWordAltText:Se,type:Pe,menuOnly:!0,onClick:A??Et})}if(S){let ie=L(n?"assetDetailUnhideCollection":"assetDetailHideCollection"),Se=L(n?"commandUnhide":"commandHide"),Pe=n?"unhide":"hide";te.push({text:ie,singleWordAltText:Se,type:Pe,menuOnly:!0,onClick:S??Et})}if(p){let ie=L("collectiblesReportAsNotSpam");te.push({text:ie,type:"reportAsNotSpam",singleWordAltText:L("collectiblesReportNotSpam"),menuOnly:!0,isDestructive:!0,onClick:p})}if(m){let ie=L("collectiblesReportAsSpam");te.push({text:ie,type:"reportAsSpam",singleWordAltText:L("commandReport"),menuOnly:!0,isDestructive:!0,onClick:m})}if(o){let ie=L(e===1?"collectibleBurnTitleWithCount_one":"collectibleBurnTitleWithCount_other");te.push({text:ie,singleWordAltText:L("commandBurn"),type:"burnToken",menuOnly:!0,isDestructive:!0,onClick:c??Et})}return!!U&&!!r&&te.push({text:L("assetDetailViewOnExplorer",{explorer:r}),singleWordAltText:L("commandView"),type:"viewOnExplorer",menuOnly:!0,onClick:U??Et}),te.sort((ie,Se)=>(au.get(ie.type)??100)-(au.get(Se.type)??100)),{actions:ta(te,4),shortcuts:$?_:[]}},[e,r,o,n,i,s,c,d,p,m,b,g,y,C,S,A,U,_,z,$,ve,L])}a();l();export{wu as a,Gb as b,Co as c,eh as d,ha as e,th as f,ue as g,Le as h,Ne as i,yo as j,$u as k,Gu as l,qu as m,Wu as n,Ku as o,xp as p,Pp as q,$l as r,$f as s,Ot as t,Xu as u,Gf as v,xo as w,Wf as x,Qc as y,Qf as z,Ju as A,Zu as B,ed as C,Va as D,Xf as E,Jf as F,td as G,Io as H,tC as I,$a as J,Ed as K,Md as L,Rd as M,Wd as N,Jd as O,Zd as P,tp as Q,op as R,np as S,ap as T,ib as U,sb as V,it as W,ab as X,lb as Y,cb as Z,mp as _,fp as $,gp as aa,Cp as ba,Sp as ca,ub as da,db as ea,pb as fa,mb as ga,bb as ha,wp as ia};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-2JLBDXN2.js.map
